!function(){function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function n(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{"+mPt":function(t,i,c){"use strict";c.r(i),c.d(i,"ArticlesModule",function(){return jt});var r=c("ofXK"),a=c("tyNb"),o=c("rZgH"),s=c("uCWu"),u=c("3Pt+"),l=c("Kj3r"),b=c("fXoL"),d=c("MICr");function p(e,t){if(1&e&&(b.Qb(0,"div",10),b.Mb(1,"img",11),b.Pb()),2&e){var n=b.Zb();b.Ab(1),b.ec("src",n.imgSrc,b.qc)}}function f(e,t){1&e&&(b.Qb(0,"span",12),b.wc(1,"Hidden"),b.Pb())}function v(e,t){if(1&e&&(b.Qb(0,"div",13),b.Mb(1,"img",14),b.Pb()),2&e){var n=t.$implicit;b.Ab(1),b.ec("src",n,b.qc)}}function h(e,t){1&e&&(b.Qb(0,"div",15),b.Mb(1,"i",16),b.Pb())}function m(e,t){1&e&&(b.Qb(0,"div",15),b.Mb(1,"i",17),b.Pb())}function g(e,t){if(1&e&&(b.Qb(0,"div",18),b.wc(1),b.Pb()),2&e){var n=b.Zb();b.Ab(1),b.xc(n.subtitleText)}}var y,k=function(e){return{"bg-gray":e}},w=function(e){return{"p-2":e}},I=function(e,t){return{h5:e,h6:t}},A=((y=function(){function t(n,i,c){e(this,t),this.router=n,this.campaignService=i,this.iconService=c,this.mini=!1}return n(t,[{key:"ngOnInit",value:function(){}},{key:"subtitleText",get:function(){return this.article.tags?this.article.tags.join(", "):""}},{key:"imgSrc",get:function(){return this.article.imageURLs&&this.article.imageURLs.length>0?"https://res.cloudinary.com/dqhk8k6iv/image/fetch/c_fill,g_auto:faces,h_250,w_500/".concat(this.article.imageURLs[0]):null}},{key:"iconSources",get:function(){var e=this;return this.article?this.article.conceptTypeIds.map(function(t){return e.campaignService.campaign.conceptTypes.find(function(e){return e.id===t})}).filter(function(e){return null!=e&&e.icon}).map(function(t){return e.iconService.getIconSrc(t.icon)}):[]}}]),t}()).\u0275fac=function(e){return new(e||y)(b.Lb(a.c),b.Lb(s.b),b.Lb(d.a))},y.\u0275cmp=b.Fb({type:y,selectors:[["dd-article-view-card"]],inputs:{article:"article",mini:"mini"},decls:12,vars:17,consts:[[1,"card","hoverable",3,"ngClass"],["class","card-image",4,"ngIf"],[1,"card-header",3,"ngClass"],[1,"columns"],[1,"column"],[1,"card-title",3,"ngClass"],["class","label label-secondary",4,"ngIf"],["class","column col-auto d-flex align-items-center",4,"ngFor","ngForOf"],["class","column col-auto",4,"ngIf"],["class","card-subtitle text-gray",4,"ngIf"],[1,"card-image"],["width","500",1,"img-responsive",3,"src"],[1,"label","label-secondary"],[1,"column","col-auto","d-flex","align-items-center"],["width","20",3,"src"],[1,"column","col-auto"],[1,"icon","icon-flag"],[1,"icon","icon-location"],[1,"card-subtitle","text-gray"]],template:function(e,t){1&e&&(b.Qb(0,"div",0),b.vc(1,p,2,1,"div",1),b.Qb(2,"div",2),b.Qb(3,"div",3),b.Qb(4,"div",4),b.Qb(5,"div",5),b.wc(6),b.vc(7,f,2,0,"span",6),b.Pb(),b.Pb(),b.vc(8,v,2,1,"div",7),b.vc(9,h,2,0,"div",8),b.vc(10,m,2,0,"div",8),b.Pb(),b.vc(11,g,2,1,"div",9),b.Pb(),b.Pb()),2&e&&(b.ec("ngClass",b.ic(10,k,t.mini&&!t.article.published)),b.Ab(1),b.ec("ngIf",null!==t.imgSrc&&!t.mini),b.Ab(1),b.ec("ngClass",b.ic(12,w,t.mini)),b.Ab(3),b.ec("ngClass",b.jc(14,I,!t.mini,t.mini)),b.Ab(1),b.yc(" ",t.article.name," "),b.Ab(1),b.ec("ngIf",!t.article.published&&!t.mini),b.Ab(1),b.ec("ngForOf",t.iconSources),b.Ab(1),b.ec("ngIf",t.article.hasQuests),b.Ab(1),b.ec("ngIf",null!==t.article.mapId),b.Ab(1),b.ec("ngIf",!t.mini))},directives:[r.i,r.k,r.j],styles:[".card[_ngcontent-%COMP%]{box-shadow:0 .25rem 1rem rgba(48,55,66,.15);border:0}"]}),y),Q=function(e,t,n,i){return new(n||(n=Promise))(function(c,r){function a(e){try{s(i.next(e))}catch(t){r(t)}}function o(e){try{s(i.throw(e))}catch(t){r(t)}}function s(e){var t;e.done?c(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,o)}s((i=i.apply(e,t||[])).next())})};function P(e,t){if(1&e){var n=b.Rb();b.Qb(0,"div",9),b.Qb(1,"button",10),b.Xb("click",function(){return b.oc(n),b.Zb().createArticle()}),b.Mb(2,"i",11),b.Qb(3,"span",12),b.wc(4," New Article"),b.Pb(),b.Pb(),b.Pb()}}function x(e,t){1&e&&b.Mb(0,"div",13)}function C(e,t){1&e&&b.Mb(0,"i",18)}function S(e,t){1&e&&b.Mb(0,"i",19)}function O(e,t){if(1&e&&(b.Qb(0,"div",14),b.Mb(1,"input",15),b.vc(2,C,1,0,"i",16),b.vc(3,S,1,0,"i",17),b.Pb()),2&e){var n=b.Zb();b.Ab(1),b.ec("formControl",n.searchControl),b.Ab(1),b.ec("ngIf",n.loading),b.Ab(1),b.ec("ngIf",!n.loading)}}function R(e,t){if(1&e){var n=b.Rb();b.Qb(0,"div",21),b.Qb(1,"div",22),b.Qb(2,"dd-article-view-card",23),b.Xb("click",function(){b.oc(n);var e=t.$implicit;return b.Zb(2).viewArticle(e)}),b.Pb(),b.Pb(),b.Pb()}if(2&e){var i=t.$implicit;b.Ab(2),b.ec("article",i)}}function M(e,t){if(1&e&&(b.Qb(0,"div",1),b.vc(1,R,3,1,"div",20),b.Pb()),2&e){var n=b.Zb();b.Ab(1),b.ec("ngForOf",n.popularArticles)("ngForTrackBy",n.trackArticle)}}function q(e,t){if(1&e){var n=b.Rb();b.Qb(0,"div",26),b.Qb(1,"dd-article-view-card",27),b.Xb("click",function(){b.oc(n);var e=t.$implicit;return b.Zb(2).viewArticle(e)}),b.Pb(),b.Pb()}if(2&e){var i=t.$implicit;b.Ab(1),b.ec("article",i)}}function Z(e,t){if(1&e&&(b.Qb(0,"div",24),b.vc(1,q,2,1,"div",25),b.Pb()),2&e){var n=t.$implicit,i=b.Zb();b.Ab(1),b.ec("ngForOf",n)("ngForTrackBy",i.trackArticle)}}function T(e,t){1&e&&(b.Qb(0,"p",34),b.wc(1," Click the button to create one "),b.Pb())}function F(e,t){if(1&e){var n=b.Rb();b.Qb(0,"div",35),b.Qb(1,"button",36),b.Xb("click",function(){return b.oc(n),b.Zb(2).createArticle()}),b.wc(2," Create Article "),b.Pb(),b.Pb()}}function E(e,t){if(1&e&&(b.Qb(0,"div",28),b.Qb(1,"div",29),b.Mb(2,"i",30),b.Pb(),b.Qb(3,"p",31),b.wc(4,"There are no articles for this campaign"),b.Pb(),b.vc(5,T,2,0,"p",32),b.vc(6,F,3,0,"div",33),b.Pb()),2&e){var n=b.Zb();b.Ab(5),b.ec("ngIf",n.editable),b.Ab(1),b.ec("ngIf",n.editable)}}function L(e,t){1&e&&(b.Qb(0,"div",28),b.Qb(1,"div",29),b.Mb(2,"i",30),b.Pb(),b.Qb(3,"p",31),b.wc(4,"Your search contained no results"),b.Pb(),b.Pb())}var _,X=((_=function(){function t(n,i,c,r){e(this,t),this.campaignService=n,this.articleService=i,this.router=c,this.route=r,this.loading=!1,this.search=null}return n(t,[{key:"ngOnInit",value:function(){var e=this;this.loadPopular(),this.loadFromSearch(),this.searchControl=new u.e(this.route.snapshot.queryParamMap.has("search")?this.route.snapshot.queryParamMap.get("search"):null),this.searchControl.valueChanges.pipe(Object(l.a)(250)).subscribe(function(t){t.trim().length>0?e.search=t:(e.search=null,0===e.articles.length&&(e.articles=void 0)),e.loadFromSearch()})}},{key:"loadFromSearch",value:function(){return Q(this,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.loading=!0,e.prev=1,e.next=4,this.articleService.getArticles(this.campaignService.campaign.id,10,0,this.search);case 4:this.articles=e.sent,e.next=10;break;case 7:throw e.prev=7,e.t0=e.catch(1),e.t0;case 10:this.loading=!1;case 11:case"end":return e.stop()}},e,this,[[1,7]])}))}},{key:"loadPopular",value:function(){return Q(this,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.loading=!0,e.prev=1,e.next=4,this.articleService.getPopular(this.campaignService.campaign.id);case 4:this.popularArticles=e.sent,e.next=10;break;case 7:throw e.prev=7,e.t0=e.catch(1),e.t0;case 10:this.loading=!1;case 11:case"end":return e.stop()}},e,this,[[1,7]])}))}},{key:"createArticle",value:function(){this.router.navigate(["campaigns",this.campaignService.campaign.id,"articles","create"])}},{key:"trackArticle",value:function(e,t){return t.id}},{key:"trackIdx",value:function(e){return e}},{key:"viewArticle",value:function(e){this.router.navigate(["campaigns",this.campaignService.campaign.id,"articles",e.id])}},{key:"splitArticles",get:function(){if(!this.articles)return[];for(var e=[],t=0;t<3;t++)e[t]=[];var n=0;return this.articles.forEach(function(t){e[n].push(t),2===n?n=0:n++}),e}},{key:"editable",get:function(){return this.campaignService.canEdit}}]),t}()).\u0275fac=function(e){return new(e||_)(b.Lb(s.b),b.Lb(o.a),b.Lb(a.c),b.Lb(a.a))},_.\u0275cmp=b.Fb({type:_,selectors:[["dd-article-manager"]],decls:13,vars:8,consts:[[1,"container","grid-xl"],[1,"columns"],[1,"column"],["class","column col-auto",4,"ngIf"],["class","loading loading-lg",4,"ngIf"],["class","has-icon-right",4,"ngIf"],["class","columns",4,"ngIf"],["class","column col-sm-12",4,"ngFor","ngForOf","ngForTrackBy"],["class","empty mt-2",4,"ngIf"],[1,"column","col-auto"],[1,"btn","btn-sm",3,"click"],[1,"icon","icon-plus"],[1,"hide-sm"],[1,"loading","loading-lg"],[1,"has-icon-right"],["type","text","placeholder","Search",1,"form-input",3,"formControl"],["class","form-icon loading",4,"ngIf"],["class","form-icon icon icon-search",4,"ngIf"],[1,"form-icon","loading"],[1,"form-icon","icon","icon-search"],["class","column col-2 col-md-3 col-sm-4 col-xs-6",4,"ngFor","ngForOf","ngForTrackBy"],[1,"column","col-2","col-md-3","col-sm-4","col-xs-6"],[1,"py-1"],["mini","true",3,"article","click"],[1,"column","col-sm-12"],["class","py-2",4,"ngFor","ngForOf","ngForTrackBy"],[1,"py-2"],[3,"article","click"],[1,"empty","mt-2"],[1,"empty-icon"],[1,"icon","icon-search","icon-4x"],[1,"empty-title","h5"],["class","empty-subtitle",4,"ngIf"],["class","empty-action",4,"ngIf"],[1,"empty-subtitle"],[1,"empty-action"],[1,"btn","btn-primary",3,"click"]],template:function(e,t){1&e&&(b.Qb(0,"div",0),b.Qb(1,"div",1),b.Qb(2,"div",2),b.Qb(3,"h3"),b.wc(4,"Articles"),b.Pb(),b.Pb(),b.vc(5,P,5,0,"div",3),b.Pb(),b.vc(6,x,1,0,"div",4),b.vc(7,O,4,3,"div",5),b.vc(8,M,2,2,"div",6),b.Qb(9,"div",1),b.vc(10,Z,2,2,"div",7),b.Pb(),b.vc(11,E,7,2,"div",8),b.vc(12,L,5,0,"div",8),b.Pb()),2&e&&(b.Ab(5),b.ec("ngIf",t.editable),b.Ab(1),b.ec("ngIf",t.loading&&!t.articles),b.Ab(1),b.ec("ngIf",t.articles),b.Ab(1),b.ec("ngIf",t.popularArticles&&!t.search),b.Ab(2),b.ec("ngForOf",t.splitArticles)("ngForTrackBy",t.trackIdx),b.Ab(1),b.ec("ngIf",t.articles&&0===t.articles.length&&null===t.search),b.Ab(1),b.ec("ngIf",t.articles&&0===t.articles.length&&null!==t.search))},directives:[r.k,r.j,u.b,u.m,u.f,A],styles:[""]}),_),N=c("edGd"),G=c("PSD3"),j=c.n(G),$=c("tk/3"),B=c("WNRK"),D=c("HRrE"),H=c("kNgC"),U=c("wNqa"),K=c("/uUt"),Y=["input"];function J(e,t){1&e&&b.Mb(0,"i",8)}function V(e,t){if(1&e){var n=b.Rb();b.Qb(0,"div",9),b.Xb("click",function(){return b.oc(n),b.Zb().closeMenu()}),b.Pb()}}function z(e,t){1&e&&(b.Qb(0,"div",13),b.Qb(1,"p",14),b.wc(2,"Your search returned no results"),b.Pb(),b.Pb())}function W(e,t){if(1&e){var n=b.Rb();b.Qb(0,"li",15),b.Qb(1,"span",16),b.Xb("click",function(){b.oc(n);var e=t.$implicit;return b.Zb(2).select(e)}),b.wc(2),b.Pb(),b.Pb()}if(2&e){var i=t.$implicit,c=b.Zb(2);b.Ab(1),b.ec("innerHTML",c.createItem(i),b.pc),b.Ab(1),b.yc(" ",i.value," ")}}function ee(e,t){if(1&e&&(b.Qb(0,"ul",10),b.vc(1,z,3,0,"div",11),b.vc(2,W,3,2,"li",12),b.Pb()),2&e){var n=b.Zb();b.Ab(1),b.ec("ngIf",0===n.items.length),b.Ab(1),b.ec("ngForOf",n.items)("ngForTrackBy",n.trackItem)}}var te,ne=function(e){return{"is-focused":e}},ie=function(e){return{"has-icon-left":e}},ce=((te=function(){function t(){e(this,t),this.selection=new b.n,this.menuShown=!1,this.loading=!1,this.focused=!1}return n(t,[{key:"ngOnInit",value:function(){var e=this;this.createItem||(this.createItem=function(e){return e.value}),this.control=new u.e(null),this.control.valueChanges.pipe(Object(l.a)(250),Object(K.a)()).subscribe(function(t){if(null!=t){var n=t.trim();e.performSearch(n)}})}},{key:"performSearch",value:function(e){return t=this,i=regeneratorRuntime.mark(function t(){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return this.loading=!0,t.prev=1,t.next=4,this.doSearch(e);case 4:n=t.sent,this.items=n,this.items.length>0&&(this.menuShown=!0),t.next=11;break;case 8:throw t.prev=8,t.t0=t.catch(1),t.t0;case 11:this.loading=!1;case 12:case"end":return t.stop()}},t,this,[[1,8]])}),new((n=void 0)||(n=Promise))(function(e,c){function r(e){try{o(i.next(e))}catch(t){c(t)}}function a(e){try{o(i.throw(e))}catch(t){c(t)}}function o(t){var i;t.done?e(t.value):(i=t.value,i instanceof n?i:new n(function(e){e(i)})).then(r,a)}o((i=i.apply(t,[])).next())});var t,n,i}},{key:"trackItem",value:function(e){return e}},{key:"focus",value:function(e){!1===this.focused&&!0===e&&this.performSearch(""),this.focused=e}},{key:"focusInput",value:function(){this.input.nativeElement.focus()}},{key:"select",value:function(e){this.selection.emit(e),this.menuShown=!1,this.control.setValue(null)}},{key:"closeMenu",value:function(){this.menuShown=!1}},{key:"placeholderText",get:function(){return void 0!==this.placeholder?this.placeholder:""}}]),t}()).\u0275fac=function(e){return new(e||te)},te.\u0275cmp=b.Fb({type:te,selectors:[["dd-autocomplete"]],viewQuery:function(e,t){var n;1&e&&b.Ac(Y,3),2&e&&b.lc(n=b.Yb())&&(t.input=n.first)},inputs:{placeholder:"placeholder",doSearch:"doSearch",createItem:"createItem"},outputs:{selection:"selection"},decls:8,vars:11,consts:[[1,"form-autocomplete"],[1,"form-autocomplete-input","form-input","search-cursor",3,"ngClass","click"],[3,"ngClass"],["type","text",1,"form-input",3,"formControl","placeholder","focus","focusout"],["input",""],["class","form-icon loading",4,"ngIf"],["class","menu-overlay",3,"click",4,"ngIf"],["class","menu",4,"ngIf"],[1,"form-icon","loading"],[1,"menu-overlay",3,"click"],[1,"menu"],["class","empty p-2",4,"ngIf"],["class","menu-item",4,"ngFor","ngForOf","ngForTrackBy"],[1,"empty","p-2"],[1,"empty-title","h5"],[1,"menu-item"],[3,"innerHTML","click"]],template:function(e,t){1&e&&(b.Qb(0,"div",0),b.Qb(1,"div",1),b.Xb("click",function(){return t.focusInput()}),b.Qb(2,"div",2),b.Qb(3,"input",3,4),b.Xb("focus",function(){return t.focus(!0)})("focusout",function(){return t.focus(!1)}),b.Pb(),b.vc(5,J,1,0,"i",5),b.Pb(),b.Pb(),b.vc(6,V,1,0,"div",6),b.vc(7,ee,3,3,"ul",7),b.Pb()),2&e&&(b.Ab(1),b.ec("ngClass",b.ic(7,ne,!0===t.focused)),b.Ab(1),b.ec("ngClass",b.ic(9,ie,t.loading)),b.Ab(1),b.ec("formControl",t.control)("placeholder",t.placeholderText),b.Ab(2),b.ec("ngIf",t.loading),b.Ab(1),b.ec("ngIf",t.menuShown),b.Ab(1),b.ec("ngIf",t.menuShown))},directives:[r.i,u.b,u.m,u.f,r.k,r.j],styles:[".search-cursor[_ngcontent-%COMP%]{cursor:text}.menu-overlay[_ngcontent-%COMP%]{position:fixed;bottom:0;cursor:default;display:block;top:0;left:0;right:0;z-index:1}"]}),te),re=function(e,t,n,i){return new(n||(n=Promise))(function(c,r){function a(e){try{s(i.next(e))}catch(t){r(t)}}function o(e){try{s(i.throw(e))}catch(t){r(t)}}function s(e){var t;e.done?c(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,o)}s((i=i.apply(e,t||[])).next())})};function ae(e,t){1&e&&b.Mb(0,"div",4)}function oe(e,t){if(1&e){var n=b.Rb();b.Qb(0,"dd-autocomplete",5),b.Xb("selection",function(e){return b.oc(n),b.Zb().questSelected(e)}),b.Pb()}if(2&e){var i=b.Zb();b.ec("doSearch",i.doQuestSearch)("createItem",i.createAutocompleteItem)}}function se(e,t){1&e&&(b.Qb(0,"div",6),b.Qb(1,"p",7),b.wc(2,"This article has no quests"),b.Pb(),b.Pb())}function ue(e,t){1&e&&b.Mb(0,"i",21)}function le(e,t){1&e&&b.Mb(0,"i",22)}function be(e,t){1&e&&b.Mb(0,"i",23)}function de(e,t){if(1&e){var n=b.Rb();b.Qb(0,"button",24),b.Xb("click",function(){b.oc(n);var e=b.Zb().$implicit;return b.Zb().remove(e)}),b.Mb(1,"i",25),b.Pb()}}function pe(e,t){if(1&e){var n=b.Rb();b.Qb(0,"button",24),b.Xb("click",function(){b.oc(n);var e=b.Zb().$implicit;return b.Zb().edit(e)}),b.Mb(1,"i",26),b.Pb()}}function fe(e,t){if(1&e&&(b.Qb(0,"div",27),b.Mb(1,"dd-quill",28),b.Pb()),2&e){var n=b.Zb().$implicit;b.Ab(1),b.ec("value",n.quest.content)}}function ve(e,t){if(1&e){var n=b.Rb();b.Qb(0,"div",8),b.Qb(1,"div",9),b.Qb(2,"div",10),b.Qb(3,"button",11),b.Xb("click",function(){b.oc(n);var e=t.$implicit;return b.Zb().expandArticleQuest(e)}),b.vc(4,ue,1,0,"i",12),b.vc(5,le,1,0,"i",13),b.Pb(),b.Pb(),b.Qb(6,"div",14),b.vc(7,be,1,0,"i",15),b.wc(8),b.Pb(),b.Qb(9,"div",16),b.vc(10,de,2,0,"button",17),b.vc(11,pe,2,0,"button",17),b.Qb(12,"button",18),b.Xb("click",function(){b.oc(n);var e=t.$implicit;return b.Zb().viewQuest(e.questId)}),b.Mb(13,"i",19),b.Pb(),b.Pb(),b.vc(14,fe,2,1,"div",20),b.Pb(),b.Pb()}if(2&e){var i=t.$implicit,c=b.Zb();b.Ab(4),b.ec("ngIf",i.questId!==c.expandedQuest),b.Ab(1),b.ec("ngIf",i.questId===c.expandedQuest),b.Ab(2),b.ec("ngIf",i.quest.accepted),b.Ab(1),b.yc(" ",i.quest.name,""),b.Ab(2),b.ec("ngIf",c.editable),b.Ab(1),b.ec("ngIf",c.editable),b.Ab(3),b.ec("ngIf",i.questId===c.expandedQuest)}}var he,me=((he=function(){function t(n,i,c,r){e(this,t),this.articleService=n,this.questService=i,this.campaignService=c,this.router=r,this.viewOnly=!0,this.loading=!1}return n(t,[{key:"ngOnInit",value:function(){var e=this;this.doQuestSearch=function(t){return e.searchQuests(t)},this.articleQuests||this.load()}},{key:"load",value:function(){return re(this,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.loading=!0,e.prev=1,e.next=4,this.articleService.getArticleQuests(this.article.id);case 4:this.articleQuests=e.sent,e.next=10;break;case 7:throw e.prev=7,e.t0=e.catch(1),e.t0;case 10:this.loading=!1;case 11:case"end":return e.stop()}},e,this,[[1,7]])}))}},{key:"searchQuests",value:function(e){return re(this,void 0,void 0,regeneratorRuntime.mark(function t(){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.questService.getQuests(this.campaignService.campaign.id,e,5,0,this.articleQuests.map(function(e){return e.questId}));case 2:return n=t.sent.map(function(e){return Object.assign(Object.assign({},e),{value:e.name})}),t.abrupt("return",(e.trim().length>=3&&n.unshift({id:"create-new-quest",value:e}),n));case 4:case"end":return t.stop()}},t,this)}))}},{key:"createAutocompleteItem",value:function(e){return"create-new-quest"===e.id?'<i class="icon icon-plus"></i> '.concat(e.value):e.name}},{key:"remove",value:function(e){return re(this,void 0,void 0,regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return this.articleQuests=this.articleQuests.filter(function(t){return t!==e}),t.next=3,this.articleService.deleteArticleQuest(e);case 3:case"end":return t.stop()}},t,this)}))}},{key:"edit",value:function(e){return re(this,void 0,void 0,regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:this.router.navigate(["campaigns",this.campaignService.campaign.id,"quests",e.questId,"edit"]);case 1:case"end":return t.stop()}},t,this)}))}},{key:"questSelected",value:function(e){return re(this,void 0,void 0,regeneratorRuntime.mark(function t(){var n,i;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if("create-new-quest"!==e.id){t.next=15;break}return t.t0=!0,t.next=4,j.a.fire({title:"Create new quest?",text:"This will create a new blank quest and attach it to ".concat(this.article.name),showCancelButton:!0});case 4:if(t.t1=t.sent.value,t.t0===t.t1){t.next=7;break}return t.abrupt("return");case 7:return n=e.value,t.next=10,this.questService.createQuest({name:n,accepted:!1,available:!1,visible:!1,status:U.b.NONE,campaignId:this.campaignService.campaign.id});case 10:return i=t.sent,t.next=13,this.questSelected(i);case 13:t.next=20;break;case 15:if(void 0===this.articleQuests.find(function(t){return t.questId===e.id})){t.next=17;break}return t.abrupt("return");case 17:return this.articleQuests.push({articleId:this.article.id,questId:e.id,quest:e}),t.next=20,this.articleService.updateArticleQuest({articleId:this.article.id,questId:e.id});case 20:case"end":return t.stop()}},t,this)}))}},{key:"viewQuest",value:function(e){return re(this,void 0,void 0,regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:this.router.navigate(["campaigns",this.campaignService.campaign.id,"quests",e]);case 1:case"end":return t.stop()}},t,this)}))}},{key:"trackArticleQuest",value:function(e,t){return t.questId+t.articleId}},{key:"expandArticleQuest",value:function(e){this.expandedQuest=this.expandedQuest===e.questId?null:e.questId}},{key:"editable",get:function(){return this.campaignService.canEdit&&!this.viewOnly}}]),t}()).\u0275fac=function(e){return new(e||he)(b.Lb(o.a),b.Lb(U.a),b.Lb(s.b),b.Lb(a.c))},he.\u0275cmp=b.Fb({type:he,selectors:[["dd-article-quest-manager"]],inputs:{article:"article",viewOnly:"viewOnly",articleQuests:"articleQuests"},decls:6,vars:5,consts:[["class","loading",4,"ngIf"],["placeholder","Add Quest",3,"doSearch","createItem","selection",4,"ngIf"],["class","empty mt-2 p-2",4,"ngIf"],["class","card p-1 pl-2 mt-1",4,"ngFor","ngForOf","ngForTrackBy"],[1,"loading"],["placeholder","Add Quest",3,"doSearch","createItem","selection"],[1,"empty","mt-2","p-2"],[1,"empty-title","h5"],[1,"card","p-1","pl-2","mt-1"],[1,"columns","col-gapless"],[1,"column","col-auto","mr-2"],[1,"btn","btn-sm",3,"click"],["class","icon icon-arrow-down",4,"ngIf"],["class","icon icon-arrow-up",4,"ngIf"],[1,"column"],["class","icon icon-flag",4,"ngIf"],[1,"column","col-auto"],["class","btn btn-sm btn-link",3,"click",4,"ngIf"],[1,"btn","btn-sm","btn-link","ml-1",3,"click"],[1,"icon","icon-arrow-right"],["class","column col-12",4,"ngIf"],[1,"icon","icon-arrow-down"],[1,"icon","icon-arrow-up"],[1,"icon","icon-flag"],[1,"btn","btn-sm","btn-link",3,"click"],[1,"icon","icon-cross"],[1,"icon","icon-edit"],[1,"column","col-12"],["readOnly","true",3,"value"]],template:function(e,t){1&e&&(b.Qb(0,"div"),b.vc(1,ae,1,0,"div",0),b.vc(2,oe,1,2,"dd-autocomplete",1),b.vc(3,se,3,0,"div",2),b.Qb(4,"div"),b.vc(5,ve,15,7,"div",3),b.Pb(),b.Pb()),2&e&&(b.Ab(1),b.ec("ngIf",t.loading),b.Ab(1),b.ec("ngIf",t.editable),b.Ab(1),b.ec("ngIf",t.articleQuests&&0===t.articleQuests.length),b.Ab(2),b.ec("ngForOf",t.articleQuests)("ngForTrackBy",t.trackArticleQuest))},directives:[r.k,r.j,ce,B.a],styles:[""]}),he),ge=c("/fvA"),ye=c("dtdw"),ke=c("pLZG"),we=c("btaL"),Ie=c("DwCd"),Ae=c("5eHb"),Qe=c("0ezk"),Pe=c("lD+H"),xe=function(e,t,n,i){return new(n||(n=Promise))(function(c,r){function a(e){try{s(i.next(e))}catch(t){r(t)}}function o(e){try{s(i.throw(e))}catch(t){r(t)}}function s(e){var t;e.done?c(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,o)}s((i=i.apply(e,t||[])).next())})};function Ce(e,t){1&e&&b.Mb(0,"i",19)}function Se(e,t){1&e&&b.Mb(0,"i",20)}function Oe(e,t){if(1&e&&b.Mb(0,"img",21),2&e){var n=b.Zb();b.gc("src","https://res.cloudinary.com/dqhk8k6iv/image/upload/t_thumb/",n.articleConcept.concept.imageId,"",b.qc)}}function Re(e,t){1&e&&b.Mb(0,"img",22)}function Me(e,t){if(1&e&&(b.Qb(0,"sup",23),b.wc(1),b.Pb()),2&e){var n=b.Zb();b.Ab(1),b.yc("x",n.articleConcept.quantity,"")}}function qe(e,t){1&e&&(b.Qb(0,"div",24),b.Mb(1,"div",25),b.Pb())}function Ze(e,t){if(1&e&&(b.Qb(0,"div",26),b.Mb(1,"span",27),b.Pb()),2&e){var n=b.Zb();b.Ab(1),b.ec("ddCurrency",n.articleConcept.currencyCost)}}function Te(e,t){if(1&e){var n=b.Rb();b.Qb(0,"button",28),b.Xb("click",function(){return b.oc(n),b.Zb().doRemove()}),b.Mb(1,"i",29),b.Pb()}}function Fe(e,t){if(1&e){var n=b.Rb();b.Qb(0,"button",28),b.Xb("click",function(){return b.oc(n),b.Zb().edit()}),b.Mb(1,"i",30),b.Pb()}}function Ee(e,t){if(1&e&&(b.Qb(0,"div",31),b.Mb(1,"dd-dynamic-field",32),b.Mb(2,"div",33),b.Mb(3,"dd-dynamic-field",32),b.Qb(4,"div",34),b.Qb(5,"div",35),b.Mb(6,"dd-dynamic-field",32),b.Pb(),b.Qb(7,"div",35),b.Mb(8,"dd-dynamic-field",32),b.Pb(),b.Pb(),b.Pb()),2&e){var n=b.Zb();b.Ab(1),b.ec("config",n.currencyFieldConfig)("control",n.currencyCost),b.Ab(2),b.ec("config",n.quantityFieldConfig)("control",n.quantity),b.Ab(3),b.ec("config",n.isPurchasableFieldConfig)("control",n.isPurchasable),b.Ab(2),b.ec("config",n.trackOnEntityFieldConfig)("control",n.trackOnEntity)}}function Le(e,t){if(1&e&&b.Mb(0,"dd-quill",38),2&e){var n=b.Zb(2);b.ec("value",n.articleConcept.concept.content)}}function _e(e,t){1&e&&(b.Qb(0,"div",39),b.wc(1," There is nothing here... "),b.Pb())}function Xe(e,t){if(1&e&&(b.Qb(0,"div",31),b.vc(1,Le,1,1,"dd-quill",36),b.vc(2,_e,2,0,"div",37),b.Pb()),2&e){var n=b.Zb();b.Ab(1),b.ec("ngIf",n.articleConcept.concept.content),b.Ab(1),b.ec("ngIf",!n.articleConcept.concept.content)}}function Ne(e,t){if(1&e){var n=b.Rb();b.Qb(0,"div"),b.Qb(1,"button",42),b.Xb("click",function(){b.oc(n);var e=t.$implicit;return b.Zb(2).buy(e)}),b.Qb(2,"figure",43),b.Mb(3,"img",44),b.Pb(),b.wc(4),b.Pb(),b.Pb()}if(2&e){var i=t.$implicit,c=b.Zb(2);b.Ab(1),b.ec("disabled",!c.canAfford(i)||0===c.articleConcept.quantity),b.Ab(2),b.gc("src","https://res.cloudinary.com/dqhk8k6iv/image/upload/t_thumb/",i.imageId,"",b.qc),b.Ab(1),b.yc(" Buy for ",i.name," ")}}function Ge(e,t){if(1&e&&(b.Qb(0,"div",40),b.vc(1,Ne,5,3,"div",41),b.Pb()),2&e){var n=b.Zb();b.Ab(1),b.ec("ngForOf",n.entities)}}var je,$e=function(e){return{faded:e}},Be=((je=function(){function t(n,i,c,r,a,o){e(this,t),this.router=n,this.campaignService=i,this.articleService=c,this.login=r,this.currencyService=a,this.toastrService=o,this.remove=new b.n,this.saving=!1,this.expanded=!1}return n(t,[{key:"ngOnInit",value:function(){var e=this;this.formGroup=new u.h({quantity:new u.e(this.articleConcept.quantity),currencyCost:new u.e(this.articleConcept.currencyCost),isPurchasable:new u.e(this.articleConcept.isPurchasable),trackOnEntity:new u.e(this.articleConcept.trackOnEntity)}),this.formGroup.valueChanges.pipe(Object(K.a)(),Object(l.a)(400)).subscribe(function(t){e.formGroup.valid&&(e.articleConcept.isPurchasable=t.isPurchasable,e.articleConcept.quantity=t.quantity,e.articleConcept.currencyCost=t.currencyCost,e.articleConcept.trackOnEntity=t.trackOnEntity,e.save(),e.formGroup.markAsPristine())}),this.currencyFieldConfig={name:"Cost",type:Ie.a.CURRENCY,options:{levels:this.campaignService.campaign.currencyMap,trackCoins:this.campaignService.campaign.trackCoins}},this.quantityFieldConfig={name:"Quantity (stock)",type:Ie.a.INT,options:{min:0}},this.isPurchasableFieldConfig={name:"Is Purchasable",type:Ie.a.BOOLEAN},this.trackOnEntityFieldConfig={name:"Track on entity",type:Ie.a.BOOLEAN}}},{key:"save",value:function(){return xe(this,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.saving=!0,e.prev=1,e.next=4,this.articleService.updateArticleConcept(this.articleConcept);case 4:e.next=9;break;case 6:throw e.prev=6,e.t0=e.catch(1),e.t0;case 9:this.saving=!1;case 10:case"end":return e.stop()}},e,this,[[1,6]])}))}},{key:"doRemove",value:function(){this.remove.emit()}},{key:"edit",value:function(){return xe(this,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.router.navigate(["campaigns",this.campaignService.campaign.id,"concepts",this.articleConcept.concept.conceptTypeId,this.articleConcept.conceptId,"edit"]);case 1:case"end":return e.stop()}},e,this)}))}},{key:"viewConcept",value:function(){return xe(this,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.router.navigate(["campaigns",this.campaignService.campaign.id,"concepts",this.articleConcept.concept.conceptTypeId,this.articleConcept.conceptId,"view"]);case 1:case"end":return e.stop()}},e,this)}))}},{key:"canAfford",value:function(e){return!!this.isPurchasable&&this.currencyService.hasResources(e.currency,this.articleConcept.currencyCost,this.campaignService.campaign.currencyMap||this.currencyService.defaultCurrencyMap,this.campaignService.campaign.trackCoins)}},{key:"buy",value:function(e){return xe(this,void 0,void 0,regeneratorRuntime.mark(function t(){var n=this;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.articleService.buyArticleConcept(this.articleConcept,1,e.id);case 3:this.toastrService.info("".concat(e.name," purchased 1x ").concat(this.articleConcept.concept.name)).onTap.subscribe(function(){n.router.navigate(["campaigns",n.campaignService.campaign.id,"entities",e.id,"ct",n.articleConcept.concept.conceptTypeId])}),t.next=9;break;case 6:throw t.prev=6,t.t0=t.catch(0),t.t0;case 9:case"end":return t.stop()}},t,this,[[0,6]])}))}},{key:"currencyCost",get:function(){return this.formGroup.get("currencyCost")}},{key:"quantity",get:function(){return this.formGroup.get("quantity")}},{key:"isPurchasable",get:function(){return this.formGroup.get("isPurchasable")}},{key:"trackOnEntity",get:function(){return this.formGroup.get("trackOnEntity")}},{key:"entities",get:function(){var e=this;return this.campaignService.campaign.entities.filter(function(t){return!t.spawnable&&null===t.spawnedFromId&&t.userId===e.login.id&&t.preset.isCurrencyEnabled})}}]),t}()).\u0275fac=function(e){return new(e||je)(b.Lb(a.c),b.Lb(s.b),b.Lb(o.a),b.Lb(N.a),b.Lb(we.a),b.Lb(Ae.b))},je.\u0275cmp=b.Fb({type:je,selectors:[["dd-article-concept-manager-list-item"]],inputs:{articleConcept:"articleConcept",editable:"editable"},outputs:{remove:"remove"},decls:22,vars:19,consts:[[1,"card","p-1","mt-1"],[1,"columns","col-gapless"],[1,"column","col-auto","mr-2"],[1,"btn","btn-sm",3,"click"],["class","icon icon-arrow-down",4,"ngIf"],["class","icon icon-arrow-up",4,"ngIf"],[1,"column","col-auto","mr-2",3,"ngClass"],["class","s-rounded","width","28","style","margin-bottom: -0.26rem; margin-top: 0.04rem",3,"src",4,"ngIf"],["class","s-rounded","width","28","src","https://res.cloudinary.com/dqhk8k6iv/image/upload/t_thumb/winged-sword","style","margin-bottom: -0.26rem; margin-top: 0.04rem",4,"ngIf"],[1,"column",3,"ngClass"],["class","bold",4,"ngIf"],["class","d-inline-block ml-2",4,"ngIf"],["class","column col-auto mr-2 d-flex align-items-center","style","line-height: 0",4,"ngIf"],[1,"column","col-auto"],["class","btn btn-sm btn-link",3,"click",4,"ngIf"],[1,"btn","btn-sm","btn-link","ml-1",3,"click"],[1,"icon","icon-arrow-right"],["class","column col-12",4,"ngIf"],["class","column col-auto col-ml-auto mt-2",4,"ngIf"],[1,"icon","icon-arrow-down"],[1,"icon","icon-arrow-up"],["width","28",1,"s-rounded",2,"margin-bottom","-0.26rem","margin-top","0.04rem",3,"src"],["width","28","src","https://res.cloudinary.com/dqhk8k6iv/image/upload/t_thumb/winged-sword",1,"s-rounded",2,"margin-bottom","-0.26rem","margin-top","0.04rem"],[1,"bold"],[1,"d-inline-block","ml-2"],[1,"loading"],[1,"column","col-auto","mr-2","d-flex","align-items-center",2,"line-height","0"],[3,"ddCurrency"],[1,"btn","btn-sm","btn-link",3,"click"],[1,"icon","icon-cross"],[1,"icon","icon-edit"],[1,"column","col-12"],[3,"config","control"],[1,"mt-2"],[1,"columns"],[1,"column"],["readOnly","true",3,"value",4,"ngIf"],["class","text-center text-italic",4,"ngIf"],["readOnly","true",3,"value"],[1,"text-center","text-italic"],[1,"column","col-auto","col-ml-auto","mt-2"],[4,"ngFor","ngForOf"],[1,"btn","btn-sm","ml-2",2,"line-height","1",3,"disabled","click"],[1,"avatar","avatar-xs"],["alt","",3,"src"]],template:function(e,t){1&e&&(b.Qb(0,"div",0),b.Qb(1,"div",1),b.Qb(2,"div",2),b.Qb(3,"button",3),b.Xb("click",function(){return t.expanded=!t.expanded}),b.vc(4,Ce,1,0,"i",4),b.vc(5,Se,1,0,"i",5),b.Pb(),b.Pb(),b.Qb(6,"div",6),b.vc(7,Oe,1,1,"img",7),b.vc(8,Re,1,0,"img",8),b.Pb(),b.Qb(9,"div",9),b.wc(10),b.vc(11,Me,2,1,"sup",10),b.vc(12,qe,2,0,"div",11),b.Pb(),b.vc(13,Ze,2,1,"div",12),b.Qb(14,"div",13),b.vc(15,Te,2,0,"button",14),b.vc(16,Fe,2,0,"button",14),b.Qb(17,"button",15),b.Xb("click",function(){return t.viewConcept()}),b.Mb(18,"i",16),b.Pb(),b.Pb(),b.vc(19,Ee,9,8,"div",17),b.vc(20,Xe,3,2,"div",17),b.vc(21,Ge,2,1,"div",18),b.Pb(),b.Pb()),2&e&&(b.Ab(4),b.ec("ngIf",!t.expanded),b.Ab(1),b.ec("ngIf",t.expanded),b.Ab(1),b.ec("ngClass",b.ic(15,$e,0===t.articleConcept.quantity)),b.Ab(1),b.ec("ngIf",t.articleConcept.concept.imageId),b.Ab(1),b.ec("ngIf",!t.articleConcept.concept.imageId),b.Ab(1),b.ec("ngClass",b.ic(17,$e,0===t.articleConcept.quantity)),b.Ab(1),b.yc(" ",t.articleConcept.concept.name," "),b.Ab(1),b.ec("ngIf",null!=t.articleConcept.quantity),b.Ab(1),b.ec("ngIf",t.saving),b.Ab(1),b.ec("ngIf",t.articleConcept.isPurchasable),b.Ab(2),b.ec("ngIf",t.editable),b.Ab(1),b.ec("ngIf",t.editable),b.Ab(3),b.ec("ngIf",t.expanded&&t.editable),b.Ab(1),b.ec("ngIf",t.expanded),b.Ab(1),b.ec("ngIf",t.articleConcept.isPurchasable&&t.expanded))},directives:[r.k,r.i,Qe.a,Pe.a,B.a,r.j],styles:[""]}),je),De=function(e,t,n,i){return new(n||(n=Promise))(function(c,r){function a(e){try{s(i.next(e))}catch(t){r(t)}}function o(e){try{s(i.throw(e))}catch(t){r(t)}}function s(e){var t;e.done?c(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,o)}s((i=i.apply(e,t||[])).next())})};function He(e,t){1&e&&b.Mb(0,"div",4)}function Ue(e,t){if(1&e){var n=b.Rb();b.Qb(0,"dd-autocomplete",5),b.Xb("selection",function(e){return b.oc(n),b.Zb().conceptSelected(e)}),b.Pb()}if(2&e){var i=b.Zb();b.gc("placeholder","Add ",i.conceptType.name,""),b.ec("doSearch",i.doConceptSearch)("createItem",i.createAutocompleteItem)}}function Ke(e,t){if(1&e&&(b.Qb(0,"div",6),b.Qb(1,"p",7),b.wc(2),b.Pb(),b.Pb()),2&e){var n=b.Zb();b.Ab(2),b.yc("This article has no ",n.conceptType.pluralForm,"")}}function Ye(e,t){if(1&e){var n=b.Rb();b.Qb(0,"dd-article-concept-manager-list-item",8),b.Xb("remove",function(){b.oc(n);var e=t.$implicit;return b.Zb().remove(e)}),b.Pb()}if(2&e){var i=t.$implicit,c=b.Zb();b.ec("articleConcept",i)("editable",c.editable)}}var Je,Ve=((Je=function(){function t(n,i,c,r,a){e(this,t),this.articleService=n,this.conceptService=i,this.router=c,this.campaignService=r,this.update=a,this.viewOnly=!0,this.loading=!1}return n(t,[{key:"ngOnInit",value:function(){var e=this;this.doConceptSearch=function(t){return e.searchConcepts(t)},this._conceptArticleDeleteSubscription=this.update.conceptArticleDelete.subscribe(function(t){e.articleConcepts&&(e.articleConcepts=e.articleConcepts.filter(function(e){return!(e.articleId===t.articleId&&e.conceptId===t.conceptId)}))}),this._conceptArticleUpdateSubscription=this.update.conceptArticleUpdate.pipe(Object(ke.a)(function(t){return t.articleId===e.article.id&&t.concept.conceptTypeId===e.conceptType.id})).subscribe(function(t){if(e.articleConcepts){var n=e.articleConcepts.find(function(e){return e.conceptId===t.conceptId&&e.articleId===t.articleId});void 0!==n?Object.assign(n,t):e.articleConcepts.push(t)}}),this.load(this.conceptType.id)}},{key:"ngOnDestroy",value:function(){this._conceptArticleDeleteSubscription&&this._conceptArticleDeleteSubscription.unsubscribe(),this._conceptArticleUpdateSubscription&&this._conceptArticleUpdateSubscription.unsubscribe()}},{key:"load",value:function(e){return De(this,void 0,void 0,regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return this.loading=!0,t.prev=1,t.next=4,this.articleService.getArticleConcepts(this.article.id,e);case 4:this.articleConcepts=t.sent,t.next=10;break;case 7:throw t.prev=7,t.t0=t.catch(1),t.t0;case 10:this.loading=!1;case 11:case"end":return t.stop()}},t,this,[[1,7]])}))}},{key:"createNewConcept",value:function(e){return De(this,void 0,void 0,regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.conceptService.createConcept({name:e,userId:"fake",fields:[],tags:["TODO"],isContainer:!1,conceptTypeId:this.conceptType.id}));case 1:case"end":return t.stop()}},t,this)}))}},{key:"searchConcepts",value:function(e){return De(this,void 0,void 0,regeneratorRuntime.mark(function t(){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.conceptService.getConcepts(this.conceptType.id,5,0,e);case 2:return n=t.sent.concepts.map(function(e){return Object.assign(Object.assign({},e),{value:e.name})}),t.abrupt("return",(e.trim().length>0&&n.push({value:e,id:"create-new-concept"}),n));case 4:case"end":return t.stop()}},t,this)}))}},{key:"createAutocompleteItem",value:function(e){return"create-new-concept"===e.id?'<span><i class="icon icon-plus"></i> '.concat(e.value,"</span>"):e.name}},{key:"remove",value:function(e){return De(this,void 0,void 0,regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return this.articleConcepts=this.articleConcepts.filter(function(t){return t!==e}),t.next=3,this.articleService.deleteArticleConcept(e);case 3:case"end":return t.stop()}},t,this)}))}},{key:"conceptSelected",value:function(e){return De(this,void 0,void 0,regeneratorRuntime.mark(function t(){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if("create-new-concept"!==e.id){t.next=8;break}return t.next=3,this.createNewConcept(e.value);case 3:return n=t.sent,t.next=6,this.conceptSelected(n);case 6:t.next=13;break;case 8:if(void 0===this.articleConcepts.find(function(t){return t.conceptId===e.id})){t.next=10;break}return t.abrupt("return");case 10:return this.articleConcepts.push({articleId:this.article.id,conceptId:e.id,concept:e,isPurchasable:!1,trackOnEntity:!0}),t.next=13,this.articleService.updateArticleConcept({articleId:this.article.id,conceptId:e.id,isPurchasable:!1,trackOnEntity:!0});case 13:case"end":return t.stop()}},t,this)}))}},{key:"trackArticleConcept",value:function(e,t){return t.conceptId+t.articleId}},{key:"editable",get:function(){return this.campaignService.canEdit&&!this.viewOnly}}]),t}()).\u0275fac=function(e){return new(e||Je)(b.Lb(o.a),b.Lb(ge.a),b.Lb(a.c),b.Lb(s.b),b.Lb(ye.b))},Je.\u0275cmp=b.Fb({type:Je,selectors:[["dd-article-concept-manager"]],inputs:{conceptType:"conceptType",article:"article",articleConcepts:"articleConcepts",viewOnly:"viewOnly"},decls:6,vars:5,consts:[["class","loading",4,"ngIf"],[3,"placeholder","doSearch","createItem","selection",4,"ngIf"],["class","empty mt-2 p-2",4,"ngIf"],[3,"articleConcept","editable","remove",4,"ngFor","ngForOf","ngForTrackBy"],[1,"loading"],[3,"placeholder","doSearch","createItem","selection"],[1,"empty","mt-2","p-2"],[1,"empty-title","h5"],[3,"articleConcept","editable","remove"]],template:function(e,t){1&e&&(b.Qb(0,"div"),b.vc(1,He,1,0,"div",0),b.vc(2,Ue,1,3,"dd-autocomplete",1),b.vc(3,Ke,3,1,"div",2),b.Qb(4,"div"),b.vc(5,Ye,1,2,"dd-article-concept-manager-list-item",3),b.Pb(),b.Pb()),2&e&&(b.Ab(1),b.ec("ngIf",t.loading),b.Ab(1),b.ec("ngIf",t.editable),b.Ab(1),b.ec("ngIf",t.articleConcepts&&0===t.articleConcepts.length),b.Ab(2),b.ec("ngForOf",t.articleConcepts)("ngForTrackBy",t.trackArticleConcept))},directives:[r.k,r.j,ce,Be],styles:[""]}),Je),ze=function(e,t,n,i){return new(n||(n=Promise))(function(c,r){function a(e){try{s(i.next(e))}catch(t){r(t)}}function o(e){try{s(i.throw(e))}catch(t){r(t)}}function s(e){var t;e.done?c(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,o)}s((i=i.apply(e,t||[])).next())})},We=function(e){return{loading:e}};function et(e,t){if(1&e){var n=b.Rb();b.Qb(0,"button",23),b.Xb("click",function(){return b.oc(n),b.Zb().makeCopy()}),b.wc(1," Make Copy "),b.Pb()}if(2&e){var i=b.Zb();b.ec("ngClass",b.ic(2,We,i.copying))("disabled",i.loading||i.saving)}}function tt(e,t){if(1&e){var n=b.Rb();b.Qb(0,"button",24),b.Xb("click",function(){return b.oc(n),b.Zb().delete()}),b.wc(1," Delete "),b.Pb()}if(2&e){var i=b.Zb();b.ec("disabled",i.loading||i.saving)}}function nt(e,t){1&e&&(b.Qb(0,"p",25),b.wc(1," A name is required "),b.Pb())}function it(e,t){1&e&&(b.Qb(0,"p",25),b.wc(1," The name cannot be more than 30 characters long "),b.Pb())}function ct(e,t){if(1&e&&(b.Qb(0,"div",12),b.Qb(1,"label",18),b.wc(2,"Quests"),b.Pb(),b.Mb(3,"dd-article-quest-manager",26),b.Pb()),2&e){var n=b.Zb();b.Ab(3),b.ec("article",n.article)("viewOnly",!1)}}function rt(e,t){if(1&e&&(b.Qb(0,"div",12),b.Qb(1,"label",18),b.wc(2),b.Pb(),b.Mb(3,"dd-article-concept-manager",28),b.Pb()),2&e){var n=t.$implicit,i=b.Zb(2);b.Ab(2),b.xc(n.pluralForm),b.Ab(1),b.ec("conceptType",n)("article",i.article)("viewOnly",!1)}}function at(e,t){if(1&e&&(b.Qb(0,"div"),b.vc(1,rt,4,4,"div",27),b.Pb()),2&e){var n=b.Zb();b.Ab(1),b.ec("ngForOf",n.conceptTypes)}}var ot,st=function(e){return{"has-error":e}},ut=((ot=function(){function t(n,i,c,r,a,o,s){e(this,t),this.campaignSerivce=n,this.articleService=i,this.login=c,this.route=r,this.router=a,this.location=o,this.http=s,this.saving=!1,this.loading=!1,this.copying=!1}return n(t,[{key:"ngOnInit",value:function(){var e=this;this.formGroup=new u.h({name:new u.e(null,[u.v.required,u.v.maxLength(30)]),content:new u.e(null),published:new u.e(!1),tags:new u.c([]),icon:new u.e(null)}),this.editing&&(this.formGroup.disable(),this.route.paramMap.subscribe(function(t){e.load(t.get("a_id"))}))}},{key:"canDeactivate",value:function(){return!this.formGroup.dirty}},{key:"constructArticle",value:function(){var e=this.formGroup.value,t={name:e.name,content:e.content,published:e.published,campaignId:this.campaignSerivce.campaign.id,userId:this.login.id,tags:e.tags||[],icon:e.icon};return this.editing&&(t.id=this._article.id,t.userId=this._article.userId,t.mapId=this._article.mapId,t.lat=this._article.lat,t.lng=this._article.lng),t}},{key:"load",value:function(e){return ze(this,void 0,void 0,regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return this.loading=!0,t.prev=1,t.next=4,this.articleService.getArticle(e);case 4:this._article=t.sent,t.next=10;break;case 7:throw t.prev=7,t.t0=t.catch(1),t.t0;case 10:null===this._article.tags&&(this._article.tags=[]),this.formGroup.patchValue(this._article),this._article.tags&&(this.formGroup.get("tags").controls=this._article.tags.map(function(e){return new u.e(e)})),this.formGroup.enable(),this.loading=!1;case 11:case"end":return t.stop()}},t,this,[[1,7]])}))}},{key:"save",value:function(){return ze(this,void 0,void 0,regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.formGroup.disable(),this.saving=!0,e.prev=1,t=this.constructArticle(),!this.editing){e.next=8;break}return e.next=6,this.articleService.updateArticle(t);case 6:e.next=10;break;case 8:return e.next=10,this.articleService.createArticle(t);case 10:e.next=15;break;case 12:throw e.prev=12,e.t0=e.catch(1),e.t0;case 15:this.saving=!1,this.formGroup.enable(),this.formGroup.markAsPristine(),this.router.navigate(["campaigns",this.campaignSerivce.campaign.id,"articles"]);case 16:case"end":return e.stop()}},e,this,[[1,12]])}))}},{key:"delete",value:function(){return ze(this,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=!0,e.next=3,j.a.fire({title:"Are you sure?",showCancelButton:!0});case 3:if(e.t1=e.sent.value,e.t0!==e.t1){e.next=14;break}return e.prev=5,e.next=8,this.articleService.deleteArticle(this._article.id);case 8:this.router.navigate(["campaigns",this.campaignSerivce.campaign.id,"articles"]),e.next=14;break;case 11:throw e.prev=11,e.t2=e.catch(5),e.t2;case 14:case"end":return e.stop()}},e,this,[[5,11]])}))}},{key:"makeCopy",value:function(){return ze(this,void 0,void 0,regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.canDeactivate(),e.t0){e.next=7;break}return e.t1=!0,e.next=5,j.a.fire({title:"Are you sure?",text:"You have unsaved changes!",showCancelButton:!0});case 5:e.t2=e.sent.value,e.t0=e.t1===e.t2;case 7:if(!e.t0){e.next=20;break}return this.copying=!0,e.prev=9,e.next=12,this.articleService.makeCopy(this.article.id);case 12:t=e.sent,this.router.navigate(["campaigns",this.campaignSerivce.campaign.id,"articles",t.id,"edit"]),e.next=19;break;case 16:throw e.prev=16,e.t3=e.catch(9),e.t3;case 19:this.copying=!1;case 20:case"end":return e.stop()}},e,this,[[9,16]])}))}},{key:"cancel",value:function(){this.location.back()}},{key:"editing",get:function(){return this.route.snapshot.data.editing}},{key:"name",get:function(){return this.formGroup.get("name")}},{key:"icon",get:function(){return this.formGroup.get("icon")}},{key:"article",get:function(){return this._article}},{key:"conceptTypes",get:function(){return this.campaignSerivce.campaign.conceptTypes.filter(function(e){return!0===e.isLinkableToArticles})}}]),t}()).\u0275fac=function(e){return new(e||ot)(b.Lb(s.b),b.Lb(o.a),b.Lb(N.a),b.Lb(a.a),b.Lb(a.c),b.Lb(r.g),b.Lb($.b))},ot.\u0275cmp=b.Fb({type:ot,selectors:[["dd-article-editor"]],decls:36,vars:17,consts:[[1,"container","grid-xl","p-2",3,"formGroup"],[1,"columns"],[1,"column"],[1,"column","col-auto"],["class","btn mr-2",3,"ngClass","disabled","click",4,"ngIf"],["class","btn btn-error mr-2",3,"disabled","click",4,"ngIf"],[1,"btn","mr-2",3,"disabled","click"],[1,"btn",3,"ngClass","disabled","click"],[1,"form-group",3,"ngClass"],["for","name",1,"form-label"],["type","text","name","name","id","name","placeholder","Name","formControlName","name",1,"form-input"],["class","form-input-hint",4,"ngIf"],[1,"form-group"],["for","text",1,"form-label"],["formControlName","content"],[1,"form-switch"],["type","checkbox","formControlName","published"],[1,"form-icon"],[1,"form-label"],[3,"formGroup"],["formControlName","icon"],["class","form-group",4,"ngIf"],[4,"ngIf"],[1,"btn","mr-2",3,"ngClass","disabled","click"],[1,"btn","btn-error","mr-2",3,"disabled","click"],[1,"form-input-hint"],[3,"article","viewOnly"],["class","form-group",4,"ngFor","ngForOf"],[3,"conceptType","article","viewOnly"]],template:function(e,t){1&e&&(b.Qb(0,"div",0),b.Qb(1,"div",1),b.Qb(2,"div",2),b.Qb(3,"h3"),b.wc(4),b.Pb(),b.Pb(),b.Qb(5,"div",3),b.vc(6,et,2,4,"button",4),b.vc(7,tt,2,1,"button",5),b.Qb(8,"button",6),b.Xb("click",function(){return t.cancel()}),b.wc(9," Cancel "),b.Pb(),b.Qb(10,"button",7),b.Xb("click",function(){return t.save()}),b.wc(11," Save "),b.Pb(),b.Pb(),b.Pb(),b.Qb(12,"div",8),b.Qb(13,"label",9),b.wc(14,"Name"),b.Pb(),b.Mb(15,"input",10),b.vc(16,nt,2,0,"p",11),b.vc(17,it,2,0,"p",11),b.Pb(),b.Qb(18,"div",12),b.Qb(19,"label",13),b.wc(20,"Content"),b.Pb(),b.Mb(21,"dd-quill",14),b.Pb(),b.Qb(22,"div",12),b.Qb(23,"label",15),b.Mb(24,"input",16),b.Mb(25,"i",17),b.wc(26," This article is published (players can view it) "),b.Pb(),b.Pb(),b.Qb(27,"label",18),b.wc(28,"Tags"),b.Pb(),b.Mb(29,"dd-tag-editor",19),b.Qb(30,"div",12),b.Qb(31,"label",18),b.wc(32,"Icon"),b.Pb(),b.Mb(33,"dd-icon-picker",20),b.Pb(),b.vc(34,ct,4,2,"div",21),b.vc(35,at,2,1,"div",22),b.Pb()),2&e&&(b.ec("formGroup",t.formGroup),b.Ab(4),b.yc("",t.editing?"Edit":"Create"," Article"),b.Ab(2),b.ec("ngIf",t.editing),b.Ab(1),b.ec("ngIf",t.editing),b.Ab(1),b.ec("disabled",t.loading||t.saving),b.Ab(2),b.ec("ngClass",b.ic(13,We,t.saving))("disabled",t.loading||t.saving||t.formGroup.invalid),b.Ab(2),b.ec("ngClass",b.ic(15,st,t.name.invalid&&(t.name.dirty||t.name.touched))),b.Ab(4),b.ec("ngIf",t.name.invalid&&(t.name.dirty||t.name.touched)&&t.name.errors.required),b.Ab(1),b.ec("ngIf",t.name.invalid&&(t.name.dirty||t.name.touched)&&t.name.errors.maxlength),b.Ab(12),b.ec("formGroup",t.formGroup),b.Ab(5),b.ec("ngIf",t.editing&&t.article),b.Ab(1),b.ec("ngIf",t.editing&&t.article))},directives:[u.n,u.i,r.k,r.i,u.b,u.m,u.g,B.a,u.a,D.a,H.a,me,r.j,Ve],styles:[""]}),ot),lt=c("8Qhy"),bt=c("a8fi"),dt=c("/AKn"),pt=c("Kjs6");function ft(e,t){1&e&&b.Mb(0,"div",8)}function vt(e,t){if(1&e&&b.Mb(0,"dd-http-errors",9),2&e){var n=b.Zb();b.ec("error",n.loadError)}}function ht(e,t){if(1&e){var n=b.Rb();b.Qb(0,"button",18),b.Xb("click",function(){return b.oc(n),b.Zb(2).viewOnMap()}),b.Mb(1,"i",19),b.Qb(2,"span",16),b.wc(3," Map"),b.Pb(),b.Pb()}}function mt(e,t){if(1&e){var n=b.Rb();b.Qb(0,"button",14),b.Xb("click",function(){return b.oc(n),b.Zb(2).edit()}),b.Mb(1,"i",20),b.Qb(2,"span",16),b.wc(3," Edit"),b.Pb(),b.Pb()}}function gt(e,t){if(1&e){var n=b.Rb();b.Qb(0,"div"),b.Qb(1,"div",10),b.Qb(2,"div",11),b.Qb(3,"h3"),b.wc(4),b.Pb(),b.Pb(),b.Qb(5,"div",12),b.vc(6,ht,4,0,"button",13),b.Qb(7,"button",14),b.Xb("click",function(){return b.oc(n),b.Zb().addNote()}),b.Mb(8,"i",15),b.Qb(9,"span",16),b.wc(10," Add Note"),b.Pb(),b.Pb(),b.vc(11,mt,4,0,"button",17),b.Pb(),b.Pb(),b.Pb()}if(2&e){var i=b.Zb();b.Ab(4),b.xc(i.article.name),b.Ab(2),b.ec("ngIf",null!==i.article.mapId),b.Ab(5),b.ec("ngIf",i.editable)}}function yt(e,t){if(1&e&&b.Mb(0,"dd-quill",21),2&e){var n=b.Zb();b.ec("value",n.article.content)}}function kt(e,t){1&e&&(b.Qb(0,"div",22),b.Qb(1,"p",23),b.wc(2,"This article has no content"),b.Pb(),b.Pb())}function wt(e,t){1&e&&(b.Qb(0,"h4"),b.wc(1,"Quests"),b.Pb())}function It(e,t){if(1&e){var n=b.Rb();b.Qb(0,"span",24),b.Xb("click",function(){return b.oc(n),b.Zb().questsExpanded=!0}),b.wc(1,"Show Quests"),b.Pb()}}function At(e,t){if(1&e&&b.Mb(0,"dd-article-quest-manager",26),2&e){var n=b.Zb(2);b.ec("article",n.article)("articleQuests",n.article.articleQuests)}}function Qt(e,t){if(1&e&&(b.Qb(0,"div"),b.vc(1,At,1,2,"dd-article-quest-manager",25),b.Pb()),2&e){var n=b.Zb();b.Ab(1),b.ec("ngIf",n.article)}}function Pt(e,t){if(1&e){var n=b.Rb();b.Qb(0,"span",24),b.Xb("click",function(){return b.oc(n),b.Zb().questsExpanded=!1}),b.wc(1,"Hide Quests"),b.Pb()}}function xt(e,t){if(1&e){var n=b.Rb();b.Qb(0,"span",24),b.Xb("click",function(){b.oc(n);var e=b.Zb().$implicit;return b.Zb().conceptTypesExpanded[e.id]=!0}),b.wc(1),b.Pb()}if(2&e){var i=b.Zb().$implicit;b.Ab(1),b.yc("Show ",i.pluralForm,"")}}function Ct(e,t){if(1&e&&b.Mb(0,"dd-article-concept-manager",28),2&e){var n=b.Zb().$implicit,i=b.Zb();b.ec("conceptType",n)("article",i.article)}}function St(e,t){if(1&e){var n=b.Rb();b.Qb(0,"span",24),b.Xb("click",function(){b.oc(n);var e=b.Zb().$implicit;return b.Zb().conceptTypesExpanded[e.id]=!1}),b.wc(1),b.Pb()}if(2&e){var i=b.Zb().$implicit;b.Ab(1),b.yc("Hide ",i.pluralForm,"")}}function Ot(e,t){if(1&e&&(b.Qb(0,"div"),b.Qb(1,"h4"),b.wc(2),b.Pb(),b.vc(3,xt,2,1,"span",6),b.vc(4,Ct,1,2,"dd-article-concept-manager",27),b.vc(5,St,2,1,"span",6),b.Pb()),2&e){var n=t.$implicit,i=b.Zb();b.Ab(2),b.xc(n.pluralForm),b.Ab(1),b.ec("ngIf",!i.conceptTypesExpanded[n.id]),b.Ab(1),b.ec("ngIf",!0===i.conceptTypesExpanded[n.id]),b.Ab(1),b.ec("ngIf",!0===i.conceptTypesExpanded[n.id])}}function Rt(e,t){if(1&e){var n=b.Rb();b.Qb(0,"span",24),b.Xb("click",function(){return b.oc(n),b.Zb(2).notesExpanded=!0}),b.wc(1,"Show Notes"),b.Pb()}}function Mt(e,t){if(1&e&&b.Mb(0,"dd-note-list",30),2&e){var n=b.Zb(2);b.ec("notes",n.notes)}}function qt(e,t){if(1&e){var n=b.Rb();b.Qb(0,"span",24),b.Xb("click",function(){return b.oc(n),b.Zb(2).notesExpanded=!1}),b.wc(1,"Hide Notes"),b.Pb()}}function Zt(e,t){if(1&e&&(b.Qb(0,"div"),b.Qb(1,"h4"),b.wc(2,"Notes"),b.Pb(),b.vc(3,Rt,2,0,"span",6),b.vc(4,Mt,1,1,"dd-note-list",29),b.vc(5,qt,2,0,"span",6),b.Pb()),2&e){var n=b.Zb();b.Ab(3),b.ec("ngIf",!0!==n.notesExpanded),b.Ab(1),b.ec("ngIf",n.notesExpanded),b.Ab(1),b.ec("ngIf",!0===n.notesExpanded)}}var Tt,Ft,Et,Lt=[{path:"",component:X},{path:"create",component:ut,canDeactivate:[lt.a],data:{editing:!1,breadcrumb:"Create Article"}},{path:":a_id/edit",component:ut,canDeactivate:[lt.a],data:{editing:!0,breadcrumb:"Edit Article"}},{path:":a_id",component:(Tt=function(){function t(n,i,c,r,a,o){e(this,t),this.articleService=n,this.route=i,this.router=c,this.campaignService=r,this.updateHub=a,this.noteService=o,this.loading=!1,this.questsExpanded=!1,this.notesExpanded=!1,this.conceptTypesExpanded={}}return n(t,[{key:"ngOnInit",value:function(){var e=this;this.route.paramMap.subscribe(function(t){t.has("a_id")&&(e.article&&e.updateHub.unsubscribeArticles([e.article.id]),e.updateHub.subscribeArticles([t.get("a_id")]),e.article=void 0,e.load(t.get("a_id")))}),this._updateSubscription=this.updateHub.articleUpdated.pipe(Object(ke.a)(function(t){return t.id===e.article.id})).subscribe(function(t){e.article=t}),this.updateHub.stateUpdate.pipe(Object(ke.a)(function(e){return e===ye.a.CONNECTED})).subscribe(function(){e.updateHub.subscribeArticles([e.route.snapshot.paramMap.get("a_id")])})}},{key:"ngOnDestroy",value:function(){this._updateSubscription&&this._updateSubscription.unsubscribe()}},{key:"load",value:function(e){return t=this,i=regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return this.loading=!0,t.prev=1,t.next=4,this.articleService.getArticle(e);case 4:this.article=t.sent,this.noteService.getNotes(this.campaignService.campaign.id,{articleId:this.article.id}),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),this.loadError=t.t0,console.log(t.t0);case 11:this.loading=!1;case 12:case"end":return t.stop()}},t,this,[[1,8]])}),new((n=void 0)||(n=Promise))(function(e,c){function r(e){try{o(i.next(e))}catch(t){c(t)}}function a(e){try{o(i.throw(e))}catch(t){c(t)}}function o(t){var i;t.done?e(t.value):(i=t.value,i instanceof n?i:new n(function(e){e(i)})).then(r,a)}o((i=i.apply(t,[])).next())});var t,n,i}},{key:"edit",value:function(){this.router.navigate(["campaigns",this.campaignService.campaign.id,"articles",this.article.id,"edit"])}},{key:"viewOnMap",value:function(){this.router.navigate(["campaigns",this.campaignService.campaign.id,"maps",this.article.mapId],{queryParams:{lat:this.article.lat,lng:this.article.lng,article:this.article.id}})}},{key:"addNote",value:function(){this.noteService.addNote({type:bt.b.ARTICLE,articleId:this.article.id})}},{key:"editable",get:function(){return this.campaignService.canEdit}},{key:"conceptTypes",get:function(){var e=this;if(this.article){var t={};return this.article.articleConcepts.forEach(function(n){t[n.concept.conceptTypeId]||(t[n.concept.conceptTypeId]=e.campaignService.campaign.conceptTypes.find(function(e){return e.id===n.concept.conceptTypeId}))}),Object.values(t)}return[]}},{key:"notes",get:function(){return this.article?this.noteService.getArticleNotes(this.article.id):[]}}]),t}(),Tt.\u0275fac=function(e){return new(e||Tt)(b.Lb(o.a),b.Lb(a.a),b.Lb(a.c),b.Lb(s.b),b.Lb(ye.b),b.Lb(bt.a))},Tt.\u0275cmp=b.Fb({type:Tt,selectors:[["dd-article-view"]],decls:12,vars:11,consts:[[1,"container","grid-lg"],["class","loading loading-lg",4,"ngIf"],[3,"error",4,"ngIf"],[4,"ngIf"],["readOnly","true",3,"value",4,"ngIf"],["class","empty",4,"ngIf"],["class","fake-link",3,"click",4,"ngIf"],[4,"ngFor","ngForOf"],[1,"loading","loading-lg"],[3,"error"],[1,"columns"],[1,"column"],[1,"column","col-auto"],["class","btn btn-sm",3,"click",4,"ngIf"],[1,"btn","btn-sm","ml-2",3,"click"],[1,"icon","icon-link"],[1,"hide-sm"],["class","btn btn-sm ml-2",3,"click",4,"ngIf"],[1,"btn","btn-sm",3,"click"],[1,"icon","icon-location"],[1,"icon","icon-edit"],["readOnly","true",3,"value"],[1,"empty"],[1,"empty-subtitle"],[1,"fake-link",3,"click"],[3,"article","articleQuests",4,"ngIf"],[3,"article","articleQuests"],[3,"conceptType","article",4,"ngIf"],[3,"conceptType","article"],[3,"notes",4,"ngIf"],[3,"notes"]],template:function(e,t){1&e&&(b.Qb(0,"div",0),b.vc(1,ft,1,0,"div",1),b.vc(2,vt,1,1,"dd-http-errors",2),b.vc(3,gt,12,3,"div",3),b.vc(4,yt,1,1,"dd-quill",4),b.vc(5,kt,3,0,"div",5),b.vc(6,wt,2,0,"h4",3),b.vc(7,It,2,0,"span",6),b.vc(8,Qt,2,1,"div",3),b.vc(9,Pt,2,0,"span",6),b.vc(10,Ot,6,4,"div",7),b.vc(11,Zt,6,3,"div",3),b.Pb()),2&e&&(b.Ab(1),b.ec("ngIf",t.loading),b.Ab(1),b.ec("ngIf",t.loadError),b.Ab(1),b.ec("ngIf",t.article),b.Ab(1),b.ec("ngIf",t.article),b.Ab(1),b.ec("ngIf",!(void 0===t.article||t.article.content&&t.article.content.ops)),b.Ab(1),b.ec("ngIf",t.article&&t.article.articleQuests.length>0),b.Ab(1),b.ec("ngIf",t.article&&t.article.articleQuests.length>0&&!t.questsExpanded),b.Ab(1),b.ec("ngIf",t.article&&t.article.articleQuests.length>0&&t.questsExpanded),b.Ab(1),b.ec("ngIf",t.article&&t.article.articleQuests.length>0&&t.questsExpanded),b.Ab(1),b.ec("ngForOf",t.conceptTypes),b.Ab(1),b.ec("ngIf",t.notes.length>0))},directives:[r.k,r.j,dt.a,B.a,me,Ve,pt.a],styles:[""]}),Tt),data:{breadcrumb:"Article View",suggestable:!0}}],_t=((Ft=function t(){e(this,t)}).\u0275mod=b.Jb({type:Ft}),Ft.\u0275inj=b.Ib({factory:function(e){return new(e||Ft)},imports:[[a.f.forChild(Lt)],a.f]}),Ft),Xt=c("wC5x"),Nt=c("reMG"),Gt=c("EA6F"),jt=((Et=function t(){e(this,t)}).\u0275mod=b.Jb({type:Et}),Et.\u0275inj=b.Ib({factory:function(e){return new(e||Et)},imports:[[r.b,_t,Xt.a,Nt.NotesModule,u.s,Gt.a]]}),Et)}}])}();