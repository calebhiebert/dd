(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{"+awi":function(l,n,u){"use strict";u.d(n,"a",function(){return t});var t=function(){function l(){}return l.prototype.ngOnInit=function(){},Object.defineProperty(l.prototype,"errors",{get:function(){return this.control.errors},enumerable:!0,configurable:!0}),l}()},"+p2H":function(l,n,u){"use strict";var t=u("CcnG"),e=u("IeLf"),i=u("gIcY"),o=u("WNRK"),r=u("uCWu"),a=u("rZgH"),c=u("edGd"),s=u("ZYCi"),p=u("t/Na"),b=u("Lqte"),d=u("n10a"),f=u("MICr"),h=u("Ip0R"),g=u("AteQ"),m=u("a8fi");u.d(n,"a",function(){return A});var v=t.ob({encapsulation:0,styles:[[".note-display[_ngcontent-%COMP%]{white-space:pre-line}"]],data:{}});function y(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,2,"div",[["class","column col-auto pr-1 d-flex align-items-center"]],null,null,null,null,null)),(l()(),t.qb(1,0,null,null,1,"figure",[["class","avatar avatar-xs"]],null,null,null,null,null)),(l()(),t.qb(2,0,null,null,0,"img",[["alt","User Image"]],[[8,"src",4]],null,null,null,null))],null,function(l,n){l(n,2,0,n.component.user.pictureURL)})}function C(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,2,"div",[["class","column d-flex align-items-center"]],null,null,null,null,null)),(l()(),t.qb(1,0,null,null,1,"span",[],null,null,null,null,null)),(l()(),t.Ib(2,null,["",""]))],null,function(l,n){l(n,2,0,n.component.user.username)})}function I(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,2,"div",[["class","mt-2"]],null,null,null,null,null)),(l()(),t.qb(1,0,null,null,1,"a",[["class","c-hand"]],null,[[null,"click"]],function(l,n,u){var t=!0,e=l.component;return"click"===n&&(t=!1!==e.edit()&&t),t},null,null)),(l()(),t.Ib(-1,null,["Edit"]))],null,null)}function q(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,13,"div",[],null,null,null,null,null)),(l()(),t.qb(1,0,null,null,2,"dd-quill",[["readOnly","true"]],null,null,null,e.b,e.a)),t.Fb(5120,null,i.o,function(l){return[l]},[o.a]),t.pb(3,1163264,null,0,o.a,[r.b,a.a,c.a,s.k,p.c,b.b,d.a,f.a],{readOnly:[0,"readOnly"],value:[1,"value"]},null),(l()(),t.qb(4,0,null,null,9,"div",[["class","columns"]],null,null,null,null,null)),(l()(),t.qb(5,0,null,null,5,"div",[["class","column"]],null,null,null,null,null)),(l()(),t.qb(6,0,null,null,4,"div",[["class","columns col-gapless mt-2"]],null,null,null,null,null)),(l()(),t.hb(16777216,null,null,1,null,y)),t.pb(8,16384,null,0,h.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null),(l()(),t.hb(16777216,null,null,1,null,C)),t.pb(10,16384,null,0,h.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null),(l()(),t.qb(11,0,null,null,2,"div",[["class","column col-auto col-ml-auto"]],null,null,null,null,null)),(l()(),t.hb(16777216,null,null,1,null,I)),t.pb(13,16384,null,0,h.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null)],function(l,n){var u=n.component;l(n,3,0,"true",u.note.content),l(n,8,0,u.user),l(n,10,0,u.user),l(n,13,0,u.editable)},null)}function k(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,1,"dd-note-view-mini",[],null,null,null,q,v)),t.pb(1,114688,null,0,g.a,[r.b,c.a,m.a],null,null)],function(l,n){l(n,1,0)},null)}var A=t.mb("dd-note-view-mini",g.a,k,{note:"note"},{},[])},"/AKn":function(l,n,u){"use strict";u.d(n,"a",function(){return e});var t=function(l){return l[l.UNKNOWN_ERROR=0]="UNKNOWN_ERROR",l[l.HTTP_404=1]="HTTP_404",l[l.HTTP_403=2]="HTTP_403",l}({}),e=function(){function l(){}return l.prototype.ngOnInit=function(){this.parseError(this.error)},l.prototype.parseError=function(l){null!=l&&(l.status&&404===l.status?this.errType=t.HTTP_404:l.status&&403===l.status?this.errType=t.HTTP_403:console.log(l))},Object.defineProperty(l.prototype,"title",{get:function(){switch(this.errType){case t.HTTP_404:return"404";case t.HTTP_403:return"403";case t.UNKNOWN_ERROR:return"Oh Dear";default:return""}},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"text",{get:function(){switch(this.errType){case t.HTTP_404:return"The thing you are looking for appears to be missing";case t.HTTP_403:return"You're not allowed to do whatever it is you are trying to do";case t.UNKNOWN_ERROR:return"Not sure what went wrong here";default:return""}},enumerable:!0,configurable:!0}),l}()},"/fvA":function(l,n,u){"use strict";u.d(n,"a",function(){return a});var t=u("AytR"),e=u("CcnG"),i=u("t/Na"),o=function(l,n,u,t){return new(u||(u=Promise))(function(e,i){function o(l){try{a(t.next(l))}catch(n){i(n)}}function r(l){try{a(t.throw(l))}catch(n){i(n)}}function a(l){l.done?e(l.value):new u(function(n){n(l.value)}).then(o,r)}a((t=t.apply(l,n||[])).next())})},r=function(l,n){var u,t,e,i,o={label:0,sent:function(){if(1&e[0])throw e[1];return e[1]},trys:[],ops:[]};return i={next:r(0),throw:r(1),return:r(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function r(i){return function(r){return function(i){if(u)throw new TypeError("Generator is already executing.");for(;o;)try{if(u=1,t&&(e=2&i[0]?t.return:i[0]?t.throw||((e=t.return)&&e.call(t),0):t.next)&&!(e=e.call(t,i[1])).done)return e;switch(t=0,e&&(i=[2&i[0],e.value]),i[0]){case 0:case 1:e=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,t=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!(e=(e=o.trys).length>0&&e[e.length-1])&&(6===i[0]||2===i[0])){o=0;continue}if(3===i[0]&&(!e||i[1]>e[0]&&i[1]<e[3])){o.label=i[1];break}if(6===i[0]&&o.label<e[1]){o.label=e[1],e=i;break}if(e&&o.label<e[2]){o.label=e[2],o.ops.push(i);break}e[2]&&o.ops.pop(),o.trys.pop();continue}i=n.call(l,o)}catch(r){i=[6,r],t=0}finally{u=e=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,r])}}},a=function(){function l(l){this.http=l}return l.prototype.getConceptType=function(l){return this.http.get(t.a.apiURL+"/concepttypes/"+l).toPromise()},l.prototype.createConceptType=function(l){return this.http.post(t.a.apiURL+"/concepttypes",l).toPromise()},l.prototype.updateConceptType=function(l){return this.http.put(t.a.apiURL+"/concepttypes/"+l.id,l).toPromise()},l.prototype.deleteConceptType=function(l){return this.http.delete(t.a.apiURL+"/concepttypes/"+l).toPromise()},l.prototype.getConcept=function(l){return this.http.get(t.a.apiURL+"/concepts/"+l).toPromise()},l.prototype.getConcepts=function(l,n,u,e){null==n||n<=0?n=10:n>50&&(n=50),(null==u||u<0)&&(u=0);var i="";return null!=e&&e.trim().length>0&&(i="&search="+encodeURIComponent(e)),this.http.get(t.a.apiURL+"/concepts?type="+l+"&limit="+n+"&offset="+u+i).toPromise()},l.prototype.getConceptHistory=function(l){return this.http.get(t.a.apiURL+"/concepts/"+l+"/history").toPromise()},l.prototype.restoreConcept=function(l,n){return this.http.post(t.a.apiURL+"/concepts/"+l+"/restore/"+n,null).toPromise()},l.prototype.createConcept=function(l){return this.http.post(t.a.apiURL+"/concepts",l).toPromise()},l.prototype.updateConcept=function(l){return this.http.put(t.a.apiURL+"/concepts/"+l.id,l).toPromise()},l.prototype.deleteConcept=function(l){return this.http.delete(t.a.apiURL+"/concepts/"+l).toPromise()},l.prototype.getConceptEntities=function(l,n){return o(this,void 0,void 0,function(){return r(this,function(u){return[2,this.http.get(t.a.apiURL+"/conceptentities?entityId="+l+"&conceptTypeId="+n).toPromise()]})})},l.prototype.updateConceptEntity=function(l){return o(this,void 0,void 0,function(){return r(this,function(n){return[2,this.http.put(t.a.apiURL+"/conceptentities",l).toPromise()]})})},l.prototype.updateConceptEntities=function(l,n){return o(this,void 0,void 0,function(){return r(this,function(u){return[2,this.http.put(t.a.apiURL+"/conceptentities/multi",{conceptEntities:l,entityId:n}).toPromise()]})})},l.prototype.deleteConceptEntity=function(l,n){return o(this,void 0,void 0,function(){return r(this,function(u){return[2,this.http.delete(t.a.apiURL+"/conceptentities/"+l+"/concept/"+n).toPromise()]})})},l.ngInjectableDef=e.T({factory:function(){return new l(e.X(i.c))},token:l,providedIn:"root"}),l}()},0:function(l,n,u){l.exports=u("zUnb")},"0ezk":function(l,n,u){"use strict";u.d(n,"a",function(){return t}),u("btaL"),u("uCWu");var t=function(){function l(l,n){this.currencyService=l,this.campaignService=n,this.blankValue="nothing"}return Object.defineProperty(l.prototype,"sortedLevels",{get:function(){return this.levels?this.levels.sort(function(l,n){return n.value-l.value}):[]},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"text",{get:function(){return this.currency?0===(l=!0===this.trackCoins?this.currencyService.mapCoinValues(this.sortedLevels,this.currency.values):this.currencyService.mapCurrencyValues(this.sortedLevels,this.currency.value)).length?'<span class="currency-text">'+this.blankValue+"</span>":this.currencyService.getCurrencyHTMLString(l):'<span class="currency-text">'+this.blankValue+"</span>";var l},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"levels",{get:function(){return this.campaignService.campaign.currencyMap||[{value:1,name:"gp",useInConversions:!0}]},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"trackCoins",{get:function(){return this.campaignService.campaign.trackCoins},enumerable:!0,configurable:!0}),l}()},"1Kyw":function(l,n,u){"use strict";var t=u("CcnG"),e=u("jORH"),i=u("/AKn"),o=u("Ip0R"),r=u("W/nz"),a=u("ZYjt"),c=u("uCWu"),s=function(){function l(l){this.campaignService=l,this.select=new t.m}return l.prototype.ngOnInit=function(){},l.prototype.doSelect=function(){this.select.emit(this.note)},Object.defineProperty(l.prototype,"user",{get:function(){var l=this;return this.campaignService.campaign.members.find(function(n){return n.userId===l.note.userId}).user},enumerable:!0,configurable:!0}),l}(),p=t.ob({encapsulation:0,styles:[[""]],data:{}});function b(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,0,"i",[["class","icon icon-edit ml-1"]],null,null,null,null,null))],null,null)}function d(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,0,"i",[["class","icon icon-bookmark ml-1"]],null,null,null,null,null))],null,null)}function f(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,0,"i",[["class","icon icon-flag ml-1"]],null,null,null,null,null))],null,null)}function h(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,0,"i",[["class","icon icon-location ml-1"]],null,null,null,null,null))],null,null)}function g(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,15,"div",[["class","card p-1 hoverable"]],null,[[null,"click"]],function(l,n,u){var t=!0,e=l.component;return"click"===n&&(t=!1!==e.doSelect()&&t),t},null,null)),(l()(),t.qb(1,0,null,null,14,"div",[["class","columns col-gapless"]],null,null,null,null,null)),(l()(),t.qb(2,0,null,null,1,"div",[["class","column"]],null,null,null,null,null)),(l()(),t.Ib(3,null,["",""])),(l()(),t.qb(4,0,null,null,8,"div",[["class","column col-auto d-flex align-items-center ml-1"]],null,null,null,null,null)),(l()(),t.hb(16777216,null,null,1,null,b)),t.pb(6,16384,null,0,o.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null),(l()(),t.hb(16777216,null,null,1,null,d)),t.pb(8,16384,null,0,o.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null),(l()(),t.hb(16777216,null,null,1,null,f)),t.pb(10,16384,null,0,o.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null),(l()(),t.hb(16777216,null,null,1,null,h)),t.pb(12,16384,null,0,o.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null),(l()(),t.qb(13,0,null,null,2,"div",[["class","column col-auto text-gray text-italic text-right ml-1"]],null,null,null,null,null)),(l()(),t.qb(14,0,null,null,1,"div",[],[[8,"innerHTML",1]],null,null,null,null)),t.pb(15,16384,null,0,r.a,[a.c],{user:[0,"user"]},null)],function(l,n){var u=n.component;l(n,6,0,u.note.publicEdit),l(n,8,0,u.note.articleId),l(n,10,0,u.note.questId),l(n,12,0,u.note.mapId),l(n,15,0,u.user)},function(l,n){l(n,3,0,n.component.note.title),l(n,14,0,t.Ab(n,15).html)})}var m=u("QMBs"),v=u("a8fi");u.d(n,"a",function(){return M});var y=t.ob({encapsulation:0,styles:[[""]],data:{}});function C(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,0,"div",[["class","loading loading-lg"]],null,null,null,null,null))],null,null)}function I(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,1,"dd-http-errors",[],null,null,null,e.b,e.a)),t.pb(1,114688,null,0,i.a,[],{error:[0,"error"]},null)],function(l,n){l(n,1,0,n.component.loadErr)},null)}function q(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,2,"div",[["class","column col-3 col-md-4 col-sm-6 p-1 col-xs-12"]],null,null,null,null,null)),(l()(),t.qb(1,0,null,null,1,"dd-note-list-item",[],null,[[null,"select"]],function(l,n,u){var t=!0,e=l.component;return"select"===n&&(t=!1!==e.selectNote(u)&&t),t},g,p)),t.pb(2,114688,null,0,s,[c.b],{note:[0,"note"]},{select:"select"})],function(l,n){l(n,2,0,n.context.$implicit)},null)}function k(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,2,"div",[["class","columns col-gapless"]],null,null,null,null,null)),(l()(),t.hb(16777216,null,null,1,null,q)),t.pb(2,278528,null,0,o.j,[t.P,t.M,t.t],{ngForOf:[0,"ngForOf"]},null)],function(l,n){l(n,2,0,n.component.sortedNotes.other)},null)}function A(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,2,"div",[["class","column col-3 col-md-4 col-sm-6 p-1 col-xs-12"]],null,null,null,null,null)),(l()(),t.qb(1,0,null,null,1,"dd-note-list-item",[],null,[[null,"select"]],function(l,n,u){var t=!0,e=l.component;return"select"===n&&(t=!1!==e.selectNote(u)&&t),t},g,p)),t.pb(2,114688,null,0,s,[c.b],{note:[0,"note"]},{select:"select"})],function(l,n){l(n,2,0,n.context.$implicit)},null)}function w(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,2,"div",[["class","columns col-gapless"]],null,null,null,null,null)),(l()(),t.hb(16777216,null,null,1,null,A)),t.pb(2,278528,null,0,o.j,[t.P,t.M,t.t],{ngForOf:[0,"ngForOf"]},null)],function(l,n){l(n,2,0,n.component.sortedNotes.quest)},null)}function P(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,2,"div",[["class","column col-3 col-md-4 col-sm-6 p-1 col-xs-12"]],null,null,null,null,null)),(l()(),t.qb(1,0,null,null,1,"dd-note-list-item",[],null,[[null,"select"]],function(l,n,u){var t=!0,e=l.component;return"select"===n&&(t=!1!==e.selectNote(u)&&t),t},g,p)),t.pb(2,114688,null,0,s,[c.b],{note:[0,"note"]},{select:"select"})],function(l,n){l(n,2,0,n.context.$implicit)},null)}function x(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,2,"div",[["class","columns col-gapless"]],null,null,null,null,null)),(l()(),t.hb(16777216,null,null,1,null,P)),t.pb(2,278528,null,0,o.j,[t.P,t.M,t.t],{ngForOf:[0,"ngForOf"]},null)],function(l,n){l(n,2,0,n.component.sortedNotes.article)},null)}function E(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,2,"div",[["class","column col-3 col-md-4 col-sm-6 p-1 col-xs-12"]],null,null,null,null,null)),(l()(),t.qb(1,0,null,null,1,"dd-note-list-item",[],null,[[null,"select"]],function(l,n,u){var t=!0,e=l.component;return"select"===n&&(t=!1!==e.selectNote(u)&&t),t},g,p)),t.pb(2,114688,null,0,s,[c.b],{note:[0,"note"]},{select:"select"})],function(l,n){l(n,2,0,n.context.$implicit)},null)}function T(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,2,"div",[["class","columns col-gapless"]],null,null,null,null,null)),(l()(),t.hb(16777216,null,null,1,null,E)),t.pb(2,278528,null,0,o.j,[t.P,t.M,t.t],{ngForOf:[0,"ngForOf"]},null)],function(l,n){l(n,2,0,n.component.sortedNotes.map)},null)}function S(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,20,"div",[["class","container grid-xl"]],null,null,null,null,null)),(l()(),t.qb(1,0,null,null,4,"div",[["class","columns"]],null,null,null,null,null)),(l()(),t.qb(2,0,null,null,2,"div",[["class","column"]],null,null,null,null,null)),(l()(),t.qb(3,0,null,null,1,"h3",[],null,null,null,null,null)),(l()(),t.Ib(-1,null,["Notebook"])),(l()(),t.qb(5,0,null,null,0,"div",[["class","column col-auto"]],null,null,null,null,null)),(l()(),t.hb(16777216,null,null,1,null,C)),t.pb(7,16384,null,0,o.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null),(l()(),t.hb(16777216,null,null,1,null,I)),t.pb(9,16384,null,0,o.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null),(l()(),t.hb(16777216,null,null,1,null,k)),t.pb(11,16384,null,0,o.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null),(l()(),t.qb(12,0,null,null,0,"div",[["class","divider text-center"],["data-content","Quest Notes"]],null,null,null,null,null)),(l()(),t.hb(16777216,null,null,1,null,w)),t.pb(14,16384,null,0,o.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null),(l()(),t.qb(15,0,null,null,0,"div",[["class","divider text-center"],["data-content","Article Notes"]],null,null,null,null,null)),(l()(),t.hb(16777216,null,null,1,null,x)),t.pb(17,16384,null,0,o.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null),(l()(),t.qb(18,0,null,null,0,"div",[["class","divider text-center"],["data-content","Map Notes"]],null,null,null,null,null)),(l()(),t.hb(16777216,null,null,1,null,T)),t.pb(20,16384,null,0,o.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null)],function(l,n){var u=n.component;l(n,7,0,u.loading),l(n,9,0,u.loadErr),l(n,11,0,u.sortedNotes),l(n,14,0,u.sortedNotes),l(n,17,0,u.sortedNotes),l(n,20,0,u.sortedNotes)},null)}function O(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,1,"dd-note-manager",[],null,null,null,S,y)),t.pb(1,114688,null,0,m.a,[c.b,v.a],null,null)],function(l,n){l(n,1,0)},null)}var M=t.mb("dd-note-manager",m.a,O,{},{},[])},"1p7a":function(l,n,u){"use strict";var t=u("CcnG"),e=u("Ip0R"),i=u("tZWP"),o=u("y4Wg"),r=u("YeDP"),a=u("6awz"),c=u("uCWu"),s=u("ZYCi");u.d(n,"a",function(){return w});var p=t.ob({encapsulation:0,styles:[[""]],data:{}});function b(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,4,"div",[["class","column col-auto"]],null,null,null,null,null)),(l()(),t.qb(1,0,null,null,3,"button",[["class","btn btn-sm"]],null,[[null,"click"]],function(l,n,u){var t=!0,e=l.component;return"click"===n&&(t=!1!==e.newMap()&&t),t},null,null)),(l()(),t.qb(2,0,null,null,0,"i",[["class","icon icon-plus"]],null,null,null,null,null)),(l()(),t.qb(3,0,null,null,1,"span",[["class","hide-sm"]],null,null,null,null,null)),(l()(),t.Ib(-1,null,[" New Map"]))],null,null)}function d(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,0,"div",[["class","loading loading-lg"]],null,null,null,null,null))],null,null)}function f(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,1,"p",[["class","empty-subtitle"]],null,null,null,null,null)),(l()(),t.Ib(-1,null,[" Click the button to create one. "]))],null,null)}function h(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,2,"div",[["class","empty-action"]],null,null,null,null,null)),(l()(),t.qb(1,0,null,null,1,"button",[["class","btn btn-primary"]],null,[[null,"click"]],function(l,n,u){var t=!0,e=l.component;return"click"===n&&(t=!1!==e.newMap()&&t),t},null,null)),(l()(),t.Ib(-1,null,["New Map"]))],null,null)}function g(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,8,"div",[["class","empty"]],null,null,null,null,null)),(l()(),t.qb(1,0,null,null,1,"div",[["class","empty-icon"]],null,null,null,null,null)),(l()(),t.qb(2,0,null,null,0,"i",[["class","icon icon-search icon-4x"]],null,null,null,null,null)),(l()(),t.qb(3,0,null,null,1,"p",[["class","empty-title h5"]],null,null,null,null,null)),(l()(),t.Ib(-1,null,["There are no maps"])),(l()(),t.hb(16777216,null,null,1,null,f)),t.pb(6,16384,null,0,e.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null),(l()(),t.hb(16777216,null,null,1,null,h)),t.pb(8,16384,null,0,e.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null)],function(l,n){var u=n.component;l(n,6,0,u.editable),l(n,8,0,u.editable)},null)}function m(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,2,"div",[["class","column"]],null,null,null,null,null)),(l()(),t.qb(1,0,null,null,1,"h5",[["class","text-gray"]],null,null,null,null,null)),(l()(),t.Ib(2,null,[""," (Processing)"]))],null,function(l,n){l(n,2,0,n.parent.context.$implicit.name)})}function v(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,2,"div",[["class","column"]],null,[[null,"click"]],function(l,n,u){var t=!0,e=l.component;return"click"===n&&(t=!1!==e.selectMap(l.parent.context.$implicit)&&t),t},null,null)),(l()(),t.qb(1,0,null,null,1,"h5",[],null,null,null,null,null)),(l()(),t.Ib(2,null,["",""]))],null,function(l,n){l(n,2,0,n.parent.context.$implicit.name)})}function y(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,8,"div",[["class","column col-auto"]],null,null,null,null,null)),(l()(),t.qb(1,0,null,null,3,"button",[["class","btn btn-sm mr-2"]],null,[[null,"click"]],function(l,n,u){var t=!0,e=l.component;return"click"===n&&(t=!1!==e.delete(l.parent.context.$implicit)&&t),t},null,null)),(l()(),t.qb(2,0,null,null,0,"i",[["class","icon icon-delete"]],null,null,null,null,null)),(l()(),t.qb(3,0,null,null,1,"span",[["class","hide-sm"]],null,null,null,null,null)),(l()(),t.Ib(-1,null,[" Delete"])),(l()(),t.qb(5,0,null,null,3,"button",[["class","btn btn-sm"],["disabled",""]],null,null,null,null,null)),(l()(),t.qb(6,0,null,null,0,"i",[["class","icon icon-edit"]],null,null,null,null,null)),(l()(),t.qb(7,0,null,null,1,"span",[["class","hide-sm"]],null,null,null,null,null)),(l()(),t.Ib(-1,null,[" Edit"]))],null,null)}function C(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,11,"div",[["class","card p-2 mb-2"]],null,null,null,null,null)),t.pb(1,278528,null,0,e.i,[t.t,t.u,t.k,t.E],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),t.Db(2,{hoverable:0}),(l()(),t.qb(3,0,null,null,8,"div",[["class","columns"]],null,null,null,null,null)),(l()(),t.qb(4,0,null,null,1,"div",[["class","column col-auto"]],null,[[null,"click"]],function(l,n,u){var t=!0,e=l.component;return"click"===n&&(t=!1!==e.selectMap(l.context.$implicit)&&t),t},null,null)),(l()(),t.qb(5,0,null,null,0,"img",[["alt","Map Fallback Picture"],["class","s-rounded"],["src","https://res.cloudinary.com/dqhk8k6iv/image/upload/t_thumb/map-default"],["width","32"]],null,null,null,null,null)),(l()(),t.hb(16777216,null,null,1,null,m)),t.pb(7,16384,null,0,e.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null),(l()(),t.hb(16777216,null,null,1,null,v)),t.pb(9,16384,null,0,e.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null),(l()(),t.hb(16777216,null,null,1,null,y)),t.pb(11,16384,null,0,e.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null)],function(l,n){var u=n.component,t=l(n,2,0,1===n.context.$implicit.status);l(n,1,0,"card p-2 mb-2",t),l(n,7,0,0===n.context.$implicit.status),l(n,9,0,1===n.context.$implicit.status),l(n,11,0,u.editable)},null)}function I(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,1,"dd-paginator",[["itemsPerPage","10"]],null,[[null,"pageChange"]],function(l,n,u){var t=!0,e=l.component;return"pageChange"===n&&(t=!1!==(e.page=u)&&t),t},i.b,i.a)),t.pb(1,114688,null,0,o.a,[],{totalItems:[0,"totalItems"],itemsPerPage:[1,"itemsPerPage"],page:[2,"page"],autoHide:[3,"autoHide"]},{pageChange:"pageChange"})],function(l,n){var u=n.component;l(n,1,0,u.totalMaps,"10",u.page,!1)},null)}function q(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,4,"div",[],null,null,null,null,null)),(l()(),t.hb(16777216,null,null,1,null,C)),t.pb(2,278528,null,0,e.j,[t.P,t.M,t.t],{ngForOf:[0,"ngForOf"]},null),(l()(),t.hb(16777216,null,null,1,null,I)),t.pb(4,16384,null,0,e.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null)],function(l,n){var u=n.component;l(n,2,0,u.maps),l(n,4,0,u.maps&&u.maps.length>0)},null)}function k(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,12,"div",[["class","container grid-xl"]],null,null,null,null,null)),(l()(),t.qb(1,0,null,null,5,"div",[["class","columns"]],null,null,null,null,null)),(l()(),t.qb(2,0,null,null,2,"div",[["class","column"]],null,null,null,null,null)),(l()(),t.qb(3,0,null,null,1,"h3",[],null,null,null,null,null)),(l()(),t.Ib(-1,null,["Maps"])),(l()(),t.hb(16777216,null,null,1,null,b)),t.pb(6,16384,null,0,e.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null),(l()(),t.hb(16777216,null,null,1,null,d)),t.pb(8,16384,null,0,e.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null),(l()(),t.hb(16777216,null,null,1,null,g)),t.pb(10,16384,null,0,e.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null),(l()(),t.hb(16777216,null,null,1,null,q)),t.pb(12,16384,null,0,e.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null)],function(l,n){var u=n.component;l(n,6,0,u.editable),l(n,8,0,u.loading),l(n,10,0,u.maps&&0===u.maps.length),l(n,12,0,u.maps)},null)}function A(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,1,"dd-map-manager",[],null,null,null,k,p)),t.pb(1,114688,null,0,r.a,[a.a,c.b,s.k],null,null)],function(l,n){l(n,1,0)},null)}var w=t.mb("dd-map-manager",r.a,A,{},{},[])},"6awz":function(l,n,u){"use strict";u.d(n,"a",function(){return o}),u.d(n,"b",function(){return r});var t=u("AytR"),e=u("CcnG"),i=u("t/Na"),o=function(){function l(l){this.http=l}return l.prototype.getMaps=function(l,n,u,e){void 0===n&&(n=10),void 0===u&&(u=0);var i="";return e&&(i="&search="+encodeURIComponent(e)),this.http.get(t.a.apiURL+"/maps?campaignId="+l+"&limit="+n+"&offset="+u+i).toPromise()},l.prototype.getMap=function(l){return this.http.get(t.a.apiURL+"/maps/"+l).toPromise()},l.prototype.deleteMap=function(l){return this.http.delete(t.a.apiURL+"/maps/"+l).toPromise()},l.prototype.updateMap=function(l){return this.http.put(t.a.apiURL+"/maps/"+l.id,l).toPromise()},l.ngInjectableDef=e.T({factory:function(){return new l(e.X(i.c))},token:l,providedIn:"root"}),l}(),r=function(l){return l[l.POLYLINE=0]="POLYLINE",l[l.CIRCLE=1]="CIRCLE",l[l.MARKER=2]="MARKER",l[l.POLYGON=3]="POLYGON",l[l.RECTANGLE=4]="RECTANGLE",l}({})},"6dNQ":function(l,n,u){"use strict";var t=u("CcnG"),e=u("ny3C"),i=u("ygrl"),o=u("Ip0R"),r=(u("gIcY"),u("kNgC"));u("MICr"),u.d(n,"a",function(){return a}),u.d(n,"b",function(){return p});var a=t.ob({encapsulation:0,styles:[[".picker-box[_ngcontent-%COMP%]{width:50px;height:50px;padding:5px;border:.05rem solid #dadee4;border-radius:.1rem;cursor:pointer}.picker-box.disabled[_ngcontent-%COMP%]{background-color:#f7f7f9}"]],data:{}});function c(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,1,"div",[["class","column col-3 hoverable text-center"]],null,[[null,"click"]],function(l,n,u){var t=!0,e=l.component;return"click"===n&&(t=!1!==e.selectIcon(l.context.$implicit)&&t),t},null,null)),(l()(),t.qb(1,0,null,null,0,"img",[],[[8,"src",4]],null,null,null,null))],null,function(l,n){l(n,1,0,n.context.$implicit.src)})}function s(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,0,"img",[],[[8,"src",4]],null,null,null,null))],null,function(l,n){l(n,0,0,n.component.selectedIconSrc)})}function p(l){return t.Kb(0,[t.Gb(402653184,1,{_modal:0}),(l()(),t.qb(1,0,null,null,8,"dd-modal",[["size","small"]],null,null,null,e.b,e.a)),t.pb(2,114688,[[1,4],["modal",4]],0,i.a,[],{size:[0,"size"]},null),(l()(),t.qb(3,0,null,0,2,"div",[["modal-header",""]],null,null,null,null,null)),(l()(),t.qb(4,0,null,null,1,"span",[["class","fake-link"]],null,[[null,"click"]],function(l,n,u){var t=!0,e=l.component;return"click"===n&&(t=!1!==e.clear()&&t),t},null,null)),(l()(),t.Ib(-1,null,["Clear Icon"])),(l()(),t.qb(6,0,null,1,3,"div",[["modal-body",""]],null,null,null,null,null)),(l()(),t.qb(7,0,null,null,2,"div",[["class","columns"]],null,null,null,null,null)),(l()(),t.hb(16777216,null,null,1,null,c)),t.pb(9,278528,null,0,o.j,[t.P,t.M,t.t],{ngForOf:[0,"ngForOf"],ngForTrackBy:[1,"ngForTrackBy"]},null),(l()(),t.qb(10,0,null,null,4,"div",[["class","picker-box"]],null,[[null,"click"]],function(l,n,u){var t=!0,e=l.component;return"click"===n&&(t=!1!==e.openPicker()&&t),t},null,null)),t.pb(11,278528,null,0,o.i,[t.t,t.u,t.k,t.E],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),t.Db(12,{disabled:0}),(l()(),t.hb(16777216,null,null,1,null,s)),t.pb(14,16384,null,0,o.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null)],function(l,n){var u=n.component;l(n,2,0,"small"),l(n,9,0,u.icons,u.trackIcon);var t=l(n,12,0,u.isDisabled);l(n,11,0,"picker-box",t),l(n,14,0,u.selectedIconSrc)},null)}r.a},"7IS7":function(l,n,u){"use strict";var t=u("CcnG"),e=u("ny3C"),i=u("ygrl"),o=u("gIcY"),r=u("qcJQ"),a=u("uCWu"),c=u("Ip0R");u.d(n,"a",function(){return s}),u.d(n,"b",function(){return k});var s=t.ob({encapsulation:0,styles:[[".bar-animated[_ngcontent-%COMP%]{transition:all .4s ease-in-out!important}[_nghost-%COMP%]{height:100%}.bar-item.d-flex[_ngcontent-%COMP%]{display:flex}.bar-item[_ngcontent-%COMP%]{background-image:url(/assets/hp-pattern.png);background-repeat:repeat;background-blend-mode:multiply}"]],data:{}});function p(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,32,"dd-modal",[],null,null,null,e.b,e.a)),t.pb(1,114688,[[1,4],["editmodal",4]],0,i.a,[],null,null),(l()(),t.qb(2,0,null,0,1,"div",[["modal-header",""]],null,null,null,null,null)),(l()(),t.Ib(-1,null,["Edit Health"])),(l()(),t.qb(4,0,null,1,23,"div",[["modal-body",""]],null,null,null,null,null)),(l()(),t.qb(5,0,null,null,13,"form",[["class","mb-2"],["novalidate",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngSubmit"],[null,"submit"],[null,"reset"]],function(l,n,u){var e=!0,i=l.component;return"submit"===n&&(e=!1!==t.Ab(l,7).onSubmit(u)&&e),"reset"===n&&(e=!1!==t.Ab(l,7).onReset()&&e),"ngSubmit"===n&&(e=!1!==i.submitEdit()&&e),e},null,null)),t.pb(6,16384,null,0,o.B,[],null,null),t.pb(7,4210688,null,0,o.s,[[8,null],[8,null]],null,{ngSubmit:"ngSubmit"}),t.Fb(2048,null,o.c,null,[o.s]),t.pb(9,16384,null,0,o.r,[[4,o.c]],null,null),(l()(),t.qb(10,0,null,null,8,"div",[["class","form-group"]],null,null,null,null,null)),(l()(),t.qb(11,0,null,null,1,"label",[["class","form-label"],["for","operation"]],null,null,null,null,null)),(l()(),t.Ib(-1,null,["HP"])),(l()(),t.qb(13,0,[[2,0],["hpinput",1]],null,5,"input",[["class","form-input"],["id","operation"],["name","operation"],["placeholder","HP"],["type","tel"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(l,n,u){var e=!0;return"input"===n&&(e=!1!==t.Ab(l,14)._handleInput(u.target.value)&&e),"blur"===n&&(e=!1!==t.Ab(l,14).onTouched()&&e),"compositionstart"===n&&(e=!1!==t.Ab(l,14)._compositionStart()&&e),"compositionend"===n&&(e=!1!==t.Ab(l,14)._compositionEnd(u.target.value)&&e),e},null,null)),t.pb(14,16384,null,0,o.d,[t.E,t.k,[2,o.a]],null,null),t.Fb(1024,null,o.o,function(l){return[l]},[o.d]),t.pb(16,540672,null,0,o.i,[[8,null],[8,null],[6,o.o],[2,o.D]],{form:[0,"form"]},null),t.Fb(2048,null,o.p,null,[o.i]),t.pb(18,16384,null,0,o.q,[[4,o.p]],null,null),(l()(),t.qb(19,0,null,null,1,"dd-health-display",[],null,null,null,k,s)),t.pb(20,114688,null,0,r.a,[a.b],{editable:[0,"editable"],health:[1,"health"],preset:[2,"preset"],disableAnimation:[3,"disableAnimation"],forceShowBar:[4,"forceShowBar"]},null),(l()(),t.qb(21,0,null,null,6,"input",[["class","slider mt-1"],["min","0"],["name","hp-slider"],["type","range"]],[[8,"max",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"change"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(l,n,u){var e=!0,i=l.component;return"input"===n&&(e=!1!==t.Ab(l,22)._handleInput(u.target.value)&&e),"blur"===n&&(e=!1!==t.Ab(l,22).onTouched()&&e),"compositionstart"===n&&(e=!1!==t.Ab(l,22)._compositionStart()&&e),"compositionend"===n&&(e=!1!==t.Ab(l,22)._compositionEnd(u.target.value)&&e),"change"===n&&(e=!1!==t.Ab(l,23).onChange(u.target.value)&&e),"input"===n&&(e=!1!==t.Ab(l,23).onChange(u.target.value)&&e),"blur"===n&&(e=!1!==t.Ab(l,23).onTouched()&&e),"change"===n&&(e=!1!==i.onSliderChange(u)&&e),e},null,null)),t.pb(22,16384,null,0,o.d,[t.E,t.k,[2,o.a]],null,null),t.pb(23,16384,null,0,o.A,[t.E,t.k],null,null),t.Fb(1024,null,o.o,function(l,n){return[l,n]},[o.d,o.A]),t.pb(25,540672,null,0,o.i,[[8,null],[8,null],[6,o.o],[2,o.D]],{form:[0,"form"]},null),t.Fb(2048,null,o.p,null,[o.i]),t.pb(27,16384,null,0,o.q,[[4,o.p]],null,null),(l()(),t.qb(28,0,null,2,4,"div",[["modal-footer",""]],null,null,null,null,null)),(l()(),t.qb(29,0,null,null,1,"button",[["class","btn"]],null,[[null,"click"]],function(l,n,u){var e=!0;return"click"===n&&(e=!1!==t.Ab(l,1).close(null)&&e),e},null,null)),(l()(),t.Ib(-1,null,["Cancel"])),(l()(),t.qb(31,0,null,null,1,"button",[["class","btn btn-primary ml-2"]],null,[[null,"click"]],function(l,n,u){var t=!0,e=l.component;return"click"===n&&(t=!1!==e.submitEdit()&&t),t},null,null)),(l()(),t.Ib(-1,null,["Save"]))],function(l,n){var u=n.component;l(n,1,0),l(n,16,0,u.operationControl),l(n,20,0,!1,u.hpAfterOperation,u.preset,!0,!0),l(n,25,0,u.sliderControl)},function(l,n){var u=n.component;l(n,5,0,t.Ab(n,9).ngClassUntouched,t.Ab(n,9).ngClassTouched,t.Ab(n,9).ngClassPristine,t.Ab(n,9).ngClassDirty,t.Ab(n,9).ngClassValid,t.Ab(n,9).ngClassInvalid,t.Ab(n,9).ngClassPending),l(n,13,0,t.Ab(n,18).ngClassUntouched,t.Ab(n,18).ngClassTouched,t.Ab(n,18).ngClassPristine,t.Ab(n,18).ngClassDirty,t.Ab(n,18).ngClassValid,t.Ab(n,18).ngClassInvalid,t.Ab(n,18).ngClassPending),l(n,21,0,u.health.max,t.Ab(n,27).ngClassUntouched,t.Ab(n,27).ngClassTouched,t.Ab(n,27).ngClassPristine,t.Ab(n,27).ngClassDirty,t.Ab(n,27).ngClassValid,t.Ab(n,27).ngClassInvalid,t.Ab(n,27).ngClassPending)})}function b(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,1,"h5",[["class","mb-1 text-bold"]],null,null,null,null,null)),(l()(),t.Ib(1,null,[""," / ",""]))],null,function(l,n){l(n,1,0,n.parent.context.$implicit.current,n.parent.context.$implicit.max)})}function d(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,1,"h5",[["class","mb-1 text-bold"],["style","opacity: 0;"]],null,null,null,null,null)),(l()(),t.Ib(-1,null,[" . "]))],null,null)}function f(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,1,"h5",[["class","mb-1 text-bold"],["style","opacity: 0;"]],null,null,null,null,null)),(l()(),t.Ib(-1,null,[" . "]))],null,null)}function h(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,1,"div",[],null,null,null,null,null)),(l()(),t.Ib(1,null,[""," / ",""]))],null,function(l,n){l(n,1,0,n.parent.context.$implicit.current,n.parent.context.$implicit.max)})}function g(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,1,"div",[["style","opacity: 0;"]],null,null,null,null,null)),(l()(),t.Ib(-1,null,[" . "]))],null,null)}function m(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,1,"div",[["style","opacity: 0;"]],null,null,null,null,null)),(l()(),t.Ib(-1,null,[" . "]))],null,null)}function v(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,2,"div",[["class","d-flex justify-content-center align-items-center p-1"]],null,null,null,null,null)),(l()(),t.qb(1,0,null,null,1,"h5",[["class","mb-1 text-bold"]],null,null,null,null,null)),(l()(),t.Ib(2,null,[""," / ",""]))],null,function(l,n){l(n,2,0,n.parent.context.$implicit.current,n.parent.context.$implicit.max)})}function y(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,2,"div",[["class","d-flex justify-content-center align-items-center pl-1"],["style","line-height: 0.8rem"]],null,null,null,null,null)),(l()(),t.qb(1,0,null,null,1,"div",[],null,null,null,null,null)),(l()(),t.Ib(2,null,[""," / ",""]))],null,function(l,n){l(n,2,0,n.parent.context.$implicit.current,n.parent.context.$implicit.max)})}function C(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,21,"div",[["class","bar h-100"]],null,[[null,"click"]],function(l,n,u){var t=!0,e=l.component;return"click"===n&&(t=!1!==e.editHP()&&t),t},null,null)),t.pb(1,278528,null,0,c.i,[t.t,t.u,t.k,t.E],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),t.Db(2,{"c-hand":0}),(l()(),t.qb(3,0,null,null,14,"div",[["class","bar-item d-flex align-items-center justify-content-center"]],[[4,"width",null],[4,"backgroundColor",null]],null,null,null,null)),t.pb(4,278528,null,0,c.i,[t.t,t.u,t.k,t.E],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),t.Db(5,{"bar-animated":0,"p-1":1}),(l()(),t.hb(16777216,null,null,1,null,b)),t.pb(7,16384,null,0,c.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null),(l()(),t.hb(16777216,null,null,1,null,d)),t.pb(9,16384,null,0,c.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null),(l()(),t.hb(16777216,null,null,1,null,f)),t.pb(11,16384,null,0,c.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null),(l()(),t.hb(16777216,null,null,1,null,h)),t.pb(13,16384,null,0,c.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null),(l()(),t.hb(16777216,null,null,1,null,g)),t.pb(15,16384,null,0,c.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null),(l()(),t.hb(16777216,null,null,1,null,m)),t.pb(17,16384,null,0,c.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null),(l()(),t.hb(16777216,null,null,1,null,v)),t.pb(19,16384,null,0,c.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null),(l()(),t.hb(16777216,null,null,1,null,y)),t.pb(21,16384,null,0,c.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null)],function(l,n){var u=n.component,t=l(n,2,0,u.editable);l(n,1,0,"bar h-100",t);var e=l(n,5,0,!u.disableAnimation,!u.mini);l(n,4,0,"bar-item d-flex align-items-center justify-content-center",e),l(n,7,0,u.hpPercent>50&&!u.mini&&u.amountVisible),l(n,9,0,u.hpPercent<=50&&!u.mini&&u.amountVisible),l(n,11,0,!u.mini&&!u.amountVisible),l(n,13,0,u.hpPercent>50&&u.mini&&u.amountVisible),l(n,15,0,u.hpPercent<=50&&u.mini&&u.amountVisible),l(n,17,0,!u.amountVisible&&u.mini),l(n,19,0,u.hpPercent<=50&&!u.mini&&u.amountVisible),l(n,21,0,u.hpPercent<=50&&u.mini&&u.amountVisible)},function(l,n){l(n,3,0,n.context.$implicit.percentCSS,n.context.$implicit.colorCSS)})}function I(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,4,"div",[],null,null,null,null,null)),(l()(),t.hb(16777216,null,null,1,null,C)),t.pb(2,278528,null,0,c.j,[t.P,t.M,t.t],{ngForOf:[0,"ngForOf"],ngForTrackBy:[1,"ngForTrackBy"]},null),(l()(),t.qb(3,0,null,null,1,"div",[["class","form-input-hint text-center"]],null,null,null,null,null)),(l()(),t.Ib(4,null,["",""]))],function(l,n){var u=n.component;l(n,2,0,u.bars,u.trackBarElement)},function(l,n){l(n,4,0,n.component.hpText)})}function q(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,2,"div",[["class","text-center"]],null,null,null,null,null)),(l()(),t.qb(1,0,null,null,1,"h5",[["class","mb-2"]],null,null,null,null,null)),(l()(),t.Ib(2,null,["",""]))],null,function(l,n){l(n,2,0,n.component.hpText)})}function k(l){return t.Kb(0,[t.Gb(671088640,1,{editModal:0}),t.Gb(671088640,2,{hpInput:0}),(l()(),t.hb(16777216,null,null,1,null,p)),t.pb(3,16384,null,0,c.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null),(l()(),t.hb(16777216,null,null,1,null,I)),t.pb(5,16384,null,0,c.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null),(l()(),t.hb(16777216,null,null,1,null,q)),t.pb(7,16384,null,0,c.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null)],function(l,n){var u=n.component;l(n,3,0,u.editable),l(n,5,0,!u.textOnly),l(n,7,0,u.textOnly)},null)}r.a},"8Qhy":function(l,n,u){"use strict";u.d(n,"a",function(){return o});var t=u("PSD3"),e=u.n(t),i=u("CcnG"),o=function(){function l(){}return l.prototype.canDeactivate=function(l,n,u,t){return i=this,void 0,r=function(){return function(l,n){var u,t,e,i,o={label:0,sent:function(){if(1&e[0])throw e[1];return e[1]},trys:[],ops:[]};return i={next:r(0),throw:r(1),return:r(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function r(i){return function(r){return function(i){if(u)throw new TypeError("Generator is already executing.");for(;o;)try{if(u=1,t&&(e=2&i[0]?t.return:i[0]?t.throw||((e=t.return)&&e.call(t),0):t.next)&&!(e=e.call(t,i[1])).done)return e;switch(t=0,e&&(i=[2&i[0],e.value]),i[0]){case 0:case 1:e=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,t=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!(e=(e=o.trys).length>0&&e[e.length-1])&&(6===i[0]||2===i[0])){o=0;continue}if(3===i[0]&&(!e||i[1]>e[0]&&i[1]<e[3])){o.label=i[1];break}if(6===i[0]&&o.label<e[1]){o.label=e[1],e=i;break}if(e&&o.label<e[2]){o.label=e[2],o.ops.push(i);break}e[2]&&o.ops.pop(),o.trys.pop();continue}i=n.call(l,o)}catch(r){i=[6,r],t=0}finally{u=e=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,r])}}}(this,function(n){switch(n.label){case 0:return[4,Promise.resolve(l.canDeactivate())];case 1:return n.sent()?[3,3]:[4,e.a.fire({title:"Are you sure?",text:"You have unsaved changes, are you sure you want to leave?",showCancelButton:!0,cancelButtonText:"No",confirmButtonText:"Yes"})];case 2:return!0===n.sent().value?[2,!0]:[2,!1];case 3:return[2,!0]}})},new((o=void 0)||(o=Promise))(function(l,n){function u(l){try{e(r.next(l))}catch(u){n(u)}}function t(l){try{e(r.throw(l))}catch(u){n(u)}}function e(n){n.done?l(n.value):new o(function(l){l(n.value)}).then(u,t)}e((r=r.apply(i,[])).next())});var i,o,r},l.prototype.handleUnload=function(l){return alert("test"),l.returnValue=!1,!1},l.ngInjectableDef=i.T({factory:function(){return new l},token:l,providedIn:"root"}),l}()},"8wtL":function(l,n,u){"use strict";u.d(n,"a",function(){return t}),u("QMBs").a;var t=function(){return function(){}}()},AteQ:function(l,n,u){"use strict";u.d(n,"a",function(){return e}),u("a8fi"),u("uCWu"),u("edGd");var t=u("VnD/"),e=function(){function l(l,n,u){this.campaignService=l,this.login=n,this.noteService=u}return l.prototype.ngOnInit=function(){var l=this;this.noteService.noteUpdate.pipe(Object(t.a)(function(n){return l.note&&n.id===l.note.id})).subscribe(function(n){l.note=n})},l.prototype.edit=function(){this.noteService.editNote(this.note)},Object.defineProperty(l.prototype,"user",{get:function(){var l=this;if(!this.note)return null;if(this.note.user)return this.note.user;var n=this.campaignService.campaign.members.find(function(n){return n.userId===l.note.userId});return n&&n.user?n.user:void 0},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"editable",{get:function(){return this.note.userId===this.login.id||this.note.publicEdit},enumerable:!0,configurable:!0}),l}()},AxCL:function(l,n,u){"use strict";u.d(n,"b",function(){return c}),u.d(n,"a",function(){return s}),u.d(n,"d",function(){return p}),u.d(n,"c",function(){return b});var t=u("AytR"),e=u("CcnG"),i=u("t/Na"),o=function(){return(o=Object.assign||function(l){for(var n,u=1,t=arguments.length;u<t;u++)for(var e in n=arguments[u])Object.prototype.hasOwnProperty.call(n,e)&&(l[e]=n[e]);return l}).apply(this,arguments)},r=function(l,n,u,t){return new(u||(u=Promise))(function(e,i){function o(l){try{a(t.next(l))}catch(n){i(n)}}function r(l){try{a(t.throw(l))}catch(n){i(n)}}function a(l){l.done?e(l.value):new u(function(n){n(l.value)}).then(o,r)}a((t=t.apply(l,n||[])).next())})},a=function(l,n){var u,t,e,i,o={label:0,sent:function(){if(1&e[0])throw e[1];return e[1]},trys:[],ops:[]};return i={next:r(0),throw:r(1),return:r(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function r(i){return function(r){return function(i){if(u)throw new TypeError("Generator is already executing.");for(;o;)try{if(u=1,t&&(e=2&i[0]?t.return:i[0]?t.throw||((e=t.return)&&e.call(t),0):t.next)&&!(e=e.call(t,i[1])).done)return e;switch(t=0,e&&(i=[2&i[0],e.value]),i[0]){case 0:case 1:e=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,t=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!(e=(e=o.trys).length>0&&e[e.length-1])&&(6===i[0]||2===i[0])){o=0;continue}if(3===i[0]&&(!e||i[1]>e[0]&&i[1]<e[3])){o.label=i[1];break}if(6===i[0]&&o.label<e[1]){o.label=e[1],e=i;break}if(e&&o.label<e[2]){o.label=e[2],o.ops.push(i);break}e[2]&&o.ops.pop(),o.trys.pop();continue}i=n.call(l,o)}catch(r){i=[6,r],t=0}finally{u=e=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,r])}}},c=function(){function l(l){this.http=l}return l.prototype.updateEntityPreset=function(l){return r(this,void 0,void 0,function(){return a(this,function(n){return[2,this.http.put(t.a.apiURL+"/entitypresets/"+l.id,l).toPromise()]})})},l.prototype.createEntityPreset=function(l){return r(this,void 0,void 0,function(){return a(this,function(n){return[2,this.http.post(t.a.apiURL+"/entitypresets",o({},l,{id:void 0})).toPromise()]})})},l.prototype.getEntityPreset=function(l){return r(this,void 0,void 0,function(){return a(this,function(n){return[2,this.http.get(t.a.apiURL+"/entitypresets/"+l).toPromise()]})})},l.prototype.deleteEntityPreset=function(l,n){return r(this,void 0,void 0,function(){return a(this,function(l){return[2]})})},l.prototype.getEntity=function(l){return r(this,void 0,void 0,function(){return a(this,function(n){return[2,this.http.get(t.a.apiURL+"/entities/"+l).toPromise()]})})},l.prototype.getEntities=function(l,n){return void 0===n&&(n=!1),r(this,void 0,void 0,function(){return a(this,function(u){return[2,this.http.get(t.a.apiURL+"/entities?campaignId="+l+"&spawnable="+n).toPromise()]})})},l.prototype.createEntity=function(l){return r(this,void 0,void 0,function(){return a(this,function(n){return[2,this.http.post(t.a.apiURL+"/entities",o({},l,{id:void 0})).toPromise()]})})},l.prototype.updateEntity=function(l){return r(this,void 0,void 0,function(){return a(this,function(n){return[2,this.http.put(t.a.apiURL+"/entities/"+l.id,l).toPromise()]})})},l.prototype.deleteEntity=function(l){return r(this,void 0,void 0,function(){return a(this,function(n){return[2,this.http.delete(t.a.apiURL+"/entities/"+l).toPromise()]})})},l.prototype.spawnSpawnable=function(l,n){return r(this,void 0,void 0,function(){return a(this,function(u){return[2,this.http.post(t.a.apiURL+"/entities/spawn/"+l+"?count="+n,null).toPromise()]})})},l.ngInjectableDef=e.T({factory:function(){return new l(e.X(i.c))},token:l,providedIn:"root"}),l}(),s=function(l){return l[l.MAJOR=0]="MAJOR",l[l.NORMAL=1]="NORMAL",l[l.MINOR=2]="MINOR",l[l.UNIMPORTANT=3]="UNIMPORTANT",l}({}),p=function(l){return l[l.NORMAL=0]="NORMAL",l[l.TEXT_BASED=1]="TEXT_BASED",l}({}),b=function(l){return l[l.DYNAMIC=0]="DYNAMIC",l[l.STATIC=1]="STATIC",l}({})},AytR:function(l,n,u){"use strict";u.d(n,"a",function(){return t});var t={production:!0,auth0Domain:"panch-dd.auth0.com",auth0ClientId:"9vKGU44oDoiGxliIyFL7hjWQQSdmvWEz",apiURL:"https://panch-dd.herokuapp.com/api",hubURL:"https://panch-dd.herokuapp.com/hub",tileURL:"https://d2z1tfzzgmqozf.cloudfront.net/api",gitHash:"REPLACE_GIT_HASH",gitTag:"REPLACE_GIT_TAG",sentryDSN:"https://afdf2c17948049938e2f1d3151093cc1@sentry.io/1378358"}},CYb2:function(l,n,u){"use strict";u.d(n,"a",function(){return e}),u.d(n,"b",function(){return i});var t=u("CcnG"),e=function(){function l(){}return l.prototype.load=function(){var l=localStorage.getItem("action-queue");this._queue=l?JSON.parse(l):[]},l.prototype.save=function(){if(this._queue){var l={};this._queue=this._queue.filter(function(n){return void 0===l[n.type]&&(l[n.type]=!0,!0)}),localStorage.setItem("action-queue",JSON.stringify(this._queue))}},Object.defineProperty(l.prototype,"queue",{get:function(){return this.load(),this._queue},enumerable:!0,configurable:!0}),l.ngInjectableDef=t.T({factory:function(){return new l},token:l,providedIn:"root"}),l}(),i=function(l){return l[l.ACCOUNT_SETUP=0]="ACCOUNT_SETUP",l[l.INVITE=1]="INVITE",l[l.REDIRECT=2]="REDIRECT",l}({})},Cj6H:function(l,n,u){"use strict";u.d(n,"a",function(){return t}),u("tB0E").a;var t=function(){return function(){}}()},DwCd:function(l,n,u){"use strict";u.d(n,"a",function(){return t});var t=function(l){return l[l.STRING=0]="STRING",l[l.INT=1]="INT",l[l.FLOAT=2]="FLOAT",l[l.ENUM=3]="ENUM",l[l.ENUM_MULTI=4]="ENUM_MULTI",l[l.TEXT_FORMATTED=5]="TEXT_FORMATTED",l[l.CURRENCY=6]="CURRENCY",l[l.BOOLEAN=7]="BOOLEAN",l}({})},EA6F:function(l,n,u){"use strict";u.d(n,"a",function(){return t});var t=function(){return function(){}}()},HRrE:function(l,n,u){"use strict";u.d(n,"a",function(){return e});var t=u("gIcY"),e=function(){function l(){this.controlName="tags",this._currentValue="",this._previousValue=""}return l.prototype.ngOnInit=function(){this.formGroup.contains(this.controlName)||this.formGroup.addControl(this.controlName,new t.e([]))},l.prototype.removeTag=function(l){var n=this.formArray.value.indexOf(l);-1!==n&&(this.formArray.removeAt(n),this.formGroup.markAsDirty())},l.prototype.onInputEvent=function(l){switch(l.key){case"Enter":this._currentValue.trim().length>0&&-1===this.formArray.value.indexOf(this._currentValue.trim())&&(this.formArray.push(new t.h(this._currentValue.trim())),this.formGroup.markAsDirty(),this.input.nativeElement.value="",this._previousValue=this._currentValue.trim(),this._currentValue="");break;case"Backspace":if(""===this._currentValue&&""===this._previousValue&&this.formArray.length>0){console.log(this._previousValue);var n=this.formArray.controls[this.formArray.controls.length-1];this.formArray.removeAt(this.formArray.length-1),this.formGroup.markAsDirty(),this.input.nativeElement.value=n.value,this._previousValue=this._currentValue.trim(),this._currentValue=n.value}else this._previousValue=""}},l.prototype.onInputChanged=function(l){this._previousValue=this._currentValue,this._currentValue=l.target.value},Object.defineProperty(l.prototype,"formArray",{get:function(){return this.formGroup.get(this.controlName)},enumerable:!0,configurable:!0}),l}()},HboH:function(l,n,u){"use strict";u.d(n,"a",function(){return t});var t=function(){return function(){}}()},IeLf:function(l,n,u){"use strict";var t=u("CcnG"),e=(u("gIcY"),u("WNRK"));u("uCWu"),u("rZgH"),u("edGd"),u("ZYCi"),u("t/Na"),u("Lqte"),u("n10a"),u("MICr"),u.d(n,"a",function(){return i}),u.d(n,"b",function(){return o});var i=t.ob({encapsulation:0,styles:[[""]],data:{}});function o(l){return t.Kb(0,[t.Gb(402653184,1,{_container:0}),(l()(),t.qb(1,0,null,null,1,"div",[],null,null,null,null,null)),(l()(),t.qb(2,0,[[1,0],["container",1]],null,0,"div",[],null,null,null,null,null))],null,null)}e.a},Kjs6:function(l,n,u){"use strict";u.d(n,"a",function(){return t}),u("a8fi"),u("uCWu"),u("edGd");var t=function(){function l(l,n,u){this.noteService=l,this.campaignService=n,this.loginService=u}return l.prototype.ngOnInit=function(){},l.prototype.noteSelected=function(l){this.noteService.editNote(l)},l.prototype.isEditable=function(l){return l.userId===this.loginService.id||l.publicEdit},l.prototype.user=function(l){return this.campaignService.getUser(l).user},l}()},Lqte:function(l,n,u){"use strict";u.d(n,"b",function(){return r}),u.d(n,"a",function(){return a});var t=u("uCWu"),e=u("AytR"),i=u("CcnG"),o=u("t/Na"),r=function(){function l(l,n){this.campaignService=l,this.http=n}return l.prototype.search=function(l){return this.http.get(e.a.apiURL+"/search?campaignId="+this.campaignService.campaign.id+"&search="+encodeURIComponent(l)).toPromise()},l.ngInjectableDef=i.T({factory:function(){return new l(i.X(t.b),i.X(o.c))},token:l,providedIn:"root"}),l}(),a=function(l){return l[l.ENTITY=0]="ENTITY",l[l.LEGACY_SPELL=1]="LEGACY_SPELL",l[l.LEGACY_ITEM=2]="LEGACY_ITEM",l[l.ARTICLE=3]="ARTICLE",l[l.MAP=4]="MAP",l[l.QUEST=5]="QUEST",l[l.USER=6]="USER",l[l.CONCEPT=7]="CONCEPT",l}({})},LtSl:function(l,n,u){"use strict";u.d(n,"a",function(){return v});var t,e=u("4R65"),i=u.n(e),o=u("AytR"),r=u("6awz"),a=u("Q3ED"),c=(u("uCWu"),u("a8fi")),s=u("VnD/"),p=(u("edGd"),u("AxCL"),u("dtdw"),u("INa4"),u("M0Fr")),b=(u("rZgH"),u("MICr"),u("n10a"),u("Pqmk"),u("AteQ")),d=function(){return(d=Object.assign||function(l){for(var n,u=1,t=arguments.length;u<t;u++)for(var e in n=arguments[u])Object.prototype.hasOwnProperty.call(n,e)&&(l[e]=n[e]);return l}).apply(this,arguments)},f=function(l,n,u,t){return new(u||(u=Promise))(function(e,i){function o(l){try{a(t.next(l))}catch(n){i(n)}}function r(l){try{a(t.throw(l))}catch(n){i(n)}}function a(l){l.done?e(l.value):new u(function(n){n(l.value)}).then(o,r)}a((t=t.apply(l,n||[])).next())})},h=function(l,n){var u,t,e,i,o={label:0,sent:function(){if(1&e[0])throw e[1];return e[1]},trys:[],ops:[]};return i={next:r(0),throw:r(1),return:r(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function r(i){return function(r){return function(i){if(u)throw new TypeError("Generator is already executing.");for(;o;)try{if(u=1,t&&(e=2&i[0]?t.return:i[0]?t.throw||((e=t.return)&&e.call(t),0):t.next)&&!(e=e.call(t,i[1])).done)return e;switch(t=0,e&&(i=[2&i[0],e.value]),i[0]){case 0:case 1:e=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,t=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!(e=(e=o.trys).length>0&&e[e.length-1])&&(6===i[0]||2===i[0])){o=0;continue}if(3===i[0]&&(!e||i[1]>e[0]&&i[1]<e[3])){o.label=i[1];break}if(6===i[0]&&o.label<e[1]){o.label=e[1],e=i;break}if(e&&o.label<e[2]){o.label=e[2],o.ops.push(i);break}e[2]&&o.ops.pop(),o.trys.pop();continue}i=n.call(l,o)}catch(r){i=[6,r],t=0}finally{u=e=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,r])}}},g=i.a.icon({iconUrl:"/assets/note-icon.png",iconSize:[32,32],iconAnchor:[16,16],popupAnchor:[0,-20]}),m=i.a.icon({iconUrl:"/assets/note-icon-2.png",iconSize:[32,32],iconAnchor:[16,16],popupAnchor:[0,-20]}),v=function(){function l(l,n,u,t,e,i,o,r,a,c,s,p){var b=this;this.route=l,this.router=n,this.mapService=u,this.campaignService=t,this.noteService=e,this.login=i,this.entityService=o,this.componentService=r,this.updateHub=a,this.toast=c,this.articleService=s,this.iconService=p,this._entityLayerGroups={},this._entityComponents=[],this._noteComponents=[],this.loading=!1,this.loadSelectItems=function(l){return b.getArticleSelectionList(l)}}return l.prototype.ngAfterViewInit=function(){var l=this;this._noteCreateSubscription=this.noteService.noteCreate.pipe(Object(s.a)(function(n){return n.mapId===l._map.id})).subscribe(function(n){l.addNoteToMap(n)}),this._noteDeleteSubscription=this.noteService.noteDelete.pipe(Object(s.a)(function(n){return n.mapId===l._map.id})).subscribe(function(n){for(var u=function(u){if(u._noteId===n.id){var t=u._noteComponent;l._noteComponents=l._noteComponents.filter(function(l){return l!==t}),t.destroy(),l._notesLayerGroup.removeLayer(u),l._shapelyNotesLayerGroup.removeLayer(u)}},t=0,e=l._notesLayerGroup.getLayers().concat(l._shapelyNotesLayerGroup.getLayers());t<e.length;t++)u(e[t])}),this._noteUpdateSubscription=this.noteService.noteUpdate.pipe(Object(s.a)(function(n){return n.mapId===l._map.id})).subscribe(function(n){void 0===l._notesLayerGroup.getLayers().concat(l._shapelyNotesLayerGroup.getLayers()).find(function(l){return l._noteId===n.id})&&l.addNoteToMap(n)}),this._entityUpdateSubscription=this.updateHub.entityUpdated.subscribe(function(n){if(n.mapId===l._map.id){if(!l._entityLayerGroups[n.preset.name])return void l.addEntityToMap(n);var u=l._entityLayerGroups[n.preset.name].getLayers().find(function(l){return l._entity.id===n.id});u?(u.setLatLng([n.lat,n.lng]),u._entityComponent.instance.entity=n):l.addEntityToMap(n)}else l.removeEntityFromMap(n)}),this._articleUpdateSubscription=this.updateHub.articleUpdated.subscribe(function(n){n.mapId===l._map.id?l.addArticleToMap(n):l.removeArticleFromMap(n)}),this._articleDeleteSubscription=this.updateHub.articleDeleted.pipe(Object(s.a)(function(n){return n.mapId===l._map.id})).subscribe(function(n){l.removeArticleFromMap(n)}),this.route.paramMap.subscribe(function(n){(l._map&&l._map.id!==n.get("m_id")||!l._map)&&l.loadMap(n.get("m_id"))})},l.prototype.ngOnDestroy=function(){for(var l=0,n=this._noteComponents;l<n.length;l++)n[l].destroy();for(var u=0,t=this._entityComponents;u<t.length;u++)t[u].destroy();this._noteCreateSubscription&&this._noteCreateSubscription.unsubscribe(),this._noteDeleteSubscription&&this._noteDeleteSubscription.unsubscribe(),this._noteUpdateSubscription&&this._noteUpdateSubscription.unsubscribe(),this._entityUpdateSubscription&&this._entityUpdateSubscription.unsubscribe(),this._articleUpdateSubscription&&this._articleUpdateSubscription.unsubscribe(),this._articleDeleteSubscription&&this._articleDeleteSubscription.unsubscribe()},l.prototype.loadMap=function(l){return f(this,void 0,void 0,function(){var n,u,t;return h(this,function(e){switch(e.label){case 0:return this.loading=!0,[4,this.load(l)];case 1:return e.sent(),this.constructMap(),this.createNotesLayer(),this.createArticlesLayer(),[4,this.loadNotes(l)];case 2:return e.sent(),[4,this.loadArticles()];case 3:for(e.sent(),this.loading=!1,n=0,u=this.campaignService.campaign.entities;n<u.length;n++)(t=u[n]).mapId===this._map.id&&t.lat&&t.lng&&this.addEntityToMap(t);return[2]}})})},l.prototype.loadArticles=function(){return f(this,void 0,void 0,function(){var l,n,u,t;return h(this,function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),l=this,[4,this.articleService.getMapArticles(this._map.id)];case 1:return l._articles=e.sent(),[3,3];case 2:throw e.sent();case 3:if(this._articles)for(n=0,u=this._articles;n<u.length;n++)t=u[n],this.addArticleToMap(t);return[2]}})})},l.prototype.load=function(l){return f(this,void 0,void 0,function(){var n;return h(this,function(u){switch(u.label){case 0:return u.trys.push([0,2,,3]),n=this,[4,this.mapService.getMap(l)];case 1:return n._map=u.sent(),[3,3];case 2:throw u.sent();case 3:return[2]}})})},l.prototype.loadNotes=function(l){return f(this,void 0,void 0,function(){var n;return h(this,function(u){switch(u.label){case 0:return u.trys.push([0,2,,3]),n=this,[4,this.noteService.getNotes(this.campaignService.campaign.id,{mapId:l})];case 1:return n._notes=u.sent(),[3,3];case 2:throw u.sent();case 3:return[2]}})})},l.prototype.constructMap=function(){var l=this;t=i.a.map(this.map.nativeElement,{crs:i.a.CRS.Simple,maxBounds:[[0,0],[-256,256]],zoomSnap:.25});var n=this.route.snapshot.queryParamMap;n.has("zoom")&&t.setZoom(n.get("zoom")),n.has("lat")&&n.has("lng")?t.setView({lat:n.get("lat"),lng:n.get("lng")}):t.fitBounds([[-10,10],[-246,246]]),t.on("contextmenu",function(n){l.editor.showMenu().then(function(u){null!=u&&l.handleEditorOperation(u,n)})}),t.on("zoomend",function(){l.writeMapStateToURL(t)}),t.on("moveend",function(){l.writeMapStateToURL(t)});var u=i.a.tileLayer(o.a.tileURL+"/maps/{id}/tile/{z}/{x}/{y}",{maxZoom:this._map.maxZoom+2,minZoom:this._map.minZoom,minNativeZoom:1,maxNativeZoom:this._map.maxZoom,bounds:[[0,0],[-256,256]],id:this._map.id}).addTo(t);this._mapLayerControl=i.a.control.layers().addTo(t),this._mapLayerControl.addBaseLayer(u,"Base")},l.prototype.writeMapStateToURL=function(l){this.router.navigate([],{replaceUrl:!0,queryParams:{zoom:l.getZoom(),lat:l.getCenter().lat,lng:l.getCenter().lng}})},l.prototype.addArticleToMap=function(l){for(var n=0,u=this._articlesLayerGroup.getLayers();n<u.length;n++){var t=u[n];if(t._article&&t._article.id===l.id)return t._article=l,t.setLatLng([l.lat,l.lng]),void(t._articleComponent.instance.article=l)}if(l.lat&&l.lng){var e=i.a.marker([l.lat,l.lng]);null!==l.icon&&void 0!==l.icon?e.setIcon(i.a.icon({iconUrl:this.iconService.getIconSrc(l.icon),iconSize:[40,40],iconAnchor:[20,20],popupAnchor:[0,-20]})):e.setIcon(i.a.icon({iconUrl:"/assets/position-marker.png",iconSize:[40,40],iconAnchor:[20,40],popupAnchor:[0,-40]})),e._article=l,this._articlesLayerGroup.addLayer(e);var o=i.a.popup({minWidth:150});o.setContent(this.createArticlePopupContent(l)),e.bindPopup(o)}},l.prototype.createArticlePopupContent=function(l){var n=this,u=document.createElement("div"),t=document.createElement("h5");t.innerText=l.name,u.appendChild(t);var e=document.createElement("button");return e.classList.add("btn","btn-sm"),e.innerText="More",e.addEventListener("click",function(){n.router.navigate(["campaigns",n.campaignService.campaign.id,"articles",l.id])}),u.appendChild(e),u},l.prototype.removeArticleFromMap=function(l){for(var n=0,u=this._articlesLayerGroup.getLayers();n<u.length;n++){var t=u[n];t._article&&t._article.id===l.id&&this._articlesLayerGroup.removeLayer(t)}},l.prototype.getDrawnShape=function(){var l=this;if(void 0!==this._drawControls)throw new Error("Cannot have multiple draw controls!");return new Promise(function(n,u){l._drawControls=new i.a.Control.Draw({position:"topleft",draw:{polygon:{allowIntersection:!1,drawError:{color:"#e1e100",message:"<strong>Oh snap!<strong> you can't draw that!"}},circlemarker:!1,marker:!1},edit:!1}),t.addControl(l._drawControls),t.on("draw:created",function(u){l._drawControls&&(t.removeControl(l._drawControls),l._drawControls=void 0);var e=u.layer;if(e instanceof i.a.Circle)n({type:r.b.CIRCLE,lat:e.getLatLng().lat,lng:e.getLatLng().lng,radius:e.getRadius()});else if(e instanceof i.a.Rectangle){var o=e.getLatLngs()[0];n({type:r.b.RECTANGLE,points:o.map(function(l){return[l.lat,l.lng]})})}else e instanceof i.a.Polygon?n({type:r.b.POLYGON,points:e.getLatLngs()[0].map(function(l){return[l.lat,l.lng]})}):e instanceof i.a.Polyline&&n({type:r.b.POLYLINE,points:e.getLatLngs().map(function(l){return[l.lat,l.lng]})})})})},l.prototype.createNotesLayer=function(){this._notesLayerGroup=i.a.layerGroup(),this._notesLayerGroup.addTo(t),this._mapLayerControl.addOverlay(this._notesLayerGroup,"Notes"),this._shapelyNotesLayerGroup=i.a.layerGroup(),this._shapelyNotesLayerGroup.addTo(t),this._mapLayerControl.addOverlay(this._shapelyNotesLayerGroup,"Shapely Notes")},l.prototype.createArticlesLayer=function(){this._articlesLayerGroup=i.a.layerGroup(),this._articlesLayerGroup.addTo(t),this._mapLayerControl.addOverlay(this._articlesLayerGroup,"Articles")},l.prototype.createEntityLayer=function(l){var n=i.a.layerGroup();this._entityLayerGroups[l]=n,n.addTo(t),this._mapLayerControl.addOverlay(n,l)},l.prototype.addNoteToMap=function(l){if(l.mapShape){var n=void 0,u=l.mapShape;switch(u.type){case r.b.CIRCLE:n=i.a.circle([u.lat,u.lng],{radius:u.radius});break;case r.b.POLYGON:n=i.a.polygon(u.points);break;case r.b.POLYLINE:n=i.a.polyline(u.points);break;case r.b.RECTANGLE:n=i.a.rectangle(u.points)}n._noteId=l.id,(t=this.componentService.getComponent(b.a)).instance.note=l,this._noteComponents.push(t),n._noteComponent=t,(e=i.a.popup({minWidth:150})).setContent(this.componentService.getRootNode(t)),n.bindPopup(e),this._shapelyNotesLayerGroup.addLayer(n)}else if(l.lat&&l.lng){var t,e,o=l.userId===this.login.id,a=i.a.marker([l.lat,l.lng],{icon:o?g:m});a._noteId=l.id,(t=this.componentService.getComponent(b.a)).instance.note=l,this._noteComponents.push(t),a._noteComponent=t,(e=i.a.popup({minWidth:150})).setContent(this.componentService.getRootNode(t)),a.bindPopup(e),this._notesLayerGroup.addLayer(a)}},l.prototype.addEntityToMap=function(l){if(l.lat&&l.lng){var n=i.a.marker([l.lat,l.lng],{icon:i.a.icon({iconUrl:"https://res.cloudinary.com/dqhk8k6iv/image/upload/bo_2px_solid_rgb:303742,c_lfill,g_faces:auto,h_40,r_20,w_40,f_png/"+l.imageId+".png",iconSize:[40,40],iconAnchor:[20,20],popupAnchor:[0,-20]})});n._entity=l;var u=this.componentService.getComponent(p.a);u.instance.entity=l,this._entityComponents.push(u),n._entityComponent=u,this._entityLayerGroups[l.preset.name]||this.createEntityLayer(l.preset.name),this._entityLayerGroups[l.preset.name].addLayer(n);var t=i.a.popup({minWidth:250});t.setContent(this.componentService.getRootNode(u)),n.bindPopup(t)}},l.prototype.removeEntityFromMap=function(l){if(this._entityLayerGroups[l.preset.name]){var n=this._entityLayerGroups[l.preset.name].getLayers().find(function(n){return n._entity.id===l.id});n&&(this._entityLayerGroups[l.preset.name].removeLayer(n),this._entityComponents=this._entityComponents.filter(function(l){return l!==n._entityComponent}),n._entityComponent.destroy())}},l.prototype.handleEditorOperation=function(l,n){return f(this,void 0,void 0,function(){var u,t,e,i,o,r,s;return h(this,function(p){switch(p.label){case 0:switch(l.type){case a.b.PLACE_NOTE:return[3,1];case a.b.UPDATE_ENTITY_POSITION:return[3,2];case a.b.LINK_ARTICLE:return[3,8];case a.b.PLACE_SHAPELY_NOTE:return[3,15]}return[3,17];case 1:return this.noteService.addNote({type:c.b.MAP,mapId:this._map.id,lat:n.latlng.lat,lng:n.latlng.lng}),[3,17];case 2:return u=this.campaignService.editableEntities,t=void 0,1!==u.length?[3,3]:(t=u[0],[3,5]);case 3:return e=this.campaignService.editableEntities.slice().filter(function(l){return!1===l.spawnable}),[4,this.entitySelect.openSelector(e.map(function(l){return{value:l,displayHtml:l.name}}))];case 4:t=p.sent(),p.label=5;case 5:return t?[4,this.entityService.updateEntity(d({},t,{mapId:this._map.id,lat:n.latlng.lat,lng:n.latlng.lng}))]:[3,7];case 6:p.sent(),this.toast.info("Updated "+t.name+"'s position"),p.label=7;case 7:return[3,17];case 8:return[4,this.articleSelect.openSelector()];case 9:return"create-new-article"!==(i=p.sent()).value.id?[3,11]:[4,this.articleService.createArticle({name:i.value.name,content:null,campaignId:this.campaignService.campaign.id,userId:"fake",published:!1,tags:["TODO"],mapId:this._map.id,lat:n.latlng.lat,lng:n.latlng.lng})];case 10:return o=p.sent(),this.addArticleToMap(o),this.toast.info("Created and linked article "+o.name),[3,14];case 11:return[4,this.articleService.getArticle(i.value.id)];case 12:return r=p.sent(),null===i?[3,14]:[4,this.articleService.updateArticle(d({},r,{mapId:this._map.id,lat:n.latlng.lat,lng:n.latlng.lng}))];case 13:p.sent(),this.toast.info("Linked article "+i.value.name),p.label=14;case 14:return[3,17];case 15:return[4,this.getDrawnShape()];case 16:return null!==(s=p.sent())&&this.noteService.addNote({type:c.b.MAP,mapId:this._map.id,lat:n.latlng.lat,lng:n.latlng.lng,mapShape:s}),[3,17];case 17:return[2]}})})},l.prototype.getArticleSelectionList=function(l){return f(this,void 0,void 0,function(){var n,u;return h(this,function(t){switch(t.label){case 0:return[4,this.articleService.getArticles(this.campaignService.campaign.id,6,0,l)];case 1:return n=t.sent(),u=n.map(function(l){return{value:l,displayHtml:l.name}}),l&&l.trim().length>2&&u.length>0&&u.push({displayHtml:'<span><i class="icon icon-plus"></i> '+l+"</span>",value:{id:"create-new-article",name:l}}),[2,u]}})})},l.prototype.createNewArticle=function(l){return f(this,void 0,void 0,function(){var n;return h(this,function(u){switch(u.label){case 0:return[4,this.articleService.createArticle({name:l,content:null,campaignId:this.campaignService.campaign.id,userId:"fake",published:!1,tags:["TODO"]})];case 1:return n=u.sent(),this.articleSelect.select({displayHtml:"",value:n}),[2]}})})},Object.defineProperty(l.prototype,"notes",{get:function(){return this._notes},set:function(l){this._notes=l},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"editable",{get:function(){return this.campaignService.canEdit},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"mapObj",{get:function(){return this._map},enumerable:!0,configurable:!0}),l}()},M0Fr:function(l,n,u){"use strict";u.d(n,"a",function(){return e}),u("AxCL"),u("uCWu"),u("edGd");var t=function(){return(t=Object.assign||function(l){for(var n,u=1,t=arguments.length;u<t;u++)for(var e in n=arguments[u])Object.prototype.hasOwnProperty.call(n,e)&&(l[e]=n[e]);return l}).apply(this,arguments)},e=function(){function l(l,n,u,t){this.campaignService=l,this.login=n,this.router=u,this.entityService=t,this.removing=!1}return l.prototype.ngOnInit=function(){},l.prototype.viewMore=function(){this.router.navigate(["campaigns",this.entity.campaignId,"entities",this.entity.id])},l.prototype.removeFromMap=function(){return l=this,void 0,u=function(){return function(l,n){var u,t,e,i,o={label:0,sent:function(){if(1&e[0])throw e[1];return e[1]},trys:[],ops:[]};return i={next:r(0),throw:r(1),return:r(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function r(i){return function(r){return function(i){if(u)throw new TypeError("Generator is already executing.");for(;o;)try{if(u=1,t&&(e=2&i[0]?t.return:i[0]?t.throw||((e=t.return)&&e.call(t),0):t.next)&&!(e=e.call(t,i[1])).done)return e;switch(t=0,e&&(i=[2&i[0],e.value]),i[0]){case 0:case 1:e=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,t=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!(e=(e=o.trys).length>0&&e[e.length-1])&&(6===i[0]||2===i[0])){o=0;continue}if(3===i[0]&&(!e||i[1]>e[0]&&i[1]<e[3])){o.label=i[1];break}if(6===i[0]&&o.label<e[1]){o.label=e[1],e=i;break}if(e&&o.label<e[2]){o.label=e[2],o.ops.push(i);break}e[2]&&o.ops.pop(),o.trys.pop();continue}i=n.call(l,o)}catch(r){i=[6,r],t=0}finally{u=e=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,r])}}}(this,function(l){switch(l.label){case 0:this.removing=!0,l.label=1;case 1:return l.trys.push([1,3,,4]),[4,this.entityService.updateEntity(t({},this.entity,{mapId:null,lat:null,lng:null}))];case 2:return l.sent(),[3,4];case 3:throw l.sent();case 4:return this.removing=!1,[2]}})},new((n=void 0)||(n=Promise))(function(t,e){function i(l){try{r(u.next(l))}catch(n){e(n)}}function o(l){try{r(u.throw(l))}catch(n){e(n)}}function r(l){l.done?t(l.value):new n(function(n){n(l.value)}).then(i,o)}r((u=u.apply(l,[])).next())});var l,n,u},Object.defineProperty(l.prototype,"editable",{get:function(){return this.entity.userId===this.login.id||this.campaignService.canEdit},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"level",{get:function(){return this.entity&&this.entity.preset&&this.entity.preset.isXPEnabled?this.campaignService.calculateLevel(this.entity.xp):null},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"user",{get:function(){var l=this;return this.campaignService.campaign.members.find(function(n){return n.userId===l.entity.userId}).user},enumerable:!0,configurable:!0}),l}()},MICr:function(l,n,u){"use strict";u.d(n,"a",function(){return e});var t=u("CcnG"),e=function(){function l(){this.srcPrefix="/assets/article-icons/",this.srcPostfix=".png",this.icons=["hanging-sign","mushroom-gills","pointy-sword","round-bottom-flask","shirt","virtual-marker","falling-leaf","brutal-helm","graduate-cap","uncertainty","hazard-sign","drakkar","pig","sharp-shuriken","swap-bag","radar-sweep","ship-wheel","coffee-cup","cheese-wedge","cancel","donut"]}return l.prototype.getIcons=function(){var l=this;return this.icons.map(function(n){return{id:n,src:l.getIconSrc(n)}})},l.prototype.getIconSrc=function(l){return""+this.srcPrefix+l+this.srcPostfix},l.ngInjectableDef=t.T({factory:function(){return new l},token:l,providedIn:"root"}),l}()},Pqmk:function(l,n,u){"use strict";u.d(n,"a",function(){return i});var t=u("gIcY"),e=(u("ygrl"),u("Gi3i")),i=function(){function l(){this.title="Pick One!",this.loading=!1}return l.prototype.ngOnInit=function(){var l=this;this.searchControl=new t.h(null),this.searchControl.valueChanges.pipe(Object(e.a)(250)).subscribe(function(n){l.search=n,l.load()}),this.selectItems||this.load()},l.prototype.load=function(){return l=this,void 0,u=function(){var l;return function(l,n){var u,t,e,i,o={label:0,sent:function(){if(1&e[0])throw e[1];return e[1]},trys:[],ops:[]};return i={next:r(0),throw:r(1),return:r(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function r(i){return function(r){return function(i){if(u)throw new TypeError("Generator is already executing.");for(;o;)try{if(u=1,t&&(e=2&i[0]?t.return:i[0]?t.throw||((e=t.return)&&e.call(t),0):t.next)&&!(e=e.call(t,i[1])).done)return e;switch(t=0,e&&(i=[2&i[0],e.value]),i[0]){case 0:case 1:e=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,t=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!(e=(e=o.trys).length>0&&e[e.length-1])&&(6===i[0]||2===i[0])){o=0;continue}if(3===i[0]&&(!e||i[1]>e[0]&&i[1]<e[3])){o.label=i[1];break}if(6===i[0]&&o.label<e[1]){o.label=e[1],e=i;break}if(e&&o.label<e[2]){o.label=e[2],o.ops.push(i);break}e[2]&&o.ops.pop(),o.trys.pop();continue}i=n.call(l,o)}catch(r){i=[6,r],t=0}finally{u=e=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,r])}}}(this,function(n){switch(n.label){case 0:if(this.loading=!0,!this.loadSelectItems)return console.warn("No function provided to load select items"),[2];n.label=1;case 1:return n.trys.push([1,3,,4]),l=this,[4,this.loadSelectItems(this.search)];case 2:return l.selectItems=n.sent(),[3,4];case 3:throw n.sent();case 4:return this.loading=!1,[2]}})},new((n=void 0)||(n=Promise))(function(t,e){function i(l){try{r(u.next(l))}catch(n){e(n)}}function o(l){try{r(u.throw(l))}catch(n){e(n)}}function r(l){l.done?t(l.value):new n(function(n){n(l.value)}).then(i,o)}r((u=u.apply(l,[])).next())});var l,n,u},l.prototype.select=function(l){this._selectResolver?this._selectResolver(l):console.warn("Item was selected but no resolver was present");try{this.modal.close(null)}catch(n){}},l.prototype.openSelector=function(l){var n=this;return this.modal.open().then(function(){n._selectResolver&&(n._selectResolver(null),n._selectResolver=void 0)}),new Promise(function(l){n._selectResolver=l})},l}()},Q3ED:function(l,n,u){"use strict";u.d(n,"b",function(){return t}),u.d(n,"a",function(){return e}),u("uCWu"),u("ygrl");var t=function(l){return l[l.NONE=0]="NONE",l[l.PLACE_NOTE=1]="PLACE_NOTE",l[l.UPDATE_ENTITY_POSITION=2]="UPDATE_ENTITY_POSITION",l[l.LINK_ARTICLE=3]="LINK_ARTICLE",l[l.PLACE_SHAPELY_NOTE=4]="PLACE_SHAPELY_NOTE",l}({}),e=function(){function l(l){this.campaignService=l}return l.prototype.ngOnInit=function(){},l.prototype.showMenu=function(){var l=this,n=new Promise(function(n,u){l._opResolver=n});return this.modal.open().then(function(){l._opResolver&&l._opResolver(null)}),n},l.prototype.placeNote=function(){this._opResolver({type:t.PLACE_NOTE}),this.modal.close(null)},l.prototype.placeShapelyNote=function(){this._opResolver({type:t.PLACE_SHAPELY_NOTE}),this.modal.close(null)},l.prototype.updateEntityPosition=function(){this._opResolver({type:t.UPDATE_ENTITY_POSITION}),this.modal.close(null)},l.prototype.linkArticle=function(){this._opResolver({type:t.LINK_ARTICLE}),this.modal.close(null)},Object.defineProperty(l.prototype,"canUpdateEntityPosition",{get:function(){return this.campaignService.editableEntities.length>0},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"campaignEditable",{get:function(){return this.campaignService.canEdit},enumerable:!0,configurable:!0}),l}()},QMBs:function(l,n,u){"use strict";u.d(n,"a",function(){return t}),u("uCWu"),u("a8fi");var t=function(){function l(l,n){this.campaignService=l,this.noteService=n,this.loading=!1}return l.prototype.ngOnInit=function(){this.load()},l.prototype.load=function(){return l=this,void 0,u=function(){var l,n;return function(l,n){var u,t,e,i,o={label:0,sent:function(){if(1&e[0])throw e[1];return e[1]},trys:[],ops:[]};return i={next:r(0),throw:r(1),return:r(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function r(i){return function(r){return function(i){if(u)throw new TypeError("Generator is already executing.");for(;o;)try{if(u=1,t&&(e=2&i[0]?t.return:i[0]?t.throw||((e=t.return)&&e.call(t),0):t.next)&&!(e=e.call(t,i[1])).done)return e;switch(t=0,e&&(i=[2&i[0],e.value]),i[0]){case 0:case 1:e=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,t=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!(e=(e=o.trys).length>0&&e[e.length-1])&&(6===i[0]||2===i[0])){o=0;continue}if(3===i[0]&&(!e||i[1]>e[0]&&i[1]<e[3])){o.label=i[1];break}if(6===i[0]&&o.label<e[1]){o.label=e[1],e=i;break}if(e&&o.label<e[2]){o.label=e[2],o.ops.push(i);break}e[2]&&o.ops.pop(),o.trys.pop();continue}i=n.call(l,o)}catch(r){i=[6,r],t=0}finally{u=e=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,r])}}}(this,function(u){switch(u.label){case 0:this.loading=!0,u.label=1;case 1:return u.trys.push([1,3,,4]),l=this,[4,this.noteService.getNotes(this.campaignService.campaign.id,{})];case 2:return l.notes=u.sent(),[3,4];case 3:return n=u.sent(),this.loadErr=n,[3,4];case 4:return this.loading=!1,[2]}})},new((n=void 0)||(n=Promise))(function(t,e){function i(l){try{r(u.next(l))}catch(n){e(n)}}function o(l){try{r(u.throw(l))}catch(n){e(n)}}function r(l){l.done?t(l.value):new n(function(n){n(l.value)}).then(i,o)}r((u=u.apply(l,[])).next())});var l,n,u},l.prototype.selectNote=function(l){this.noteService.editNote(l)},Object.defineProperty(l.prototype,"sortedNotes",{get:function(){if(!this.notes)return null;var l={quest:[],article:[],map:[],other:[]};return this.notes.forEach(function(n){null!==n.questId&&void 0!==n.questId?l.quest.push(n):null!==n.articleId&&void 0!==n.articleId?l.article.push(n):null!==n.mapId&&void 0!==n.mapId?l.map.push(n):l.other.push(n)}),l},enumerable:!0,configurable:!0}),l}()},TSOj:function(l,n,u){"use strict";var t=u("CcnG"),e=u("gIcY"),i=u("Ip0R"),o=u("tB0E"),r=u("xdv0"),a=u("edGd");u.d(n,"a",function(){return m});var c=t.ob({encapsulation:0,styles:[[""]],data:{}});function s(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,0,"div",[["class","loading loading-lg"]],null,null,null,null,null))],null,null)}function p(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,3,"h3",[],null,null,null,null,null)),(l()(),t.Ib(1,null,[" "," "])),(l()(),t.qb(2,0,null,null,1,"button",[["class","btn btn-sm btn-link"]],null,[[null,"click"]],function(l,n,u){var t=!0,e=l.component;return"click"===n&&(t=0!=(e.editUsername=!e.editUsername)&&t),t},null,null)),(l()(),t.qb(3,0,null,null,0,"i",[["class","icon icon-edit"]],null,null,null,null,null))],null,function(l,n){l(n,1,0,n.component.user.username)})}function b(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,8,"div",[["class","form-group"]],null,null,null,null,null)),(l()(),t.qb(1,0,null,null,5,"input",[["class","form-input input-lg"],["id","username"],["name","username"],["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(l,n,u){var e=!0;return"input"===n&&(e=!1!==t.Ab(l,2)._handleInput(u.target.value)&&e),"blur"===n&&(e=!1!==t.Ab(l,2).onTouched()&&e),"compositionstart"===n&&(e=!1!==t.Ab(l,2)._compositionStart()&&e),"compositionend"===n&&(e=!1!==t.Ab(l,2)._compositionEnd(u.target.value)&&e),e},null,null)),t.pb(2,16384,null,0,e.d,[t.E,t.k,[2,e.a]],null,null),t.Fb(1024,null,e.o,function(l){return[l]},[e.d]),t.pb(4,540672,null,0,e.i,[[8,null],[8,null],[6,e.o],[2,e.D]],{form:[0,"form"]},null),t.Fb(2048,null,e.p,null,[e.i]),t.pb(6,16384,null,0,e.q,[[4,e.p]],null,null),(l()(),t.qb(7,0,null,null,1,"button",[["class","btn mt-2"]],null,[[null,"click"]],function(l,n,u){var t=!0,e=l.component;return"click"===n&&(t=0!=(e.editUsername=!1)&&t),t},null,null)),(l()(),t.qb(8,0,null,null,0,"i",[["class","icon icon-cross"]],null,null,null,null,null))],function(l,n){l(n,4,0,n.component.username)},function(l,n){l(n,1,0,t.Ab(n,6).ngClassUntouched,t.Ab(n,6).ngClassTouched,t.Ab(n,6).ngClassPristine,t.Ab(n,6).ngClassDirty,t.Ab(n,6).ngClassValid,t.Ab(n,6).ngClassInvalid,t.Ab(n,6).ngClassPending)})}function d(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,4,"div",[["class","column col-auto"]],null,null,null,null,null)),(l()(),t.qb(1,0,null,null,3,"button",[["class","btn btn-sm"]],[[8,"disabled",0]],[[null,"click"]],function(l,n,u){var t=!0,e=l.component;return"click"===n&&(t=!1!==e.save()&&t),t},null,null)),t.pb(2,278528,null,0,i.i,[t.t,t.u,t.k,t.E],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),t.Db(3,{loading:0}),(l()(),t.Ib(-1,null,[" Save "]))],function(l,n){var u=l(n,3,0,n.component.saving);l(n,2,0,"btn btn-sm",u)},function(l,n){l(n,1,0,n.component.formGroup.invalid)})}function f(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,10,"div",[["class","columns"]],null,null,null,null,null)),(l()(),t.qb(1,0,null,null,2,"div",[["class","column col-auto"]],null,null,null,null,null)),(l()(),t.qb(2,0,null,null,1,"figure",[["class","avatar avatar-xl"]],null,null,null,null,null)),(l()(),t.qb(3,0,null,null,0,"img",[],[[8,"src",4]],null,null,null,null)),(l()(),t.qb(4,0,null,null,4,"div",[["class","column d-flex align-items-center"]],null,null,null,null,null)),(l()(),t.hb(16777216,null,null,1,null,p)),t.pb(6,16384,null,0,i.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null),(l()(),t.hb(16777216,null,null,1,null,b)),t.pb(8,16384,null,0,i.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null),(l()(),t.hb(16777216,null,null,1,null,d)),t.pb(10,16384,null,0,i.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null)],function(l,n){var u=n.component;l(n,6,0,!u.editUsername),l(n,8,0,u.editUsername),l(n,10,0,u.dirty)},function(l,n){l(n,3,0,n.component.user.pictureURL)})}function h(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,4,"div",[["class","container grid-xl"]],null,null,null,null,null)),(l()(),t.hb(16777216,null,null,1,null,s)),t.pb(2,16384,null,0,i.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null),(l()(),t.hb(16777216,null,null,1,null,f)),t.pb(4,16384,null,0,i.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null)],function(l,n){var u=n.component;l(n,2,0,u.loading),l(n,4,0,u.user)},null)}function g(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,1,"dd-account-settings",[],null,null,null,h,c)),t.pb(1,114688,null,0,o.a,[r.a,a.a],null,null)],function(l,n){l(n,1,0)},null)}var m=t.mb("dd-account-settings",o.a,g,{},{},[])},"W/nz":function(l,n,u){"use strict";u.d(n,"a",function(){return t});var t=function(){function l(l){this.sanitize=l}return Object.defineProperty(l.prototype,"html",{get:function(){return this.user?this.sanitize.bypassSecurityTrustHtml('<div class="columns col-gapless">\n      <div class="column col-auto mr-1 d-flex align-items-center">\n        <figure class="avatar avatar-xs">\n          <img src="'+this.user.pictureURL+'" alt="avatar" />\n        </figure>\n      </div>\n      <div class="column col-auto">'+this.user.username+"</div>\n    </div>"):""},enumerable:!0,configurable:!0}),l}()},WNRK:function(l,n,u){"use strict";u.d(n,"a",function(){return C});var t=u("CcnG"),e=u("kzlf"),i=u.n(e),o=u("PSD3"),r=u.n(o),a=u("sSWQ"),c=u("AytR"),s=u("nmfD"),p=(u("uCWu"),u("rZgH"),u("edGd"),u("Lqte")),b=(u("n10a"),u("MICr"),u("xCX2")),d=u.n(b),f=u("BSgo"),h=u("El1G"),g=u("X607"),m=u.n(g),v=function(l,n,u,t){return new(u||(u=Promise))(function(e,i){function o(l){try{a(t.next(l))}catch(n){i(n)}}function r(l){try{a(t.throw(l))}catch(n){i(n)}}function a(l){l.done?e(l.value):new u(function(n){n(l.value)}).then(o,r)}a((t=t.apply(l,n||[])).next())})},y=function(l,n){var u,t,e,i,o={label:0,sent:function(){if(1&e[0])throw e[1];return e[1]},trys:[],ops:[]};return i={next:r(0),throw:r(1),return:r(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function r(i){return function(r){return function(i){if(u)throw new TypeError("Generator is already executing.");for(;o;)try{if(u=1,t&&(e=2&i[0]?t.return:i[0]?t.throw||((e=t.return)&&e.call(t),0):t.next)&&!(e=e.call(t,i[1])).done)return e;switch(t=0,e&&(i=[2&i[0],e.value]),i[0]){case 0:case 1:e=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,t=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!(e=(e=o.trys).length>0&&e[e.length-1])&&(6===i[0]||2===i[0])){o=0;continue}if(3===i[0]&&(!e||i[1]>e[0]&&i[1]<e[3])){o.label=i[1];break}if(6===i[0]&&o.label<e[1]){o.label=e[1],e=i;break}if(e&&o.label<e[2]){o.label=e[2],o.ops.push(i);break}e[2]&&o.ops.pop(),o.trys.pop();continue}i=n.call(l,o)}catch(r){i=[6,r],t=0}finally{u=e=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,r])}}};i.a.register("modules/blotFormatter",d.a),i.a.register("modules/mention",f.a),i.a.register("modules/imageUploader",h.a),i.a.register("modules/cursors",m.a);var C=function(){function l(l,n,u,e,i,o,r,a){this.campaignService=l,this.articleService=n,this.login=u,this.router=e,this.http=i,this.searchService=o,this.componentService=r,this.iconService=a,this.textChange=new t.m,this.selectionChange=new t.m,this._cursorCollection={},this._writeQueue=[]}return Object.defineProperty(l.prototype,"value",{set:function(l){this.writeValue(l)},enumerable:!0,configurable:!0}),l.prototype.ngOnInit=function(){},l.prototype.ngAfterContentInit=function(){var l=this;if(this.readOnly)this._container.nativeElement.classList.add("ql-editor"),this._container.nativeElement.classList.add("p-0");else{for(this._quill=new i.a(this._container.nativeElement,this.getQuillSettings()),this._cursors=this._quill.getModule("cursors"),this._quill.on("text-change",function(n,u,t){if(("user"===t||"api"===t)&&l._onChange){var e=l._quill.getContents();e.ops&&e.ops.length>0&&"\n"!==e.ops[0].insert?(l._onChange(e),l.textChange.emit(n)):l._onChange(null)}}),this._quill.on("selection-change",function(n,u,t){"user"!==t&&"api"!==t||!l._onTouched||(l._onTouched(),l.selectionChange.emit(n))});this._writeQueue.length>0;)this.writeValue(this._writeQueue.pop());this.cursorUpdates&&this.cursorUpdates.subscribe(function(n){if(!l._cursorCollection[n.id]&&n.range){var u=new s.Chance(n.id);l._cursorCollection[n.id]=l._cursors.createCursor(n.id,n.displayName,u.color({format:"hex"}))}n.range?l._cursors.moveCursor(n.id,n.range):l._cursorCollection[n.id]&&l._cursors.removeCursor(n.id)}),this.deltaUpdates&&this.deltaUpdates.subscribe(function(n){l._quill&&l._quill.updateContents(n.ops,"colab")}),this._selectionUpdateInterval=setInterval(function(){l.selectionChange.emit(l._quill.getSelection())},1500)}},l.prototype.writeValue=function(l){var n=this;if(this._quill||this.readOnly)if(this.readOnly){if(null==l)return;this.renderQuillHTML(l).then(function(l){n._container.nativeElement.innerHTML=l,setTimeout(function(){n.setupMentions(),n.setupImages()},1)})}else null!=l?this._quill.setContents(l.ops,"form"):this._quill.setContents([],"form");else this._writeQueue.push(l)},l.prototype.registerOnChange=function(l){this._onChange=l},l.prototype.registerOnTouched=function(l){this._onTouched=l},l.prototype.setDisabledState=function(l){},l.prototype.getEntityPreset=function(l){return this.campaignService.campaign.entityPresets.find(function(n){return n.id===l})},l.prototype.getQuillSettings=function(){var l=this,n={placeholder:this.placeholder,modules:{blotFormatter:{},toolbar:[["bold","italic","underline","strike"],["blockquote","code-block","image","link"],[{list:"ordered"},{list:"bullet"}],[{script:"sub"},{script:"super"}],[{indent:"-1"},{indent:"+1"}],[{header:[1,2,3,4,5,6,!1]}],[{color:[]},{background:[]}],[{align:[]}],["clean"]],mention:{mentionDenotationChars:["@"],allowedChars:/^[A-Za-z0-9\s'_\-"]*$/,source:function(n,u,t){return v(l,void 0,void 0,function(){var l,t;return y(this,function(e){switch(e.label){case 0:return[4,this.searchService.search(n)];case 1:return l=e.sent(),t=l.map(function(l){switch(l.type){case p.a.ARTICLE:return{id:l.article.id,value:l.article.name,obj:l.article,type:l.type};case p.a.ENTITY:return{id:l.entity.id,value:l.entity.name,obj:l.entity,type:l.type};case p.a.MAP:return{id:l.map.id,value:l.map.name,obj:l.map,type:l.type};case p.a.QUEST:return{id:l.quest.id,value:l.quest.name,obj:l.quest,type:l.type};case p.a.USER:return{id:l.user.id,value:l.user.username,obj:l.user,type:l.type};case p.a.CONCEPT:return{id:l.concept.id,value:l.concept.name,concepttypeid:l.concept.conceptTypeId,obj:l.concept,type:l.type}}}),n.trim().length>=3&&this.campaignService.canEdit&&t.push({id:"create-empty-article",value:n,type:"create-article"}),u(t),[2]}})})},renderItem:function(n,u){var t="<div>";function e(l){return'<span class="label">'+l+"</span>"}switch(n.type){case p.a.ARTICLE:t+='<span><i class="icon icon-bookmark"></i> '+n.obj.name+" "+(n.obj.published?"":e("Hidden"))+"</span>";break;case p.a.ENTITY:var i=l.getEntityPreset(n.obj.entityPresetId);i&&i.imageId?t+='<span><img width="16" src="https://res.cloudinary.com/dqhk8k6iv/image/upload/t_thumb/'+i.imageId+'"> '+n.obj.name+"</span>":t+='<span><i class="icon icon-emoji"></i> '+n.obj.name+"</span>";break;case p.a.MAP:t+='<span><i class="icon icon-location"></i> '+n.obj.name+" "+(n.obj.playerVisible?"":e("Hidden"))+"</span>";break;case p.a.QUEST:t+='<span><i class="icon icon-flag"></i> '+n.obj.name+" "+(n.obj.visible?"":" "+e("Hidden"))+(n.obj.visible?"":" "+e("Unavailable"))+"</span>";break;case p.a.USER:t+='<span><i class="icon icon-people"></i> '+n.obj.username+"</span>";break;case p.a.CONCEPT:n.obj.conceptType&&n.obj.conceptType.icon?t+='<span><img width="16" src="'+l.iconService.getIconSrc(n.obj.conceptType.icon)+'"> '+n.obj.name+"</span>":t+="<span>"+n.obj.name+"</span>";break;case"create-article":t+='<span><i class="icon icon-plus"></i> '+n.value+"</span>"}return t+"</div>"},onSelect:function(n,u){return v(l,void 0,void 0,function(){var l;return y(this,function(t){switch(t.label){case 0:switch(n.type){case p.a.ARTICLE:return[3,1];case p.a.ENTITY:return[3,2];case p.a.MAP:return[3,3];case p.a.QUEST:return[3,4];case p.a.USER:return[3,5];case p.a.CONCEPT:return[3,6];case"create-article":return[3,7]}return[3,11];case 1:case 2:case 3:case 4:return n.value=n.value.name,[3,11];case 5:return n.value=n.value.username,[3,11];case 6:return n.value=n.value.name,n.concepttypeid=n.value.concepttypeid,[3,11];case 7:return[4,r.a.fire({title:"Create new article?",text:"A new article with the name "+n.value+" will be created",showCancelButton:!0})];case 8:return!0!==t.sent().value?[3,10]:[4,this.articleService.createArticle({name:n.value.trim(),published:!1,campaignId:this.campaignService.campaign.id,userId:this.login.id,tags:["ToDo"],content:{}})];case 9:l=t.sent(),n.id=l.id,n.type=p.a.ARTICLE,u(n),t.label=10;case 10:return[2];case 11:return u(n),[2]}})})},showDenotationChar:!1,listItemClass:"menu-item",mentionListClass:"menu",dataAttributes:["id","value","type","concepttypeid"]}},readOnly:this.readOnly};return this.readOnly?(n.modules.toolbar=!1,n.modules.theme=void 0,n.modules.mention=!1):(n.theme="snow",n.modules.cursors=!0,this.simple?n.modules.toolbar=[["bold","italic","underline","strike",{list:"ordered"},{list:"bullet"},"blockquote"]]:n.modules.imageUploader={upload:function(n){return v(l,void 0,void 0,function(){var l;return y(this,function(u){switch(u.label){case 0:return(l=new FormData).append("file",n),l.append("campaignId",this.campaignService.campaign.id),[4,this.http.post(c.a.apiURL+"/upload",l).toPromise()];case 1:return[2,u.sent().secure_url]}})})}}),n},l.prototype.renderQuillHTML=function(l){var n=this;return new Promise(function(u,t){var e=document.createElement("div");new i.a(e,n.getQuillSettings()).setContents(l.ops),setTimeout(function(){u(e.firstChild.innerHTML)},1)})},l.prototype.setupMentions=function(){var l=this;this._container.nativeElement.querySelectorAll('[data-type="'+p.a.ARTICLE+'"]').forEach(function(n){var u=n.dataset.id;n.addEventListener("click",function(){l.router.navigate(["campaigns",l.campaignService.campaign.id,"articles",u])})}),this._container.nativeElement.querySelectorAll('[data-type="'+p.a.ENTITY+'"]').forEach(function(n){var u=n.dataset.id;n.addEventListener("click",function(){l.router.navigate(["campaigns",l.campaignService.campaign.id,"entities",u])})}),this._container.nativeElement.querySelectorAll('[data-type="'+p.a.CONCEPT+'"]').forEach(function(n){var u=n.dataset.id,t=n.dataset.concepttypeid;n.addEventListener("click",function(){l.router.navigate(["campaigns",l.campaignService.campaign.id,"concepts",t,u,"view"])})}),this._container.nativeElement.querySelectorAll('[data-type="'+p.a.MAP+'"]').forEach(function(n){var u=n.dataset.id;n.addEventListener("click",function(){l.router.navigate(["campaigns",l.campaignService.campaign.id,"maps",u])})}),this._container.nativeElement.querySelectorAll('[data-type="'+p.a.QUEST+'"]').forEach(function(n){var u=n.dataset.id;n.addEventListener("click",function(){l.router.navigate(["campaigns",l.campaignService.campaign.id,"quests",u])})}),this._container.nativeElement.querySelectorAll('[data-type="'+p.a.USER+'"]').forEach(function(n){var u=n.dataset.id,t=l.campaignService.campaign.members.find(function(l){return l.userId===u});t&&new a.a(n,{trigger:"click hover",html:!0,title:"Top",placement:"top-end",template:'<div class="tooltip-on-top card" role="tooltip">\n          <div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',popperOptions:{placement:"top-end",modifiers:{flip:{behavior:["bottom","top","left","right"]},preventOverflow:{boundariesElement:document.getElementById("app-content")}}}}).updateTitleContent('<div class="p-1"><h5>'+t.user.username+"</h5></div>")})},l.prototype.setupImages=function(){this._container.nativeElement.querySelectorAll("img").forEach(function(l){l.classList.add("img-responsive")})},l}()},YeDP:function(l,n,u){"use strict";u.d(n,"a",function(){return r}),u("6awz"),u("uCWu");var t=u("PSD3"),e=u.n(t),i=function(l,n,u,t){return new(u||(u=Promise))(function(e,i){function o(l){try{a(t.next(l))}catch(n){i(n)}}function r(l){try{a(t.throw(l))}catch(n){i(n)}}function a(l){l.done?e(l.value):new u(function(n){n(l.value)}).then(o,r)}a((t=t.apply(l,n||[])).next())})},o=function(l,n){var u,t,e,i,o={label:0,sent:function(){if(1&e[0])throw e[1];return e[1]},trys:[],ops:[]};return i={next:r(0),throw:r(1),return:r(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function r(i){return function(r){return function(i){if(u)throw new TypeError("Generator is already executing.");for(;o;)try{if(u=1,t&&(e=2&i[0]?t.return:i[0]?t.throw||((e=t.return)&&e.call(t),0):t.next)&&!(e=e.call(t,i[1])).done)return e;switch(t=0,e&&(i=[2&i[0],e.value]),i[0]){case 0:case 1:e=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,t=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!(e=(e=o.trys).length>0&&e[e.length-1])&&(6===i[0]||2===i[0])){o=0;continue}if(3===i[0]&&(!e||i[1]>e[0]&&i[1]<e[3])){o.label=i[1];break}if(6===i[0]&&o.label<e[1]){o.label=e[1],e=i;break}if(e&&o.label<e[2]){o.label=e[2],o.ops.push(i);break}e[2]&&o.ops.pop(),o.trys.pop();continue}i=n.call(l,o)}catch(r){i=[6,r],t=0}finally{u=e=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,r])}}},r=function(){function l(l,n,u){this.mapService=l,this.campaignService=n,this.router=u,this.loading=!1,this.page=1}return l.prototype.ngOnInit=function(){this.load()},l.prototype.load=function(){return i(this,void 0,void 0,function(){var l;return o(this,function(n){switch(n.label){case 0:this.loading=!0,n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.mapService.getMaps(this.campaignService.campaign.id,10,10*(this.page-1))];case 2:return l=n.sent(),this.maps=l.maps,this.totalMaps=l.total,[3,4];case 3:throw n.sent();case 4:return this.loading=!1,[2]}})})},l.prototype.selectMap=function(l){this.router.navigate(["campaigns",this.campaignService.campaign.id,"maps",l.id])},l.prototype.newMap=function(){this.router.navigate(["campaigns",this.campaignService.campaign.id,"maps","upload"])},l.prototype.delete=function(l){return i(this,void 0,void 0,function(){return o(this,function(n){switch(n.label){case 0:return[4,e.a.fire({title:"Are you sure?",showCancelButton:!0})];case 1:if(!0!==n.sent().value)return[3,5];n.label=2;case 2:return n.trys.push([2,4,,5]),[4,this.mapService.deleteMap(l.id)];case 3:return n.sent(),this.load(),[3,5];case 4:throw n.sent();case 5:return[2]}})})},l.prototype.setPage=function(l){this.page=l,this.load()},Object.defineProperty(l.prototype,"editable",{get:function(){return this.campaignService.canEdit},enumerable:!0,configurable:!0}),l}()},a8fi:function(l,n,u){"use strict";u.d(n,"a",function(){return a}),u.d(n,"b",function(){return c});var t=u("CcnG"),e=u("AytR"),i=u("edGd"),o=u("t/Na"),r=function(){return(r=Object.assign||function(l){for(var n,u=1,t=arguments.length;u<t;u++)for(var e in n=arguments[u])Object.prototype.hasOwnProperty.call(n,e)&&(l[e]=n[e]);return l}).apply(this,arguments)},a=function(){function l(l,n){this.http=l,this.login=n,this._noteUpdate=new t.m,this._noteCreate=new t.m,this._noteDelete=new t.m,this.clearNoteCache()}return l.prototype.setNoteEditor=function(l){this._noteEditor=l},l.prototype.addNote=function(l){this._noteEditor.addNote(l)},l.prototype.editNote=function(l){this._noteEditor.editNote(l)},l.prototype.clearNoteCache=function(){if(this._noteCache)for(var l=0,n=this._noteCache;l<n.length;l++){var u=n[l];this._noteDelete.emit(u)}this._noteCache=[]},l.prototype.getQuestNotes=function(l){return this._noteCache.filter(function(n){return n.questId===l})},l.prototype.getMapNotes=function(l){return this._noteCache.filter(function(n){return n.mapId===l})},l.prototype.getArticleNotes=function(l){return this._noteCache.filter(function(n){return n.articleId===l})},l.prototype.getNotes=function(l,n){var u=this,t="?campaignId="+l;return n.questId&&(t+="&questId="+n.questId),n.mapId&&(t+="&mapId="+n.mapId),n.articleId&&(t+="&articleId="+n.articleId),this.http.get(e.a.apiURL+"/notes"+t).toPromise().then(function(l){return u.addOrUpdateCacheNotes(l),l})},l.prototype.getNote=function(l){var n=this;return this.http.get(e.a.apiURL+"/notes/"+l).toPromise().then(function(l){return n.addOrUpdateCacheNotes([l]),l})},l.prototype.createNote=function(l){var n=this;return this.http.post(e.a.apiURL+"/notes",l).toPromise().then(function(l){return n.addOrUpdateCacheNotes([l]),l})},l.prototype.updateNote=function(l){var n=this;return this.http.put(e.a.apiURL+"/notes/"+l.id,l).toPromise().then(function(){n.addOrUpdateCacheNotes([l])})},l.prototype.deleteNote=function(l){var n=this;return this.http.delete(e.a.apiURL+"/notes/"+l).toPromise().then(function(){n.removeNoteFromCache(l)})},l.prototype.addOrUpdateCacheNotes=function(l){for(var n=function(l){var n=u._noteCache.find(function(n){return n.id===l.id});void 0!==n?l.userId!==u.login.id&&!1===l.publicView?u.removeNoteFromCache(l.id):(Object.assign(n,l),u._noteUpdate.emit(n)):(u._noteCache.push(r({},l)),u._noteCreate.emit(l))},u=this,t=0,e=l;t<e.length;t++)n(e[t])},l.prototype.removeNoteFromCache=function(l){var n=this;this._noteCache=this._noteCache.filter(function(u){return u.id!==l||(n._noteDelete.emit(u),!1)})},Object.defineProperty(l.prototype,"noteDelete",{get:function(){return this._noteDelete},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"noteCreate",{get:function(){return this._noteCreate},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"noteUpdate",{get:function(){return this._noteUpdate},enumerable:!0,configurable:!0}),l.ngInjectableDef=t.T({factory:function(){return new l(t.X(o.c),t.X(i.a))},token:l,providedIn:"root"}),l}(),c=function(l){return l[l.QUEST=0]="QUEST",l[l.MAP=1]="MAP",l[l.ARTICLE=2]="ARTICLE",l}({})},btaL:function(l,n,u){"use strict";u.d(n,"a",function(){return i});var t=u("CcnG"),e=function(){return(e=Object.assign||function(l){for(var n,u=1,t=arguments.length;u<t;u++)for(var e in n=arguments[u])Object.prototype.hasOwnProperty.call(n,e)&&(l[e]=n[e]);return l}).apply(this,arguments)},i=function(){function l(){}return l.prototype.mapCurrencyValues=function(l,n){null==l&&(l=[{value:1,name:"gp",useInConversions:!0}]),null==n?n=0:n*=100;for(var u=[],t=0,i=l.filter(function(l){return l.useInConversions}).map(function(l){return e({},l,{value:100*l.value})}).sort(function(l,n){return n.value-l.value});t<i.length;t++){var o=i[t],r=n%o.value,a=Math.round(n-r)/o.value;if(a>0&&u.push({name:o.name,amount:a}),(n-=a*o.value)<=0)break}return u},l.prototype.mapCoinValues=function(l,n){n||(n={}),null==l&&(l=[{value:1,name:"gp",useInConversions:!0}]);for(var u=[],t=0,i=l.map(function(l){return e({},l,{value:100*l.value})}).sort(function(l,n){return n.value-l.value});t<i.length;t++){var o=i[t],r=n[o.name];r&&u.push({name:o.name,amount:r})}return u},l.prototype.hasResources=function(l,n,u){if(null==l||null==n)return!1;if(!u)return null!==l.value&&void 0!==l.value&&l.value>=n.value;if(null===l.values||void 0===l.values||null===n.values||void 0===n.values)return!1;for(var t=0,e=Object.keys(n.values).filter(function(l){return null!==n.values[l]&&void 0!==n.values[l]});t<e.length;t++){var i=e[t],o=n.values[i],r=l.values[i];if(!(null!=r&&r>=o))return!1}return!0},l.prototype.subtract=function(l,n,u){if(u){l.values||(l.values={}),n.values||(n.values={});for(var t={value:null,values:{}},e=0,i=Object.keys(n);e<i.length;e++){var o=i[e];l.values[o]?t.values[o]=l.values[o]-n.values[o]:t.values[o]=-n.values[o]}return t}return{value:l.value-n.value,values:null}},l.prototype.getCurrencyString=function(l){return l.map(function(l){return""+l.amount+l.name}).join(" ")},l.prototype.getCurrencyHTMLString=function(l){return l.map(function(l){return l.amount+'<span class="currency-text">'+l.name+"</span>"}).join(" ")},l.ngInjectableDef=t.T({factory:function(){return new l},token:l,providedIn:"root"}),l}()},cFsh:function(l,n,u){"use strict";var t=u("CcnG"),e=u("gIcY"),i=u("Ip0R"),o=u("yq7w"),r=u("uCWu"),a=u("edGd"),c=u("ZYCi");u.d(n,"a",function(){return q});var s=t.ob({encapsulation:0,styles:[[""]],data:{}});function p(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,1,"p",[["class","form-input-hint"]],null,null,null,null,null)),(l()(),t.Ib(-1,null,[" A name is required "]))],null,null)}function b(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,1,"p",[["class","form-input-hint"]],null,null,null,null,null)),(l()(),t.Ib(1,null,[" "," "]))],null,function(l,n){l(n,1,0,n.component.fileError)})}function d(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,30,"form",[["novalidate",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngSubmit"],[null,"submit"],[null,"reset"]],function(l,n,u){var e=!0,i=l.component;return"submit"===n&&(e=!1!==t.Ab(l,2).onSubmit(u)&&e),"reset"===n&&(e=!1!==t.Ab(l,2).onReset()&&e),"ngSubmit"===n&&(e=!1!==i.submit()&&e),e},null,null)),t.pb(1,16384,null,0,e.B,[],null,null),t.pb(2,540672,null,0,e.l,[[8,null],[8,null]],{form:[0,"form"]},{ngSubmit:"ngSubmit"}),t.Fb(2048,null,e.c,null,[e.l]),t.pb(4,16384,null,0,e.r,[[4,e.c]],null,null),(l()(),t.qb(5,0,null,null,10,"div",[["class","form-group"]],null,null,null,null,null)),t.pb(6,278528,null,0,i.i,[t.t,t.u,t.k,t.E],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),t.Db(7,{"has-error":0}),(l()(),t.qb(8,0,null,null,5,"input",[["class","form-input"],["formControlName","name"],["id","name"],["name","name"],["placeholder","Name"],["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(l,n,u){var e=!0;return"input"===n&&(e=!1!==t.Ab(l,9)._handleInput(u.target.value)&&e),"blur"===n&&(e=!1!==t.Ab(l,9).onTouched()&&e),"compositionstart"===n&&(e=!1!==t.Ab(l,9)._compositionStart()&&e),"compositionend"===n&&(e=!1!==t.Ab(l,9)._compositionEnd(u.target.value)&&e),e},null,null)),t.pb(9,16384,null,0,e.d,[t.E,t.k,[2,e.a]],null,null),t.Fb(1024,null,e.o,function(l){return[l]},[e.d]),t.pb(11,671744,null,0,e.j,[[3,e.c],[8,null],[8,null],[6,e.o],[2,e.D]],{name:[0,"name"]},null),t.Fb(2048,null,e.p,null,[e.j]),t.pb(13,16384,null,0,e.q,[[4,e.p]],null,null),(l()(),t.hb(16777216,null,null,1,null,p)),t.pb(15,16384,null,0,i.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null),(l()(),t.qb(16,0,null,null,12,"div",[["class","form-group"]],null,null,null,null,null)),t.pb(17,278528,null,0,i.i,[t.t,t.u,t.k,t.E],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),t.Db(18,{"has-error":0}),(l()(),t.qb(19,0,null,null,1,"label",[["class","form-label"],["for","map-upload"]],null,null,null,null,null)),(l()(),t.Ib(-1,null,["Choose Image"])),(l()(),t.qb(21,0,null,null,5,"input",[["accept","image/*"],["class","form-input"],["formControlName","file"],["name","map-upload"],["type","file"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"change"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(l,n,u){var e=!0,i=l.component;return"input"===n&&(e=!1!==t.Ab(l,22)._handleInput(u.target.value)&&e),"blur"===n&&(e=!1!==t.Ab(l,22).onTouched()&&e),"compositionstart"===n&&(e=!1!==t.Ab(l,22)._compositionStart()&&e),"compositionend"===n&&(e=!1!==t.Ab(l,22)._compositionEnd(u.target.value)&&e),"change"===n&&(e=!1!==i.onFileChange(u)&&e),e},null,null)),t.pb(22,16384,null,0,e.d,[t.E,t.k,[2,e.a]],null,null),t.Fb(1024,null,e.o,function(l){return[l]},[e.d]),t.pb(24,671744,null,0,e.j,[[3,e.c],[8,null],[8,null],[6,e.o],[2,e.D]],{name:[0,"name"]},null),t.Fb(2048,null,e.p,null,[e.j]),t.pb(26,16384,null,0,e.q,[[4,e.p]],null,null),(l()(),t.hb(16777216,null,null,1,null,b)),t.pb(28,16384,null,0,i.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null),(l()(),t.qb(29,0,null,null,1,"button",[["class","btn btn-primary mt-2"]],null,null,null,null,null)),(l()(),t.Ib(-1,null,["Upload"]))],function(l,n){var u=n.component;l(n,2,0,u.formGroup);var t=l(n,7,0,u.name.invalid&&(u.name.touched||u.name.dirty));l(n,6,0,"form-group",t),l(n,11,0,"name"),l(n,15,0,u.name.invalid&&(u.name.touched||u.name.dirty)&&u.name.errors.required);var e=l(n,18,0,u.fileControl.invalid&&(u.fileControl.touched||u.fileControl.dirty)||null!==u.fileError);l(n,17,0,"form-group",e),l(n,24,0,"file"),l(n,28,0,null!==u.fileError)},function(l,n){l(n,0,0,t.Ab(n,4).ngClassUntouched,t.Ab(n,4).ngClassTouched,t.Ab(n,4).ngClassPristine,t.Ab(n,4).ngClassDirty,t.Ab(n,4).ngClassValid,t.Ab(n,4).ngClassInvalid,t.Ab(n,4).ngClassPending),l(n,8,0,t.Ab(n,13).ngClassUntouched,t.Ab(n,13).ngClassTouched,t.Ab(n,13).ngClassPristine,t.Ab(n,13).ngClassDirty,t.Ab(n,13).ngClassValid,t.Ab(n,13).ngClassInvalid,t.Ab(n,13).ngClassPending),l(n,21,0,t.Ab(n,26).ngClassUntouched,t.Ab(n,26).ngClassTouched,t.Ab(n,26).ngClassPristine,t.Ab(n,26).ngClassDirty,t.Ab(n,26).ngClassValid,t.Ab(n,26).ngClassInvalid,t.Ab(n,26).ngClassPending)})}function f(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,1,"h5",[],null,null,null,null,null)),(l()(),t.Ib(-1,null,["Uploading Map"]))],null,null)}function h(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,1,"h5",[],null,null,null,null,null)),(l()(),t.Ib(-1,null,["Getting Ready"]))],null,null)}function g(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,0,"progress",[["class","progress"],["max","100"]],[[8,"value",0]],null,null,null,null))],null,function(l,n){l(n,0,0,n.component.uploadProgress)})}function m(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,0,"progress",[["class","progress"],["max","100"]],null,null,null,null,null))],null,null)}function v(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,8,"div",[],null,null,null,null,null)),(l()(),t.hb(16777216,null,null,1,null,f)),t.pb(2,16384,null,0,i.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null),(l()(),t.hb(16777216,null,null,1,null,h)),t.pb(4,16384,null,0,i.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null),(l()(),t.hb(16777216,null,null,1,null,g)),t.pb(6,16384,null,0,i.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null),(l()(),t.hb(16777216,null,null,1,null,m)),t.pb(8,16384,null,0,i.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null)],function(l,n){var u=n.component;l(n,2,0,u.uploadProgress<100),l(n,4,0,100===u.uploadProgress),l(n,6,0,u.uploadProgress<100),l(n,8,0,100===u.uploadProgress)},null)}function y(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,4,"div",[],null,null,null,null,null)),(l()(),t.qb(1,0,null,null,1,"h5",[],null,null,null,null,null)),(l()(),t.Ib(-1,null,["Your map is processing!"])),(l()(),t.qb(3,0,null,null,1,"p",[],null,null,null,null,null)),(l()(),t.Ib(-1,null,[" You will receive a notification when it is ready "]))],null,null)}function C(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,10,"div",[["class","container grid-xl"]],null,null,null,null,null)),(l()(),t.qb(1,0,null,null,1,"h3",[],null,null,null,null,null)),(l()(),t.Ib(-1,null,["Create Map"])),(l()(),t.qb(3,0,null,null,1,"p",[],null,null,null,null,null)),(l()(),t.Ib(-1,null,[" A map can be any .png or .jpg image. Maps can be up to 30,000px wide, and 30,000px tall. The image file can be up to 50mb. "])),(l()(),t.hb(16777216,null,null,1,null,d)),t.pb(6,16384,null,0,i.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null),(l()(),t.hb(16777216,null,null,1,null,v)),t.pb(8,16384,null,0,i.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null),(l()(),t.hb(16777216,null,null,1,null,y)),t.pb(10,16384,null,0,i.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null)],function(l,n){var u=n.component;l(n,6,0,!u.isUploading&&!u.mapId),l(n,8,0,u.isUploading),l(n,10,0,u.mapId)},null)}function I(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,1,"dd-map-upload",[],null,null,null,C,s)),t.pb(1,114688,null,0,o.a,[r.b,a.a,c.k],null,null)],function(l,n){l(n,1,0)},null)}var q=t.mb("dd-map-upload",o.a,I,{},{},[])},crnd:function(l,n,u){var t={"./articles/articles.module.ngfactory":["F3az",8],"./mapping/mapping.module.ngfactory":["1IzM",7],"./notes/notes.module.ngfactory":["piEU",5],"./overview/overview.module.ngfactory":["jK0F",6],"./users/users.module.ngfactory":["WKV2",4]};function e(l){var n=t[l];return n?u.e(n[1]).then(function(){var l=n[0];return u(l)}):Promise.resolve().then(function(){var n=new Error("Cannot find module '"+l+"'");throw n.code="MODULE_NOT_FOUND",n})}e.keys=function(){return Object.keys(t)},e.id="crnd",l.exports=e},dtdw:function(l,n,u){"use strict";u.d(n,"a",function(){return p}),u.d(n,"b",function(){return b});var t=u("CcnG"),e=u("Gpoy"),i=u("AytR"),o=u("edGd"),r=u("a8fi"),a=u("SZbH"),c=function(l,n,u,t){return new(u||(u=Promise))(function(e,i){function o(l){try{a(t.next(l))}catch(n){i(n)}}function r(l){try{a(t.throw(l))}catch(n){i(n)}}function a(l){l.done?e(l.value):new u(function(n){n(l.value)}).then(o,r)}a((t=t.apply(l,n||[])).next())})},s=function(l,n){var u,t,e,i,o={label:0,sent:function(){if(1&e[0])throw e[1];return e[1]},trys:[],ops:[]};return i={next:r(0),throw:r(1),return:r(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function r(i){return function(r){return function(i){if(u)throw new TypeError("Generator is already executing.");for(;o;)try{if(u=1,t&&(e=2&i[0]?t.return:i[0]?t.throw||((e=t.return)&&e.call(t),0):t.next)&&!(e=e.call(t,i[1])).done)return e;switch(t=0,e&&(i=[2&i[0],e.value]),i[0]){case 0:case 1:e=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,t=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!(e=(e=o.trys).length>0&&e[e.length-1])&&(6===i[0]||2===i[0])){o=0;continue}if(3===i[0]&&(!e||i[1]>e[0]&&i[1]<e[3])){o.label=i[1];break}if(6===i[0]&&o.label<e[1]){o.label=e[1],e=i;break}if(e&&o.label<e[2]){o.label=e[2],o.ops.push(i);break}e[2]&&o.ops.pop(),o.trys.pop();continue}i=n.call(l,o)}catch(r){i=[6,r],t=0}finally{u=e=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,r])}}},p=function(l){return l[l.NOT_CONNECTED=0]="NOT_CONNECTED",l[l.CONNECTED=1]="CONNECTED",l[l.CLOSED=2]="CLOSED",l[l.CONNECTING=3]="CONNECTING",l[l.AUTHENTICATING=4]="AUTHENTICATING",l}({}),b=function(){function l(l,n,u){var e=this;this.login=l,this.noteService=n,this.toastr=u,this.entityUpdated=new t.m,this.entityCreated=new t.m,this.entityDeleted=new t.m,this.campaignUpdated=new t.m,this.campaignRefresh=new t.m,this.articleCreated=new t.m,this.articleUpdated=new t.m,this.articleDeleted=new t.m,this.cursorUpdate=new t.m,this.noteDeltaUpdate=new t.m,this.stateUpdate=new t.m,this.conceptEntityUpdate=new t.m,this.conceptEntityDelete=new t.m,this.conceptArticleUpdate=new t.m,this.conceptArticleDelete=new t.m,this.notificationUpdate=new t.m,this._state=p.NOT_CONNECTED,this.stateUpdate.emit(this._state),this.login.loginStatus.subscribe(function(l){l===o.b.LOGGED_IN?e.start():l===o.b.NOT_LOGGED_IN&&e.stop()}),this.login.isLoggedIn&&this.start()}return l.prototype.setup=function(){return c(this,void 0,void 0,function(){var l=this;return s(this,function(n){switch(n.label){case 0:return this.connection.onclose(function(n){l._state!==p.NOT_CONNECTED&&(l._state=p.CLOSED,l.stateUpdate.emit(l._state),l.start())}),this.connection.on("AuthenticateComplete",function(){return l.authComplete()}),this.connection.on("CampaignUpdate",function(n){return l.campaignUpdated.emit(n)}),this.connection.on("Notify",function(){l.notificationUpdate.emit(!0)}),this.connection.on("EventNotify",function(n){l.toastr.info(n.message)}),this.connection.on("EntityUpdate",function(n){l.entityUpdated.emit(n)}),this.connection.on("EntityCreate",function(n){l.entityCreated.emit(n)}),this.connection.on("EntityDelete",function(n){l.entityDeleted.emit(n)}),this.connection.on("NoteCreate",function(n){l.noteService.addOrUpdateCacheNotes([n])}),this.connection.on("NoteUpdate",function(n){l.noteService.addOrUpdateCacheNotes([n])}),this.connection.on("NoteDelete",function(n){l.noteService.removeNoteFromCache(n.id)}),this.connection.on("ArticleCreate",function(n){l.articleCreated.emit(n)}),this.connection.on("ArticleUpdate",function(n){l.articleUpdated.emit(n)}),this.connection.on("ArticleDelete",function(n){l.articleDeleted.emit(n)}),this.connection.on("NoteCursorUpdate",function(n){l.cursorUpdate.emit(n)}),this.connection.on("NoteDeltaUpdate",function(n){l.noteDeltaUpdate.emit(n)}),this.connection.on("ConceptEntityUpdate",function(n){l.conceptEntityUpdate.emit(n)}),this.connection.on("ConceptEntityDelete",function(n){l.conceptEntityDelete.emit(n)}),this.connection.on("RefreshCurrentCampaign",function(){l.campaignRefresh.emit(!0)}),this.connection.on("ConceptArticleUpdate",function(n){l.conceptArticleUpdate.emit(n)}),this.connection.on("ConceptArticleDelete",function(n){l.conceptArticleDelete.emit(n)}),[4,this.authenticate()];case 1:return n.sent(),[2]}})})},l.prototype.authenticate=function(){return c(this,void 0,void 0,function(){return s(this,function(l){switch(l.label){case 0:this._state=p.AUTHENTICATING,this.stateUpdate.emit(this._state),l.label=1;case 1:return l.trys.push([1,3,,4]),[4,this.connection.invoke("Authenticate")];case 2:return l.sent(),[3,4];case 3:throw l.sent();case 4:return[2]}})})},l.prototype.start=function(){return c(this,void 0,void 0,function(){var l=this;return s(this,function(n){switch(n.label){case 0:if(-1===[p.CLOSED,p.NOT_CONNECTED].indexOf(this.state))return[2];this.connection=(new e.a).withUrl(""+i.a.hubURL,{accessTokenFactory:function(){return l.login.token}}).configureLogging(i.a.production?e.b.Critical:e.b.Information).build(),n.label=1;case 1:return n.trys.push([1,4,,5]),this._state=p.CONNECTING,this.stateUpdate.emit(this._state),[4,this.connection.start()];case 2:return n.sent(),this._state=p.CONNECTED,this.stateUpdate.emit(this._state),[4,this.setup()];case 3:return n.sent(),[3,5];case 4:return n.sent(),this._state=p.CLOSED,this.stateUpdate.emit(this._state),this._retryTimeout=window.setTimeout(function(){l.start()},5e3),[3,5];case 5:return[2]}})})},l.prototype.stop=function(){return c(this,void 0,void 0,function(){return s(this,function(l){switch(l.label){case 0:return this.connection?(clearTimeout(this._retryTimeout),this._state=p.NOT_CONNECTED,this.stateUpdate.emit(this._state),[4,this.connection.stop()]):[3,2];case 1:l.sent(),l.label=2;case 2:return[2]}})})},l.prototype.authComplete=function(){this._state=p.CONNECTED,this.stateUpdate.emit(this._state)},l.prototype.subscribeCampaign=function(l){return c(this,void 0,void 0,function(){return s(this,function(n){switch(n.label){case 0:if(this.state!==p.CONNECTED)return console.warn("Not in connected state"),[2];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.connection.invoke("SubscribeCampaign",l)];case 2:return n.sent(),[3,4];case 3:throw n.sent();case 4:return[2]}})})},l.prototype.unsubscribeCampaign=function(l){return c(this,void 0,void 0,function(){return s(this,function(n){switch(n.label){case 0:if(this.state!==p.CONNECTED)return console.warn("Not in connected state"),[2];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.connection.invoke("UnsubscribeCampaign",l)];case 2:return n.sent(),[3,4];case 3:throw n.sent();case 4:return[2]}})})},l.prototype.subscribeEntities=function(l){return c(this,void 0,void 0,function(){return s(this,function(n){switch(n.label){case 0:if(this.state!==p.CONNECTED)return console.warn("Not in connected state"),[2];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.connection.invoke("SubscribeEntities",l)];case 2:return n.sent(),[3,4];case 3:throw n.sent();case 4:return[2]}})})},l.prototype.unsubscribeEntities=function(l){return c(this,void 0,void 0,function(){return s(this,function(n){switch(n.label){case 0:if(this.state!==p.CONNECTED)return console.warn("Not in connected state"),[2];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.connection.invoke("UnsubscribeEntities",l)];case 2:return n.sent(),[3,4];case 3:throw n.sent();case 4:return[2]}})})},l.prototype.subscribeNote=function(l){return c(this,void 0,void 0,function(){return s(this,function(n){switch(n.label){case 0:if(this.state!==p.CONNECTED)return console.warn("Not in connected state"),[2];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.connection.invoke("SubscribeNote",l)];case 2:return n.sent(),[3,4];case 3:throw n.sent();case 4:return[2]}})})},l.prototype.unsubscribeNote=function(l){return c(this,void 0,void 0,function(){return s(this,function(n){switch(n.label){case 0:if(this.state!==p.CONNECTED)return console.warn("Not in connected state"),[2];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.connection.invoke("UnsubscribeNote",l)];case 2:return n.sent(),[3,4];case 3:throw n.sent();case 4:return[2]}})})},l.prototype.sendNoteCursorUpdate=function(l,n){return c(this,void 0,void 0,function(){return s(this,function(u){switch(u.label){case 0:return this.state!==p.CONNECTED?(console.warn("Not in connected state"),[2]):[4,this.connection.invoke("NoteCursorUpdate",l,{range:n})];case 1:return u.sent(),[2]}})})},l.prototype.sendNoteDeltaUpdate=function(l,n){return c(this,void 0,void 0,function(){return s(this,function(u){switch(u.label){case 0:return this.state!==p.CONNECTED?(console.warn("Not in connected state"),[2]):[4,this.connection.invoke("NoteDeltaUpdate",l,n)];case 1:return u.sent(),[2]}})})},l.prototype.subscribeArticles=function(l){return c(this,void 0,void 0,function(){return s(this,function(n){switch(n.label){case 0:return this.state!==p.CONNECTED?(console.warn("Not in connected state"),[2]):[4,this.connection.invoke("SubscribeArticles",l)];case 1:return n.sent(),[2]}})})},l.prototype.unsubscribeArticles=function(l){return c(this,void 0,void 0,function(){return s(this,function(n){switch(n.label){case 0:return this.state!==p.CONNECTED?(console.warn("Not in connected state"),[2]):[4,this.connection.invoke("UnsubscribeArticles",l)];case 1:return n.sent(),[2]}})})},Object.defineProperty(l.prototype,"state",{get:function(){return this._state},enumerable:!0,configurable:!0}),l.ngInjectableDef=t.T({factory:function(){return new l(t.X(o.a),t.X(r.a),t.X(a.j))},token:l,providedIn:"root"}),l}()},edGd:function(l,n,u){"use strict";u.d(n,"b",function(){return h}),u.d(n,"a",function(){return g});var t=u("CcnG"),e=u("sK8x"),i=u("AytR"),o=u("xdv0"),r=u("t/Na"),a=u("CYb2"),c=u("abTI"),s=u("PSD3"),p=u.n(s),b=u("ZYCi"),d=function(l,n,u,t){return new(u||(u=Promise))(function(e,i){function o(l){try{a(t.next(l))}catch(n){i(n)}}function r(l){try{a(t.throw(l))}catch(n){i(n)}}function a(l){l.done?e(l.value):new u(function(n){n(l.value)}).then(o,r)}a((t=t.apply(l,n||[])).next())})},f=function(l,n){var u,t,e,i,o={label:0,sent:function(){if(1&e[0])throw e[1];return e[1]},trys:[],ops:[]};return i={next:r(0),throw:r(1),return:r(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function r(i){return function(r){return function(i){if(u)throw new TypeError("Generator is already executing.");for(;o;)try{if(u=1,t&&(e=2&i[0]?t.return:i[0]?t.throw||((e=t.return)&&e.call(t),0):t.next)&&!(e=e.call(t,i[1])).done)return e;switch(t=0,e&&(i=[2&i[0],e.value]),i[0]){case 0:case 1:e=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,t=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!(e=(e=o.trys).length>0&&e[e.length-1])&&(6===i[0]||2===i[0])){o=0;continue}if(3===i[0]&&(!e||i[1]>e[0]&&i[1]<e[3])){o.label=i[1];break}if(6===i[0]&&o.label<e[1]){o.label=e[1],e=i;break}if(e&&o.label<e[2]){o.label=e[2],o.ops.push(i);break}e[2]&&o.ops.pop(),o.trys.pop();continue}i=n.call(l,o)}catch(r){i=[6,r],t=0}finally{u=e=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,r])}}},h=function(l){return l[l.LOGGED_IN=0]="LOGGED_IN",l[l.LOGGING_IN=1]="LOGGING_IN",l[l.NOT_LOGGED_IN=2]="NOT_LOGGED_IN",l}({}),g=function(){function l(l,n,u){this.userService=l,this.router=n,this.actions=u,this.busy=!1,this.loginStatus=new t.m,this._loginData=this.loadLoginData(),this.isLoggedIn&&(this._loginData.expiresAt-Math.floor((new Date).getTime()/1e3)<60?this.logout():this.checkSession())}return l.prototype.getAuth=function(){return void 0===this._auth&&(this._auth=new e.a({domain:i.a.auth0Domain,clientID:i.a.auth0ClientId,responseType:"token",redirectUri:location.protocol+"//"+location.host+"/callback",audience:"https://dd.panchem.io",scope:"openid profile email"})),this._auth},l.prototype.getUserInfo=function(l){var n=this.getAuth();return new Promise(function(u,t){n.client.userInfo(l,function(l,n){null!==l?t(l):u(n)})})},l.prototype.checkSession=function(){var l=this;this.getAuth().checkSession({domain:i.a.auth0Domain,clientID:i.a.auth0ClientId,responseType:"token",redirectUri:location.protocol+"//"+location.host+"/callback",audience:"https://dd.panchem.io",scope:"openid profile email"},function(n,u){n?c.captureException(n):(l._loginData.token=u.accessToken,l._loginData.expiresAt=Math.floor((new Date).getTime()/1e3)+u.expiresIn,l.saveLoginData(l._loginData))}),setTimeout(function(){l.checkSession()},9e5)},l.prototype.saveLoginData=function(l){this._loginData=l,localStorage.setItem("login-data",JSON.stringify(l))},l.prototype.clearLoginData=function(){localStorage.removeItem("login-data")},l.prototype.loadLoginData=function(){var l=localStorage.getItem("login-data");return l?JSON.parse(l):null},l.prototype.parseHash=function(l,n){var u=this.getAuth();return new Promise(function(t,e){u.parseHash({hash:l,state:n},function(l,n){l?e(l):t(n)})})},l.prototype.authorize=function(l){this.getAuth().authorize({connection:l})},l.prototype.logout=function(){return d(this,void 0,void 0,function(){return f(this,function(l){return this.clearLoginData(),c.configureScope(function(l){l.setUser(null)}),this._loginData=null,this.loginStatus.emit(h.NOT_LOGGED_IN),[2]})})},l.prototype.processLoginCallback=function(l){return d(this,void 0,void 0,function(){var n,u,t,e,i,o,c,s=this;return f(this,function(b){switch(b.label){case 0:this.busy=!0,this.loginStatus.emit(h.LOGGING_IN),b.label=1;case 1:b.trys.push([1,11,,15]),b.label=2;case 2:return b.trys.push([2,4,,5]),[4,this.parseHash(l,null)];case 3:return n=b.sent(),u=Math.floor((new Date).getTime()/1e3)+n.expiresIn,this.saveLoginData({token:n.accessToken,expiresAt:u}),[3,5];case 4:return(t=b.sent())&&"invalid_token"===t.error?(this.logout(),this.router.navigate(["login"])):p.a.fire({title:"Oh dear.",text:"Something went wrong while logging you in, please try again."}).then(function(){s.logout(),s.router.navigate(["login"])}),[3,5];case 5:return[4,this.getUserInfo(this._loginData.token)];case 6:e=b.sent(),this._loginData.profile=e,this.saveLoginData(this._loginData),b.label=7;case 7:return b.trys.push([7,9,,10]),[4,this.userService.getUser(e.sub)];case 8:return i=b.sent(),this._loginData.user=i,this.saveLoginData(this._loginData),this.loginStatus.emit(h.LOGGED_IN),[3,10];case 9:if((o=b.sent())instanceof r.f&&404===o.status)return this.actions.queue.push({type:a.b.ACCOUNT_SETUP,data:null}),this.actions.save(),this.router.navigate(["register"],{replaceUrl:!0}),[2];throw console.log(o),o;case 10:return[3,15];case 11:return(c=b.sent())&&"invalid_token"===c.error?[4,this.logout()]:[3,13];case 12:return b.sent(),this.router.navigate(["login"]),[3,14];case 13:p.a.fire({title:"Whoops",text:"Something went wrong while logging you in, please try again."}).then(function(){s.router.navigate(["login"])}),b.label=14;case 14:return[3,15];case 15:return setTimeout(function(){s.checkSession()},9e5),this.router.navigate(["home"],{replaceUrl:!0}),this.busy=!1,[2]}})})},l.prototype.setUser=function(l){if(!this._loginData)throw new Error("Cannot set user when login data missing");this._loginData.user=l,this.saveLoginData(this._loginData)},Object.defineProperty(l.prototype,"id",{get:function(){return this._loginData&&this._loginData.profile?this._loginData.profile.sub:null},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"userProfile",{get:function(){return this._loginData&&this._loginData.profile?this._loginData.profile:null},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"currentUser",{get:function(){return this._loginData&&this._loginData.user?this._loginData.user:null},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"token",{get:function(){return this._loginData&&this._loginData.token?this._loginData.token:null},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"isLoggedIn",{get:function(){return!(!this._loginData||!this._loginData.user)},enumerable:!0,configurable:!0}),l.ngInjectableDef=t.T({factory:function(){return new l(t.X(o.a),t.X(b.k),t.X(a.a))},token:l,providedIn:"root"}),l}()},hEiF:function(l,n,u){"use strict";u.d(n,"a",function(){return t});var t=function(){function l(){}return l.prototype.ngOnInit=function(){},l}()},hU6i:function(l,n,u){"use strict";var t=u("CcnG"),e=u("Ip0R"),i=u("u+gT"),o=u("hEiF"),r=u("xzO9"),a=u("+awi"),c=u("lD+H");u.d(n,"a",function(){return s}),u.d(n,"b",function(){return f});var s=t.ob({encapsulation:0,styles:[[""]],data:{}});function p(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,1,"span",[["class","text-primary text-large text-bold"]],null,null,null,null,null)),(l()(),t.Ib(-1,null,["*"]))],null,null)}function b(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,3,"label",[["class","form-label"]],null,null,null,null,null)),(l()(),t.Ib(1,null,[""," "])),(l()(),t.hb(16777216,null,null,1,null,p)),t.pb(3,16384,null,0,e.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null)],function(l,n){l(n,3,0,n.component.options.required)},function(l,n){l(n,1,0,n.component.fieldConfig.name)})}function d(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,1,"p",[["class","form-input-hint mb-0"]],null,null,null,null,null)),(l()(),t.Ib(1,null,[" "," "]))],null,function(l,n){l(n,1,0,n.component.fieldConfig.description)})}function f(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,10,"div",[["class","form-group "]],null,null,null,null,null)),t.pb(1,278528,null,0,e.i,[t.t,t.u,t.k,t.E],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),t.Db(2,{"has-error":0,"has-success":1}),(l()(),t.hb(16777216,null,null,1,null,b)),t.pb(4,16384,null,0,e.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null),(l()(),t.qb(5,0,null,null,1,"dd-dynamic-input",[],null,null,null,i.b,i.a)),t.pb(6,114688,null,0,o.a,[],{control:[0,"control"],config:[1,"config"]},null),(l()(),t.hb(16777216,null,null,1,null,d)),t.pb(8,16384,null,0,e.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null),(l()(),t.qb(9,0,null,null,1,"dd-dynamic-validation-errors",[],null,null,null,r.b,r.a)),t.pb(10,114688,null,0,a.a,[],{control:[0,"control"],config:[1,"config"]},null)],function(l,n){var u=n.component,t=l(n,2,0,u.control.invalid&&(u.control.dirty||u.control.touched),u.control.valid&&(u.control.dirty||u.control.touched));l(n,1,0,"form-group ",t),l(n,4,0,u.showLabel),l(n,6,0,u.control,u.fieldConfig),l(n,8,0,u.fieldConfig.description),l(n,10,0,u.control,u.fieldConfig)},null)}c.a},jORH:function(l,n,u){"use strict";var t=u("CcnG"),e=function(){function l(){}return l.prototype.ngOnInit=function(){},l}(),i=t.ob({encapsulation:0,styles:[[".error-container[_ngcontent-%COMP%]{background-image:url(https://res.cloudinary.com/dqhk8k6iv/image/upload/w_500,q_auto/v1552332874/error-background.png);background-repeat:no-repeat;background-position:center;background-size:contain;height:50vh}.error-code-text[_ngcontent-%COMP%]{font-size:15vw;color:#181819}.error-subtitle-text[_ngcontent-%COMP%]{margin-top:1rem;font-size:3.5vw;font-weight:700;color:#181819;text-align:center}"]],data:{}});function o(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,5,"div",[["class","container grid-xl"]],null,null,null,null,null)),(l()(),t.qb(1,0,null,null,4,"div",[["class","error-container w-100 d-flex align-items-center justify-content-center flex-col"]],null,null,null,null,null)),(l()(),t.qb(2,0,null,null,1,"h1",[["class","error-code-text mb-2"]],null,null,null,null,null)),(l()(),t.Ib(3,null,["",""])),(l()(),t.qb(4,0,null,null,1,"p",[["class","error-subtitle-text"]],null,null,null,null,null)),(l()(),t.Ib(5,null,["",""]))],null,function(l,n){var u=n.component;l(n,3,0,u.header),l(n,5,0,u.text)})}var r=u("Ip0R"),a=u("/AKn");u.d(n,"a",function(){return c}),u.d(n,"b",function(){return p});var c=t.ob({encapsulation:0,styles:[[""]],data:{}});function s(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,1,"dd-error-page",[],null,null,null,o,i)),t.pb(1,114688,null,0,e,[],{header:[0,"header"],text:[1,"text"]},null)],function(l,n){var u=n.component;l(n,1,0,u.title,u.text)},null)}function p(l){return t.Kb(0,[(l()(),t.hb(16777216,null,null,1,null,s)),t.pb(1,16384,null,0,r.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null)],function(l,n){l(n,1,0,n.component.errType)},null)}a.a},kNgC:function(l,n,u){"use strict";u.d(n,"a",function(){return e});var t=u("CcnG"),e=(u("MICr"),u("ygrl"),function(){function l(l){this.iconService=l,this.selected=new t.m,this.isDisabled=!1}return l.prototype.ngOnInit=function(){},l.prototype.writeValue=function(l){this._icon=l},l.prototype.registerOnChange=function(l){this._onChange=l},l.prototype.registerOnTouched=function(l){this._onTouched=l},l.prototype.setDisabledState=function(l){this.isDisabled=l},l.prototype.trackIcon=function(l,n){return n.id},l.prototype.openPicker=function(){this._onTouched&&this._onTouched(),this._modal.open()},l.prototype.selectIcon=function(l){this.selected.emit(l),this._onChange&&this._onChange(l.id),this._icon=l.id;try{this._modal.close(null)}catch(n){}},l.prototype.clear=function(){this.selected.emit(null),this._icon=null,this._onChange&&this._onChange(null);try{this._modal.close(null)}catch(l){}},Object.defineProperty(l.prototype,"icons",{get:function(){return this.iconService.getIcons()},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"selectedIconSrc",{get:function(){return this._icon?this.iconService.getIconSrc(this._icon):null},enumerable:!0,configurable:!0}),l}())},"lD+H":function(l,n,u){"use strict";u.d(n,"a",function(){return e});var t=u("mrSG"),e=function(l){function n(){return l.call(this)||this}return Object(t.__extends)(n,l),n.prototype.ngOnInit=function(){l.prototype.ngOnInit.call(this)},n}(u("nXDu").a)},n10a:function(l,n,u){"use strict";u.d(n,"a",function(){return e});var t=u("CcnG"),e=function(){function l(l,n,u){this.resolver=l,this.injector=n,this.appRef=u}return l.prototype.getComponent=function(l){var n=this.resolver.resolveComponentFactory(l).create(this.injector);return this.appRef.attachView(n.hostView),n},l.prototype.getRootNode=function(l){return l.hostView.rootNodes[0]},l.ngInjectableDef=t.T({factory:function(){return new l(t.X(t.j),t.X(t.o),t.X(t.g))},token:l,providedIn:"root"}),l}()},nXDu:function(l,n,u){"use strict";var t=u("gIcY"),e=function(l){return l[l.STRING=0]="STRING",l[l.NUMBER=1]="NUMBER",l[l.ENUM=2]="ENUM",l[l.BIG_TEXT=3]="BIG_TEXT",l[l.SELECT_MULTI=4]="SELECT_MULTI",l}({}),i=u("DwCd");u.d(n,"a",function(){return o});var o=function(){function l(){}return Object.defineProperty(l.prototype,"attribute",{get:function(){return this._attribute},set:function(l){null!=l&&(this._attribute=l,this._fieldConfigCache=void 0,this.control.setValidators(this.getValidators(this.fieldConfig)))},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"config",{get:function(){return this._config},set:function(l){null!=l&&(this._config=l,this._fieldConfigCache=void 0,this.control.setValidators(this.getValidators(this.fieldConfig)))},enumerable:!0,configurable:!0}),l.prototype.ngOnInit=function(){this.control.setValidators(this.getValidators(this.fieldConfig))},l.prototype.getValidators=function(l){var n=[],u=l.options||this.getDefaultSettings();if(l.type===i.a.STRING)null!==(e=u).minLength&&void 0!==e.minLength&&n.push(t.x.minLength(e.minLength)),e.maxLength&&null!==e.maxLength&&void 0!==e.maxLength&&n.push(t.x.maxLength(e.maxLength)),e.pattern&&n.push(t.x.pattern(e.pattern));else if(l.type===i.a.INT||l.type===i.a.FLOAT){var e;null!==(e=u).min&&void 0!==e.min&&n.push(t.x.min(e.min)),null!==e.max&&void 0!==e.max&&n.push(t.x.max(e.max))}return u.required&&n.push(t.x.required),n},l.prototype.mapAttributeTypeToFieldConfigType=function(l){switch(l){case e.BIG_TEXT:return i.a.TEXT_FORMATTED;case e.ENUM:return i.a.ENUM;case e.NUMBER:return i.a.INT;case e.SELECT_MULTI:return i.a.ENUM_MULTI;case e.STRING:return i.a.STRING}},l.prototype.mapAttributeOptionsToFieldConfigOptions=function(l){var n=this.getDefaultSettings(),u=this.mapAttributeTypeToFieldConfigType(l.type);if(u===i.a.STRING)(t=n).minLength=l.min,t.maxLength=l.max;else if(u===i.a.INT||u===i.a.FLOAT)(t=n).step=.01,t.max=l.max,t.min=l.min;else if(u===i.a.ENUM||u===i.a.ENUM_MULTI){var t;(t=n).choices=l.options}return n.required=l.required,n},l.prototype.getDefaultSettings=function(){return{}},Object.defineProperty(l.prototype,"errors",{get:function(){return this.control.errors},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"fieldConfig",{get:function(){return this.config||this._fieldConfigCache||!this.attribute||(this._fieldConfigCache={name:this.attribute.name,description:this.attribute.description,imageId:this.attribute.imageId,defaultValue:this.attribute.defaultValue,type:this.mapAttributeTypeToFieldConfigType(this.attribute.type),options:this.mapAttributeOptionsToFieldConfigOptions(this.attribute)}),this.config?this.config:this._fieldConfigCache},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"options",{get:function(){return this.fieldConfig.options||{}},enumerable:!0,configurable:!0}),l}()},ny3C:function(l,n,u){"use strict";var t=u("CcnG"),e=u("9Bt9"),i=u("Ip0R"),o=u("qAlS"),r=u("Fzqc"),a=u("ygrl");u.d(n,"a",function(){return c}),u.d(n,"b",function(){return b});var c=t.ob({encapsulation:0,styles:[[""]],data:{}});function s(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,1,"i",[["cdkDragHandle",""],["class","icon icon-resize-vert c-move float-left mt-1 cdk-drag-handle"],["style","margin-left: -1rem;"]],null,null,null,null,null)),t.pb(1,147456,[[1,4]],0,e.d,[t.k,[2,e.l]],null,null)],null,null)}function p(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,0,"a",[["aria-label","Close"],["class","btn btn-clear float-right"]],null,[[null,"click"]],function(l,n,u){var t=!0,e=l.component;return"click"===n&&(t=!1!==e.userClose(null)&&t),t},null,null))],null,null)}function b(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,20,"div",[["class","modal"],["id","modal-parent"]],null,null,null,null,null)),t.pb(1,278528,null,0,i.i,[t.t,t.u,t.k,t.E],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),t.Db(2,{active:0,"modal-sm":1,"modal-lg":2}),(l()(),t.qb(3,0,null,null,0,"a",[["aria-label","Close"],["class","modal-overlay"]],null,[[null,"click"]],function(l,n,u){var t=!0,e=l.component;return"click"===n&&(t=!1!==e.userClose(null)&&t),t},null,null)),(l()(),t.qb(4,16777216,null,null,16,"div",[["cdkDrag",""],["cdkDragBoundary","#modal-parent"],["class","modal-container cdk-drag"]],[[2,"cdk-drag-disabled",null],[2,"cdk-drag-dragging",null]],null,null,null,null)),t.Fb(6144,null,e.l,null,[e.c]),t.pb(6,4866048,null,3,e.c,[t.k,[3,e.b],i.c,t.A,t.P,o.a,e.j,e.a,[2,r.a],e.h,t.h],{boundaryElementSelector:[0,"boundaryElementSelector"],disabled:[1,"disabled"]},null),t.Gb(603979776,1,{_handles:1}),t.Gb(335544320,2,{_previewTemplate:0}),t.Gb(335544320,3,{_placeholderTemplate:0}),(l()(),t.qb(10,0,null,null,5,"div",[["class","modal-header p-2"]],null,null,null,null,null)),(l()(),t.hb(16777216,null,null,1,null,s)),t.pb(12,16384,null,0,i.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null),(l()(),t.hb(16777216,null,null,1,null,p)),t.pb(14,16384,null,0,i.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null),t.zb(null,0),(l()(),t.qb(16,0,null,null,2,"div",[["class","modal-body p-2"]],null,null,null,null,null)),(l()(),t.qb(17,0,null,null,1,"div",[["class","content"]],null,null,null,null,null)),t.zb(null,1),(l()(),t.qb(19,0,null,null,1,"div",[["class","modal-footer px-2 pt-2"]],null,null,null,null,null)),t.zb(null,2)],function(l,n){var u=n.component,t=l(n,2,0,u.isOpen,"small"===u.size,"large"===u.size);l(n,1,0,"modal",t),l(n,6,0,"#modal-parent","small"===u.size||"large"===u.size),l(n,12,0,"small"!==u.size&&"large"!==u.size),l(n,14,0,!u.codeOnly)},function(l,n){l(n,4,0,t.Ab(n,6).disabled,t.Ab(n,6)._dragRef.isDragging())})}a.a},qcJQ:function(l,n,u){"use strict";u.d(n,"a",function(){return a});var t=u("CcnG"),e=u("AxCL"),i=u("gIcY"),o=(u("uCWu"),u("ygrl"),function(){return(o=Object.assign||function(l){for(var n,u=1,t=arguments.length;u<t;u++)for(var e in n=arguments[u])Object.prototype.hasOwnProperty.call(n,e)&&(l[e]=n[e]);return l}).apply(this,arguments)}),r=function(l){return l[l.ADD=0]="ADD",l[l.SUBTRACT=1]="SUBTRACT",l[l.DIVIDE=2]="DIVIDE",l[l.MULTIPLY=3]="MULTIPLY",l[l.FILL=4]="FILL",l[l.SET=5]="SET",l}({}),a=function(){function l(l){this.campaignService=l,this.disableAnimation=!1,this.mini=!1,this.forceShowBar=!1,this.healthChange=new t.m,this.operationRegex=/^(\+([0-9]+))|(-([0-9]+))|(\/([0-9]+))|(\*([0-9]+))|(\+\+)|([0-9]+)$/}return l.prototype.ngOnInit=function(){var l=this;this.operationControl=new i.h(null),this.sliderControl=new i.h(this.health.current),this.sliderControl.valueChanges.subscribe(function(n){l.updateOperationFromSliderValue(n)})},l.prototype.updateOperationFromSliderValue=function(l){var n="";l===this.health.current?n=l:l<this.health.current?n="-"+(this.health.current-l):l>this.health.current&&(n="+"+(l-this.health.current)),this.operationControl.setValue(n)},l.prototype.onSliderChange=function(l){var n=this;setTimeout(function(){n.updateOperationFromSliderValue(n.sliderControl.value)},1)},l.prototype.editHP=function(){var l=this;this.editable&&(this.sliderControl.setValue(this.health.current),this.editModal.open().then(function(n){null!==n&&l.healthChange.emit(n)}),setTimeout(function(){l.operationControl.reset(),l.hpInput.nativeElement.focus()},1))},l.prototype.submitEdit=function(){this.editModal.close(this.hpAfterOperation)},l.prototype.parseOperation=function(l){var n=this.operationRegex.exec(l);if(null===n)return null;var u={type:r.ADD,amount:10},t=(n[0],n[1]),e=n[2],i=n[3],o=n[4],a=n[5],c=n[6],s=n[7],p=n[8],b=n[9],d=n[10];return t?(u.type=r.ADD,u.amount=parseInt(e,10)):i?(u.type=r.SUBTRACT,u.amount=parseInt(o,10)):a?(u.type=r.DIVIDE,u.amount=parseInt(c,10)):s?(u.type=r.MULTIPLY,u.amount=parseInt(p,10)):b?(u.type=r.FILL,u.amount=0):d&&(u.type=r.SET,u.amount=parseInt(d,10)),u},l.prototype.applyOperation=function(l,n){var u=o({},n);switch(l.type){case r.ADD:u.current+=l.amount;break;case r.SUBTRACT:u.current-=l.amount;break;case r.SET:u.current=l.amount;break;case r.DIVIDE:u.current=Math.round(u.current/l.amount);break;case r.MULTIPLY:u.current=Math.round(u.current*l.amount);break;case r.FILL:u.current=u.max}return u.current<0?u.current=0:u.current>u.max&&(u.current=u.max),u},l.prototype.trackBarElement=function(l,n){return l.toString()},Object.defineProperty(l.prototype,"hpAfterOperation",{get:function(){if(!this.health||this.operationControl.invalid)return null;var l=this.parseOperation(this.operationControl.value);return null===l?this.health:this.applyOperation(l,this.health)},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"hpPercent",{get:function(){return this.health?this.health.current/this.health.max*100:0},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"bars",{get:function(){var l,n=this.hpPercent;switch(this.preset.colorType){case e.c.DYNAMIC:l=n>80?"#64ad53":n>60?"#84bb47":n>40?"#d2ae2b":n>20?"#d86e54":"#d8545b";break;case e.c.STATIC:l=this.preset.staticColor||"#5755d9"}return[{max:this.health.max,current:this.health.current,percentCSS:n.toFixed(2)+"%",colorCSS:l}]},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"sliderTooltip",{get:function(){return this.sliderControl.value+"/"+this.health.max},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"amountVisible",{get:function(){return!this.preset.amountHidden||this.campaignService.canEdit},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"textOnly",{get:function(){return this.preset.type===e.d.TEXT_BASED&&!this.editable&&!this.forceShowBar},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"hpText",{get:function(){var l=this;if(this.health&&this.preset&&this.preset.type===e.d.TEXT_BASED){for(var n=0,u=Object.keys(this.health.textDamageLevels).map(function(n){return{percent:parseInt(n,10),text:l.health.textDamageLevels[n]}}).sort(function(l,n){return l.percent-n.percent});n<u.length;n++){var t=u[n];if(this.hpPercent<=t.percent)return t.text}return""}return""},enumerable:!0,configurable:!0}),l}()},rZgH:function(l,n,u){"use strict";u.d(n,"a",function(){return o});var t=u("AytR"),e=u("CcnG"),i=u("t/Na"),o=function(){function l(l){this.http=l}return l.prototype.getArticle=function(l){return this.http.get(t.a.apiURL+"/articles/"+l).toPromise()},l.prototype.getArticles=function(l,n,u,e){void 0===n&&(n=10),void 0===u&&(u=0);var i=e?"&search="+encodeURIComponent(e):"";return this.http.get(t.a.apiURL+"/articles?campaignId="+l+"&limit="+n+"&offset="+u+i).toPromise()},l.prototype.createArticle=function(l){return this.http.post(t.a.apiURL+"/articles",l).toPromise()},l.prototype.updateArticle=function(l){return this.http.put(t.a.apiURL+"/articles/"+l.id,l).toPromise()},l.prototype.getMapArticles=function(l){return this.http.get(t.a.apiURL+"/articles/map/"+l).toPromise()},l.prototype.deleteArticle=function(l){return this.http.delete(t.a.apiURL+"/articles/"+l).toPromise()},l.prototype.getArticleQuests=function(l){return this.http.get(t.a.apiURL+"/articlequests/?articleId="+l).toPromise()},l.prototype.updateArticleQuest=function(l){return this.http.put(t.a.apiURL+"/articlequests",l).toPromise()},l.prototype.deleteArticleQuest=function(l){return this.http.delete(t.a.apiURL+"/articlequests?articleId="+l.articleId+"&questId="+l.questId).toPromise()},l.prototype.getArticleConcepts=function(l,n){return this.http.get(t.a.apiURL+"/articleconcepts/?articleId="+l+"&conceptTypeId="+n).toPromise()},l.prototype.updateArticleConcept=function(l){return this.http.put(t.a.apiURL+"/articleconcepts",l).toPromise()},l.prototype.deleteArticleConcept=function(l){return this.http.delete(t.a.apiURL+"/articleconcepts?articleId="+l.articleId+"&conceptId="+l.conceptId).toPromise()},l.prototype.buyArticleConcept=function(l,n,u){return e=this,void 0,o=function(){return function(l,n){var u,t,e,i,o={label:0,sent:function(){if(1&e[0])throw e[1];return e[1]},trys:[],ops:[]};return i={next:r(0),throw:r(1),return:r(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function r(i){return function(r){return function(i){if(u)throw new TypeError("Generator is already executing.");for(;o;)try{if(u=1,t&&(e=2&i[0]?t.return:i[0]?t.throw||((e=t.return)&&e.call(t),0):t.next)&&!(e=e.call(t,i[1])).done)return e;switch(t=0,e&&(i=[2&i[0],e.value]),i[0]){case 0:case 1:e=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,t=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!(e=(e=o.trys).length>0&&e[e.length-1])&&(6===i[0]||2===i[0])){o=0;continue}if(3===i[0]&&(!e||i[1]>e[0]&&i[1]<e[3])){o.label=i[1];break}if(6===i[0]&&o.label<e[1]){o.label=e[1],e=i;break}if(e&&o.label<e[2]){o.label=e[2],o.ops.push(i);break}e[2]&&o.ops.pop(),o.trys.pop();continue}i=n.call(l,o)}catch(r){i=[6,r],t=0}finally{u=e=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,r])}}}(this,function(e){return[2,this.http.post(t.a.apiURL+"/articleconcepts/buy?quantity="+n+"&entityId="+u,l).toPromise()]})},new((i=void 0)||(i=Promise))(function(l,n){function u(l){try{r(o.next(l))}catch(u){n(u)}}function t(l){try{r(o.throw(l))}catch(u){n(u)}}function r(n){n.done?l(n.value):new i(function(l){l(n.value)}).then(u,t)}r((o=o.apply(e,[])).next())});var e,i,o},l.ngInjectableDef=e.T({factory:function(){return new l(e.X(i.c))},token:l,providedIn:"root"}),l}()},reMG:function(l,n,u){"use strict";u.d(n,"a",function(){return t});var t=function(){return function(){}}()},sJeg:function(l,n,u){"use strict";var t=u("CcnG"),e=u("W/nz"),i=u("ZYjt"),o=u("Ip0R"),r=u("Kjs6");u("a8fi"),u("uCWu"),u("edGd"),u.d(n,"a",function(){return a}),u.d(n,"b",function(){return b});var a=t.ob({encapsulation:0,styles:[[""]],data:{}});function c(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,1,"div",[["class","column col-auto d-flex align-items-center ml-1"]],null,null,null,null,null)),(l()(),t.qb(1,0,null,null,0,"i",[["class","icon icon-edit"]],null,null,null,null,null))],null,null)}function s(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,11,"div",[["class","card mb-1 p-1 hoverable"]],null,[[null,"click"]],function(l,n,u){var t=!0,e=l.component;return"click"===n&&(t=!1!==e.noteSelected(l.context.$implicit)&&t),t},null,null)),(l()(),t.qb(1,0,null,null,10,"div",[["class","columns col-gapless"]],null,null,null,null,null)),(l()(),t.qb(2,0,null,null,1,"div",[["class","column"]],null,null,null,null,null)),(l()(),t.Ib(3,null,["",""])),(l()(),t.qb(4,0,null,null,2,"div",[["class","column col-auto text-gray text-italic text-right hide-sm"]],null,null,null,null,null)),(l()(),t.qb(5,0,null,null,1,"div",[],[[8,"innerHTML",1]],null,null,null,null)),t.pb(6,16384,null,0,e.a,[i.c],{user:[0,"user"]},null),(l()(),t.qb(7,0,null,null,2,"div",[["class","column text-gray text-italic show-sm col-12"]],null,null,null,null,null)),(l()(),t.qb(8,0,null,null,1,"div",[],[[8,"innerHTML",1]],null,null,null,null)),t.pb(9,16384,null,0,e.a,[i.c],{user:[0,"user"]},null),(l()(),t.hb(16777216,null,null,1,null,c)),t.pb(11,16384,null,0,o.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null)],function(l,n){var u=n.component;l(n,6,0,u.user(n.context.$implicit.userId)),l(n,9,0,u.user(n.context.$implicit.userId)),l(n,11,0,n.context.$implicit.publicEdit)},function(l,n){l(n,3,0,n.context.$implicit.title),l(n,5,0,t.Ab(n,6).html),l(n,8,0,t.Ab(n,9).html)})}function p(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,2,"div",[],null,null,null,null,null)),(l()(),t.hb(16777216,null,null,1,null,s)),t.pb(2,278528,null,0,o.j,[t.P,t.M,t.t],{ngForOf:[0,"ngForOf"]},null)],function(l,n){l(n,2,0,n.component.notes)},null)}function b(l){return t.Kb(0,[(l()(),t.hb(16777216,null,null,1,null,p)),t.pb(1,16384,null,0,o.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null)],function(l,n){l(n,1,0,n.component.notes)},null)}r.a},t53f:function(l,n,u){"use strict";var t=u("CcnG"),e=u("Ip0R"),i=function(){function l(l){this.location=l}return l.prototype.ngOnInit=function(){},l.prototype.back=function(){this.location.back()},l}(),o=t.ob({encapsulation:0,styles:[["[_nghost-%COMP%]{position:absolute;top:0;left:0;right:0;margin:0 auto;width:128px;height:64px;z-index:350}"]],data:{}});function r(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,0,"div",[["class","loading"]],null,null,null,null,null))],null,null)}function a(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,6,"div",[["class","card p-1 mt-2"]],null,null,null,null,null)),(l()(),t.qb(1,0,null,null,5,"div",[],null,null,null,null,null)),(l()(),t.qb(2,0,null,null,1,"button",[["class","btn btn-link btn-sm"]],null,[[null,"click"]],function(l,n,u){var t=!0,e=l.component;return"click"===n&&(t=!1!==e.back()&&t),t},null,null)),(l()(),t.qb(3,0,null,null,0,"i",[["class","icon icon-arrow-left"]],null,null,null,null,null)),(l()(),t.Ib(4,null,[" "," "])),(l()(),t.hb(16777216,null,null,1,null,r)),t.pb(6,16384,null,0,e.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null)],function(l,n){l(n,6,0,n.component.loading)},function(l,n){l(n,4,0,n.component.title)})}var c=u("gIcY"),s=u("ny3C"),p=u("ygrl"),b=u("Pqmk"),d=t.ob({encapsulation:0,styles:[[""]],data:{}});function f(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,0,"i",[["class","form-icon loading"]],null,null,null,null,null))],null,null)}function h(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,8,"div",[["class","has-icon-right mb-1"]],null,null,null,null,null)),(l()(),t.qb(1,0,null,null,5,"input",[["class","form-input"],["placeholder","Search"],["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(l,n,u){var e=!0;return"input"===n&&(e=!1!==t.Ab(l,2)._handleInput(u.target.value)&&e),"blur"===n&&(e=!1!==t.Ab(l,2).onTouched()&&e),"compositionstart"===n&&(e=!1!==t.Ab(l,2)._compositionStart()&&e),"compositionend"===n&&(e=!1!==t.Ab(l,2)._compositionEnd(u.target.value)&&e),e},null,null)),t.pb(2,16384,null,0,c.d,[t.E,t.k,[2,c.a]],null,null),t.Fb(1024,null,c.o,function(l){return[l]},[c.d]),t.pb(4,540672,null,0,c.i,[[8,null],[8,null],[6,c.o],[2,c.D]],{form:[0,"form"]},null),t.Fb(2048,null,c.p,null,[c.i]),t.pb(6,16384,null,0,c.q,[[4,c.p]],null,null),(l()(),t.hb(16777216,null,null,1,null,f)),t.pb(8,16384,null,0,e.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null)],function(l,n){var u=n.component;l(n,4,0,u.searchControl),l(n,8,0,u.loading)},function(l,n){l(n,1,0,t.Ab(n,6).ngClassUntouched,t.Ab(n,6).ngClassTouched,t.Ab(n,6).ngClassPristine,t.Ab(n,6).ngClassDirty,t.Ab(n,6).ngClassValid,t.Ab(n,6).ngClassInvalid,t.Ab(n,6).ngClassPending)})}function g(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,0,"div",[["class","card p-1 hoverable mb-1"]],[[8,"innerHTML",1]],[[null,"click"]],function(l,n,u){var t=!0,e=l.component;return"click"===n&&(t=!1!==e.select(l.context.$implicit)&&t),t},null,null))],null,function(l,n){l(n,0,0,n.context.$implicit.displayHtml)})}function m(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,1,"div",[["class","empty"]],null,null,null,null,null)),t.zb(null,0)],null,null)}function v(l){return t.Kb(0,[t.Gb(402653184,1,{modal:0}),(l()(),t.qb(1,0,null,null,10,"dd-modal",[],null,null,null,s.b,s.a)),t.pb(2,114688,[[1,4],["modal",4]],0,p.a,[],null,null),(l()(),t.qb(3,0,null,0,1,"h5",[["modal-header",""]],null,null,null,null,null)),(l()(),t.Ib(4,null,[" "," "])),(l()(),t.qb(5,0,null,1,6,"div",[["modal-body",""]],null,null,null,null,null)),(l()(),t.hb(16777216,null,null,1,null,h)),t.pb(7,16384,null,0,e.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null),(l()(),t.hb(16777216,null,null,1,null,g)),t.pb(9,278528,null,0,e.j,[t.P,t.M,t.t],{ngForOf:[0,"ngForOf"]},null),(l()(),t.hb(16777216,null,null,1,null,m)),t.pb(11,16384,null,0,e.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null)],function(l,n){var u=n.component;l(n,2,0),l(n,7,0,u.searchable),l(n,9,0,u.selectItems),l(n,11,0,u.selectItems&&0===u.selectItems.length)},function(l,n){l(n,4,0,n.component.title)})}b.a;var y=u("Q3ED"),C=u("uCWu"),I=t.ob({encapsulation:0,styles:[["[_nghost-%COMP%]{z-index:400}"]],data:{}});function q(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,1,"div",[["class","card p-2 hoverable mb-2"]],null,[[null,"click"]],function(l,n,u){var t=!0,e=l.component;return"click"===n&&(t=!1!==e.updateEntityPosition()&&t),t},null,null)),(l()(),t.Ib(-1,null,[" Put me Here "]))],null,null)}function k(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,1,"div",[["class","card p-2 hoverable mb-2"]],null,[[null,"click"]],function(l,n,u){var t=!0,e=l.component;return"click"===n&&(t=!1!==e.linkArticle()&&t),t},null,null)),(l()(),t.Ib(-1,null,[" Link Article "]))],null,null)}function A(l){return t.Kb(0,[t.Gb(402653184,1,{modal:0}),(l()(),t.qb(1,0,null,null,13,"dd-modal",[],null,null,null,s.b,s.a)),t.pb(2,114688,[[1,4],["modal",4]],0,p.a,[],null,null),(l()(),t.qb(3,0,null,0,2,"div",[["modal-header",""]],null,null,null,null,null)),(l()(),t.qb(4,0,null,null,1,"span",[],null,null,null,null,null)),(l()(),t.Ib(-1,null,["Map Editor"])),(l()(),t.qb(6,0,null,1,8,"div",[["modal-body",""]],null,null,null,null,null)),(l()(),t.qb(7,0,null,null,1,"div",[["class","card p-2 hoverable mb-2"]],null,[[null,"click"]],function(l,n,u){var t=!0,e=l.component;return"click"===n&&(t=!1!==e.placeNote()&&t),t},null,null)),(l()(),t.Ib(-1,null,["Make Note"])),(l()(),t.qb(9,0,null,null,1,"div",[["class","card p-2 hoverable mb-2"]],null,[[null,"click"]],function(l,n,u){var t=!0,e=l.component;return"click"===n&&(t=!1!==e.placeShapelyNote()&&t),t},null,null)),(l()(),t.Ib(-1,null,[" Make Shapely Note "])),(l()(),t.hb(16777216,null,null,1,null,q)),t.pb(12,16384,null,0,e.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null),(l()(),t.hb(16777216,null,null,1,null,k)),t.pb(14,16384,null,0,e.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null)],function(l,n){var u=n.component;l(n,2,0),l(n,12,0,u.canUpdateEntityPosition),l(n,14,0,u.campaignEditable)},null)}y.a;var w=u("LtSl"),P=u("ZYCi"),x=u("6awz"),E=u("a8fi"),T=u("edGd"),S=u("AxCL"),O=u("n10a"),M=u("dtdw"),_=u("SZbH"),D=u("rZgH"),N=u("MICr");u.d(n,"a",function(){return R});var L=t.ob({encapsulation:0,styles:[[".map[_ngcontent-%COMP%]{z-index:100;height:100%}.map-container[_ngcontent-%COMP%]{top:0;left:0;position:fixed;z-index:300;background-color:#fff;height:100vh;width:100vw}"]],data:{}});function F(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,1,"div",[["class","empty-subtitle"]],null,null,null,null,null)),(l()(),t.Ib(-1,null,[" Click the button below to create a new article "]))],null,null)}function K(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,1,"dd-map-toolbar",[],null,null,null,a,o)),t.pb(1,114688,null,0,i,[e.g],{title:[0,"title"],loading:[1,"loading"]},null)],function(l,n){var u=n.component;l(n,1,0,u.mapObj.name,u.loading)},null)}function j(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,0,"div",[["class","loading loading-lg"]],null,null,null,null,null))],null,null)}function G(l){return t.Kb(0,[t.Gb(402653184,1,{map:0}),t.Gb(402653184,2,{editor:0}),t.Gb(402653184,3,{entitySelect:0}),t.Gb(402653184,4,{articleSelect:0}),(l()(),t.qb(4,0,null,null,11,"dd-selector-popup",[],null,null,null,v,d)),t.pb(5,114688,[[4,4],["articleselect",4]],0,b.a,[],{searchable:[0,"searchable"],loadSelectItems:[1,"loadSelectItems"]},null),(l()(),t.qb(6,0,null,0,9,"div",[["empty",""]],null,null,null,null,null)),(l()(),t.qb(7,0,null,null,1,"div",[["class","empty-icon"]],null,null,null,null,null)),(l()(),t.qb(8,0,null,null,0,"i",[["class","icon icon-search icon-4x"]],null,null,null,null,null)),(l()(),t.qb(9,0,null,null,1,"div",[["class","empty-title h5"]],null,null,null,null,null)),(l()(),t.Ib(-1,null,["There's nothing here"])),(l()(),t.hb(16777216,null,null,1,null,F)),t.pb(12,16384,null,0,e.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null),(l()(),t.qb(13,0,null,null,2,"div",[["class","empty-action"]],null,null,null,null,null)),(l()(),t.qb(14,0,null,null,1,"button",[["class","btn btn-primary"]],null,[[null,"click"]],function(l,n,u){var e=!0,i=l.component;return"click"===n&&(e=!1!==i.createNewArticle(t.Ab(l,5).search)&&e),e},null,null)),(l()(),t.Ib(15,null,["Create ",""])),(l()(),t.qb(16,0,null,null,1,"dd-selector-popup",[],null,null,null,v,d)),t.pb(17,114688,[[3,4],["entityselect",4]],0,b.a,[],null,null),(l()(),t.qb(18,0,null,null,7,"div",[["class","map-container"]],null,null,null,null,null)),(l()(),t.hb(16777216,null,null,1,null,K)),t.pb(20,16384,null,0,e.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null),(l()(),t.hb(16777216,null,null,1,null,j)),t.pb(22,16384,null,0,e.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null),(l()(),t.qb(23,0,null,null,1,"dd-map-editor-menu",[],null,null,null,A,I)),t.pb(24,114688,[[2,4],["editor",4]],0,y.a,[C.b],null,null),(l()(),t.qb(25,0,[[1,0],["map",1]],null,0,"div",[["class","map"]],null,null,null,null,null))],function(l,n){var u=n.component;l(n,5,0,!0,u.loadSelectItems),l(n,12,0,u.editable),l(n,17,0),l(n,20,0,u.mapObj),l(n,22,0,!t.Ab(n,25)),l(n,24,0)},function(l,n){l(n,15,0,t.Ab(n,5).search)})}function U(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,1,"dd-map",[],null,null,null,G,L)),t.pb(1,4374528,null,0,w.a,[P.a,P.k,x.a,C.b,E.a,T.a,S.b,O.a,M.b,_.j,D.a,N.a],null,null)],null,null)}var R=t.mb("dd-map",w.a,U,{},{},[])},tB0E:function(l,n,u){"use strict";u.d(n,"a",function(){return o}),u("xdv0"),u("edGd");var t=u("gIcY"),e=function(l,n,u,t){return new(u||(u=Promise))(function(e,i){function o(l){try{a(t.next(l))}catch(n){i(n)}}function r(l){try{a(t.throw(l))}catch(n){i(n)}}function a(l){l.done?e(l.value):new u(function(n){n(l.value)}).then(o,r)}a((t=t.apply(l,n||[])).next())})},i=function(l,n){var u,t,e,i,o={label:0,sent:function(){if(1&e[0])throw e[1];return e[1]},trys:[],ops:[]};return i={next:r(0),throw:r(1),return:r(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function r(i){return function(r){return function(i){if(u)throw new TypeError("Generator is already executing.");for(;o;)try{if(u=1,t&&(e=2&i[0]?t.return:i[0]?t.throw||((e=t.return)&&e.call(t),0):t.next)&&!(e=e.call(t,i[1])).done)return e;switch(t=0,e&&(i=[2&i[0],e.value]),i[0]){case 0:case 1:e=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,t=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!(e=(e=o.trys).length>0&&e[e.length-1])&&(6===i[0]||2===i[0])){o=0;continue}if(3===i[0]&&(!e||i[1]>e[0]&&i[1]<e[3])){o.label=i[1];break}if(6===i[0]&&o.label<e[1]){o.label=e[1],e=i;break}if(e&&o.label<e[2]){o.label=e[2],o.ops.push(i);break}e[2]&&o.ops.pop(),o.trys.pop();continue}i=n.call(l,o)}catch(r){i=[6,r],t=0}finally{u=e=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,r])}}},o=function(){function l(l,n){this.userService=l,this.login=n,this.loading=!1,this.saving=!1,this.editUsername=!1}return l.prototype.ngOnInit=function(){this.formGroup=new t.k({username:new t.h(null,[t.x.required,t.x.minLength(3),t.x.maxLength(30)])}),this.load()},l.prototype.load=function(){return e(this,void 0,void 0,function(){var l;return i(this,function(n){switch(n.label){case 0:this.loading=!0,n.label=1;case 1:return n.trys.push([1,3,,4]),l=this,[4,this.userService.getUser(this.login.currentUser.id)];case 2:return l.user=n.sent(),this.patchForm(),[3,4];case 3:throw n.sent();case 4:return this.loading=!1,[2]}})})},l.prototype.patchForm=function(){this.formGroup.patchValue(this.user)},l.prototype.save=function(){return e(this,void 0,void 0,function(){return i(this,function(l){switch(l.label){case 0:if(this.formGroup.invalid)return[2];this.user.username=this.username.value,this.saving=!0,l.label=1;case 1:return l.trys.push([1,3,,4]),[4,this.userService.updateUser(this.user)];case 2:return l.sent(),[3,4];case 3:throw l.sent();case 4:return this.editUsername=!1,this.formGroup.markAsPristine(),this.saving=!1,[2]}})})},Object.defineProperty(l.prototype,"username",{get:function(){return this.formGroup.get("username")},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"dirty",{get:function(){return this.formGroup.dirty},enumerable:!0,configurable:!0}),l}()},tZWP:function(l,n,u){"use strict";var t=u("CcnG"),e=u("Ip0R"),i=u("y4Wg");u.d(n,"a",function(){return o}),u.d(n,"b",function(){return p});var o=t.ob({encapsulation:0,styles:[[".pagination[_ngcontent-%COMP%]{justify-content:center}"]],data:{}});function r(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,3,"button",[["class","btn"]],null,[[null,"click"]],function(l,n,u){var t=!0,e=l.component;return"click"===n&&(t=!1!==e.setPage(l.parent.context.$implicit)&&t),t},null,null)),t.pb(1,278528,null,0,e.i,[t.t,t.u,t.k,t.E],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),t.Db(2,{"btn-primary":0,"btn-link":1,loading:2}),(l()(),t.Ib(3,null,[" "," "]))],function(l,n){var u=n.component,t=l(n,2,0,u.page===n.parent.context.$implicit,u.page!==n.parent.context.$implicit,u.page===n.parent.context.$implicit&&u.loading);l(n,1,0,"btn",t)},function(l,n){l(n,3,0,n.parent.context.$implicit)})}function a(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,1,"span",[],null,null,null,null,null)),(l()(),t.Ib(-1,null,["..."]))],null,null)}function c(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,4,"li",[["class","page-item"]],null,null,null,null,null)),(l()(),t.hb(16777216,null,null,1,null,r)),t.pb(2,16384,null,0,e.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null),(l()(),t.hb(16777216,null,null,1,null,a)),t.pb(4,16384,null,0,e.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null)],function(l,n){l(n,2,0,n.context.$implicit>0),l(n,4,0,-1===n.context.$implicit)},null)}function s(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,8,"ul",[["class","pagination"]],null,null,null,null,null)),(l()(),t.qb(1,0,null,null,2,"li",[["class","page-item"]],null,null,null,null,null)),(l()(),t.qb(2,0,null,null,1,"button",[["class","btn btn-link"]],[[8,"disabled",0]],[[null,"click"]],function(l,n,u){var t=!0,e=l.component;return"click"===n&&(t=!1!==e.prev()&&t),t},null,null)),(l()(),t.qb(3,0,null,null,0,"i",[["class","icon icon-arrow-left"]],null,null,null,null,null)),(l()(),t.hb(16777216,null,null,1,null,c)),t.pb(5,278528,null,0,e.j,[t.P,t.M,t.t],{ngForOf:[0,"ngForOf"]},null),(l()(),t.qb(6,0,null,null,2,"li",[["class","page-item"]],null,null,null,null,null)),(l()(),t.qb(7,0,null,null,1,"button",[["class","btn btn-link"]],[[8,"disabled",0]],[[null,"click"]],function(l,n,u){var t=!0,e=l.component;return"click"===n&&(t=!1!==e.next()&&t),t},null,null)),(l()(),t.qb(8,0,null,null,0,"i",[["class","icon icon-arrow-right"]],null,null,null,null,null))],function(l,n){l(n,5,0,n.component.pageArr)},function(l,n){var u=n.component;l(n,2,0,!u.canPrev),l(n,7,0,!u.canNext)})}function p(l){return t.Kb(0,[(l()(),t.hb(16777216,null,null,1,null,s)),t.pb(1,16384,null,0,e.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null)],function(l,n){var u=n.component;l(n,1,0,u.numPages>1||!u.autoHide)},null)}i.a},"u+gT":function(l,n,u){"use strict";var t=u("CcnG"),e=u("gIcY"),i=u("Ip0R"),o=u("IeLf"),r=u("WNRK"),a=u("uCWu"),c=u("rZgH"),s=u("edGd"),p=u("ZYCi"),b=u("t/Na"),d=u("Lqte"),f=u("n10a"),h=u("MICr"),g=u("ad02"),m=function(){function l(){this._firstChange=!0}return l.prototype.ngOnInit=function(){var l=this;this.config.trackCoins?(this.formArray=this.createFormArray(this.config.levels),this.formArray.valueChanges.pipe(Object(g.a)(function(l,n){return null==l?l===n:!l.some(function(l,u){return n[u]!==l})})).subscribe(function(n){l._onChange&&!l._firstChange&&l._onChange({values:l.convertCurrencyArrayToObject(n,l.config.levels),value:0}),l._firstChange=!1})):(this.formControl=new e.h(null),this.formControl.valueChanges.pipe(Object(g.a)()).subscribe(function(n){l._onChange&&!l._firstChange&&l._onChange({values:{},value:n}),l._firstChange=!1}))},l.prototype.createFormArray=function(l){return new e.e(l.map(function(){return new e.h(null)}))},l.prototype.convertCurrencyArrayToObject=function(l,n){var u={};return l.forEach(function(l,t){var e=n[t];e&&e.name&&(u[e.name]=l)}),u},l.prototype.mapCurrencyValuesToConfig=function(l,n){return null==l&&(l={}),n.map(function(n){return l[n.name]||0})},l.prototype.reset=function(){this._onChange&&this._onChange(null),this.config.trackCoins?this.formArray.patchValue(this.controls.map(function(){return null}),{emitEvent:!1}):this.formControl.patchValue(null,{emitEvent:!1})},l.prototype.writeValue=function(l){null!=l&&(this.config.trackCoins?this.formArray.setValue(this.mapCurrencyValuesToConfig(l.values,this.config.levels)):(this.formControl.setValue(l.value),this.formControl.markAsPristine()))},l.prototype.registerOnChange=function(l){this._onChange=l},l.prototype.registerOnTouched=function(l){this._onTouched=l},l.prototype.setDisabledState=function(l){this.formArray&&(l?this.formArray.disable():this.formArray.enable()),this.formControl&&(l?this.formControl.disable():this.formControl.enable())},l.prototype.trackLevel=function(l){return l},Object.defineProperty(l.prototype,"levels",{get:function(){return(this.config.levels||[{name:"gp",value:1,useInConversions:!0}]).sort(function(l,n){return n.value-l.value})},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"controls",{get:function(){if(this.formArray)return this.formArray.controls},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"singleInputName",{get:function(){var l=this.levels.find(function(l){return 1===l.value});return l?l.name:"gp"},enumerable:!0,configurable:!0}),l}(),v=t.ob({encapsulation:0,styles:[[""]],data:{}});function y(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,8,"div",[["class","input-group"]],null,null,null,null,null)),(l()(),t.qb(1,0,null,null,5,"input",[["class","form-input"],["type","text"]],[[8,"placeholder",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(l,n,u){var e=!0;return"input"===n&&(e=!1!==t.Ab(l,2)._handleInput(u.target.value)&&e),"blur"===n&&(e=!1!==t.Ab(l,2).onTouched()&&e),"compositionstart"===n&&(e=!1!==t.Ab(l,2)._compositionStart()&&e),"compositionend"===n&&(e=!1!==t.Ab(l,2)._compositionEnd(u.target.value)&&e),e},null,null)),t.pb(2,16384,null,0,e.d,[t.E,t.k,[2,e.a]],null,null),t.Fb(1024,null,e.o,function(l){return[l]},[e.d]),t.pb(4,540672,null,0,e.i,[[8,null],[8,null],[6,e.o],[2,e.D]],{form:[0,"form"]},null),t.Fb(2048,null,e.p,null,[e.i]),t.pb(6,16384,null,0,e.q,[[4,e.p]],null,null),(l()(),t.qb(7,0,null,null,1,"div",[["class","input-group-addon"]],null,null,null,null,null)),(l()(),t.Ib(8,null,["",""]))],function(l,n){l(n,4,0,n.component.formControl)},function(l,n){var u=n.component;l(n,1,0,u.singleInputName,t.Ab(n,6).ngClassUntouched,t.Ab(n,6).ngClassTouched,t.Ab(n,6).ngClassPristine,t.Ab(n,6).ngClassDirty,t.Ab(n,6).ngClassValid,t.Ab(n,6).ngClassInvalid,t.Ab(n,6).ngClassPending),l(n,8,0,u.singleInputName)})}function C(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,10,"div",[["class","col-3 col-sm-12 p-1"]],null,null,null,null,null)),(l()(),t.qb(1,0,null,null,9,"div",[["class","input-group"]],null,null,null,null,null)),(l()(),t.qb(2,0,null,null,6,"input",[["class","form-input"],["type","number"]],[[8,"placeholder",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"]],function(l,n,u){var e=!0;return"input"===n&&(e=!1!==t.Ab(l,3)._handleInput(u.target.value)&&e),"blur"===n&&(e=!1!==t.Ab(l,3).onTouched()&&e),"compositionstart"===n&&(e=!1!==t.Ab(l,3)._compositionStart()&&e),"compositionend"===n&&(e=!1!==t.Ab(l,3)._compositionEnd(u.target.value)&&e),"change"===n&&(e=!1!==t.Ab(l,4).onChange(u.target.value)&&e),"input"===n&&(e=!1!==t.Ab(l,4).onChange(u.target.value)&&e),"blur"===n&&(e=!1!==t.Ab(l,4).onTouched()&&e),e},null,null)),t.pb(3,16384,null,0,e.d,[t.E,t.k,[2,e.a]],null,null),t.pb(4,16384,null,0,e.z,[t.E,t.k],null,null),t.Fb(1024,null,e.o,function(l,n){return[l,n]},[e.d,e.z]),t.pb(6,540672,null,0,e.i,[[8,null],[8,null],[6,e.o],[2,e.D]],{form:[0,"form"]},null),t.Fb(2048,null,e.p,null,[e.i]),t.pb(8,16384,null,0,e.q,[[4,e.p]],null,null),(l()(),t.qb(9,0,null,null,1,"div",[["class","input-group-addon"]],null,null,null,null,null)),(l()(),t.Ib(10,null,["",""]))],function(l,n){l(n,6,0,n.context.$implicit)},function(l,n){var u=n.component;l(n,2,0,u.levels[n.context.index].name,t.Ab(n,8).ngClassUntouched,t.Ab(n,8).ngClassTouched,t.Ab(n,8).ngClassPristine,t.Ab(n,8).ngClassDirty,t.Ab(n,8).ngClassValid,t.Ab(n,8).ngClassInvalid,t.Ab(n,8).ngClassPending),l(n,10,0,u.levels[n.context.index].name)})}function I(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,5,"div",[["class","columns col-gapless"]],null,null,null,null,null)),(l()(),t.hb(16777216,null,null,1,null,C)),t.pb(2,278528,null,0,i.j,[t.P,t.M,t.t],{ngForOf:[0,"ngForOf"],ngForTrackBy:[1,"ngForTrackBy"]},null),(l()(),t.qb(3,0,null,null,2,"div",[["class","column col-auto"]],null,null,null,null,null)),(l()(),t.qb(4,0,null,null,1,"button",[["class","btn btn-link mt-1"]],null,[[null,"click"]],function(l,n,u){var t=!0,e=l.component;return"click"===n&&(t=!1!==e.reset()&&t),t},null,null)),(l()(),t.Ib(-1,null,["Clear Coin Values"]))],function(l,n){var u=n.component;l(n,2,0,u.controls,u.trackLevel)},null)}function q(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,4,"div",[],null,null,null,null,null)),(l()(),t.hb(16777216,null,null,1,null,y)),t.pb(2,16384,null,0,i.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null),(l()(),t.hb(16777216,null,null,1,null,I)),t.pb(4,16384,null,0,i.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null)],function(l,n){var u=n.component;l(n,2,0,u.formControl),l(n,4,0,u.formArray)},null)}var k=u("hEiF");u.d(n,"a",function(){return A}),u.d(n,"b",function(){return L});var A=t.ob({encapsulation:0,styles:[[""]],data:{}});function w(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,5,"input",[["class","form-input"],["name","attr"],["type","text"]],[[8,"placeholder",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(l,n,u){var e=!0;return"input"===n&&(e=!1!==t.Ab(l,1)._handleInput(u.target.value)&&e),"blur"===n&&(e=!1!==t.Ab(l,1).onTouched()&&e),"compositionstart"===n&&(e=!1!==t.Ab(l,1)._compositionStart()&&e),"compositionend"===n&&(e=!1!==t.Ab(l,1)._compositionEnd(u.target.value)&&e),e},null,null)),t.pb(1,16384,null,0,e.d,[t.E,t.k,[2,e.a]],null,null),t.Fb(1024,null,e.o,function(l){return[l]},[e.d]),t.pb(3,540672,null,0,e.i,[[8,null],[8,null],[6,e.o],[2,e.D]],{form:[0,"form"]},null),t.Fb(2048,null,e.p,null,[e.i]),t.pb(5,16384,null,0,e.q,[[4,e.p]],null,null)],function(l,n){l(n,3,0,n.component.control)},function(l,n){l(n,0,0,n.component.config.name,t.Ab(n,5).ngClassUntouched,t.Ab(n,5).ngClassTouched,t.Ab(n,5).ngClassPristine,t.Ab(n,5).ngClassDirty,t.Ab(n,5).ngClassValid,t.Ab(n,5).ngClassInvalid,t.Ab(n,5).ngClassPending)})}function P(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,6,"input",[["class","form-input"],["name","attr"],["type","number"]],[[8,"placeholder",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"]],function(l,n,u){var e=!0;return"input"===n&&(e=!1!==t.Ab(l,1)._handleInput(u.target.value)&&e),"blur"===n&&(e=!1!==t.Ab(l,1).onTouched()&&e),"compositionstart"===n&&(e=!1!==t.Ab(l,1)._compositionStart()&&e),"compositionend"===n&&(e=!1!==t.Ab(l,1)._compositionEnd(u.target.value)&&e),"change"===n&&(e=!1!==t.Ab(l,2).onChange(u.target.value)&&e),"input"===n&&(e=!1!==t.Ab(l,2).onChange(u.target.value)&&e),"blur"===n&&(e=!1!==t.Ab(l,2).onTouched()&&e),e},null,null)),t.pb(1,16384,null,0,e.d,[t.E,t.k,[2,e.a]],null,null),t.pb(2,16384,null,0,e.z,[t.E,t.k],null,null),t.Fb(1024,null,e.o,function(l,n){return[l,n]},[e.d,e.z]),t.pb(4,540672,null,0,e.i,[[8,null],[8,null],[6,e.o],[2,e.D]],{form:[0,"form"]},null),t.Fb(2048,null,e.p,null,[e.i]),t.pb(6,16384,null,0,e.q,[[4,e.p]],null,null)],function(l,n){l(n,4,0,n.component.control)},function(l,n){l(n,0,0,n.component.config.name,t.Ab(n,6).ngClassUntouched,t.Ab(n,6).ngClassTouched,t.Ab(n,6).ngClassPristine,t.Ab(n,6).ngClassDirty,t.Ab(n,6).ngClassValid,t.Ab(n,6).ngClassInvalid,t.Ab(n,6).ngClassPending)})}function x(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,6,"input",[["class","form-input"],["name","attr"],["type","number"]],[[8,"placeholder",0],[8,"step",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"]],function(l,n,u){var e=!0;return"input"===n&&(e=!1!==t.Ab(l,1)._handleInput(u.target.value)&&e),"blur"===n&&(e=!1!==t.Ab(l,1).onTouched()&&e),"compositionstart"===n&&(e=!1!==t.Ab(l,1)._compositionStart()&&e),"compositionend"===n&&(e=!1!==t.Ab(l,1)._compositionEnd(u.target.value)&&e),"change"===n&&(e=!1!==t.Ab(l,2).onChange(u.target.value)&&e),"input"===n&&(e=!1!==t.Ab(l,2).onChange(u.target.value)&&e),"blur"===n&&(e=!1!==t.Ab(l,2).onTouched()&&e),e},null,null)),t.pb(1,16384,null,0,e.d,[t.E,t.k,[2,e.a]],null,null),t.pb(2,16384,null,0,e.z,[t.E,t.k],null,null),t.Fb(1024,null,e.o,function(l,n){return[l,n]},[e.d,e.z]),t.pb(4,540672,null,0,e.i,[[8,null],[8,null],[6,e.o],[2,e.D]],{form:[0,"form"]},null),t.Fb(2048,null,e.p,null,[e.i]),t.pb(6,16384,null,0,e.q,[[4,e.p]],null,null)],function(l,n){l(n,4,0,n.component.control)},function(l,n){var u=n.component;l(n,0,0,u.config.name,u.config.options.step||.01,t.Ab(n,6).ngClassUntouched,t.Ab(n,6).ngClassTouched,t.Ab(n,6).ngClassPristine,t.Ab(n,6).ngClassDirty,t.Ab(n,6).ngClassValid,t.Ab(n,6).ngClassInvalid,t.Ab(n,6).ngClassPending)})}function E(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,3,"option",[],null,null,null,null,null)),t.pb(1,147456,null,0,e.t,[t.k,t.E,[2,e.v]],{value:[0,"value"]},null),t.pb(2,147456,null,0,e.E,[t.k,t.E,[8,null]],{value:[0,"value"]},null),(l()(),t.Ib(3,null,["",""]))],function(l,n){l(n,1,0,n.context.$implicit),l(n,2,0,n.context.$implicit)},function(l,n){l(n,3,0,n.context.$implicit)})}function T(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,7,"select",[["class","form-select"],["name","attr"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"change"],[null,"blur"]],function(l,n,u){var e=!0;return"change"===n&&(e=!1!==t.Ab(l,1).onChange(u.target.value)&&e),"blur"===n&&(e=!1!==t.Ab(l,1).onTouched()&&e),e},null,null)),t.pb(1,16384,null,0,e.v,[t.E,t.k],null,null),t.Fb(1024,null,e.o,function(l){return[l]},[e.v]),t.pb(3,540672,null,0,e.i,[[8,null],[8,null],[6,e.o],[2,e.D]],{form:[0,"form"]},null),t.Fb(2048,null,e.p,null,[e.i]),t.pb(5,16384,null,0,e.q,[[4,e.p]],null,null),(l()(),t.hb(16777216,null,null,1,null,E)),t.pb(7,278528,null,0,i.j,[t.P,t.M,t.t],{ngForOf:[0,"ngForOf"]},null)],function(l,n){var u=n.component;l(n,3,0,u.control),l(n,7,0,u.config.options.choices)},function(l,n){l(n,0,0,t.Ab(n,5).ngClassUntouched,t.Ab(n,5).ngClassTouched,t.Ab(n,5).ngClassPristine,t.Ab(n,5).ngClassDirty,t.Ab(n,5).ngClassValid,t.Ab(n,5).ngClassInvalid,t.Ab(n,5).ngClassPending)})}function S(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,3,"option",[],null,null,null,null,null)),t.pb(1,147456,null,0,e.t,[t.k,t.E,[8,null]],{value:[0,"value"]},null),t.pb(2,147456,null,0,e.E,[t.k,t.E,[2,e.w]],{value:[0,"value"]},null),(l()(),t.Ib(3,null,["",""]))],function(l,n){l(n,1,0,n.context.$implicit),l(n,2,0,n.context.$implicit)},function(l,n){l(n,3,0,n.context.$implicit)})}function O(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,7,"select",[["class","form-select"],["multiple","true"],["name","attr"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"change"],[null,"blur"]],function(l,n,u){var e=!0;return"change"===n&&(e=!1!==t.Ab(l,1).onChange(u.target)&&e),"blur"===n&&(e=!1!==t.Ab(l,1).onTouched()&&e),e},null,null)),t.pb(1,16384,null,0,e.w,[t.E,t.k],null,null),t.Fb(1024,null,e.o,function(l){return[l]},[e.w]),t.pb(3,540672,null,0,e.i,[[8,null],[8,null],[6,e.o],[2,e.D]],{form:[0,"form"]},null),t.Fb(2048,null,e.p,null,[e.i]),t.pb(5,16384,null,0,e.q,[[4,e.p]],null,null),(l()(),t.hb(16777216,null,null,1,null,S)),t.pb(7,278528,null,0,i.j,[t.P,t.M,t.t],{ngForOf:[0,"ngForOf"]},null)],function(l,n){var u=n.component;l(n,3,0,u.control),l(n,7,0,u.config.options.choices)},function(l,n){l(n,0,0,t.Ab(n,5).ngClassUntouched,t.Ab(n,5).ngClassTouched,t.Ab(n,5).ngClassPristine,t.Ab(n,5).ngClassDirty,t.Ab(n,5).ngClassValid,t.Ab(n,5).ngClassInvalid,t.Ab(n,5).ngClassPending)})}function M(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,5,"dd-quill",[["simple","true"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],null,null,o.b,o.a)),t.pb(1,1163264,null,0,r.a,[a.b,c.a,s.a,p.k,b.c,d.b,f.a,h.a],{simple:[0,"simple"],placeholder:[1,"placeholder"]},null),t.Fb(1024,null,e.o,function(l){return[l]},[r.a]),t.pb(3,540672,null,0,e.i,[[8,null],[8,null],[6,e.o],[2,e.D]],{form:[0,"form"]},null),t.Fb(2048,null,e.p,null,[e.i]),t.pb(5,16384,null,0,e.q,[[4,e.p]],null,null)],function(l,n){var u=n.component;l(n,1,0,"true",u.config.name),l(n,3,0,u.control)},function(l,n){l(n,0,0,t.Ab(n,5).ngClassUntouched,t.Ab(n,5).ngClassTouched,t.Ab(n,5).ngClassPristine,t.Ab(n,5).ngClassDirty,t.Ab(n,5).ngClassValid,t.Ab(n,5).ngClassInvalid,t.Ab(n,5).ngClassPending)})}function _(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,5,"dd-currency-input",[],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],null,null,q,v)),t.pb(1,114688,null,0,m,[],{config:[0,"config"]},null),t.Fb(1024,null,e.o,function(l){return[l]},[m]),t.pb(3,540672,null,0,e.i,[[8,null],[8,null],[6,e.o],[2,e.D]],{form:[0,"form"]},null),t.Fb(2048,null,e.p,null,[e.i]),t.pb(5,16384,null,0,e.q,[[4,e.p]],null,null)],function(l,n){var u=n.component;l(n,1,0,u.config.options),l(n,3,0,u.control)},function(l,n){l(n,0,0,t.Ab(n,5).ngClassUntouched,t.Ab(n,5).ngClassTouched,t.Ab(n,5).ngClassPristine,t.Ab(n,5).ngClassDirty,t.Ab(n,5).ngClassValid,t.Ab(n,5).ngClassInvalid,t.Ab(n,5).ngClassPending)})}function D(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,9,"div",[["class","form-group"]],null,null,null,null,null)),(l()(),t.qb(1,0,null,null,8,"label",[["class","form-checkbox"]],null,null,null,null,null)),(l()(),t.qb(2,0,null,null,5,"input",[["type","checkbox"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"change"],[null,"blur"]],function(l,n,u){var e=!0;return"change"===n&&(e=!1!==t.Ab(l,3).onChange(u.target.checked)&&e),"blur"===n&&(e=!1!==t.Ab(l,3).onTouched()&&e),e},null,null)),t.pb(3,16384,null,0,e.b,[t.E,t.k],null,null),t.Fb(1024,null,e.o,function(l){return[l]},[e.b]),t.pb(5,540672,null,0,e.i,[[8,null],[8,null],[6,e.o],[2,e.D]],{form:[0,"form"]},null),t.Fb(2048,null,e.p,null,[e.i]),t.pb(7,16384,null,0,e.q,[[4,e.p]],null,null),(l()(),t.qb(8,0,null,null,0,"i",[["class","form-icon"]],null,null,null,null,null)),(l()(),t.Ib(9,null,[" "," "]))],function(l,n){l(n,5,0,n.component.control)},function(l,n){var u=n.component;l(n,2,0,t.Ab(n,7).ngClassUntouched,t.Ab(n,7).ngClassTouched,t.Ab(n,7).ngClassPristine,t.Ab(n,7).ngClassDirty,t.Ab(n,7).ngClassValid,t.Ab(n,7).ngClassInvalid,t.Ab(n,7).ngClassPending),l(n,9,0,u.config.name)})}function N(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,1,"figure",[["class","form-icon avatar"]],null,null,null,null,null)),(l()(),t.qb(1,0,null,null,0,"img",[],[[8,"src",4]],null,null,null,null))],null,function(l,n){var u=n.component;l(n,1,0,t.sb(1,"https://res.cloudinary.com/dqhk8k6iv/image/upload/t_thumb/",u.config.imageId,""))})}function L(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,21,"div",[],null,null,null,null,null)),t.pb(1,278528,null,0,i.i,[t.t,t.u,t.k,t.E],{ngClass:[0,"ngClass"]},null),t.Db(2,{"has-icon-left":0}),t.pb(3,16384,null,0,i.n,[],{ngSwitch:[0,"ngSwitch"]},null),(l()(),t.hb(16777216,null,null,1,null,w)),t.pb(5,278528,null,0,i.o,[t.P,t.M,i.n],{ngSwitchCase:[0,"ngSwitchCase"]},null),(l()(),t.hb(16777216,null,null,1,null,P)),t.pb(7,278528,null,0,i.o,[t.P,t.M,i.n],{ngSwitchCase:[0,"ngSwitchCase"]},null),(l()(),t.hb(16777216,null,null,1,null,x)),t.pb(9,278528,null,0,i.o,[t.P,t.M,i.n],{ngSwitchCase:[0,"ngSwitchCase"]},null),(l()(),t.hb(16777216,null,null,1,null,T)),t.pb(11,278528,null,0,i.o,[t.P,t.M,i.n],{ngSwitchCase:[0,"ngSwitchCase"]},null),(l()(),t.hb(16777216,null,null,1,null,O)),t.pb(13,278528,null,0,i.o,[t.P,t.M,i.n],{ngSwitchCase:[0,"ngSwitchCase"]},null),(l()(),t.hb(16777216,null,null,1,null,M)),t.pb(15,278528,null,0,i.o,[t.P,t.M,i.n],{ngSwitchCase:[0,"ngSwitchCase"]},null),(l()(),t.hb(16777216,null,null,1,null,_)),t.pb(17,278528,null,0,i.o,[t.P,t.M,i.n],{ngSwitchCase:[0,"ngSwitchCase"]},null),(l()(),t.hb(16777216,null,null,1,null,D)),t.pb(19,278528,null,0,i.o,[t.P,t.M,i.n],{ngSwitchCase:[0,"ngSwitchCase"]},null),(l()(),t.hb(16777216,null,null,1,null,N)),t.pb(21,16384,null,0,i.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null)],function(l,n){var u=n.component,t=l(n,2,0,u.config.imageId);l(n,1,0,t),l(n,3,0,u.config.type),l(n,5,0,0),l(n,7,0,1),l(n,9,0,2),l(n,11,0,3),l(n,13,0,4),l(n,15,0,5),l(n,17,0,6),l(n,19,0,7),l(n,21,0,u.config.imageId)},null)}k.a},uCWu:function(l,n,u){"use strict";u.d(n,"b",function(){return p}),u.d(n,"a",function(){return b});var t=u("AytR"),e=u("edGd"),i=u("dtdw"),o=u("CcnG"),r=u("t/Na"),a=function(){return(a=Object.assign||function(l){for(var n,u=1,t=arguments.length;u<t;u++)for(var e in n=arguments[u])Object.prototype.hasOwnProperty.call(n,e)&&(l[e]=n[e]);return l}).apply(this,arguments)},c=function(l,n,u,t){return new(u||(u=Promise))(function(e,i){function o(l){try{a(t.next(l))}catch(n){i(n)}}function r(l){try{a(t.throw(l))}catch(n){i(n)}}function a(l){l.done?e(l.value):new u(function(n){n(l.value)}).then(o,r)}a((t=t.apply(l,n||[])).next())})},s=function(l,n){var u,t,e,i,o={label:0,sent:function(){if(1&e[0])throw e[1];return e[1]},trys:[],ops:[]};return i={next:r(0),throw:r(1),return:r(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function r(i){return function(r){return function(i){if(u)throw new TypeError("Generator is already executing.");for(;o;)try{if(u=1,t&&(e=2&i[0]?t.return:i[0]?t.throw||((e=t.return)&&e.call(t),0):t.next)&&!(e=e.call(t,i[1])).done)return e;switch(t=0,e&&(i=[2&i[0],e.value]),i[0]){case 0:case 1:e=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,t=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!(e=(e=o.trys).length>0&&e[e.length-1])&&(6===i[0]||2===i[0])){o=0;continue}if(3===i[0]&&(!e||i[1]>e[0]&&i[1]<e[3])){o.label=i[1];break}if(6===i[0]&&o.label<e[1]){o.label=e[1],e=i;break}if(e&&o.label<e[2]){o.label=e[2],o.ops.push(i);break}e[2]&&o.ops.pop(),o.trys.pop();continue}i=n.call(l,o)}catch(r){i=[6,r],t=0}finally{u=e=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,r])}}},p=function(){function l(l,n,u){var t=this;this.http=l,this.login=n,this.updateHub=u,this._campaign=null,this.loadingCampaign=!1,this.updateHub.stateUpdate.subscribe(function(l){l===i.a.CONNECTED&&t._campaign&&t.updateHub.subscribeCampaign(t._campaign.id)}),this.updateHub.campaignUpdated.subscribe(function(l){t._campaign&&t._campaign.id===l.id&&(t._campaign.name=l.name,t._campaign.content=l.content,t._campaign.imageId=l.imageId,t._campaign.experienceTable=l.experienceTable,t._campaign.itemTypes=l.itemTypes,t._campaign.currencyMap=l.currencyMap)}),this.updateHub.campaignRefresh.subscribe(function(){t.refreshCurrentCampaign()}),this.updateHub.entityUpdated.subscribe(function(l){t._campaign&&(l.preset=t._campaign.entityPresets.find(function(n){return n.id===l.entityPresetId}),l.user=t._campaign.members.find(function(n){return n.userId===l.userId}).user,t._campaign.entities.forEach(function(n,u){n.id===l.id&&(t._campaign.entities[u]=a({},n,l))}))}),this.updateHub.entityDeleted.subscribe(function(l){t._campaign&&(t._campaign.entities=t._campaign.entities.filter(function(n){return n.id!==l}))}),this.updateHub.entityCreated.subscribe(function(l){t._campaign&&(l.preset=t._campaign.entityPresets.find(function(n){return n.id===l.entityPresetId}),l.user=t._campaign.members.find(function(n){return n.userId===l.userId}).user,t._campaign.entities.push(l))})}return l.prototype.setSelection=function(l){return c(this,void 0,void 0,function(){var n;return s(this,function(u){switch(u.label){case 0:if(null==l)return null!==this.campaign&&void 0!==this.campaign&&(this.previousCampaignId=this.campaign.id,this.updateHub.unsubscribeCampaign(this.previousCampaignId)),this.campaign=null,[2];this.updateHub.subscribeCampaign(l),this.campaign=null,this.loadingCampaign=!0,u.label=1;case 1:return u.trys.push([1,3,,4]),[4,this.getCampaign(l)];case 2:return n=u.sent(),this.campaign=n,document.title=this.campaign.name,[3,4];case 3:throw u.sent();case 4:return this.loadingCampaign=!1,[2]}})})},l.prototype.refreshCurrentCampaign=function(){return c(this,void 0,void 0,function(){var l;return s(this,function(n){switch(n.label){case 0:if(!this.campaign)return[2];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.getCampaign(this.campaign.id)];case 2:return l=n.sent(),Object.assign(this.campaign,l),document.title=this.campaign.name,[3,4];case 3:throw n.sent();case 4:return[2]}})})},l.prototype.getCampaigns=function(){return c(this,void 0,void 0,function(){return s(this,function(l){return[2,this.http.get(t.a.apiURL+"/campaigns").toPromise()]})})},l.prototype.getCampaign=function(l){return c(this,void 0,void 0,function(){return s(this,function(n){return[2,this.http.get(t.a.apiURL+"/campaigns/"+l).toPromise()]})})},l.prototype.createCampaign=function(l){return c(this,void 0,void 0,function(){return s(this,function(n){return[2,this.http.post(t.a.apiURL+"/campaigns",a({},l,{id:void 0})).toPromise()]})})},l.prototype.updateCampaign=function(l){return c(this,void 0,void 0,function(){return s(this,function(n){return[2,this.http.put(t.a.apiURL+"/campaigns/"+l.id,l).toPromise()]})})},l.prototype.deleteCampaign=function(l){return c(this,void 0,void 0,function(){return s(this,function(n){return[2,this.http.delete(t.a.apiURL+"/campaigns/"+l.id).toPromise()]})})},l.prototype.getInvites=function(){return c(this,void 0,void 0,function(){return s(this,function(l){return[2,this.http.get(t.a.apiURL+"/campaigninvites?campaignId="+this.campaign.id).toPromise()]})})},l.prototype.getInvite=function(l){return c(this,void 0,void 0,function(){return s(this,function(n){return[2,this.http.get(t.a.apiURL+"/campaigninvites/"+l).toPromise()]})})},l.prototype.createInvite=function(l){return c(this,void 0,void 0,function(){return s(this,function(n){return[2,this.http.post(t.a.apiURL+"/campaigninvites",{campaignId:this.campaign.id,name:l}).toPromise()]})})},l.prototype.updateInvite=function(l){return c(this,void 0,void 0,function(){return s(this,function(n){return[2,this.http.put(t.a.apiURL+"/campaigninvites/"+l.id,l).toPromise()]})})},l.prototype.deleteInvite=function(l){return c(this,void 0,void 0,function(){return s(this,function(n){return[2,this.http.delete(t.a.apiURL+"/campaigninvites/"+l).toPromise()]})})},l.prototype.acceptInvite=function(l){return c(this,void 0,void 0,function(){return s(this,function(n){return[2,this.http.post(t.a.apiURL+"/campaigninvites/"+l+"/accept",{}).toPromise()]})})},l.prototype.denyInvite=function(l){return c(this,void 0,void 0,function(){return s(this,function(n){return[2,this.http.post(t.a.apiURL+"/campaigninvites/"+l+"/decline",{}).toPromise()]})})},l.prototype.removeMember=function(l){return c(this,void 0,void 0,function(){return s(this,function(n){return[2,this.http.delete(t.a.apiURL+"/campaigns/"+l.campaignId+"/member/"+l.userId).toPromise()]})})},l.prototype.calculateLevel=function(l){if(!this.campaign)throw new Error("No campaign present");for(var n=this.campaign.experienceTable||[],u=1,t=0;t<n.length&&l>=n[t];t++)u++;return u},l.prototype.getXPToNextLevel=function(l){for(var n=this.campaign.experienceTable||[],u=0;u<n.length;u++){var t=n[u];if(l<t)return t-l}return-1},l.prototype.getEntityPreset=function(l){return this.campaign&&this.campaign.entityPresets.find(function(n){return n.id===l})||null},l.prototype.getUser=function(l){return this.campaign&&this.campaign.members.find(function(n){return n.userId===l})||null},Object.defineProperty(l.prototype,"canEdit",{get:function(){return!!this.campaign&&this.login.id===this.campaign.userId},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"editableEntities",{get:function(){var l=this;return this.campaign?this.canEdit?this.campaign.entities:this.campaign.entities.filter(function(n){return n.userId===l.login.id}):[]},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"campaign",{get:function(){return this._campaign},set:function(l){this._campaign=l},enumerable:!0,configurable:!0}),l.ngInjectableDef=o.T({factory:function(){return new l(o.X(r.c),o.X(e.a),o.X(i.b))},token:l,providedIn:"root"}),l}(),b=function(l){return l[l.PENDING=0]="PENDING",l[l.REVOKED=1]="REVOKED",l[l.ACCEPTED=2]="ACCEPTED",l}({})},"w/34":function(l,n,u){"use strict";u.d(n,"a",function(){return o});var t=u("YeDP"),e=u("yq7w"),i=u("LtSl"),o=(t.a,e.a,i.a,function(){return function(){}}())},wC5x:function(l,n,u){"use strict";u.d(n,"a",function(){return t});var t=function(){return function(){}}()},wDmS:function(l,n,u){"use strict";var t=u("CcnG"),e=u("Ip0R"),i=u("HRrE");u.d(n,"a",function(){return o}),u.d(n,"b",function(){return a});var o=t.ob({encapsulation:0,styles:[[""]],data:{}});function r(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,2,"div",[["class","chip"]],null,null,null,null,null)),(l()(),t.Ib(1,null,[" "," "])),(l()(),t.qb(2,0,null,null,0,"a",[["aria-label","Close"],["class","btn btn-clear"],["role","button"]],null,[[null,"click"]],function(l,n,u){var t=!0,e=l.component;return"click"===n&&(t=!1!==e.removeTag(l.context.$implicit)&&t),t},null,null))],null,function(l,n){l(n,1,0,n.context.$implicit)})}function a(l){return t.Kb(0,[t.Gb(402653184,1,{input:0}),(l()(),t.qb(1,0,null,null,7,"div",[["class","form-group"]],null,null,null,null,null)),(l()(),t.qb(2,0,null,null,4,"div",[["class","form-autocomplete"]],null,null,null,null,null)),(l()(),t.qb(3,0,null,null,3,"div",[["class","form-autocomplete-input form-input"]],null,null,null,null,null)),(l()(),t.hb(16777216,null,null,1,null,r)),t.pb(5,278528,null,0,e.j,[t.P,t.M,t.t],{ngForOf:[0,"ngForOf"]},null),(l()(),t.qb(6,0,[[1,0],["input",1]],null,0,"input",[["class","form-input"],["id","tag"],["name","tag"],["type","text"]],null,[[null,"input"],[null,"keyup"]],function(l,n,u){var t=!0,e=l.component;return"input"===n&&(t=!1!==e.onInputChanged(u)&&t),"keyup"===n&&(t=!1!==e.onInputEvent(u)&&t),t},null,null)),(l()(),t.qb(7,0,null,null,1,"p",[["class","form-input-hint mb-0"]],null,null,null,null,null)),(l()(),t.Ib(-1,null,["Type some text and hit enter to add a tag"]))],function(l,n){l(n,5,0,n.component.formArray.value)},null)}i.a},wNqa:function(l,n,u){"use strict";u.d(n,"a",function(){return r}),u.d(n,"b",function(){return a});var t=u("AytR"),e=u("CcnG"),i=u("t/Na"),o=function(){return(o=Object.assign||function(l){for(var n,u=1,t=arguments.length;u<t;u++)for(var e in n=arguments[u])Object.prototype.hasOwnProperty.call(n,e)&&(l[e]=n[e]);return l}).apply(this,arguments)},r=function(){function l(l){this.http=l}return l.prototype.getQuests=function(l,n,u,e,i,o,r){void 0===u&&(u=10),void 0===e&&(e=0),void 0===i&&(i=null),void 0===o&&(o=null),void 0===r&&(r=null);var a="";null!=n&&(a="&search="+encodeURIComponent(n.trim().toLowerCase()));var c="";i&&i.length>0&&i.forEach(function(l){c+="&except="+encodeURIComponent(l)});var s="";o&&o.length>0&&o.forEach(function(l){s+="&only="+encodeURIComponent(l)});var p="";return r&&r.length>0&&r.forEach(function(l){p+="&status="+l}),u||(u=10),e||(e=0),this.http.get(t.a.apiURL+"/quests?campaignId="+l+a+"&limit="+u+"&offset="+e+c+s+p).toPromise()},l.prototype.getQuest=function(l){return this.http.get(t.a.apiURL+"/quests/"+l).toPromise()},l.prototype.createQuest=function(l){return this.http.post(t.a.apiURL+"/quests",o({},l,{id:void 0})).toPromise()},l.prototype.updateQuest=function(l){return this.http.put(t.a.apiURL+"/quests/"+l.id,l).toPromise()},l.prototype.deleteQuest=function(l){return this.http.delete(t.a.apiURL+"/quests/"+l.id).toPromise()},l.ngInjectableDef=e.T({factory:function(){return new l(e.X(i.c))},token:l,providedIn:"root"}),l}(),a=function(l){return l[l.NONE=0]="NONE",l[l.ON_HOLD=1]="ON_HOLD",l[l.IN_PROGRESS=2]="IN_PROGRESS",l[l.TO_DO=3]="TO_DO",l}({})},xdv0:function(l,n,u){"use strict";u.d(n,"a",function(){return o});var t=u("AytR"),e=u("CcnG"),i=u("t/Na"),o=function(){function l(l){this.http=l}return l.prototype.getUser=function(l){return this.http.get(t.a.apiURL+"/users/"+l).toPromise()},l.prototype.createUser=function(l){return this.http.post(t.a.apiURL+"/users",l).toPromise()},l.prototype.updateUser=function(l){return this.http.put(t.a.apiURL+"/users/"+l.id,l).toPromise()},l.ngInjectableDef=e.T({factory:function(){return new l(e.X(i.c))},token:l,providedIn:"root"}),l}()},xzO9:function(l,n,u){"use strict";var t=u("CcnG"),e=u("Ip0R"),i=u("+awi");u.d(n,"a",function(){return o}),u.d(n,"b",function(){return b});var o=t.ob({encapsulation:0,styles:[[""]],data:{}});function r(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,1,"p",[["class","form-input-hint mb-1"]],null,null,null,null,null)),(l()(),t.Ib(1,null,[" "," is required\n"]))],null,function(l,n){l(n,1,0,n.component.config.name)})}function a(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,1,"p",[["class","form-input-hint mb-1"]],null,null,null,null,null)),(l()(),t.Ib(1,null,[" "," can't be lower than ","\n"]))],null,function(l,n){var u=n.component;l(n,1,0,u.config.name,u.config.options.min)})}function c(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,1,"p",[["class","form-input-hint mb-1"]],null,null,null,null,null)),(l()(),t.Ib(1,null,[" "," can't be higher than ","\n"]))],null,function(l,n){var u=n.component;l(n,1,0,u.config.name,u.config.options.max)})}function s(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,1,"p",[["class","form-input-hint mb-1"]],null,null,null,null,null)),(l()(),t.Ib(1,null,[" "," cannot have less than "," characters\n"]))],null,function(l,n){var u=n.component;l(n,1,0,u.config.name,u.config.options.minLength)})}function p(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,1,"p",[["class","form-input-hint mb-1"]],null,null,null,null,null)),(l()(),t.Ib(1,null,[" "," cannot have more than "," characters\n"]))],null,function(l,n){var u=n.component;l(n,1,0,u.config.name,u.config.options.maxLength)})}function b(l){return t.Kb(0,[(l()(),t.hb(16777216,null,null,1,null,r)),t.pb(1,16384,null,0,e.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null),(l()(),t.hb(16777216,null,null,1,null,a)),t.pb(3,16384,null,0,e.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null),(l()(),t.hb(16777216,null,null,1,null,c)),t.pb(5,16384,null,0,e.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null),(l()(),t.hb(16777216,null,null,1,null,s)),t.pb(7,16384,null,0,e.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null),(l()(),t.hb(16777216,null,null,1,null,p)),t.pb(9,16384,null,0,e.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null)],function(l,n){var u=n.component;l(n,1,0,u.control.invalid&&(u.control.dirty||u.control.touched)&&u.errors.required),l(n,3,0,u.control.invalid&&(u.control.dirty||u.control.touched)&&u.errors.min),l(n,5,0,u.control.invalid&&(u.control.dirty||u.control.touched)&&u.errors.max),l(n,7,0,u.control.invalid&&(u.control.dirty||u.control.touched)&&u.errors.minlength),l(n,9,0,u.control.invalid&&(u.control.dirty||u.control.touched)&&u.errors.maxlength)},null)}i.a},y4Wg:function(l,n,u){"use strict";u.d(n,"a",function(){return e});var t=u("CcnG"),e=function(){function l(){this.itemsPerPage=5,this.page=0,this.autoHide=!0,this.loading=!1,this.pageChange=new t.m}return l.prototype.ngOnInit=function(){},l.prototype.next=function(){this.canNext&&(this.page++,this.pageChange.emit(this.page))},l.prototype.prev=function(){this.canPrev&&(this.page--,this.pageChange.emit(this.page))},l.prototype.setPage=function(l){this.page=l,this.pageChange.emit(this.page)},Object.defineProperty(l.prototype,"pageArr",{get:function(){var l=[1];if(this.numPages>4){this.page>2&&l.push(-1);for(var n=Math.max(2,this.page-1);n<Math.min(this.page+2,this.numPages);n++)l.push(n);this.page<this.numPages-2&&l.push(-1),l.push(this.numPages)}else if(this.numPages>1)for(n=2;n<this.numPages+1;n++)l.push(n);return l},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"numPages",{get:function(){return Math.ceil(this.totalItems/this.itemsPerPage)},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"canNext",{get:function(){return this.page<this.numPages},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"canPrev",{get:function(){return this.page>1},enumerable:!0,configurable:!0}),l}()},ygrl:function(l,n,u){"use strict";u.d(n,"a",function(){return t});var t=function(){function l(){this.size="normal",this.codeOnly=!1}return l.prototype.ngOnInit=function(){},l.prototype.open=function(){var l=this;if(void 0!==this.openPromise)throw new Error("Cannot open modal when it is already open");return this.openPromise=new Promise(function(n,u){l.resolve=n}),this.openPromise},l.prototype.userClose=function(l){if(!0!==this.codeOnly)return this.close(l)},l.prototype.close=function(l){if(void 0===this.openPromise)throw new Error("Cannot close modal when it has not been opened");var n=this.openPromise;return this.resolve(l),this.openPromise=void 0,this.resolve=void 0,n},Object.defineProperty(l.prototype,"isOpen",{get:function(){return void 0!==this.openPromise},enumerable:!0,configurable:!0}),l}()},yq7w:function(l,n,u){"use strict";u.d(n,"a",function(){return i}),u("uCWu");var t=u("AytR"),e=(u("edGd"),u("gIcY")),i=function(){function l(l,n,u){this.campaignService=l,this.loginService=n,this.router=u,this.fileError=null,this.isUploading=!1,this.mapId=null}return l.prototype.ngOnInit=function(){this.formGroup=new e.k({name:new e.h(null,[e.x.required]),file:new e.h(null,[e.x.required])})},l.prototype.viewMap=function(){this.router.navigate(["campaigns",this.campaignService.campaign.id,"maps",this.mapId])},l.prototype.onFileChange=function(l){this.fileError=null;var n=l.target.files;n.length>0&&(this.file=n[0],this.file.size>5e7?this.fileError="Size cannot exceed 50mb":-1===["image/png","image/jpg","image/jpeg"].indexOf(this.file.type)&&(this.fileError="Image file must be a .png or a .jpg"))},l.prototype.submit=function(){this.formGroup.invalid||this.handleFileUpload(this.file)},l.prototype.handleFileUpload=function(l){var n=this;if(this.fileError=null,this.uploadProgress=null,l.type.startsWith("image/")){this.file=l;var u=new FormData;u.append("file",this.file),u.append("name",this.name.value),this.campaignService.campaign&&u.append("campaignId",this.campaignService.campaign.id);var e=new XMLHttpRequest;e.open("POST",t.a.apiURL+"/maps",!0),e.setRequestHeader("Authorization","Bearer "+this.loginService.token),e.onload=function(l){var u=JSON.parse(e.responseText);n.mapId=u.id,n.isUploading=!1,n.file=null},e.upload.addEventListener("progress",function(l){n.uploadProgress=l.loaded/l.total*100}),this.isUploading=!0,e.send(u)}else this.fileError="Incorrect file type! Only images are accepted"},Object.defineProperty(l.prototype,"fileControl",{get:function(){return this.formGroup.get("file")},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"name",{get:function(){return this.formGroup.get("name")},enumerable:!0,configurable:!0}),l}()},zUnb:function(l,n,u){"use strict";u.r(n);var t=u("CcnG"),e=u("AytR"),i=u("abTI"),o=function(){return function(){}}(),r=u("ZYCi"),a=function(){function l(l){var n=this;this.router=l,this._sidebarOpen=!1,l.events.subscribe(function(l){n.sidebarOpen=!1})}return l.prototype.toggle=function(){this.sidebarOpen=!this.sidebarOpen},Object.defineProperty(l.prototype,"sidebarOpen",{get:function(){return this._sidebarOpen},set:function(l){this._sidebarOpen=l},enumerable:!0,configurable:!0}),l.ngInjectableDef=t.T({factory:function(){return new l(t.X(r.k))},token:l,providedIn:"root"}),l}(),c=function(){function l(l){this.sidebar=l,this.title="ui"}return l.prototype.toggle=function(){this.sidebar.toggle()},Object.defineProperty(l.prototype,"sidebarOpen",{get:function(){return this.sidebar.sidebarOpen},enumerable:!0,configurable:!0}),l}(),s=u("pMnS"),p=u("Ip0R"),b=u("edGd"),d=u("CYb2"),f=u("uCWu"),h=function(l,n,u,t){return new(u||(u=Promise))(function(e,i){function o(l){try{a(t.next(l))}catch(n){i(n)}}function r(l){try{a(t.throw(l))}catch(n){i(n)}}function a(l){l.done?e(l.value):new u(function(n){n(l.value)}).then(o,r)}a((t=t.apply(l,n||[])).next())})},g=function(l,n){var u,t,e,i,o={label:0,sent:function(){if(1&e[0])throw e[1];return e[1]},trys:[],ops:[]};return i={next:r(0),throw:r(1),return:r(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function r(i){return function(r){return function(i){if(u)throw new TypeError("Generator is already executing.");for(;o;)try{if(u=1,t&&(e=2&i[0]?t.return:i[0]?t.throw||((e=t.return)&&e.call(t),0):t.next)&&!(e=e.call(t,i[1])).done)return e;switch(t=0,e&&(i=[2&i[0],e.value]),i[0]){case 0:case 1:e=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,t=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!(e=(e=o.trys).length>0&&e[e.length-1])&&(6===i[0]||2===i[0])){o=0;continue}if(3===i[0]&&(!e||i[1]>e[0]&&i[1]<e[3])){o.label=i[1];break}if(6===i[0]&&o.label<e[1]){o.label=e[1],e=i;break}if(e&&o.label<e[2]){o.label=e[2],o.ops.push(i);break}e[2]&&o.ops.pop(),o.trys.pop();continue}i=n.call(l,o)}catch(r){i=[6,r],t=0}finally{u=e=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,r])}}},m=function(){function l(l,n,u,t,e){this.login=l,this.actions=n,this.campaignService=u,this.router=t,this.route=e,this.loading=!1,this.accepting=!1,this.denying=!1}return l.prototype.ngOnInit=function(){return h(this,void 0,void 0,function(){return g(this,function(l){switch(l.label){case 0:return this.actions.queue.unshift({type:d.b.INVITE,data:{inviteId:this.route.snapshot.paramMap.get("invite_id")}}),this.actions.save(),[4,this.login.isLoggedIn];case 1:return l.sent()?[3,2]:(this.router.navigate(["login"]),[3,7]);case 2:return l.trys.push([2,4,,6]),this.loading=!0,[4,this.loadInvite()];case 3:return l.sent(),0!==this.invite.status&&(this.actions.queue.pop(),this.actions.save()),[3,6];case 4:return l.sent(),this.actions.queue.pop(),this.actions.save(),[4,this.router.navigate(["home"])];case 5:return l.sent(),[3,6];case 6:this.loading=!1,l.label=7;case 7:return[2]}})})},l.prototype.accept=function(){return h(this,void 0,void 0,function(){var l;return g(this,function(n){switch(n.label){case 0:this.accepting=!0,n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.campaignService.acceptInvite(this.invite.id)];case 2:return n.sent(),this.actions.queue.pop(),this.actions.save(),this.router.navigate(["campaigns",this.campaign.id,"landing"]),[3,4];case 3:return l=n.sent(),i.captureException(l),[3,4];case 4:return this.accepting=!1,[2]}})})},l.prototype.deny=function(){return h(this,void 0,void 0,function(){var l;return g(this,function(n){switch(n.label){case 0:this.denying=!0,n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.campaignService.denyInvite(this.invite.id)];case 2:return n.sent(),[3,4];case 3:return l=n.sent(),i.captureException(l),[3,4];case 4:return this.actions.queue.pop(),this.actions.save(),this.router.navigate(["home"]),this.denying=!1,[2]}})})},l.prototype.loadInvite=function(){return h(this,void 0,void 0,function(){var l;return g(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,this.campaignService.getInvite(this.route.snapshot.paramMap.get("invite_id"))];case 1:return l=n.sent(),this.invite=l,[3,3];case 2:throw n.sent();case 3:return[2]}})})},Object.defineProperty(l.prototype,"campaign",{get:function(){return this.invite?this.invite.campaign:null},enumerable:!0,configurable:!0}),l}(),v=t.ob({encapsulation:0,styles:[[""]],data:{}});function y(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,5,"div",[["class","columns"]],null,null,null,null,null)),(l()(),t.qb(1,0,null,null,4,"div",[["class","column col-4 col-md-6 col-sm-12 col-mx-auto"]],null,null,null,null,null)),(l()(),t.qb(2,0,null,null,3,"div",[["class","card"]],null,null,null,null,null)),(l()(),t.qb(3,0,null,null,2,"div",[["class","card-body"]],null,null,null,null,null)),(l()(),t.Ib(-1,null,[" Processing information... "])),(l()(),t.qb(5,0,null,null,0,"div",[["class","loading"]],null,null,null,null,null))],null,null)}function C(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,12,"div",[["class","card p-2"]],null,null,null,null,null)),(l()(),t.qb(1,0,null,null,1,"h2",[],null,null,null,null,null)),(l()(),t.Ib(-1,null,["Would you like to join this campaign?"])),(l()(),t.qb(3,0,null,null,1,"figure",[["class","avatar avatar-xl align-self-center"]],null,null,null,null,null)),(l()(),t.qb(4,0,null,null,0,"img",[],[[8,"src",4]],null,null,null,null)),(l()(),t.qb(5,0,null,null,1,"h1",[],null,null,null,null,null)),(l()(),t.Ib(6,null,["",""])),(l()(),t.qb(7,0,null,null,1,"button",[["class","btn btn-lg my-2"]],null,[[null,"click"]],function(l,n,u){var t=!0,e=l.component;return"click"===n&&(t=!1!==e.deny()&&t),t},null,null)),(l()(),t.Ib(-1,null,["No"])),(l()(),t.qb(9,0,null,null,3,"button",[["class","btn btn-primary btn-lg"]],null,[[null,"click"]],function(l,n,u){var t=!0,e=l.component;return"click"===n&&(t=!1!==e.accept()&&t),t},null,null)),t.pb(10,278528,null,0,p.i,[t.t,t.u,t.k,t.E],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),t.Db(11,{loading:0}),(l()(),t.Ib(-1,null,[" Yes "]))],function(l,n){var u=l(n,11,0,n.component.accepting);l(n,10,0,"btn btn-primary btn-lg",u)},function(l,n){var u=n.component;l(n,4,0,t.sb(1,"https://res.cloudinary.com/dqhk8k6iv/image/upload/t_thumb/",u.campaign.imageId,"")),l(n,6,0,u.campaign.name)})}function I(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,4,"div",[["class","toast text-left toast-error"]],null,null,null,null,null)),(l()(),t.qb(1,0,null,null,1,"h6",[],null,null,null,null,null)),(l()(),t.Ib(-1,null,["Invalid Invite"])),(l()(),t.qb(3,0,null,null,1,"p",[],null,null,null,null,null)),(l()(),t.Ib(-1,null,[" Unfortunately this invite is no longer valid. Sorry about that \xaf\\_(\u30c4)_/\xaf "]))],null,null)}function q(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,5,"div",[["class","columns"]],null,null,null,null,null)),(l()(),t.qb(1,0,null,null,4,"div",[["class","column col-6 col-md-10 col-sm-12 text-center col-mx-auto"]],null,null,null,null,null)),(l()(),t.hb(16777216,null,null,1,null,C)),t.pb(3,16384,null,0,p.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null),(l()(),t.hb(16777216,null,null,1,null,I)),t.pb(5,16384,null,0,p.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null)],function(l,n){var u=n.component;l(n,3,0,0===u.invite.status),l(n,5,0,0!==u.invite.status)},null)}function k(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,4,"div",[["class","container grid-xl"]],null,null,null,null,null)),(l()(),t.hb(16777216,null,null,1,null,y)),t.pb(2,16384,null,0,p.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null),(l()(),t.hb(16777216,null,null,1,null,q)),t.pb(4,16384,null,0,p.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null)],function(l,n){var u=n.component;l(n,2,0,u.loading),l(n,4,0,!u.loading&&u.campaign)},null)}function A(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,1,"dd-invite",[],null,null,null,k,v)),t.pb(1,114688,null,0,m,[b.a,d.a,f.b,r.k,r.a],null,null)],function(l,n){l(n,1,0)},null)}var w=t.mb("dd-invite",m,A,{},{},[]),P=u("t/Na"),x=function(){function l(l){this.http=l}return l.prototype.remoteAbout=function(){return this.http.get(e.a.apiURL+"/aboutinfo").toPromise()},l.prototype.localAbout=function(){return{gitHash:e.a.gitHash,gitTag:e.a.gitTag}},l.ngInjectableDef=t.T({factory:function(){return new l(t.X(P.c))},token:l,providedIn:"root"}),l}(),E=function(){function l(l){this.aboutService=l,this.loading=!1}return l.prototype.ngOnInit=function(){this.load()},l.prototype.load=function(){return l=this,void 0,u=function(){var l;return function(l,n){var u,t,e,i,o={label:0,sent:function(){if(1&e[0])throw e[1];return e[1]},trys:[],ops:[]};return i={next:r(0),throw:r(1),return:r(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function r(i){return function(r){return function(i){if(u)throw new TypeError("Generator is already executing.");for(;o;)try{if(u=1,t&&(e=2&i[0]?t.return:i[0]?t.throw||((e=t.return)&&e.call(t),0):t.next)&&!(e=e.call(t,i[1])).done)return e;switch(t=0,e&&(i=[2&i[0],e.value]),i[0]){case 0:case 1:e=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,t=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!(e=(e=o.trys).length>0&&e[e.length-1])&&(6===i[0]||2===i[0])){o=0;continue}if(3===i[0]&&(!e||i[1]>e[0]&&i[1]<e[3])){o.label=i[1];break}if(6===i[0]&&o.label<e[1]){o.label=e[1],e=i;break}if(e&&o.label<e[2]){o.label=e[2],o.ops.push(i);break}e[2]&&o.ops.pop(),o.trys.pop();continue}i=n.call(l,o)}catch(r){i=[6,r],t=0}finally{u=e=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,r])}}}(this,function(n){switch(n.label){case 0:this.loading=!0,this.local=this.aboutService.localAbout(),n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.aboutService.remoteAbout()];case 2:return l=n.sent(),this.remote=l,[3,4];case 3:throw n.sent();case 4:return this.loading=!1,[2]}})},new((n=void 0)||(n=Promise))(function(t,e){function i(l){try{r(u.next(l))}catch(n){e(n)}}function o(l){try{r(u.throw(l))}catch(n){e(n)}}function r(l){l.done?t(l.value):new n(function(n){n(l.value)}).then(i,o)}r((u=u.apply(l,[])).next())});var l,n,u},l.prototype.makeDummyException=function(){var l=new Error("This is a test error!");throw l.name="SentryTestError",l},l}(),T=t.ob({encapsulation:0,styles:[[""]],data:{}});function S(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,1,"span",[],null,null,null,null,null)),(l()(),t.Ib(-1,null,["(Loading...)"]))],null,null)}function O(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,8,"div",[["class","card p-2"]],null,null,null,null,null)),(l()(),t.qb(1,0,null,null,1,"h5",[["class","mb-1"]],null,null,null,null,null)),(l()(),t.Ib(-1,null,["Commit Hash"])),(l()(),t.qb(3,0,null,null,1,"span",[["class","text-italic text-gray"]],null,null,null,null,null)),(l()(),t.Ib(4,null,["",""])),(l()(),t.qb(5,0,null,null,1,"h5",[["class","mt-2 mb-1"]],null,null,null,null,null)),(l()(),t.Ib(-1,null,["Version Tag"])),(l()(),t.qb(7,0,null,null,1,"span",[["class","text-italic text-gray"]],null,null,null,null,null)),(l()(),t.Ib(8,null,["",""]))],null,function(l,n){var u=n.component;l(n,4,0,u.remote.gitHash),l(n,8,0,u.remote.gitTag)})}function M(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,21,"div",[["class","container grid-xl"]],null,null,null,null,null)),(l()(),t.qb(1,0,null,null,1,"h4",[],null,null,null,null,null)),(l()(),t.Ib(-1,null,["DD - App"])),(l()(),t.qb(3,0,null,null,8,"div",[["class","card p-2"]],null,null,null,null,null)),(l()(),t.qb(4,0,null,null,1,"h5",[["class","mb-1"]],null,null,null,null,null)),(l()(),t.Ib(-1,null,["Commit Hash"])),(l()(),t.qb(6,0,null,null,1,"span",[["class","text-italic text-gray"]],null,null,null,null,null)),(l()(),t.Ib(7,null,["",""])),(l()(),t.qb(8,0,null,null,1,"h5",[["class","mt-2 mb-1"]],null,null,null,null,null)),(l()(),t.Ib(-1,null,["Version Tag"])),(l()(),t.qb(10,0,null,null,1,"span",[["class","text-italic text-gray"]],null,null,null,null,null)),(l()(),t.Ib(11,null,["",""])),(l()(),t.qb(12,0,null,null,3,"h4",[["class","mt-2"]],null,null,null,null,null)),(l()(),t.Ib(-1,null,["DD - Server "])),(l()(),t.hb(16777216,null,null,1,null,S)),t.pb(15,16384,null,0,p.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null),(l()(),t.hb(16777216,null,null,1,null,O)),t.pb(17,16384,null,0,p.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null),(l()(),t.qb(18,0,null,null,1,"h4",[],null,null,null,null,null)),(l()(),t.Ib(-1,null,["Error Testing"])),(l()(),t.qb(20,0,null,null,1,"button",[["class","btn btn-primary"]],null,[[null,"click"]],function(l,n,u){var t=!0,e=l.component;return"click"===n&&(t=!1!==e.makeDummyException()&&t),t},null,null)),(l()(),t.Ib(-1,null,[" Make Test Error "]))],function(l,n){var u=n.component;l(n,15,0,u.loading),l(n,17,0,u.remote)},function(l,n){var u=n.component;l(n,7,0,u.local.gitHash),l(n,11,0,u.local.gitTag)})}function _(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,1,"dd-about",[],null,null,null,M,T)),t.pb(1,114688,null,0,E,[x],null,null)],function(l,n){l(n,1,0)},null)}var D=t.mb("dd-about",E,_,{},{},[]),N=function(){function l(l,n,u){this.login=l,this.route=n,this.router=u}return l.prototype.ngOnInit=function(){return l=this,void 0,u=function(){var l;return function(l,n){var u,t,e,i,o={label:0,sent:function(){if(1&e[0])throw e[1];return e[1]},trys:[],ops:[]};return i={next:r(0),throw:r(1),return:r(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function r(i){return function(r){return function(i){if(u)throw new TypeError("Generator is already executing.");for(;o;)try{if(u=1,t&&(e=2&i[0]?t.return:i[0]?t.throw||((e=t.return)&&e.call(t),0):t.next)&&!(e=e.call(t,i[1])).done)return e;switch(t=0,e&&(i=[2&i[0],e.value]),i[0]){case 0:case 1:e=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,t=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!(e=(e=o.trys).length>0&&e[e.length-1])&&(6===i[0]||2===i[0])){o=0;continue}if(3===i[0]&&(!e||i[1]>e[0]&&i[1]<e[3])){o.label=i[1];break}if(6===i[0]&&o.label<e[1]){o.label=e[1],e=i;break}if(e&&o.label<e[2]){o.label=e[2],o.ops.push(i);break}e[2]&&o.ops.pop(),o.trys.pop();continue}i=n.call(l,o)}catch(r){i=[6,r],t=0}finally{u=e=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,r])}}}(this,function(n){return"callback"===this.route.snapshot.url[0].path&&window.location.hash&&(l=window.location.hash,this.router.navigate([],{replaceUrl:!0}),this.login.processLoginCallback(l)),[2]})},new((n=void 0)||(n=Promise))(function(t,e){function i(l){try{r(u.next(l))}catch(n){e(n)}}function o(l){try{r(u.throw(l))}catch(n){e(n)}}function r(l){l.done?t(l.value):new n(function(n){n(l.value)}).then(i,o)}r((u=u.apply(l,[])).next())});var l,n,u},l.prototype.authGoog=function(){this.login.authorize("google-oauth2")},l.prototype.authFb=function(){this.login.authorize("facebook")},Object.defineProperty(l.prototype,"id",{get:function(){return"dummy"},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"busy",{get:function(){return this.login.busy},enumerable:!0,configurable:!0}),l}(),L=t.ob({encapsulation:0,styles:[[".wide[_ngcontent-%COMP%]{width:100%}"]],data:{}});function F(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,9,"div",[["class","card text-center"]],null,null,null,null,null)),(l()(),t.qb(1,0,null,null,2,"div",[["class","card-header"]],null,null,null,null,null)),(l()(),t.qb(2,0,null,null,1,"h2",[],null,null,null,null,null)),(l()(),t.Ib(-1,null,["Login"])),(l()(),t.qb(4,0,null,null,5,"div",[["class","card-body"]],null,null,null,null,null)),(l()(),t.qb(5,0,null,null,1,"button",[["class","btn btn-lg btn-primary wide"]],null,[[null,"click"]],function(l,n,u){var t=!0,e=l.component;return"click"===n&&(t=!1!==e.authGoog()&&t),t},null,null)),(l()(),t.Ib(-1,null,[" Google "])),(l()(),t.qb(7,0,null,null,0,"div",[["class","divider"],["data-content","OR"]],null,null,null,null,null)),(l()(),t.qb(8,0,null,null,1,"button",[["class","btn btn-lg btn-primary wide"]],null,[[null,"click"]],function(l,n,u){var t=!0,e=l.component;return"click"===n&&(t=!1!==e.authFb()&&t),t},null,null)),(l()(),t.Ib(-1,null,[" Facebook "]))],null,null)}function K(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,3,"div",[["class","card text-center"]],null,null,null,null,null)),(l()(),t.qb(1,0,null,null,2,"div",[["class","card-body"]],null,null,null,null,null)),(l()(),t.qb(2,0,null,null,1,"h6",[["class","mb-1"]],null,null,null,null,null)),(l()(),t.Ib(-1,null,["Processing Information..."]))],null,null)}function j(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,6,"div",[["class","container grid-xl"]],null,null,null,null,null)),(l()(),t.qb(1,0,null,null,5,"div",[["class","columns"]],null,null,null,null,null)),(l()(),t.qb(2,0,null,null,4,"div",[["class","column col-5 col-md-8 col-sm-11 col-mx-auto"]],null,null,null,null,null)),(l()(),t.hb(16777216,null,null,1,null,F)),t.pb(4,16384,null,0,p.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null),(l()(),t.hb(16777216,null,null,1,null,K)),t.pb(6,16384,null,0,p.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null)],function(l,n){var u=n.component;l(n,4,0,!u.busy),l(n,6,0,u.busy)},null)}function G(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,1,"dd-login",[],null,null,null,j,L)),t.pb(1,114688,null,0,N,[b.a,r.a,r.k],null,null)],function(l,n){l(n,1,0)},null)}var U=t.mb("dd-login",N,G,{},{},[]),R=u("gIcY"),V=u("xdv0"),H=function(){function l(l,n,u,t){this.login=l,this.userService=n,this.router=u,this.action=t,this.loading=!1}return l.prototype.ngOnInit=function(){this.login.userProfile||this.router.navigate(["login"]),this.usernameControl=new R.h(this.login.userProfile.nickname,[R.x.required,R.x.minLength(3),R.x.maxLength(30)])},l.prototype.submit=function(){return l=this,void 0,u=function(){var l;return function(l,n){var u,t,e,i,o={label:0,sent:function(){if(1&e[0])throw e[1];return e[1]},trys:[],ops:[]};return i={next:r(0),throw:r(1),return:r(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function r(i){return function(r){return function(i){if(u)throw new TypeError("Generator is already executing.");for(;o;)try{if(u=1,t&&(e=2&i[0]?t.return:i[0]?t.throw||((e=t.return)&&e.call(t),0):t.next)&&!(e=e.call(t,i[1])).done)return e;switch(t=0,e&&(i=[2&i[0],e.value]),i[0]){case 0:case 1:e=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,t=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!(e=(e=o.trys).length>0&&e[e.length-1])&&(6===i[0]||2===i[0])){o=0;continue}if(3===i[0]&&(!e||i[1]>e[0]&&i[1]<e[3])){o.label=i[1];break}if(6===i[0]&&o.label<e[1]){o.label=e[1],e=i;break}if(e&&o.label<e[2]){o.label=e[2],o.ops.push(i);break}e[2]&&o.ops.pop(),o.trys.pop();continue}i=n.call(l,o)}catch(r){i=[6,r],t=0}finally{u=e=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,r])}}}(this,function(n){switch(n.label){case 0:if(!this.usernameControl.valid)return[3,5];this.loading=!0,n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.userService.createUser({id:this.login.id,username:this.usernameControl.value,pictureURL:this.login.userProfile.picture})];case 2:return l=n.sent(),this.login.setUser(l),this.action.queue.pop(),this.action.save(),this.router.navigate(["home"]),[3,4];case 3:throw n.sent();case 4:this.loading=!1,n.label=5;case 5:return[2]}})},new((n=void 0)||(n=Promise))(function(t,e){function i(l){try{r(u.next(l))}catch(n){e(n)}}function o(l){try{r(u.throw(l))}catch(n){e(n)}}function r(l){l.done?t(l.value):new n(function(n){n(l.value)}).then(i,o)}r((u=u.apply(l,[])).next())});var l,n,u},l}(),$=t.ob({encapsulation:0,styles:[[""]],data:{}});function B(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,29,"div",[["class","container grid-xl"]],null,null,null,null,null)),(l()(),t.qb(1,0,null,null,28,"div",[["class","columns"]],null,null,null,null,null)),(l()(),t.qb(2,0,null,null,27,"div",[["class","column col-6 col-md-8 col-sm-12 col-mx-auto"]],null,null,null,null,null)),(l()(),t.qb(3,0,null,null,26,"div",[["class","card"]],null,null,null,null,null)),(l()(),t.qb(4,0,null,null,4,"div",[["class","card-header"]],null,null,null,null,null)),(l()(),t.qb(5,0,null,null,1,"h3",[["class","mb-0"]],null,null,null,null,null)),(l()(),t.Ib(-1,null,["Username"])),(l()(),t.qb(7,0,null,null,1,"span",[["class","text-gray text-italic"]],null,null,null,null,null)),(l()(),t.Ib(-1,null,["What should we call you?"])),(l()(),t.qb(9,0,null,null,14,"div",[["class","card-body"]],null,null,null,null,null)),(l()(),t.qb(10,0,null,null,13,"form",[["novalidate",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngSubmit"],[null,"submit"],[null,"reset"]],function(l,n,u){var e=!0,i=l.component;return"submit"===n&&(e=!1!==t.Ab(l,12).onSubmit(u)&&e),"reset"===n&&(e=!1!==t.Ab(l,12).onReset()&&e),"ngSubmit"===n&&(e=!1!==i.submit()&&e),e},null,null)),t.pb(11,16384,null,0,R.B,[],null,null),t.pb(12,4210688,null,0,R.s,[[8,null],[8,null]],null,{ngSubmit:"ngSubmit"}),t.Fb(2048,null,R.c,null,[R.s]),t.pb(14,16384,null,0,R.r,[[4,R.c]],null,null),(l()(),t.qb(15,0,null,null,8,"div",[["class","form-group"]],null,null,null,null,null)),t.pb(16,278528,null,0,p.i,[t.t,t.u,t.k,t.E],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),t.Db(17,{"has-error":0,"has-success":1}),(l()(),t.qb(18,0,null,null,5,"input",[["class","form-input"],["id","username"],["name","username"],["placeholder","Jimbo"],["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(l,n,u){var e=!0;return"input"===n&&(e=!1!==t.Ab(l,19)._handleInput(u.target.value)&&e),"blur"===n&&(e=!1!==t.Ab(l,19).onTouched()&&e),"compositionstart"===n&&(e=!1!==t.Ab(l,19)._compositionStart()&&e),"compositionend"===n&&(e=!1!==t.Ab(l,19)._compositionEnd(u.target.value)&&e),e},null,null)),t.pb(19,16384,null,0,R.d,[t.E,t.k,[2,R.a]],null,null),t.Fb(1024,null,R.o,function(l){return[l]},[R.d]),t.pb(21,540672,null,0,R.i,[[8,null],[8,null],[6,R.o],[2,R.D]],{form:[0,"form"]},null),t.Fb(2048,null,R.p,null,[R.i]),t.pb(23,16384,null,0,R.q,[[4,R.p]],null,null),(l()(),t.qb(24,0,null,null,5,"div",[["class","card-footer"]],null,null,null,null,null)),(l()(),t.qb(25,0,null,null,4,"button",[["class","btn btn-primary float-right"]],[[8,"disabled",0]],[[null,"click"]],function(l,n,u){var t=!0,e=l.component;return"click"===n&&(t=!1!==e.submit()&&t),t},null,null)),t.pb(26,278528,null,0,p.i,[t.t,t.u,t.k,t.E],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),t.Db(27,{loading:0}),(l()(),t.Ib(-1,null,[" Done "])),(l()(),t.qb(29,0,null,null,0,"i",[["class","icon icon-arrow-right"]],null,null,null,null,null))],function(l,n){var u=n.component,t=l(n,17,0,u.usernameControl.invalid&&(u.usernameControl.touched||u.usernameControl.dirty),u.usernameControl.valid);l(n,16,0,"form-group",t),l(n,21,0,u.usernameControl);var e=l(n,27,0,u.loading);l(n,26,0,"btn btn-primary float-right",e)},function(l,n){var u=n.component;l(n,10,0,t.Ab(n,14).ngClassUntouched,t.Ab(n,14).ngClassTouched,t.Ab(n,14).ngClassPristine,t.Ab(n,14).ngClassDirty,t.Ab(n,14).ngClassValid,t.Ab(n,14).ngClassInvalid,t.Ab(n,14).ngClassPending),l(n,18,0,t.Ab(n,23).ngClassUntouched,t.Ab(n,23).ngClassTouched,t.Ab(n,23).ngClassPristine,t.Ab(n,23).ngClassDirty,t.Ab(n,23).ngClassValid,t.Ab(n,23).ngClassInvalid,t.Ab(n,23).ngClassPending),l(n,25,0,u.usernameControl.invalid)})}function z(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,1,"dd-register",[],null,null,null,B,$)),t.pb(1,114688,null,0,H,[b.a,V.a,r.k,d.a],null,null)],function(l,n){l(n,1,0)},null)}var X=t.mb("dd-register",H,z,{},{},[]),Q=u("W/nz"),Y=u("ZYjt"),W=function(l,n,u,t){return new(u||(u=Promise))(function(e,i){function o(l){try{a(t.next(l))}catch(n){i(n)}}function r(l){try{a(t.throw(l))}catch(n){i(n)}}function a(l){l.done?e(l.value):new u(function(n){n(l.value)}).then(o,r)}a((t=t.apply(l,n||[])).next())})},Z=function(l,n){var u,t,e,i,o={label:0,sent:function(){if(1&e[0])throw e[1];return e[1]},trys:[],ops:[]};return i={next:r(0),throw:r(1),return:r(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function r(i){return function(r){return function(i){if(u)throw new TypeError("Generator is already executing.");for(;o;)try{if(u=1,t&&(e=2&i[0]?t.return:i[0]?t.throw||((e=t.return)&&e.call(t),0):t.next)&&!(e=e.call(t,i[1])).done)return e;switch(t=0,e&&(i=[2&i[0],e.value]),i[0]){case 0:case 1:e=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,t=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!(e=(e=o.trys).length>0&&e[e.length-1])&&(6===i[0]||2===i[0])){o=0;continue}if(3===i[0]&&(!e||i[1]>e[0]&&i[1]<e[3])){o.label=i[1];break}if(6===i[0]&&o.label<e[1]){o.label=e[1],e=i;break}if(e&&o.label<e[2]){o.label=e[2],o.ops.push(i);break}e[2]&&o.ops.pop(),o.trys.pop();continue}i=n.call(l,o)}catch(r){i=[6,r],t=0}finally{u=e=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,r])}}},J=function(){function l(l,n){this.campaignService=l,this.router=n,this.loading=!1,this.creating=!1,this.campaigns=null,this.hideHeader=!1}return l.prototype.ngOnInit=function(){this.loadCampaigns()},l.prototype.loadCampaigns=function(){return W(this,void 0,void 0,function(){var l;return Z(this,function(n){switch(n.label){case 0:this.loading=!0,n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.campaignService.getCampaigns()];case 2:return l=n.sent(),this.campaigns=l,[3,4];case 3:throw n.sent();case 4:return this.loading=!1,[2]}})})},l.prototype.createCampaign=function(){return W(this,void 0,void 0,function(){return Z(this,function(l){return this.router.navigate(["campaigns","create"]),[2]})})},l.prototype.selectCampaign=function(l){this.campaignService.setSelection(l.id),this.router.navigate(["campaigns",l.id])},l}(),ll=t.ob({encapsulation:0,styles:[[""]],data:{}});function nl(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,8,"div",[["class","columns"]],null,null,null,null,null)),(l()(),t.qb(1,0,null,null,2,"div",[["class","column"]],null,null,null,null,null)),(l()(),t.qb(2,0,null,null,1,"h3",[],null,null,null,null,null)),(l()(),t.Ib(-1,null,["Campaigns"])),(l()(),t.qb(4,0,null,null,4,"div",[["class","column col-auto col-ml-auto"]],null,null,null,null,null)),(l()(),t.qb(5,0,null,null,3,"button",[["class","btn btn-sm"]],null,[[null,"click"]],function(l,n,u){var t=!0,e=l.component;return"click"===n&&(t=!1!==e.createCampaign()&&t),t},null,null)),(l()(),t.qb(6,0,null,null,0,"i",[["class","icon icon-plus"]],null,null,null,null,null)),(l()(),t.qb(7,0,null,null,1,"span",[["class","hide-sm"]],null,null,null,null,null)),(l()(),t.Ib(-1,null,[" New Campaign"]))],null,null)}function ul(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,0,"div",[["class","loading loading-lg"]],null,null,null,null,null))],null,null)}function tl(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,9,"div",[["class","empty"]],null,null,null,null,null)),(l()(),t.qb(1,0,null,null,1,"div",[["class","empty-icon"]],null,null,null,null,null)),(l()(),t.qb(2,0,null,null,0,"i",[["class","icon icon-search icon-4x"]],null,null,null,null,null)),(l()(),t.qb(3,0,null,null,1,"p",[["class","empty-title h5"]],null,null,null,null,null)),(l()(),t.Ib(-1,null,["There are no campaigns here"])),(l()(),t.qb(5,0,null,null,1,"p",[["class","empty-subtitle"]],null,null,null,null,null)),(l()(),t.Ib(-1,null,[" Click the button to create your own, or ask your DM for an invite "])),(l()(),t.qb(7,0,null,null,2,"div",[["class","empty-action"]],null,null,null,null,null)),(l()(),t.qb(8,0,null,null,1,"button",[["class","btn btn-primary"]],null,[[null,"click"]],function(l,n,u){var t=!0,e=l.component;return"click"===n&&(t=!1!==e.createCampaign()&&t),t},null,null)),(l()(),t.Ib(-1,null,[" Create Campaign "]))],null,null)}function el(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,1,"div",[["class","column col-auto"]],null,null,null,null,null)),(l()(),t.qb(1,0,null,null,0,"img",[["class","img-responsive s-rounded"]],[[8,"src",4]],null,null,null,null))],null,function(l,n){l(n,1,0,t.sb(1,"https://res.cloudinary.com/dqhk8k6iv/image/upload/t_thumb/",n.parent.context.$implicit.imageId,""))})}function il(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,17,"div",[],null,null,null,null,null)),(l()(),t.qb(1,0,null,null,16,"div",[["class","card hoverable p-2 mb-2"]],null,[[null,"click"]],function(l,n,u){var t=!0,e=l.component;return"click"===n&&(t=!1!==e.selectCampaign(l.context.$implicit)&&t),t},null,null)),(l()(),t.qb(2,0,null,null,15,"div",[["class","columns"]],null,null,null,null,null)),(l()(),t.hb(16777216,null,null,1,null,el)),t.pb(4,16384,null,0,p.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null),(l()(),t.qb(5,0,null,null,12,"div",[["class","column"]],null,null,null,null,null)),(l()(),t.qb(6,0,null,null,11,"div",[["class","columns"]],null,null,null,null,null)),(l()(),t.qb(7,0,null,null,4,"div",[["class","column"]],null,null,null,null,null)),(l()(),t.qb(8,0,null,null,1,"h4",[["class","mb-1"]],null,null,null,null,null)),(l()(),t.Ib(9,null,["",""])),(l()(),t.qb(10,0,null,null,1,"div",[],[[8,"innerHTML",1]],null,null,null,null)),t.pb(11,16384,null,0,Q.a,[Y.c],{user:[0,"user"]},null),(l()(),t.qb(12,0,null,null,2,"div",[["class","column col-md-12 hide-md col-auto"]],null,null,null,null,null)),(l()(),t.qb(13,0,null,null,1,"span",[["class","text-gray text-italic"]],null,null,null,null,null)),(l()(),t.Ib(14,null,[""," Member",""])),(l()(),t.qb(15,0,null,null,2,"div",[["class","column col-md-12 show-md"]],null,null,null,null,null)),(l()(),t.qb(16,0,null,null,1,"span",[["class","text-gray text-italic"]],null,null,null,null,null)),(l()(),t.Ib(17,null,[" "," Member"," "]))],function(l,n){l(n,4,0,n.context.$implicit.imageId),l(n,11,0,n.context.$implicit.user)},function(l,n){l(n,9,0,n.context.$implicit.name),l(n,10,0,t.Ab(n,11).html),l(n,14,0,n.context.$implicit.members.length,1===n.context.$implicit.members.length?"":"s"),l(n,17,0,n.context.$implicit.members.length,1===n.context.$implicit.members.length?"":"s")})}function ol(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,8,"div",[["class","container grid-xl"]],null,null,null,null,null)),(l()(),t.hb(16777216,null,null,1,null,nl)),t.pb(2,16384,null,0,p.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null),(l()(),t.hb(16777216,null,null,1,null,ul)),t.pb(4,16384,null,0,p.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null),(l()(),t.hb(16777216,null,null,1,null,tl)),t.pb(6,16384,null,0,p.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null),(l()(),t.hb(16777216,null,null,1,null,il)),t.pb(8,278528,null,0,p.j,[t.P,t.M,t.t],{ngForOf:[0,"ngForOf"]},null)],function(l,n){var u=n.component;l(n,2,0,!u.hideHeader),l(n,4,0,u.loading),l(n,6,0,u.campaigns&&0===u.campaigns.length),l(n,8,0,u.campaigns)},null)}function rl(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,1,"dd-campaign-list",[],null,null,null,ol,ll)),t.pb(1,114688,null,0,J,[f.b,r.k],null,null)],function(l,n){l(n,1,0)},null)}var al=t.mb("dd-campaign-list",J,rl,{hideHeader:"hideHeader"},{},[]),cl=function(){function l(l){this.login=l}return l.prototype.ngOnInit=function(){},Object.defineProperty(l.prototype,"user",{get:function(){return this.login.currentUser},enumerable:!0,configurable:!0}),l}(),sl=t.ob({encapsulation:0,styles:[[""]],data:{}});function pl(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,4,"div",[["class","container grid-xl"]],null,null,null,null,null)),(l()(),t.qb(1,0,null,null,1,"h3",[],null,null,null,null,null)),(l()(),t.Ib(2,null,["Hello, ",""])),(l()(),t.qb(3,0,null,null,1,"dd-campaign-list",[["hideHeader","true"]],null,null,null,ol,ll)),t.pb(4,114688,null,0,J,[f.b,r.k],{hideHeader:[0,"hideHeader"]},null)],function(l,n){l(n,4,0,"true")},function(l,n){l(n,2,0,n.component.user.username)})}function bl(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,1,"dd-home",[],null,null,null,pl,sl)),t.pb(1,114688,null,0,cl,[b.a],null,null)],function(l,n){l(n,1,0)},null)}var dl=t.mb("dd-home",cl,bl,{},{},[]),fl=u("ny3C"),hl=u("ygrl"),gl=function(){function l(l){this.campaignService=l}return Object.defineProperty(l.prototype,"conceptTypes",{get:function(){return this._conceptTypes},set:function(l){this._conceptTypes=l,this.ngOnInit()},enumerable:!0,configurable:!0}),l.prototype.ngOnInit=function(){this.formGroup=new R.k({exportQuests:new R.h(!0),exportArticles:new R.h(!0),exportEntityPresets:new R.h(!0)});for(var l=0,n=this.conceptTypes;l<n.length;l++){var u=n[l];this.formGroup.addControl("ct-"+u.id,new R.h(!0))}},l.prototype.doExport=function(){this.modal.open()},Object.defineProperty(l.prototype,"exportLink",{get:function(){var l=e.a.apiURL+"/export?campaignId="+this.campaignService.campaign.id,n=this.formGroup.value;n.exportQuests&&(l+="&quests=true"),n.exportArticles&&(l+="&articles=true"),n.exportEntityPresets&&(l+="&entitypresets=true");for(var u=0,t=this.conceptTypes;u<t.length;u++){var i=t[u];!0===this.formGroup.get("ct-"+i.id).value&&(l+="&conceptType="+i.id)}return l},enumerable:!0,configurable:!0}),l}(),ml=t.ob({encapsulation:0,styles:[[""]],data:{}});function vl(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,8,"label",[["class","form-checkbox"]],null,null,null,null,null)),(l()(),t.qb(1,0,null,null,5,"input",[["type","checkbox"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"change"],[null,"blur"]],function(l,n,u){var e=!0;return"change"===n&&(e=!1!==t.Ab(l,2).onChange(u.target.checked)&&e),"blur"===n&&(e=!1!==t.Ab(l,2).onTouched()&&e),e},null,null)),t.pb(2,16384,null,0,R.b,[t.E,t.k],null,null),t.Fb(1024,null,R.o,function(l){return[l]},[R.b]),t.pb(4,671744,null,0,R.j,[[3,R.c],[8,null],[8,null],[6,R.o],[2,R.D]],{name:[0,"name"]},null),t.Fb(2048,null,R.p,null,[R.j]),t.pb(6,16384,null,0,R.q,[[4,R.p]],null,null),(l()(),t.qb(7,0,null,null,0,"i",[["class","form-icon"]],null,null,null,null,null)),(l()(),t.Ib(8,null,[" Export "," "]))],function(l,n){l(n,4,0,"ct-"+n.context.$implicit.id)},function(l,n){l(n,1,0,t.Ab(n,6).ngClassUntouched,t.Ab(n,6).ngClassTouched,t.Ab(n,6).ngClassPristine,t.Ab(n,6).ngClassDirty,t.Ab(n,6).ngClassValid,t.Ab(n,6).ngClassInvalid,t.Ab(n,6).ngClassPending),l(n,8,0,n.context.$implicit.pluralForm)})}function yl(l){return t.Kb(0,[t.Gb(402653184,1,{modal:0}),(l()(),t.qb(1,0,null,null,40,"dd-modal",[],null,null,null,fl.b,fl.a)),t.pb(2,114688,[[1,4],["modal",4]],0,hl.a,[],null,null),(l()(),t.qb(3,0,null,0,1,"h4",[["modal-header",""]],null,null,null,null,null)),(l()(),t.Ib(-1,null,["Export"])),(l()(),t.qb(5,0,null,1,36,"div",[["modal-body",""]],null,null,null,null,null)),(l()(),t.qb(6,0,null,null,32,"div",[["class","form-group"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"submit"],[null,"reset"]],function(l,n,u){var e=!0;return"submit"===n&&(e=!1!==t.Ab(l,7).onSubmit(u)&&e),"reset"===n&&(e=!1!==t.Ab(l,7).onReset()&&e),e},null,null)),t.pb(7,540672,null,0,R.l,[[8,null],[8,null]],{form:[0,"form"]},null),t.Fb(2048,null,R.c,null,[R.l]),t.pb(9,16384,null,0,R.r,[[4,R.c]],null,null),(l()(),t.qb(10,0,null,null,8,"label",[["class","form-checkbox"]],null,null,null,null,null)),(l()(),t.qb(11,0,null,null,5,"input",[["formControlName","exportQuests"],["type","checkbox"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"change"],[null,"blur"]],function(l,n,u){var e=!0;return"change"===n&&(e=!1!==t.Ab(l,12).onChange(u.target.checked)&&e),"blur"===n&&(e=!1!==t.Ab(l,12).onTouched()&&e),e},null,null)),t.pb(12,16384,null,0,R.b,[t.E,t.k],null,null),t.Fb(1024,null,R.o,function(l){return[l]},[R.b]),t.pb(14,671744,null,0,R.j,[[3,R.c],[8,null],[8,null],[6,R.o],[2,R.D]],{name:[0,"name"]},null),t.Fb(2048,null,R.p,null,[R.j]),t.pb(16,16384,null,0,R.q,[[4,R.p]],null,null),(l()(),t.qb(17,0,null,null,0,"i",[["class","form-icon"]],null,null,null,null,null)),(l()(),t.Ib(-1,null,[" Export Quests "])),(l()(),t.qb(19,0,null,null,8,"label",[["class","form-checkbox"]],null,null,null,null,null)),(l()(),t.qb(20,0,null,null,5,"input",[["formControlName","exportArticles"],["type","checkbox"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"change"],[null,"blur"]],function(l,n,u){var e=!0;return"change"===n&&(e=!1!==t.Ab(l,21).onChange(u.target.checked)&&e),"blur"===n&&(e=!1!==t.Ab(l,21).onTouched()&&e),e},null,null)),t.pb(21,16384,null,0,R.b,[t.E,t.k],null,null),t.Fb(1024,null,R.o,function(l){return[l]},[R.b]),t.pb(23,671744,null,0,R.j,[[3,R.c],[8,null],[8,null],[6,R.o],[2,R.D]],{name:[0,"name"]},null),t.Fb(2048,null,R.p,null,[R.j]),t.pb(25,16384,null,0,R.q,[[4,R.p]],null,null),(l()(),t.qb(26,0,null,null,0,"i",[["class","form-icon"]],null,null,null,null,null)),(l()(),t.Ib(-1,null,[" Export Articles "])),(l()(),t.qb(28,0,null,null,8,"label",[["class","form-checkbox"]],null,null,null,null,null)),(l()(),t.qb(29,0,null,null,5,"input",[["formControlName","exportEntityPresets"],["type","checkbox"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"change"],[null,"blur"]],function(l,n,u){var e=!0;return"change"===n&&(e=!1!==t.Ab(l,30).onChange(u.target.checked)&&e),"blur"===n&&(e=!1!==t.Ab(l,30).onTouched()&&e),e},null,null)),t.pb(30,16384,null,0,R.b,[t.E,t.k],null,null),t.Fb(1024,null,R.o,function(l){return[l]},[R.b]),t.pb(32,671744,null,0,R.j,[[3,R.c],[8,null],[8,null],[6,R.o],[2,R.D]],{name:[0,"name"]},null),t.Fb(2048,null,R.p,null,[R.j]),t.pb(34,16384,null,0,R.q,[[4,R.p]],null,null),(l()(),t.qb(35,0,null,null,0,"i",[["class","form-icon"]],null,null,null,null,null)),(l()(),t.Ib(-1,null,[" Export Entity Types "])),(l()(),t.hb(16777216,null,null,1,null,vl)),t.pb(38,278528,null,0,p.j,[t.P,t.M,t.t],{ngForOf:[0,"ngForOf"]},null),(l()(),t.qb(39,0,null,null,2,"a",[["class","btn btn-primary mt-2"],["target","_blank"]],[[8,"href",4]],null,null,null,null)),(l()(),t.qb(40,0,null,null,0,"i",[["class","icon icon-download"]],null,null,null,null,null)),(l()(),t.Ib(-1,null,[" Export "]))],function(l,n){var u=n.component;l(n,2,0),l(n,7,0,u.formGroup),l(n,14,0,"exportQuests"),l(n,23,0,"exportArticles"),l(n,32,0,"exportEntityPresets"),l(n,38,0,u.conceptTypes)},function(l,n){var u=n.component;l(n,6,0,t.Ab(n,9).ngClassUntouched,t.Ab(n,9).ngClassTouched,t.Ab(n,9).ngClassPristine,t.Ab(n,9).ngClassDirty,t.Ab(n,9).ngClassValid,t.Ab(n,9).ngClassInvalid,t.Ab(n,9).ngClassPending),l(n,11,0,t.Ab(n,16).ngClassUntouched,t.Ab(n,16).ngClassTouched,t.Ab(n,16).ngClassPristine,t.Ab(n,16).ngClassDirty,t.Ab(n,16).ngClassValid,t.Ab(n,16).ngClassInvalid,t.Ab(n,16).ngClassPending),l(n,20,0,t.Ab(n,25).ngClassUntouched,t.Ab(n,25).ngClassTouched,t.Ab(n,25).ngClassPristine,t.Ab(n,25).ngClassDirty,t.Ab(n,25).ngClassValid,t.Ab(n,25).ngClassInvalid,t.Ab(n,25).ngClassPending),l(n,29,0,t.Ab(n,34).ngClassUntouched,t.Ab(n,34).ngClassTouched,t.Ab(n,34).ngClassPristine,t.Ab(n,34).ngClassDirty,t.Ab(n,34).ngClassValid,t.Ab(n,34).ngClassInvalid,t.Ab(n,34).ngClassPending),l(n,39,0,u.exportLink)})}var Cl=function(){function l(l,n){this.loginService=l,this.campaignService=n,this.file=null,this.fileError=null,this.isDragOver=!1,this.isUploading=!1,this.uploadProgress=null,this.eleId=""}return l.prototype.ngOnInit=function(){},l.prototype.ngAfterViewInit=function(){var l=this;["dragenter","dragover"].forEach(function(n){return l.fupload.nativeElement.addEventListener(n,function(n){n.preventDefault(),n.stopPropagation(),l.isDragOver=!0})}),["dragleave","dragend","drop"].forEach(function(n){return l.fupload.nativeElement.addEventListener(n,function(n){n.preventDefault(),n.stopPropagation(),l.isDragOver=!1})}),this.fupload.nativeElement.addEventListener("drop",function(n){n.dataTransfer.files.length>0&&l.handleFileUpload(n.dataTransfer.files[0])})},l.prototype.writeValue=function(l){this.imageId=l},l.prototype.registerOnChange=function(l){this._onChange=l},l.prototype.registerOnTouched=function(l){this._onTouched=l},l.prototype.setDisabledState=function(l){},l.prototype.clearImage=function(){this.writeValue(null)},l.prototype.clearError=function(){this.fileError=null},l.prototype.onFileChange=function(l){var n=l.target.files;n.length>0&&this.handleFileUpload(n[0])},Object.defineProperty(l.prototype,"imageURL",{get:function(){return this.imageId?"https://res.cloudinary.com/dqhk8k6iv/image/upload/t_thumb/"+this.imageId:null},enumerable:!0,configurable:!0}),l.prototype.handleFileUpload=function(l){var n=this;if(this.fileError=null,this.uploadProgress=null,l.type.startsWith("image/")){this.file=l;var u=new FormData;u.append("file",this.file),this.campaignService.campaign&&u.append("campaignId",this.campaignService.campaign.id);var t=new XMLHttpRequest;t.open("POST",e.a.apiURL+"/upload",!0),t.setRequestHeader("Authorization","Bearer "+this.loginService.token),t.onload=function(l){var u=JSON.parse(t.responseText);n.isUploading=!1,n.file=null,n.writeValue(u.public_id),n._onChange&&n._onChange(u.public_id)},t.upload.addEventListener("progress",function(l){n.uploadProgress=l.loaded/l.total*100}),this.isUploading=!0,t.send(u)}else this.fileError="Incorrect file type! Only images are accepted"},Object.defineProperty(l.prototype,"controlId",{get:function(){return"file-upload-"+this.eleId},enumerable:!0,configurable:!0}),l}(),Il=t.ob({encapsulation:0,styles:[["#drop-area[_ngcontent-%COMP%]{border:2px dashed #5755d9;border-radius:.1rem;display:flex;align-content:center;justify-content:center;flex-direction:column}.form-group.has-error[_ngcontent-%COMP%] > #drop-area[_ngcontent-%COMP%]{border:2px dashed #e85600}#drop-area.drag-over[_ngcontent-%COMP%]{cursor:pointer;background:#f1f1fc}.file-input[_ngcontent-%COMP%]{display:none}.image-preview[_ngcontent-%COMP%]{height:10vh}"]],data:{}});function ql(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,1,"span",[],null,null,null,null,null)),(l()(),t.Ib(-1,null,["Upload Image"]))],null,null)}function kl(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,1,"span",[],null,null,null,null,null)),(l()(),t.Ib(-1,null,["Change Image"]))],null,null)}function Al(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,1,"span",[],null,null,null,null,null)),(l()(),t.Ib(1,null,["",""]))],null,function(l,n){l(n,1,0,n.component.file.name)})}function wl(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,1,"button",[["class","btn btn-error btn-sm mt-2"]],null,[[null,"click"]],function(l,n,u){var t=!0,e=l.component;return"click"===n&&(t=!1!==e.clearImage()&&t),t},null,null)),(l()(),t.Ib(-1,null,[" Clear Image "]))],null,null)}function Pl(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,1,"div",[["class","bar bar-sm mt-2"]],null,null,null,null,null)),(l()(),t.qb(1,0,null,null,0,"div",[["class","bar-item"],["role","progressbar"]],[[4,"width",null]],null,null,null,null))],null,function(l,n){l(n,1,0,n.component.uploadProgress+"%")})}function xl(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,0,"img",[["class","image-preview img-fit-contain mt-2"]],[[8,"src",4]],null,null,null,null))],null,function(l,n){l(n,0,0,n.component.imageURL)})}function El(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,2,"div",[["class","toast toast-error"]],null,null,null,null,null)),(l()(),t.qb(1,0,null,null,0,"button",[["class","btn btn-clear float-right"]],null,[[null,"click"]],function(l,n,u){var t=!0,e=l.component;return"click"===n&&(t=!1!==e.clearError()&&t),t},null,null)),(l()(),t.Ib(2,null,[" ","\n"]))],null,function(l,n){l(n,2,0,n.component.fileError)})}function Tl(l){return t.Kb(0,[t.Gb(402653184,1,{fupload:0}),(l()(),t.qb(1,0,null,null,17,"div",[["class","form-group"]],null,null,null,null,null)),(l()(),t.qb(2,0,[[1,0],["fupload",1]],null,16,"div",[["class","p-2"],["id","drop-area"]],null,null,null,null,null)),t.pb(3,278528,null,0,p.i,[t.t,t.u,t.k,t.E],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),t.Db(4,{"drag-over":0}),(l()(),t.qb(5,0,null,null,0,"input",[["accept","image/*"],["class","file-input"],["type","file"]],[[8,"id",0]],[[null,"change"]],function(l,n,u){var t=!0,e=l.component;return"change"===n&&(t=!1!==e.onFileChange(u)&&t),t},null,null)),(l()(),t.qb(6,0,null,null,6,"label",[["class","btn btn-sm text-ellipsis"]],[[8,"htmlFor",0]],null,null,null,null)),(l()(),t.hb(16777216,null,null,1,null,ql)),t.pb(8,16384,null,0,p.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null),(l()(),t.hb(16777216,null,null,1,null,kl)),t.pb(10,16384,null,0,p.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null),(l()(),t.hb(16777216,null,null,1,null,Al)),t.pb(12,16384,null,0,p.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null),(l()(),t.hb(16777216,null,null,1,null,wl)),t.pb(14,16384,null,0,p.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null),(l()(),t.hb(16777216,null,null,1,null,Pl)),t.pb(16,16384,null,0,p.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null),(l()(),t.hb(16777216,null,null,1,null,xl)),t.pb(18,16384,null,0,p.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null),(l()(),t.hb(16777216,null,null,1,null,El)),t.pb(20,16384,null,0,p.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null)],function(l,n){var u=n.component,t=l(n,4,0,u.isDragOver);l(n,3,0,"p-2",t),l(n,8,0,null===u.file&&null===u.imageURL),l(n,10,0,null===u.file&&null!==u.imageURL),l(n,12,0,null!==u.file),l(n,14,0,null!==u.imageURL),l(n,16,0,u.isUploading),l(n,18,0,null!==u.imageURL),l(n,20,0,null!==u.fileError)},function(l,n){var u=n.component;l(n,5,0,u.controlId),l(n,6,0,u.controlId)})}var Sl=u("IeLf"),Ol=u("WNRK"),Ml=u("rZgH"),_l=u("Lqte"),Dl=u("n10a"),Nl=u("MICr"),Ll=function(){function l(){}return l.prototype.ngOnInit=function(){this.formGroup.addControl("name",new R.h(this.campaign?this.campaign.name:null,[R.x.required,R.x.maxLength(30),R.x.minLength(2)])),this.formGroup.addControl("content",new R.h(this.campaign?this.campaign.content:null)),this.includeImage?this.formGroup.addControl("imageId",new R.h(""!==this.campaign.imageId&&this.campaign?this.campaign.imageId:null,[R.x.required])):this.formGroup.addControl("imageId",new R.h("placeholder",[R.x.required]))},Object.defineProperty(l.prototype,"name",{get:function(){return this.formGroup.get("name")},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"description",{get:function(){return this.formGroup.get("description")},enumerable:!0,configurable:!0}),l}(),Fl=t.ob({encapsulation:0,styles:[[""]],data:{}});function Kl(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,8,"div",[["class","column col-3 col-md-12 col-mx-auto"]],null,null,null,null,null)),(l()(),t.qb(1,0,null,null,1,"label",[["class","form-label"]],null,null,null,null,null)),(l()(),t.Ib(-1,null,["Image"])),(l()(),t.qb(3,0,null,null,5,"dd-image-upload",[["formControlName","imageId"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],null,null,Tl,Il)),t.pb(4,4308992,null,0,Cl,[b.a,f.b],null,null),t.Fb(1024,null,R.o,function(l){return[l]},[Cl]),t.pb(6,671744,null,0,R.j,[[3,R.c],[8,null],[8,null],[6,R.o],[2,R.D]],{name:[0,"name"]},null),t.Fb(2048,null,R.p,null,[R.j]),t.pb(8,16384,null,0,R.q,[[4,R.p]],null,null)],function(l,n){l(n,4,0),l(n,6,0,"imageId")},function(l,n){l(n,3,0,t.Ab(n,8).ngClassUntouched,t.Ab(n,8).ngClassTouched,t.Ab(n,8).ngClassPristine,t.Ab(n,8).ngClassDirty,t.Ab(n,8).ngClassValid,t.Ab(n,8).ngClassInvalid,t.Ab(n,8).ngClassPending)})}function jl(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,1,"p",[["class","form-input-hint"]],null,null,null,null,null)),(l()(),t.Ib(-1,null,[" A name is required "]))],null,null)}function Gl(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,1,"p",[["class","form-input-hint"]],null,null,null,null,null)),(l()(),t.Ib(-1,null,[" The name cannot be shorter than 3 characters "]))],null,null)}function Ul(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,1,"p",[["class","form-input-hint"]],null,null,null,null,null)),(l()(),t.Ib(-1,null,[" The name cannot be longer than 30 characters "]))],null,null)}function Rl(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,33,"div",[["class","container grid-xl"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"submit"],[null,"reset"]],function(l,n,u){var e=!0;return"submit"===n&&(e=!1!==t.Ab(l,1).onSubmit(u)&&e),"reset"===n&&(e=!1!==t.Ab(l,1).onReset()&&e),e},null,null)),t.pb(1,540672,null,0,R.l,[[8,null],[8,null]],{form:[0,"form"]},null),t.Fb(2048,null,R.c,null,[R.l]),t.pb(3,16384,null,0,R.r,[[4,R.c]],null,null),(l()(),t.qb(4,0,null,null,29,"div",[["class","columns"]],null,null,null,null,null)),(l()(),t.hb(16777216,null,null,1,null,Kl)),t.pb(6,16384,null,0,p.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null),(l()(),t.qb(7,0,null,null,26,"div",[["class","column col-9 col-md-12"]],null,null,null,null,null)),(l()(),t.qb(8,0,null,null,16,"div",[["class","form-group"]],null,null,null,null,null)),t.pb(9,278528,null,0,p.i,[t.t,t.u,t.k,t.E],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),t.Db(10,{"has-error":0}),(l()(),t.qb(11,0,null,null,1,"label",[["class","form-label"],["for","name"]],null,null,null,null,null)),(l()(),t.Ib(-1,null,["Name"])),(l()(),t.qb(13,0,null,null,5,"input",[["class","form-input"],["formControlName","name"],["id","name"],["name","name"],["placeholder","Name"],["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(l,n,u){var e=!0;return"input"===n&&(e=!1!==t.Ab(l,14)._handleInput(u.target.value)&&e),"blur"===n&&(e=!1!==t.Ab(l,14).onTouched()&&e),"compositionstart"===n&&(e=!1!==t.Ab(l,14)._compositionStart()&&e),"compositionend"===n&&(e=!1!==t.Ab(l,14)._compositionEnd(u.target.value)&&e),e},null,null)),t.pb(14,16384,null,0,R.d,[t.E,t.k,[2,R.a]],null,null),t.Fb(1024,null,R.o,function(l){return[l]},[R.d]),t.pb(16,671744,null,0,R.j,[[3,R.c],[8,null],[8,null],[6,R.o],[2,R.D]],{name:[0,"name"]},null),t.Fb(2048,null,R.p,null,[R.j]),t.pb(18,16384,null,0,R.q,[[4,R.p]],null,null),(l()(),t.hb(16777216,null,null,1,null,jl)),t.pb(20,16384,null,0,p.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null),(l()(),t.hb(16777216,null,null,1,null,Gl)),t.pb(22,16384,null,0,p.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null),(l()(),t.hb(16777216,null,null,1,null,Ul)),t.pb(24,16384,null,0,p.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null),(l()(),t.qb(25,0,null,null,8,"div",[["class","form-group"]],null,null,null,null,null)),(l()(),t.qb(26,0,null,null,1,"label",[["class","form-label"]],null,null,null,null,null)),(l()(),t.Ib(-1,null,["Description"])),(l()(),t.qb(28,0,null,null,5,"dd-quill",[["formControlName","content"],["placeholder","Description"],["simple","true"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],null,null,Sl.b,Sl.a)),t.pb(29,1163264,null,0,Ol.a,[f.b,Ml.a,b.a,r.k,P.c,_l.b,Dl.a,Nl.a],{simple:[0,"simple"],placeholder:[1,"placeholder"]},null),t.Fb(1024,null,R.o,function(l){return[l]},[Ol.a]),t.pb(31,671744,null,0,R.j,[[3,R.c],[8,null],[8,null],[6,R.o],[2,R.D]],{name:[0,"name"]},null),t.Fb(2048,null,R.p,null,[R.j]),t.pb(33,16384,null,0,R.q,[[4,R.p]],null,null)],function(l,n){var u=n.component;l(n,1,0,u.formGroup),l(n,6,0,u.includeImage);var t=l(n,10,0,u.name.invalid&&(u.name.dirty||u.name.touched));l(n,9,0,"form-group",t),l(n,16,0,"name"),l(n,20,0,u.name.invalid&&(u.name.dirty||u.name.touched)&&u.name.errors.required),l(n,22,0,u.name.invalid&&(u.name.dirty||u.name.touched)&&u.name.errors.minlength),l(n,24,0,u.name.invalid&&(u.name.dirty||u.name.touched)&&u.name.errors.maxlength),l(n,29,0,"true","Description"),l(n,31,0,"content")},function(l,n){l(n,0,0,t.Ab(n,3).ngClassUntouched,t.Ab(n,3).ngClassTouched,t.Ab(n,3).ngClassPristine,t.Ab(n,3).ngClassDirty,t.Ab(n,3).ngClassValid,t.Ab(n,3).ngClassInvalid,t.Ab(n,3).ngClassPending),l(n,13,0,t.Ab(n,18).ngClassUntouched,t.Ab(n,18).ngClassTouched,t.Ab(n,18).ngClassPristine,t.Ab(n,18).ngClassDirty,t.Ab(n,18).ngClassValid,t.Ab(n,18).ngClassInvalid,t.Ab(n,18).ngClassPending),l(n,28,0,t.Ab(n,33).ngClassUntouched,t.Ab(n,33).ngClassTouched,t.Ab(n,33).ngClassPristine,t.Ab(n,33).ngClassDirty,t.Ab(n,33).ngClassValid,t.Ab(n,33).ngClassInvalid,t.Ab(n,33).ngClassPending)})}var Vl=[300,900,2700,6500,14e3,23e3,34e3,48e3,64e3,85e3,1e5,12e4,14e4,165e3,195e3,225e3,265e3,305e3,355e3],Hl=[1e3,2250,3750,5500,7500,1e4,13e3,16500,20500,26e3,32e3,39e3,47e3,57e3,69e3,83e3,99e3,119e3,143e3,175e3,21e4,255e3,31e4,375e3,45e4,55e4,675e3,825e3,1e6],$l=function(){function l(){}return l.prototype.getPresets=function(){return l=this,void 0,u=function(){return function(l,n){var u,t,e,i,o={label:0,sent:function(){if(1&e[0])throw e[1];return e[1]},trys:[],ops:[]};return i={next:r(0),throw:r(1),return:r(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function r(i){return function(r){return function(i){if(u)throw new TypeError("Generator is already executing.");for(;o;)try{if(u=1,t&&(e=2&i[0]?t.return:i[0]?t.throw||((e=t.return)&&e.call(t),0):t.next)&&!(e=e.call(t,i[1])).done)return e;switch(t=0,e&&(i=[2&i[0],e.value]),i[0]){case 0:case 1:e=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,t=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!(e=(e=o.trys).length>0&&e[e.length-1])&&(6===i[0]||2===i[0])){o=0;continue}if(3===i[0]&&(!e||i[1]>e[0]&&i[1]<e[3])){o.label=i[1];break}if(6===i[0]&&o.label<e[1]){o.label=e[1],e=i;break}if(e&&o.label<e[2]){o.label=e[2],o.ops.push(i);break}e[2]&&o.ops.pop(),o.trys.pop();continue}i=n.call(l,o)}catch(r){i=[6,r],t=0}finally{u=e=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,r])}}}(this,function(l){return[2,[{name:"DnD 5E",xpTable:Vl},{name:"DnD 4E",xpTable:Hl}]]})},new((n=void 0)||(n=Promise))(function(t,e){function i(l){try{r(u.next(l))}catch(n){e(n)}}function o(l){try{r(u.throw(l))}catch(n){e(n)}}function r(l){l.done?t(l.value):new n(function(n){n(l.value)}).then(i,o)}r((u=u.apply(l,[])).next())});var l,n,u},l.ngInjectableDef=t.T({factory:function(){return new l},token:l,providedIn:"root"}),l}(),Bl=function(l){for(var n=0,u={},t=0;t<l.value.length;t++)l.value[t]&&(l.value[t]>n?n=l.value[t]:u["order-"+t]=!0);return Object.keys(u).length>0?u:null},zl=function(){function l(l){this.presets=l}return l.prototype.ngOnInit=function(){var l=this;if(!this.campaign)throw new Error("The param campaign is required!");this.presets.getPresets().then(function(n){return l.presetList=n}),this.formGroup.addControl("experienceTable",new R.e(this.campaign.experienceTable.map(function(n){return l.createRow(n)}),Bl))},l.prototype.createRow=function(l){return new R.h(l||0,[R.x.required,R.x.min(0)])},l.prototype.usePreset=function(l){var n=this;this.formArray.controls=l.xpTable.map(function(l){return n.createRow(l)}),this.presetsModal.close(null)},l.prototype.addRow=function(){this.formArray.push(this.createRow())},l.prototype.removeRow=function(){this.formArray.removeAt(this.controls.length-1)},l.prototype.hasOrderError=function(l){return this.formArray.errors&&this.formArray.errors["order-"+l]},Object.defineProperty(l.prototype,"formArray",{get:function(){return this.formGroup.get("experienceTable")},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"controls",{get:function(){return this.formArray.controls},enumerable:!0,configurable:!0}),l}(),Xl=t.ob({encapsulation:0,styles:[[""]],data:{}});function Ql(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,2,"div",[["class","card p-1 hoverable mb-2"]],null,[[null,"click"]],function(l,n,u){var t=!0,e=l.component;return"click"===n&&(t=!1!==e.usePreset(l.context.$implicit)&&t),t},null,null)),(l()(),t.qb(1,0,null,null,1,"h6",[],null,null,null,null,null)),(l()(),t.Ib(2,null,["",""]))],null,function(l,n){l(n,2,0,n.context.$implicit.name)})}function Yl(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,1,"p",[["class","form-input-hint"]],null,null,null,null,null)),(l()(),t.Ib(-1,null,[" XP value must be more than the previous level "]))],null,null)}function Wl(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,1,"p",[["class","form-input-hint"]],null,null,null,null,null)),(l()(),t.Ib(-1,null,[" XP value is required "]))],null,null)}function Zl(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,1,"p",[["class","form-input-hint"]],null,null,null,null,null)),(l()(),t.Ib(-1,null,[" XP value must be more than 0 "]))],null,null)}function Jl(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,1,"p",[["class","form-input-hint"]],null,null,null,null,null)),(l()(),t.Ib(-1,null,[" The max xp value is 2,147,483,647 "]))],null,null)}function ln(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,24,"div",[["class","form-group"],["formArrayName","experienceTable"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],null,null,null,null)),t.pb(1,278528,null,0,p.i,[t.t,t.u,t.k,t.E],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),t.Db(2,{"has-error":0}),t.pb(3,212992,null,0,R.f,[[3,R.c],[8,null],[8,null]],{name:[0,"name"]},null),t.Fb(2048,null,R.c,null,[R.f]),t.pb(5,16384,null,0,R.r,[[4,R.c]],null,null),(l()(),t.qb(6,0,null,null,2,"div",[["class","col-1 col-lg-2 col-sm-12"]],null,null,null,null,null)),(l()(),t.qb(7,0,null,null,1,"label",[["class","form-label text-bold"]],null,null,null,null,null)),(l()(),t.Ib(8,null,["Level ",""])),(l()(),t.qb(9,0,null,null,15,"div",[["class","col-11 col-lg-10 col-sm-12"]],null,null,null,null,null)),(l()(),t.qb(10,0,null,null,6,"input",[["class","form-input"],["placeholder","XP"],["type","number"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"]],function(l,n,u){var e=!0;return"input"===n&&(e=!1!==t.Ab(l,11)._handleInput(u.target.value)&&e),"blur"===n&&(e=!1!==t.Ab(l,11).onTouched()&&e),"compositionstart"===n&&(e=!1!==t.Ab(l,11)._compositionStart()&&e),"compositionend"===n&&(e=!1!==t.Ab(l,11)._compositionEnd(u.target.value)&&e),"change"===n&&(e=!1!==t.Ab(l,12).onChange(u.target.value)&&e),"input"===n&&(e=!1!==t.Ab(l,12).onChange(u.target.value)&&e),"blur"===n&&(e=!1!==t.Ab(l,12).onTouched()&&e),e},null,null)),t.pb(11,16384,null,0,R.d,[t.E,t.k,[2,R.a]],null,null),t.pb(12,16384,null,0,R.z,[t.E,t.k],null,null),t.Fb(1024,null,R.o,function(l,n){return[l,n]},[R.d,R.z]),t.pb(14,671744,null,0,R.j,[[3,R.c],[8,null],[8,null],[6,R.o],[2,R.D]],{name:[0,"name"]},null),t.Fb(2048,null,R.p,null,[R.j]),t.pb(16,16384,null,0,R.q,[[4,R.p]],null,null),(l()(),t.hb(16777216,null,null,1,null,Yl)),t.pb(18,16384,null,0,p.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null),(l()(),t.hb(16777216,null,null,1,null,Wl)),t.pb(20,16384,null,0,p.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null),(l()(),t.hb(16777216,null,null,1,null,Zl)),t.pb(22,16384,null,0,p.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null),(l()(),t.hb(16777216,null,null,1,null,Jl)),t.pb(24,16384,null,0,p.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null)],function(l,n){var u=n.component,t=l(n,2,0,u.hasOrderError(n.context.index)||u.controls[n.context.index].invalid&&(u.controls[n.context.index].dirty||u.controls[n.context.index].touched));l(n,1,0,"form-group",t),l(n,3,0,"experienceTable"),l(n,14,0,n.context.index),l(n,18,0,u.hasOrderError(n.context.index)),l(n,20,0,u.controls[n.context.index].invalid&&(u.controls[n.context.index].dirty||u.controls[n.context.index].touched)&&u.controls[n.context.index].errors.required),l(n,22,0,u.controls[n.context.index].invalid&&(u.controls[n.context.index].dirty||u.controls[n.context.index].touched)&&u.controls[n.context.index].errors.min),l(n,24,0,u.controls[n.context.index].invalid&&(u.controls[n.context.index].dirty||u.controls[n.context.index].touched)&&u.controls[n.context.index].errors.max)},function(l,n){l(n,0,0,t.Ab(n,5).ngClassUntouched,t.Ab(n,5).ngClassTouched,t.Ab(n,5).ngClassPristine,t.Ab(n,5).ngClassDirty,t.Ab(n,5).ngClassValid,t.Ab(n,5).ngClassInvalid,t.Ab(n,5).ngClassPending),l(n,8,0,n.context.index+2),l(n,10,0,t.Ab(n,16).ngClassUntouched,t.Ab(n,16).ngClassTouched,t.Ab(n,16).ngClassPristine,t.Ab(n,16).ngClassDirty,t.Ab(n,16).ngClassValid,t.Ab(n,16).ngClassInvalid,t.Ab(n,16).ngClassPending)})}function nn(l){return t.Kb(0,[t.Gb(402653184,1,{presetsModal:0}),(l()(),t.qb(1,0,null,null,7,"dd-modal",[],null,null,null,fl.b,fl.a)),t.pb(2,114688,[[1,4],["presets",4]],0,hl.a,[],null,null),(l()(),t.qb(3,0,null,0,2,"div",[["modal-header",""]],null,null,null,null,null)),(l()(),t.qb(4,0,null,null,1,"h5",[],null,null,null,null,null)),(l()(),t.Ib(-1,null,["Experience Table Presets"])),(l()(),t.qb(6,0,null,1,2,"div",[["modal-body",""]],null,null,null,null,null)),(l()(),t.hb(16777216,null,null,1,null,Ql)),t.pb(8,278528,null,0,p.j,[t.P,t.M,t.t],{ngForOf:[0,"ngForOf"]},null),(l()(),t.qb(9,0,null,null,11,"div",[["class","form-horizontal"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"submit"],[null,"reset"]],function(l,n,u){var e=!0;return"submit"===n&&(e=!1!==t.Ab(l,10).onSubmit(u)&&e),"reset"===n&&(e=!1!==t.Ab(l,10).onReset()&&e),e},null,null)),t.pb(10,540672,null,0,R.l,[[8,null],[8,null]],{form:[0,"form"]},null),t.Fb(2048,null,R.c,null,[R.l]),t.pb(12,16384,null,0,R.r,[[4,R.c]],null,null),(l()(),t.qb(13,0,null,null,5,"div",[["class","form-group"]],null,null,null,null,null)),(l()(),t.qb(14,0,null,null,2,"div",[["class","col-1 col-lg-2 col-sm-12"]],null,null,null,null,null)),(l()(),t.qb(15,0,null,null,1,"label",[["class","form-label text-bold"]],null,null,null,null,null)),(l()(),t.Ib(-1,null,["Level 1"])),(l()(),t.qb(17,0,null,null,1,"div",[["class","col-11 col-lg-10 col-sm-12"]],null,null,null,null,null)),(l()(),t.qb(18,0,null,null,0,"input",[["class","form-input"],["disabled",""],["type","number"],["value","0"]],null,null,null,null,null)),(l()(),t.hb(16777216,null,null,1,null,ln)),t.pb(20,278528,null,0,p.j,[t.P,t.M,t.t],{ngForOf:[0,"ngForOf"]},null),(l()(),t.qb(21,0,null,null,2,"button",[["class","btn btn-sm"]],null,[[null,"click"]],function(l,n,u){var t=!0,e=l.component;return"click"===n&&(t=!1!==e.addRow()&&t),t},null,null)),(l()(),t.qb(22,0,null,null,0,"i",[["class","icon icon-plus"]],null,null,null,null,null)),(l()(),t.Ib(-1,null,[" Add Level\n"])),(l()(),t.qb(24,0,null,null,1,"button",[["class","btn btn-sm ml-2"]],null,[[null,"click"]],function(l,n,u){var e=!0;return"click"===n&&(e=!1!==t.Ab(l,2).open()&&e),e},null,null)),(l()(),t.Ib(-1,null,["Use Preset"])),(l()(),t.qb(26,0,null,null,2,"button",[["class","btn btn-sm btn-error ml-2"]],[[8,"disabled",0]],[[null,"click"]],function(l,n,u){var t=!0,e=l.component;return"click"===n&&(t=!1!==e.removeRow()&&t),t},null,null)),(l()(),t.qb(27,0,null,null,0,"i",[["class","icon icon-cross"]],null,null,null,null,null)),(l()(),t.Ib(-1,null,[" Remove Level\n"]))],function(l,n){var u=n.component;l(n,2,0),l(n,8,0,u.presetList),l(n,10,0,u.formGroup),l(n,20,0,u.controls)},function(l,n){var u=n.component;l(n,9,0,t.Ab(n,12).ngClassUntouched,t.Ab(n,12).ngClassTouched,t.Ab(n,12).ngClassPristine,t.Ab(n,12).ngClassDirty,t.Ab(n,12).ngClassValid,t.Ab(n,12).ngClassInvalid,t.Ab(n,12).ngClassPending),l(n,26,0,0===u.controls.length)})}var un=u("9Bt9"),tn=u("qAlS"),en=u("Fzqc"),on=function(){function l(){}return l.prototype.ngOnInit=function(){this.campaign.currencyMap?this.items=new R.e(this.campaign.currencyMap.map(this.getFormGroup)):this.items=new R.e([{name:"gp",value:1,useInConversions:!0},{name:"cp",value:.01,useInConversions:!0},{name:"sp",value:.1,useInConversions:!0},{name:"pp",value:10,useInConversions:!1}].map(this.getFormGroup)),this.formGroup.addControl("currencyMap",this.items),this.formGroup.addControl("trackCoins",new R.h(this.campaign.trackCoins||!1))},l.prototype.getFormGroup=function(l){return new R.k({name:new R.h(l.name,[R.x.required,R.x.maxLength(20)]),value:new R.h(l.value,[R.x.required,R.x.min(.01)]),useInConversions:new R.h(l.useInConversions)})},l.prototype.removeCurrencyLevel=function(l){this.items.removeAt(l),0===this.items.length&&this.items.push(this.getFormGroup({name:"gp",value:1,useInConversions:!0})),this.formGroup.markAsDirty()},l.prototype.addCurrencyLevel=function(){this.items.push(this.getFormGroup({name:null,value:null,useInConversions:!0})),this.formGroup.markAsDirty()},l.prototype.drop=function(l){var n=this.items.at(l.previousIndex);this.items.removeAt(l.previousIndex),this.items.insert(l.currentIndex,n)},Object.defineProperty(l.prototype,"controls",{get:function(){return this.items.controls},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"trackCoins",{get:function(){return this.formGroup.get("trackCoins")},enumerable:!0,configurable:!0}),l}(),rn=t.ob({encapsulation:0,styles:[[""]],data:{}});function an(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,0,"div",[["class","drag-placeholder"]],null,null,null,null,null))],null,null)}function cn(l){return t.Kb(0,[(l()(),t.qb(0,16777216,null,null,53,"div",[["cdkDrag",""],["class","cdk-drag"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null],[2,"cdk-drag-disabled",null],[2,"cdk-drag-dragging",null]],[[null,"submit"],[null,"reset"]],function(l,n,u){var e=!0;return"submit"===n&&(e=!1!==t.Ab(l,1).onSubmit(u)&&e),"reset"===n&&(e=!1!==t.Ab(l,1).onReset()&&e),e},null,null)),t.pb(1,540672,null,0,R.l,[[8,null],[8,null]],{form:[0,"form"]},null),t.Fb(2048,null,R.c,null,[R.l]),t.pb(3,16384,null,0,R.r,[[4,R.c]],null,null),t.pb(4,4866048,[[1,4]],3,un.c,[t.k,[3,un.b],p.c,t.A,t.P,tn.a,un.j,un.a,[2,en.a],un.h,t.h],null,null),t.Gb(603979776,2,{_handles:1}),t.Gb(335544320,3,{_previewTemplate:0}),t.Gb(335544320,4,{_placeholderTemplate:0}),t.Fb(2048,null,un.l,null,[un.c]),(l()(),t.qb(9,0,null,null,44,"div",[["class","columns"]],null,null,null,null,null)),(l()(),t.hb(0,null,null,1,null,an)),t.pb(11,16384,[[4,4]],0,un.e,[t.M],null,null),(l()(),t.qb(12,0,null,null,2,"div",[["cdkDragHandle",""],["class","column col-auto c-move cdk-drag-handle"]],null,null,null,null,null)),t.pb(13,147456,[[2,4]],0,un.d,[t.k,[2,un.l]],null,null),(l()(),t.qb(14,0,null,null,0,"i",[["class","icon icon-resize-vert"]],null,null,null,null,null)),(l()(),t.qb(15,0,null,null,9,"div",[["class","column"]],null,null,null,null,null)),(l()(),t.qb(16,0,null,null,8,"div",[["class","form-group"]],null,null,null,null,null)),(l()(),t.qb(17,0,null,null,1,"label",[["class","form-label"]],[[8,"htmlFor",0]],null,null,null,null)),(l()(),t.Ib(-1,null,["Name"])),(l()(),t.qb(19,0,null,null,5,"input",[["class","form-input"],["formControlName","name"],["name","name"],["type","text"]],[[8,"id",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(l,n,u){var e=!0;return"input"===n&&(e=!1!==t.Ab(l,20)._handleInput(u.target.value)&&e),"blur"===n&&(e=!1!==t.Ab(l,20).onTouched()&&e),"compositionstart"===n&&(e=!1!==t.Ab(l,20)._compositionStart()&&e),"compositionend"===n&&(e=!1!==t.Ab(l,20)._compositionEnd(u.target.value)&&e),e},null,null)),t.pb(20,16384,null,0,R.d,[t.E,t.k,[2,R.a]],null,null),t.Fb(1024,null,R.o,function(l){return[l]},[R.d]),t.pb(22,671744,null,0,R.j,[[3,R.c],[8,null],[8,null],[6,R.o],[2,R.D]],{name:[0,"name"]},null),t.Fb(2048,null,R.p,null,[R.j]),t.pb(24,16384,null,0,R.q,[[4,R.p]],null,null),(l()(),t.qb(25,0,null,null,10,"div",[["class","column"]],null,null,null,null,null)),(l()(),t.qb(26,0,null,null,9,"div",[["class","form-group"]],null,null,null,null,null)),(l()(),t.qb(27,0,null,null,1,"label",[["class","form-label"]],[[8,"htmlFor",0]],null,null,null,null)),(l()(),t.Ib(-1,null,["Value"])),(l()(),t.qb(29,0,null,null,6,"input",[["class","form-input"],["formControlName","value"],["name","name"],["step","0.01"],["type","number"]],[[8,"id",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"]],function(l,n,u){var e=!0;return"input"===n&&(e=!1!==t.Ab(l,30)._handleInput(u.target.value)&&e),"blur"===n&&(e=!1!==t.Ab(l,30).onTouched()&&e),"compositionstart"===n&&(e=!1!==t.Ab(l,30)._compositionStart()&&e),"compositionend"===n&&(e=!1!==t.Ab(l,30)._compositionEnd(u.target.value)&&e),"change"===n&&(e=!1!==t.Ab(l,31).onChange(u.target.value)&&e),"input"===n&&(e=!1!==t.Ab(l,31).onChange(u.target.value)&&e),"blur"===n&&(e=!1!==t.Ab(l,31).onTouched()&&e),e},null,null)),t.pb(30,16384,null,0,R.d,[t.E,t.k,[2,R.a]],null,null),t.pb(31,16384,null,0,R.z,[t.E,t.k],null,null),t.Fb(1024,null,R.o,function(l,n){return[l,n]},[R.d,R.z]),t.pb(33,671744,null,0,R.j,[[3,R.c],[8,null],[8,null],[6,R.o],[2,R.D]],{name:[0,"name"]},null),t.Fb(2048,null,R.p,null,[R.j]),t.pb(35,16384,null,0,R.q,[[4,R.p]],null,null),(l()(),t.qb(36,0,null,null,12,"div",[["class","column"]],null,null,null,null,null)),(l()(),t.qb(37,0,null,null,11,"div",[["class","form-group"]],null,null,null,null,null)),(l()(),t.qb(38,0,null,null,1,"label",[["class","form-label"]],null,null,null,null,null)),(l()(),t.Ib(-1,null,["Conversion"])),(l()(),t.qb(40,0,null,null,8,"label",[["class","form-checkbox"]],null,null,null,null,null)),(l()(),t.qb(41,0,null,null,5,"input",[["formControlName","useInConversions"],["type","checkbox"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"change"],[null,"blur"]],function(l,n,u){var e=!0;return"change"===n&&(e=!1!==t.Ab(l,42).onChange(u.target.checked)&&e),"blur"===n&&(e=!1!==t.Ab(l,42).onTouched()&&e),e},null,null)),t.pb(42,16384,null,0,R.b,[t.E,t.k],null,null),t.Fb(1024,null,R.o,function(l){return[l]},[R.b]),t.pb(44,671744,null,0,R.j,[[3,R.c],[8,null],[8,null],[6,R.o],[2,R.D]],{name:[0,"name"]},null),t.Fb(2048,null,R.p,null,[R.j]),t.pb(46,16384,null,0,R.q,[[4,R.p]],null,null),(l()(),t.qb(47,0,null,null,0,"i",[["class","form-icon"]],null,null,null,null,null)),(l()(),t.Ib(-1,null,[" Use in conversions "])),(l()(),t.qb(49,0,null,null,4,"div",[["class","column col-auto"]],null,null,null,null,null)),(l()(),t.qb(50,0,null,null,1,"label",[["class","form-label"]],null,null,null,null,null)),(l()(),t.Ib(-1,null,["Remove"])),(l()(),t.qb(52,0,null,null,1,"button",[["class","btn btn-sm btn-error"]],null,[[null,"click"]],function(l,n,u){var t=!0,e=l.component;return"click"===n&&(t=!1!==e.removeCurrencyLevel(l.context.index)&&t),t},null,null)),(l()(),t.qb(53,0,null,null,0,"i",[["class","icon icon-cross"]],null,null,null,null,null)),(l()(),t.hb(0,null,null,0))],function(l,n){l(n,1,0,n.context.$implicit),l(n,22,0,"name"),l(n,33,0,"value"),l(n,44,0,"useInConversions")},function(l,n){l(n,0,0,t.Ab(n,3).ngClassUntouched,t.Ab(n,3).ngClassTouched,t.Ab(n,3).ngClassPristine,t.Ab(n,3).ngClassDirty,t.Ab(n,3).ngClassValid,t.Ab(n,3).ngClassInvalid,t.Ab(n,3).ngClassPending,t.Ab(n,4).disabled,t.Ab(n,4)._dragRef.isDragging()),l(n,17,0,t.sb(1,"cm-name-",n.context.index,"")),l(n,19,0,t.sb(1,"cm-name-",n.context.index,""),t.Ab(n,24).ngClassUntouched,t.Ab(n,24).ngClassTouched,t.Ab(n,24).ngClassPristine,t.Ab(n,24).ngClassDirty,t.Ab(n,24).ngClassValid,t.Ab(n,24).ngClassInvalid,t.Ab(n,24).ngClassPending),l(n,27,0,t.sb(1,"cm-value-",n.context.index,"")),l(n,29,0,t.sb(1,"cm-value-",n.context.index,""),t.Ab(n,35).ngClassUntouched,t.Ab(n,35).ngClassTouched,t.Ab(n,35).ngClassPristine,t.Ab(n,35).ngClassDirty,t.Ab(n,35).ngClassValid,t.Ab(n,35).ngClassInvalid,t.Ab(n,35).ngClassPending),l(n,41,0,t.Ab(n,46).ngClassUntouched,t.Ab(n,46).ngClassTouched,t.Ab(n,46).ngClassPristine,t.Ab(n,46).ngClassDirty,t.Ab(n,46).ngClassValid,t.Ab(n,46).ngClassInvalid,t.Ab(n,46).ngClassPending)})}function sn(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,22,"div",[["cdkDropList",""],["class","cdk-drop-list"]],[[8,"id",0],[2,"cdk-drop-list-disabled",null],[2,"cdk-drop-list-dragging",null],[2,"cdk-drop-list-receiving",null]],[[null,"cdkDropListDropped"]],function(l,n,u){var t=!0,e=l.component;return"cdkDropListDropped"===n&&(t=!1!==e.drop(u)&&t),t},null,null)),t.Fb(6144,null,un.b,null,[un.f]),t.pb(2,1196032,null,1,un.f,[t.k,un.j,t.h,[2,en.a],[3,un.g],[2,p.c],un.h],null,{dropped:"cdkDropListDropped"}),t.Gb(603979776,1,{_draggables:1}),t.Fb(256,null,un.g,void 0,[]),(l()(),t.hb(16777216,null,null,1,null,cn)),t.pb(6,278528,null,0,p.j,[t.P,t.M,t.t],{ngForOf:[0,"ngForOf"]},null),(l()(),t.qb(7,0,null,null,15,"div",[["class","columns"]],null,null,null,null,null)),(l()(),t.qb(8,0,null,null,4,"div",[["class","column col-auto"]],null,null,null,null,null)),(l()(),t.qb(9,0,null,null,3,"button",[["class","btn btn-sm mt-2"]],null,[[null,"click"]],function(l,n,u){var t=!0,e=l.component;return"click"===n&&(t=!1!==e.addCurrencyLevel()&&t),t},null,null)),(l()(),t.qb(10,0,null,null,0,"i",[["class","icon icon-plus"]],null,null,null,null,null)),(l()(),t.qb(11,0,null,null,1,"span",[["class","hide-sm"]],null,null,null,null,null)),(l()(),t.Ib(-1,null,[" Add Level"])),(l()(),t.qb(13,0,null,null,9,"div",[["class","column col-auto"]],null,null,null,null,null)),(l()(),t.qb(14,0,null,null,8,"label",[["class","form-checkbox mt-2"]],null,null,null,null,null)),(l()(),t.qb(15,0,null,null,5,"input",[["type","checkbox"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"change"],[null,"blur"]],function(l,n,u){var e=!0;return"change"===n&&(e=!1!==t.Ab(l,16).onChange(u.target.checked)&&e),"blur"===n&&(e=!1!==t.Ab(l,16).onTouched()&&e),e},null,null)),t.pb(16,16384,null,0,R.b,[t.E,t.k],null,null),t.Fb(1024,null,R.o,function(l){return[l]},[R.b]),t.pb(18,540672,null,0,R.i,[[8,null],[8,null],[6,R.o],[2,R.D]],{form:[0,"form"]},null),t.Fb(2048,null,R.p,null,[R.i]),t.pb(20,16384,null,0,R.q,[[4,R.p]],null,null),(l()(),t.qb(21,0,null,null,0,"i",[["class","form-icon"]],null,null,null,null,null)),(l()(),t.Ib(-1,null,[" Track individual coins "]))],function(l,n){var u=n.component;l(n,6,0,u.controls),l(n,18,0,u.trackCoins)},function(l,n){l(n,0,0,t.Ab(n,2).id,t.Ab(n,2).disabled,t.Ab(n,2)._dropListRef.isDragging(),t.Ab(n,2)._dropListRef.isReceiving()),l(n,15,0,t.Ab(n,20).ngClassUntouched,t.Ab(n,20).ngClassTouched,t.Ab(n,20).ngClassPristine,t.Ab(n,20).ngClassDirty,t.Ab(n,20).ngClassValid,t.Ab(n,20).ngClassInvalid,t.Ab(n,20).ngClassPending)})}var pn=u("46uH"),bn=u("PSD3"),dn=u.n(bn),fn=function(){return(fn=Object.assign||function(l){for(var n,u=1,t=arguments.length;u<t;u++)for(var e in n=arguments[u])Object.prototype.hasOwnProperty.call(n,e)&&(l[e]=n[e]);return l}).apply(this,arguments)},hn=function(l,n,u,t){return new(u||(u=Promise))(function(e,i){function o(l){try{a(t.next(l))}catch(n){i(n)}}function r(l){try{a(t.throw(l))}catch(n){i(n)}}function a(l){l.done?e(l.value):new u(function(n){n(l.value)}).then(o,r)}a((t=t.apply(l,n||[])).next())})},gn=function(l,n){var u,t,e,i,o={label:0,sent:function(){if(1&e[0])throw e[1];return e[1]},trys:[],ops:[]};return i={next:r(0),throw:r(1),return:r(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function r(i){return function(r){return function(i){if(u)throw new TypeError("Generator is already executing.");for(;o;)try{if(u=1,t&&(e=2&i[0]?t.return:i[0]?t.throw||((e=t.return)&&e.call(t),0):t.next)&&!(e=e.call(t,i[1])).done)return e;switch(t=0,e&&(i=[2&i[0],e.value]),i[0]){case 0:case 1:e=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,t=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!(e=(e=o.trys).length>0&&e[e.length-1])&&(6===i[0]||2===i[0])){o=0;continue}if(3===i[0]&&(!e||i[1]>e[0]&&i[1]<e[3])){o.label=i[1];break}if(6===i[0]&&o.label<e[1]){o.label=e[1],e=i;break}if(e&&o.label<e[2]){o.label=e[2],o.ops.push(i);break}e[2]&&o.ops.pop(),o.trys.pop();continue}i=n.call(l,o)}catch(r){i=[6,r],t=0}finally{u=e=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,r])}}},mn=function(){function l(l,n,u,t,e,i,o,r){this.campaignService=l,this.router=n,this.route=u,this.login=t,this.location=e,this.toast=i,this.http=o,this.iconService=r,this.saving=!1,this.deleting=!1,this.importing=!1,this.expandXPTable=!1,this.expandCurrencyMapEditor=!1}return l.prototype.ngOnInit=function(){this.formGroup=new R.k({}),this.expandXPTable=!this.editing,this.expandCurrencyMapEditor=!this.editing,void 0!==this.campaign.experienceTable&&null!==this.campaign.experienceTable||(this.campaign.experienceTable=[]),"true"===this.route.snapshot.queryParamMap.get("refresh")&&(this.campaignService.refreshCurrentCampaign(),this.router.navigate([],{replaceUrl:!0}))},l.prototype.canDeactivate=function(){return!this.formGroup.dirty},l.prototype.selectEntityPreset=function(l){this.router.navigate(["campaigns",this.campaignService.campaign.id,"entitytypes",l.id,"edit"])},l.prototype.selectConceptType=function(l){this.router.navigate(["campaigns",this.campaignService.campaign.id,"concepttypes",l.id,"edit"])},l.prototype.createEntityPreset=function(){return hn(this,void 0,void 0,function(){return gn(this,function(l){return this.router.navigate(["campaigns",this.campaignService.campaign.id,"entitytypes","create"]),[2]})})},l.prototype.createConceptType=function(){this.router.navigate(["campaigns",this.campaignService.campaign.id,"concepttypes","create"])},l.prototype.save=function(){return hn(this,void 0,void 0,function(){var l,n,u;return gn(this,function(t){switch(t.label){case 0:if(this.saving=!0,!this.editing)return[3,5];t.label=1;case 1:return t.trys.push([1,3,,4]),n=this.formGroup.value,l={name:n.name,content:n.content,imageId:n.imageId,experienceTable:n.experienceTable,userId:this.login.id,currencyMap:n.currencyMap,trackCoins:n.trackCoins,id:this.campaign.id},[4,this.campaignService.updateCampaign(l)];case 2:return t.sent(),this.campaignService.campaign=fn({},this.campaign,l),this.formGroup.markAsPristine(),[3,4];case 3:throw t.sent();case 4:return this.toast.info("Campaign settings updated"),[3,9];case 5:n=this.formGroup.value,t.label=6;case 6:return t.trys.push([6,8,,9]),[4,this.campaignService.createCampaign({name:n.name,content:n.content,imageId:n.imageId,experienceTable:n.experienceTable,currencyMap:n.currencyMap,trackCoins:n.trackCoins,userId:this.login.id,id:""})];case 7:return u=t.sent(),this.router.navigate(["campaigns",u.id,"settings"]),[3,9];case 8:throw t.sent();case 9:return this.saving=!1,[2]}})})},l.prototype.cancel=function(){this.location.back()},l.prototype.delete=function(){return hn(this,void 0,void 0,function(){return gn(this,function(l){switch(l.label){case 0:return[4,dn.a.fire({title:"Are you sure?",text:"This will completely delete this campaign and everything that goes along with it. This cannot be undone!",showCancelButton:!0,cancelButtonText:"Back to safety",confirmButtonText:"\u2622\ufe0f Nuke It"})];case 1:if(!l.sent().value)return[2];this.deleting=!0,l.label=2;case 2:return l.trys.push([2,4,,5]),[4,this.campaignService.deleteCampaign(this.campaign)];case 3:return l.sent(),[3,5];case 4:throw l.sent();case 5:return this.deleting=!1,this.router.navigate(["home"]),[2]}})})},l.prototype.export=function(){this.exporter.doExport()},l.prototype.import=function(l){return hn(this,void 0,void 0,function(){var n,u,t=this;return gn(this,function(i){if(n=l.target.files[0],-1===["application/zip","application/x-zip-compressed","multipart/x-zip"].indexOf(n.type))return dn.a.fire({type:"error",title:"Invalid File Type!",text:"File should be a zip file created from an export"}),[2];this.importing=!0;try{(u=new FormData).append("file",n),u.append("campaignId",this.campaignService.campaign.id),this.http.post(e.a.apiURL+"/import",u).subscribe(function(l){var n=l,u=n.articles,e=n.entityPresets,i=n.quests,o=n.concepts,r=n.conceptTypes;t.importing=!1,dn.a.fire({title:"All Done!",html:"All done importing the things. Here's how it went:<br/>Articles: "+u+"<br/>Entity Types: "+e+"<br/>Concepts: "+o+"<br/>Quests: "+i+"<br/>ConceptTypes: "+r}).then(function(){return t.campaignService.refreshCurrentCampaign()})},function(l){throw dn.a.fire({type:"error",title:"Hmm...",text:"Something went wrong during import. Please try again"}),l})}catch(o){throw o}return[2]})})},l.prototype.getIcon=function(l){return this.iconService.getIconSrc(l)},Object.defineProperty(l.prototype,"campaign",{get:function(){return this.editing?this.campaignService.campaign:{id:"",name:"",content:null,imageId:"",userId:"",experienceTable:[]}},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"editing",{get:function(){return this.route.snapshot.data.editing},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"loading",{get:function(){return this.campaignService.loadingCampaign},enumerable:!0,configurable:!0}),l}(),vn=u("SZbH"),yn=t.ob({encapsulation:0,styles:[[".big-space[_ngcontent-%COMP%]{margin-top:2rem}"]],data:{}});function Cn(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,1,"dd-exporter",[],null,null,null,yl,ml)),t.pb(1,114688,[[1,4],["exporter",4]],0,gl,[f.b],{conceptTypes:[0,"conceptTypes"]},null)],function(l,n){l(n,1,0,n.component.campaign.conceptTypes)},null)}function In(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,2,"button",[["class","btn btn-sm"]],null,[[null,"click"]],function(l,n,u){var t=!0,e=l.component;return"click"===n&&(t=0!=(e.expandXPTable=!e.expandXPTable)&&t),t},null,null)),(l()(),t.Ib(-1,null,[" Expand "])),(l()(),t.qb(2,0,null,null,0,"i",[["class","icon icon-arrow-down"]],null,null,null,null,null))],null,null)}function qn(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,2,"button",[["class","btn btn-sm"]],null,[[null,"click"]],function(l,n,u){var t=!0,e=l.component;return"click"===n&&(t=0!=(e.expandXPTable=!e.expandXPTable)&&t),t},null,null)),(l()(),t.Ib(-1,null,[" Collapse "])),(l()(),t.qb(2,0,null,null,0,"i",[["class","icon icon-arrow-up"]],null,null,null,null,null))],null,null)}function kn(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,1,"span",[["class","text-gray"]],null,null,null,null,null)),(l()(),t.Ib(-1,null,["This is the experience table. This will determine entities' levels based on the amount of XP they have. For example, if level 2 was set to 30 XP, an entity would be level 2 when they reach 30 or above XP."]))],null,null)}function An(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,2,"span",[],null,null,null,null,null)),(l()(),t.Ib(-1,null,["Collapse "])),(l()(),t.qb(2,0,null,null,0,"i",[["class","icon icon-arrow-up"]],null,null,null,null,null))],null,null)}function wn(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,2,"span",[],null,null,null,null,null)),(l()(),t.Ib(-1,null,["Expand "])),(l()(),t.qb(2,0,null,null,0,"i",[["class","icon icon-arrow-down"]],null,null,null,null,null))],null,null)}function Pn(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,8,"div",[["class","columns big-space"]],null,null,null,null,null)),(l()(),t.qb(1,0,null,null,2,"div",[["class","column"]],null,null,null,null,null)),(l()(),t.qb(2,0,null,null,1,"h3",[],null,null,null,null,null)),(l()(),t.Ib(-1,null,["Entity Types"])),(l()(),t.qb(4,0,null,null,4,"div",[["class","column col-auto"]],null,null,null,null,null)),(l()(),t.qb(5,0,null,null,3,"button",[["class","btn btn-sm"]],null,[[null,"click"]],function(l,n,u){var t=!0,e=l.component;return"click"===n&&(t=!1!==e.createEntityPreset()&&t),t},null,null)),(l()(),t.qb(6,0,null,null,0,"i",[["class","icon icon-plus"]],null,null,null,null,null)),(l()(),t.qb(7,0,null,null,1,"span",[["class","hide-sm"]],null,null,null,null,null)),(l()(),t.Ib(-1,null,[" New Entity Type"]))],null,null)}function xn(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,9,"div",[["class","empty"]],null,null,null,null,null)),(l()(),t.qb(1,0,null,null,1,"div",[["class","empty-icon"]],null,null,null,null,null)),(l()(),t.qb(2,0,null,null,0,"i",[["class","icon icon-search icon-4x"]],null,null,null,null,null)),(l()(),t.qb(3,0,null,null,1,"p",[["class","empty-title h5"]],null,null,null,null,null)),(l()(),t.Ib(-1,null,["There are no entity types :("])),(l()(),t.qb(5,0,null,null,1,"p",[["class","empty-subtitle"]],null,null,null,null,null)),(l()(),t.Ib(-1,null,["Click the button to create one"])),(l()(),t.qb(7,0,null,null,2,"div",[["class","empty-action"]],null,null,null,null,null)),(l()(),t.qb(8,0,null,null,1,"button",[["class","btn btn-primary"]],null,[[null,"click"]],function(l,n,u){var t=!0,e=l.component;return"click"===n&&(t=!1!==e.createEntityPreset()&&t),t},null,null)),(l()(),t.Ib(-1,null,[" Create Type "]))],null,null)}function En(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,2,"div",[["class","column col-auto"]],null,null,null,null,null)),(l()(),t.qb(1,0,null,null,1,"figure",[["class","avatar avatar-lg"]],null,null,null,null,null)),(l()(),t.qb(2,0,null,null,0,"img",[],[[8,"src",4]],null,null,null,null))],null,function(l,n){l(n,2,0,t.sb(1,"https://res.cloudinary.com/dqhk8k6iv/image/upload/t_thumb/",n.parent.context.$implicit.imageId,""))})}function Tn(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,9,"div",[["class","card p-2 mb-2 hoverable"]],null,[[null,"click"]],function(l,n,u){var t=!0,e=l.component;return"click"===n&&(t=!1!==e.selectEntityPreset(l.context.$implicit)&&t),t},null,null)),(l()(),t.qb(1,0,null,null,8,"div",[["class","columns"]],null,null,null,null,null)),(l()(),t.hb(16777216,null,null,1,null,En)),t.pb(3,16384,null,0,p.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null),(l()(),t.qb(4,0,null,null,5,"div",[["class","column"]],null,null,null,null,null)),(l()(),t.qb(5,0,null,null,1,"h4",[["class","mb-1"]],null,null,null,null,null)),(l()(),t.Ib(6,null,["",""])),(l()(),t.qb(7,0,null,null,2,"span",[["class","text-gray"]],null,null,null,null,null)),(l()(),t.Ib(8,null,["",""])),t.Eb(9,2)],function(l,n){l(n,3,0,n.context.$implicit.imageId)},function(l,n){l(n,6,0,n.context.$implicit.name);var u=t.Jb(n,8,0,l(n,9,0,t.Ab(n.parent.parent.parent,0),n.context.$implicit.description,120));l(n,8,0,u)})}function Sn(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,2,"div",[],null,null,null,null,null)),(l()(),t.hb(16777216,null,null,1,null,Tn)),t.pb(2,278528,null,0,p.j,[t.P,t.M,t.t],{ngForOf:[0,"ngForOf"]},null)],function(l,n){l(n,2,0,n.component.campaign.entityPresets)},null)}function On(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,8,"div",[["class","columns big-space"]],null,null,null,null,null)),(l()(),t.qb(1,0,null,null,2,"div",[["class","column"]],null,null,null,null,null)),(l()(),t.qb(2,0,null,null,1,"h3",[],null,null,null,null,null)),(l()(),t.Ib(-1,null,["Concept Types"])),(l()(),t.qb(4,0,null,null,4,"div",[["class","column col-auto"]],null,null,null,null,null)),(l()(),t.qb(5,0,null,null,3,"button",[["class","btn btn-sm"]],null,[[null,"click"]],function(l,n,u){var t=!0,e=l.component;return"click"===n&&(t=!1!==e.createConceptType()&&t),t},null,null)),(l()(),t.qb(6,0,null,null,0,"i",[["class","icon icon-plus"]],null,null,null,null,null)),(l()(),t.qb(7,0,null,null,1,"span",[["class","hide-sm"]],null,null,null,null,null)),(l()(),t.Ib(-1,null,[" New Concept Type"]))],null,null)}function Mn(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,9,"div",[["class","empty"]],null,null,null,null,null)),(l()(),t.qb(1,0,null,null,1,"div",[["class","empty-icon"]],null,null,null,null,null)),(l()(),t.qb(2,0,null,null,0,"i",[["class","icon icon-search icon-4x"]],null,null,null,null,null)),(l()(),t.qb(3,0,null,null,1,"p",[["class","empty-title h5"]],null,null,null,null,null)),(l()(),t.Ib(-1,null,["There are no concept types :("])),(l()(),t.qb(5,0,null,null,1,"p",[["class","empty-subtitle"]],null,null,null,null,null)),(l()(),t.Ib(-1,null,["Click the button to create one"])),(l()(),t.qb(7,0,null,null,2,"div",[["class","empty-action"]],null,null,null,null,null)),(l()(),t.qb(8,0,null,null,1,"button",[["class","btn btn-primary"]],null,[[null,"click"]],function(l,n,u){var t=!0,e=l.component;return"click"===n&&(t=!1!==e.createConceptType()&&t),t},null,null)),(l()(),t.Ib(-1,null,[" Create Concept Type "]))],null,null)}function _n(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,1,"div",[["class","column col-auto"]],null,null,null,null,null)),(l()(),t.qb(1,0,null,null,0,"img",[["class","img-responsive"]],[[8,"src",4]],null,null,null,null))],null,function(l,n){var u=n.component;l(n,1,0,t.sb(1,"",u.getIcon(n.parent.context.$implicit.icon),""))})}function Dn(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,9,"div",[["class","card p-2 mb-2 hoverable"]],null,[[null,"click"]],function(l,n,u){var t=!0,e=l.component;return"click"===n&&(t=!1!==e.selectConceptType(l.context.$implicit)&&t),t},null,null)),(l()(),t.qb(1,0,null,null,8,"div",[["class","columns"]],null,null,null,null,null)),(l()(),t.hb(16777216,null,null,1,null,_n)),t.pb(3,16384,null,0,p.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null),(l()(),t.qb(4,0,null,null,5,"div",[["class","column"]],null,null,null,null,null)),(l()(),t.qb(5,0,null,null,1,"h4",[["class","mb-1"]],null,null,null,null,null)),(l()(),t.Ib(6,null,["",""])),(l()(),t.qb(7,0,null,null,2,"span",[["class","text-gray"]],null,null,null,null,null)),(l()(),t.Ib(8,null,["",""])),t.Eb(9,2)],function(l,n){l(n,3,0,n.context.$implicit.icon)},function(l,n){l(n,6,0,n.context.$implicit.name);var u=t.Jb(n,8,0,l(n,9,0,t.Ab(n.parent.parent.parent,0),n.context.$implicit.description,120));l(n,8,0,u)})}function Nn(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,2,"div",[],null,null,null,null,null)),(l()(),t.hb(16777216,null,null,1,null,Dn)),t.pb(2,278528,null,0,p.j,[t.P,t.M,t.t],{ngForOf:[0,"ngForOf"]},null)],function(l,n){l(n,2,0,n.component.campaign.conceptTypes)},null)}function Ln(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,1,"h3",[["class","mb-2 big-space"]],null,null,null,null,null)),(l()(),t.Ib(-1,null,["Other Stuff"]))],null,null)}function Fn(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,18,"div",[["class","card p-2"]],null,null,null,null,null)),(l()(),t.qb(1,0,null,null,9,"div",[["class","card-body"]],null,null,null,null,null)),(l()(),t.qb(2,0,null,null,2,"button",[["class","btn btn-primary"]],null,[[null,"click"]],function(l,n,u){var t=!0,e=l.component;return"click"===n&&(t=!1!==e.export()&&t),t},null,null)),(l()(),t.qb(3,0,null,null,0,"i",[["class","icon icon-download"]],null,null,null,null,null)),(l()(),t.Ib(-1,null,[" Export Data "])),(l()(),t.qb(5,0,null,null,5,"label",[["class","btn btn-primary ml-2"],["for","import-button"]],null,null,null,null,null)),t.pb(6,278528,null,0,p.i,[t.t,t.u,t.k,t.E],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),t.Db(7,{loading:0}),(l()(),t.qb(8,0,null,null,0,"i",[["class","icon icon-upload"]],null,null,null,null,null)),(l()(),t.Ib(-1,null,[" Import Data "])),(l()(),t.qb(10,0,null,null,0,"input",[["id","import-button"],["style","display: none"],["type","file"]],null,[[null,"change"]],function(l,n,u){var t=!0,e=l.component;return"change"===n&&(t=!1!==e.import(u)&&t),t},null,null)),(l()(),t.qb(11,0,null,null,7,"div",[["class","card-body"]],null,null,null,null,null)),(l()(),t.qb(12,0,null,null,1,"h4",[["class","mb-2"]],null,null,null,null,null)),(l()(),t.Ib(-1,null,["Danger!"])),(l()(),t.qb(14,0,null,null,4,"button",[["class","btn btn-error"]],null,[[null,"click"]],function(l,n,u){var t=!0,e=l.component;return"click"===n&&(t=!1!==e.delete()&&t),t},null,null)),t.pb(15,278528,null,0,p.i,[t.t,t.u,t.k,t.E],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),t.Db(16,{loading:0}),(l()(),t.qb(17,0,null,null,0,"i",[["class","icon icon-cross"]],null,null,null,null,null)),(l()(),t.Ib(-1,null,[" Delete Campaign "]))],function(l,n){var u=n.component,t=l(n,7,0,u.importing);l(n,6,0,"btn btn-primary ml-2",t);var e=l(n,16,0,u.deleting);l(n,15,0,"btn btn-error",e)},null)}function Kn(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,65,"div",[["class","container grid-xl"]],null,null,null,null,null)),(l()(),t.qb(1,0,null,null,10,"div",[["class","columns"]],null,null,null,null,null)),(l()(),t.qb(2,0,null,null,2,"div",[["class","column"]],null,null,null,null,null)),(l()(),t.qb(3,0,null,null,1,"h2",[],null,null,null,null,null)),(l()(),t.Ib(4,null,["",""])),(l()(),t.qb(5,0,null,null,6,"div",[["class","column col-auto col-ml-auto"]],null,null,null,null,null)),(l()(),t.qb(6,0,null,null,1,"button",[["class","btn mr-2"]],null,[[null,"click"]],function(l,n,u){var t=!0,e=l.component;return"click"===n&&(t=!1!==e.cancel()&&t),t},null,null)),(l()(),t.Ib(-1,null,["Cancel"])),(l()(),t.qb(8,0,null,null,3,"button",[["class","btn btn-primary"]],[[8,"disabled",0]],[[null,"click"]],function(l,n,u){var t=!0,e=l.component;return"click"===n&&(t=!1!==e.save()&&t),t},null,null)),t.pb(9,278528,null,0,p.i,[t.t,t.u,t.k,t.E],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),t.Db(10,{loading:0}),(l()(),t.Ib(-1,null,[" Save "])),(l()(),t.qb(12,0,null,null,1,"h3",[["class","mb-0"]],null,null,null,null,null)),(l()(),t.Ib(-1,null,["General Settings"])),(l()(),t.qb(14,0,null,null,4,"dd-campaign-form",[],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"submit"],[null,"reset"]],function(l,n,u){var e=!0;return"submit"===n&&(e=!1!==t.Ab(l,15).onSubmit(u)&&e),"reset"===n&&(e=!1!==t.Ab(l,15).onReset()&&e),e},Rl,Fl)),t.pb(15,540672,null,0,R.l,[[8,null],[8,null]],{form:[0,"form"]},null),t.Fb(2048,null,R.c,null,[R.l]),t.pb(17,16384,null,0,R.r,[[4,R.c]],null,null),t.pb(18,114688,null,0,Ll,[],{formGroup:[0,"formGroup"],campaign:[1,"campaign"],includeImage:[2,"includeImage"]},null),(l()(),t.qb(19,0,null,null,8,"div",[["class","columns big-space"]],null,null,null,null,null)),(l()(),t.qb(20,0,null,null,2,"div",[["class","column"]],null,null,null,null,null)),(l()(),t.qb(21,0,null,null,1,"h3",[["class","mb-0"]],null,null,null,null,null)),(l()(),t.Ib(-1,null,["Experience Table"])),(l()(),t.qb(23,0,null,null,4,"div",[["class","column col-auto col-ml-auto"]],null,null,null,null,null)),(l()(),t.hb(16777216,null,null,1,null,In)),t.pb(25,16384,null,0,p.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null),(l()(),t.hb(16777216,null,null,1,null,qn)),t.pb(27,16384,null,0,p.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null),(l()(),t.hb(16777216,null,null,1,null,kn)),t.pb(29,16384,null,0,p.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null),(l()(),t.qb(30,0,null,null,4,"dd-experience-table-editor",[],[[8,"hidden",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"submit"],[null,"reset"]],function(l,n,u){var e=!0;return"submit"===n&&(e=!1!==t.Ab(l,31).onSubmit(u)&&e),"reset"===n&&(e=!1!==t.Ab(l,31).onReset()&&e),e},nn,Xl)),t.pb(31,540672,null,0,R.l,[[8,null],[8,null]],{form:[0,"form"]},null),t.Fb(2048,null,R.c,null,[R.l]),t.pb(33,16384,null,0,R.r,[[4,R.c]],null,null),t.pb(34,114688,null,0,zl,[$l],{campaign:[0,"campaign"],formGroup:[1,"formGroup"]},null),(l()(),t.qb(35,0,null,null,9,"div",[["class","columns big-space"]],null,null,null,null,null)),(l()(),t.qb(36,0,null,null,2,"div",[["class","column"]],null,null,null,null,null)),(l()(),t.qb(37,0,null,null,1,"h3",[["class","mb-0"]],null,null,null,null,null)),(l()(),t.Ib(-1,null,["Currency Map"])),(l()(),t.qb(39,0,null,null,5,"div",[["class","column col-auto col-ml-auto"]],null,null,null,null,null)),(l()(),t.qb(40,0,null,null,4,"button",[["class","btn btn-sm"]],null,[[null,"click"]],function(l,n,u){var t=!0,e=l.component;return"click"===n&&(t=0!=(e.expandCurrencyMapEditor=!e.expandCurrencyMapEditor)&&t),t},null,null)),(l()(),t.hb(16777216,null,null,1,null,An)),t.pb(42,16384,null,0,p.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null),(l()(),t.hb(16777216,null,null,1,null,wn)),t.pb(44,16384,null,0,p.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null),(l()(),t.qb(45,0,null,null,4,"dd-currency-map-editor",[],[[8,"hidden",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"submit"],[null,"reset"]],function(l,n,u){var e=!0;return"submit"===n&&(e=!1!==t.Ab(l,46).onSubmit(u)&&e),"reset"===n&&(e=!1!==t.Ab(l,46).onReset()&&e),e},sn,rn)),t.pb(46,540672,null,0,R.l,[[8,null],[8,null]],{form:[0,"form"]},null),t.Fb(2048,null,R.c,null,[R.l]),t.pb(48,16384,null,0,R.r,[[4,R.c]],null,null),t.pb(49,114688,null,0,on,[],{formGroup:[0,"formGroup"],campaign:[1,"campaign"]},null),(l()(),t.hb(16777216,null,null,1,null,Pn)),t.pb(51,16384,null,0,p.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null),(l()(),t.hb(16777216,null,null,1,null,xn)),t.pb(53,16384,null,0,p.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null),(l()(),t.hb(16777216,null,null,1,null,Sn)),t.pb(55,16384,null,0,p.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null),(l()(),t.hb(16777216,null,null,1,null,On)),t.pb(57,16384,null,0,p.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null),(l()(),t.hb(16777216,null,null,1,null,Mn)),t.pb(59,16384,null,0,p.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null),(l()(),t.hb(16777216,null,null,1,null,Nn)),t.pb(61,16384,null,0,p.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null),(l()(),t.hb(16777216,null,null,1,null,Ln)),t.pb(63,16384,null,0,p.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null),(l()(),t.hb(16777216,null,null,1,null,Fn)),t.pb(65,16384,null,0,p.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null)],function(l,n){var u=n.component,t=l(n,10,0,u.saving);l(n,9,0,"btn btn-primary",t),l(n,15,0,u.formGroup),l(n,18,0,u.formGroup,u.campaign,u.editing),l(n,25,0,!u.expandXPTable),l(n,27,0,u.expandXPTable),l(n,29,0,u.expandXPTable),l(n,31,0,u.formGroup),l(n,34,0,u.campaign,u.formGroup),l(n,42,0,u.expandCurrencyMapEditor),l(n,44,0,!u.expandCurrencyMapEditor),l(n,46,0,u.formGroup),l(n,49,0,u.formGroup,u.campaign),l(n,51,0,u.editing),l(n,53,0,u.editing&&0===u.campaign.entityPresets.length),l(n,55,0,u.editing),l(n,57,0,u.editing),l(n,59,0,u.editing&&0===u.campaign.conceptTypes.length),l(n,61,0,u.editing),l(n,63,0,u.editing),l(n,65,0,u.editing)},function(l,n){var u=n.component;l(n,4,0,u.editing?"Settings":"Create Campaign"),l(n,8,0,u.formGroup.invalid||u.formGroup.pristine),l(n,14,0,t.Ab(n,17).ngClassUntouched,t.Ab(n,17).ngClassTouched,t.Ab(n,17).ngClassPristine,t.Ab(n,17).ngClassDirty,t.Ab(n,17).ngClassValid,t.Ab(n,17).ngClassInvalid,t.Ab(n,17).ngClassPending),l(n,30,0,!u.expandXPTable,t.Ab(n,33).ngClassUntouched,t.Ab(n,33).ngClassTouched,t.Ab(n,33).ngClassPristine,t.Ab(n,33).ngClassDirty,t.Ab(n,33).ngClassValid,t.Ab(n,33).ngClassInvalid,t.Ab(n,33).ngClassPending),l(n,45,0,!u.expandCurrencyMapEditor,t.Ab(n,48).ngClassUntouched,t.Ab(n,48).ngClassTouched,t.Ab(n,48).ngClassPristine,t.Ab(n,48).ngClassDirty,t.Ab(n,48).ngClassValid,t.Ab(n,48).ngClassInvalid,t.Ab(n,48).ngClassPending)})}function jn(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,0,"div",[["class","loading"]],null,null,null,null,null))],null,null)}function Gn(l){return t.Kb(0,[t.Cb(0,pn.a,[]),t.Gb(671088640,1,{exporter:0}),(l()(),t.hb(16777216,null,null,1,null,Cn)),t.pb(3,16384,null,0,p.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null),(l()(),t.hb(16777216,null,null,1,null,Kn)),t.pb(5,16384,null,0,p.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null),(l()(),t.hb(16777216,null,null,1,null,jn)),t.pb(7,16384,null,0,p.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null)],function(l,n){var u=n.component;l(n,3,0,u.editing),l(n,5,0,u.campaign||!u.editing),l(n,7,0,u.loading)},null)}function Un(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,1,"dd-campaign-settings",[],null,null,null,Gn,yn)),t.pb(1,114688,null,0,mn,[f.b,r.k,r.a,b.a,p.g,vn.j,P.c,Nl.a],null,null)],function(l,n){l(n,1,0)},null)}var Rn=t.mb("dd-campaign-settings",mn,Un,{},{},[]),Vn=function(){function l(l,n){this.campaignService=l,this.route=n}return l.prototype.ngOnInit=function(){var l=this;this.route.paramMap.subscribe(function(n){l.campaignService.setSelection(n.get("id"))})},l.prototype.ngOnDestroy=function(){this.campaignService.setSelection(null)},Object.defineProperty(l.prototype,"loading",{get:function(){return this.campaignService.loadingCampaign},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"campaign",{get:function(){return this.campaignService.campaign},enumerable:!0,configurable:!0}),l}(),Hn=t.ob({encapsulation:0,styles:[[""]],data:{}});function $n(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,0,"div",[["class","loading loading-lg"]],null,null,null,null,null))],null,null)}function Bn(l){return t.Kb(0,[(l()(),t.qb(0,16777216,null,null,1,"router-outlet",[],null,null,null,null,null)),t.pb(1,212992,null,0,r.o,[r.b,t.P,t.j,[8,null],t.h],null,null),(l()(),t.hb(0,null,null,0))],function(l,n){l(n,1,0)},null)}function zn(l){return t.Kb(0,[(l()(),t.hb(16777216,null,null,1,null,$n)),t.pb(1,16384,null,0,p.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null),(l()(),t.hb(16777216,null,null,1,null,Bn)),t.pb(3,16384,null,0,p.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null)],function(l,n){var u=n.component;l(n,1,0,u.loading),l(n,3,0,u.campaign)},null)}function Xn(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,1,"dd-campaign",[],null,null,null,zn,Hn)),t.pb(1,245760,null,0,Vn,[f.b,r.a],null,null)],function(l,n){l(n,1,0)},null)}var Qn=t.mb("dd-campaign",Vn,Xn,{},{},[]),Yn=u("wNqa"),Wn=function(){function l(l,n,u){this.router=l,this.questService=n,this.campaignService=u,this.loading=!1}return l.prototype.ngOnInit=function(){this.loadQuests()},l.prototype.viewQuest=function(l){this.router.navigate(["campaigns",this.campaignService.campaign.id,"quests",l.id])},l.prototype.loadQuests=function(){return l=this,void 0,u=function(){var l;return function(l,n){var u,t,e,i,o={label:0,sent:function(){if(1&e[0])throw e[1];return e[1]},trys:[],ops:[]};return i={next:r(0),throw:r(1),return:r(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function r(i){return function(r){return function(i){if(u)throw new TypeError("Generator is already executing.");for(;o;)try{if(u=1,t&&(e=2&i[0]?t.return:i[0]?t.throw||((e=t.return)&&e.call(t),0):t.next)&&!(e=e.call(t,i[1])).done)return e;switch(t=0,e&&(i=[2&i[0],e.value]),i[0]){case 0:case 1:e=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,t=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!(e=(e=o.trys).length>0&&e[e.length-1])&&(6===i[0]||2===i[0])){o=0;continue}if(3===i[0]&&(!e||i[1]>e[0]&&i[1]<e[3])){o.label=i[1];break}if(6===i[0]&&o.label<e[1]){o.label=e[1],e=i;break}if(e&&o.label<e[2]){o.label=e[2],o.ops.push(i);break}e[2]&&o.ops.pop(),o.trys.pop();continue}i=n.call(l,o)}catch(r){i=[6,r],t=0}finally{u=e=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,r])}}}(this,function(n){switch(n.label){case 0:this.loading=!0,n.label=1;case 1:return n.trys.push([1,3,,4]),l=this,[4,this.questService.getQuests(this.campaignService.campaign.id,null,null,null,null,null,[Yn.b.IN_PROGRESS])];case 2:return l.quests=n.sent(),[3,4];case 3:throw n.sent();case 4:return this.loading=!1,[2]}})},new((n=void 0)||(n=Promise))(function(t,e){function i(l){try{r(u.next(l))}catch(n){e(n)}}function o(l){try{r(u.throw(l))}catch(n){e(n)}}function r(l){l.done?t(l.value):new n(function(n){n(l.value)}).then(i,o)}r((u=u.apply(l,[])).next())});var l,n,u},l}(),Zn=t.ob({encapsulation:0,styles:[[""]],data:{}});function Jn(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,0,"div",[["class","loading"]],null,null,null,null,null))],null,null)}function lu(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,1,"div",[["class","column col-auto mr-1"]],null,null,null,null,null)),(l()(),t.qb(1,0,null,null,0,"i",[["class","icon icon-flag"]],null,null,null,null,null))],null,null)}function nu(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,8,"div",[["class","card p-2 hoverable mb-1"]],null,[[null,"click"]],function(l,n,u){var t=!0,e=l.component;return"click"===n&&(t=!1!==e.viewQuest(l.context.$implicit)&&t),t},null,null)),(l()(),t.qb(1,0,null,null,7,"div",[["class","columns col-gapless"]],null,null,null,null,null)),(l()(),t.hb(16777216,null,null,1,null,lu)),t.pb(3,16384,null,0,p.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null),(l()(),t.qb(4,0,null,null,4,"div",[["class","column"]],null,null,null,null,null)),(l()(),t.qb(5,0,null,null,3,"span",[],null,null,null,null,null)),t.pb(6,278528,null,0,p.i,[t.t,t.u,t.k,t.E],{ngClass:[0,"ngClass"]},null),t.Db(7,{"text-gray":0}),(l()(),t.Ib(8,null,[" "," "]))],function(l,n){l(n,3,0,n.context.$implicit.active);var u=l(n,7,0,!n.context.$implicit.visible);l(n,6,0,u)},function(l,n){l(n,8,0,n.context.$implicit.name)})}function uu(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,2,"div",[],null,null,null,null,null)),(l()(),t.hb(16777216,null,null,1,null,nu)),t.pb(2,278528,null,0,p.j,[t.P,t.M,t.t],{ngForOf:[0,"ngForOf"]},null)],function(l,n){l(n,2,0,n.component.quests)},null)}function tu(l){return t.Kb(0,[(l()(),t.hb(16777216,null,null,1,null,Jn)),t.pb(1,16384,null,0,p.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null),(l()(),t.hb(16777216,null,null,1,null,uu)),t.pb(3,16384,null,0,p.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null)],function(l,n){var u=n.component;l(n,1,0,u.loading),l(n,3,0,u.quests)},null)}var eu=u("nmfD"),iu=function(){function l(){this.diceOptions=[{n:4,src:"/assets/dice/d4.png"},{n:6,src:"/assets/dice/d6.png"},{n:8,src:"/assets/dice/d8.png"},{n:10,src:"/assets/dice/d10.png"},{n:12,src:"/assets/dice/d12.png"},{n:20,src:"/assets/dice/d20.png"}],this.dieCountOptions=[1,2,3,4,5,6,7,8,9,10,12]}return l.prototype.ngOnInit=function(){},l.prototype.selectDie=function(l){this.die=l},l.prototype.selectDieCount=function(l){this.dieCount=l,this.roll()},l.prototype.roll=function(){for(var l=[],n=new eu.Chance,u=0;u<this.dieCount;u++){var t=n.integer({min:1,max:this.die.n});l.push({dieValue:this.die.n,rollValue:t})}this.rollResults=l},l.prototype.reset=function(){this.die=void 0,this.dieCount=void 0,this.rollResults=void 0},Object.defineProperty(l.prototype,"resultTotal",{get:function(){return this.rollResults?this.rollResults.map(function(l){return l.rollValue}).reduce(function(l,n){return l+n}):0},enumerable:!0,configurable:!0}),l}(),ou=t.ob({encapsulation:0,styles:[[".rotate-scale-up[_ngcontent-%COMP%]{-webkit-animation:650ms cubic-bezier(.165,.84,.44,1) infinite both rotate-scale-up;animation:650ms cubic-bezier(.165,.84,.44,1) infinite both rotate-scale-up}@-webkit-keyframes rotate-scale-up{0%{-webkit-transform:scale(1) rotateZ(0);transform:scale(1) rotateZ(0)}50%{-webkit-transform:scale(1.4) rotateZ(180deg);transform:scale(1.4) rotateZ(180deg)}100%{-webkit-transform:scale(1) rotateZ(360deg);transform:scale(1) rotateZ(360deg)}}@keyframes rotate-scale-up{0%{-webkit-transform:scale(1) rotateZ(0);transform:scale(1) rotateZ(0)}50%{-webkit-transform:scale(1.4) rotateZ(180deg);transform:scale(1.4) rotateZ(180deg)}100%{-webkit-transform:scale(1) rotateZ(360deg);transform:scale(1) rotateZ(360deg)}}"]],data:{}});function ru(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,1,"div",[["class","column col-4 col-md-2 col-sm-4 text-center hoverable"]],null,[[null,"click"]],function(l,n,u){var t=!0,e=l.component;return"click"===n&&(t=!1!==e.selectDie(l.context.$implicit)&&t),t},null,null)),(l()(),t.qb(1,0,null,null,0,"img",[["width","45"]],[[8,"src",4]],null,null,null,null))],null,function(l,n){l(n,1,0,n.context.$implicit.src)})}function au(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,2,"div",[["class","columns"]],null,null,null,null,null)),(l()(),t.hb(16777216,null,null,1,null,ru)),t.pb(2,278528,null,0,p.j,[t.P,t.M,t.t],{ngForOf:[0,"ngForOf"]},null)],function(l,n){l(n,2,0,n.component.diceOptions)},null)}function cu(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,4,"div",[["class","column mb-1"]],null,null,null,null,null)),t.pb(1,278528,null,0,p.i,[t.t,t.u,t.k,t.E],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),t.Db(2,{"col-12":0,"col-4 col-md-2 col-sm-4":1}),(l()(),t.qb(3,0,null,null,1,"button",[["class","btn btn-primary w-100"]],null,[[null,"click"]],function(l,n,u){var t=!0,e=l.component;return"click"===n&&(t=!1!==e.selectDieCount(l.context.$implicit)&&t),t},null,null)),(l()(),t.Ib(4,null,[" "," "]))],function(l,n){var u=l(n,2,0,1===n.context.$implicit,1!==n.context.$implicit);l(n,1,0,"column mb-1",u)},function(l,n){l(n,4,0,n.context.$implicit)})}function su(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,2,"div",[["class","columns"]],null,null,null,null,null)),(l()(),t.hb(16777216,null,null,1,null,cu)),t.pb(2,278528,null,0,p.j,[t.P,t.M,t.t],{ngForOf:[0,"ngForOf"]},null)],function(l,n){l(n,2,0,n.component.dieCountOptions)},null)}function pu(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,5,"div",[["class","column col-4 col-md-2 col-sm-4 col-mx-auto mb-1 text-center"]],null,null,null,null,null)),(l()(),t.qb(1,0,null,null,2,"img",[["width","24"]],[[8,"src",4]],null,null,null,null)),t.pb(2,278528,null,0,p.i,[t.t,t.u,t.k,t.E],{ngClass:[0,"ngClass"]},null),t.Db(3,{"rotate-scale-up":0}),(l()(),t.qb(4,0,null,null,1,"div",[["class","text-bold"]],null,null,null,null,null)),(l()(),t.Ib(5,null,[" "," "]))],function(l,n){var u=l(n,3,0,n.context.$implicit.rollValue===n.context.$implicit.dieValue);l(n,2,0,u)},function(l,n){l(n,1,0,n.component.die.src),l(n,5,0,n.context.$implicit.rollValue)})}function bu(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,14,"div",[["class","columns"]],null,null,null,null,null)),(l()(),t.qb(1,0,null,null,2,"div",[["class","column text-center col-12"]],null,null,null,null,null)),(l()(),t.qb(2,0,null,null,1,"h4",[],null,null,null,null,null)),(l()(),t.Ib(3,null,["",""])),(l()(),t.hb(16777216,null,null,1,null,pu)),t.pb(5,278528,null,0,p.j,[t.P,t.M,t.t],{ngForOf:[0,"ngForOf"]},null),(l()(),t.qb(6,0,null,null,8,"div",[["class","column col-12 text-center"]],null,null,null,null,null)),(l()(),t.qb(7,0,null,null,3,"button",[["class","btn btn-sm"]],null,[[null,"click"]],function(l,n,u){var t=!0,e=l.component;return"click"===n&&(t=!1!==e.reset()&&t),t},null,null)),(l()(),t.qb(8,0,null,null,0,"i",[["class","icon icon-cross"]],null,null,null,null,null)),(l()(),t.qb(9,0,null,null,1,"span",[["class","hide-sm"]],null,null,null,null,null)),(l()(),t.Ib(-1,null,[" Reset"])),(l()(),t.qb(11,0,null,null,3,"button",[["class","btn btn-sm ml-2"]],null,[[null,"click"]],function(l,n,u){var t=!0,e=l.component;return"click"===n&&(t=!1!==e.roll()&&t),t},null,null)),(l()(),t.qb(12,0,null,null,0,"i",[["class","icon icon-refresh"]],null,null,null,null,null)),(l()(),t.qb(13,0,null,null,1,"span",[["class","hide-sm"]],null,null,null,null,null)),(l()(),t.Ib(-1,null,[" Roll Again"]))],function(l,n){l(n,5,0,n.component.rollResults)},function(l,n){l(n,3,0,n.component.resultTotal)})}function du(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,6,"div",[["class","card p-1"]],null,null,null,null,null)),(l()(),t.hb(16777216,null,null,1,null,au)),t.pb(2,16384,null,0,p.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null),(l()(),t.hb(16777216,null,null,1,null,su)),t.pb(4,16384,null,0,p.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null),(l()(),t.hb(16777216,null,null,1,null,bu)),t.pb(6,16384,null,0,p.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null)],function(l,n){var u=n.component;l(n,2,0,!u.die),l(n,4,0,u.die&&!u.dieCount),l(n,6,0,u.rollResults)},null)}var fu=function(){function l(l,n,u){this.campaignService=l,this.router=n,this.route=u}return l.prototype.ngOnInit=function(){},l.prototype.userEntities=function(l){return this.campaign.entities.filter(function(n){return n.userId===l&&!n.spawnable})},l.prototype.selectEntity=function(l){this.router.navigate(["..","entities",l.id],{relativeTo:this.route})},l.prototype.manageQuests=function(){this.router.navigate(["campaigns",this.campaign.id,"quests"])},l.prototype.manageMembers=function(){this.router.navigate(["campaigns",this.campaign.id,"members"])},Object.defineProperty(l.prototype,"campaign",{get:function(){return this.campaignService.campaign},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"editable",{get:function(){return this.campaignService.canEdit},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"entityPresets",{get:function(){return this.campaign.entityPresets.filter(function(l){return l.playerCreatable})},enumerable:!0,configurable:!0}),l}(),hu=t.ob({encapsulation:0,styles:[[".d-flex[_ngcontent-%COMP%] > .chip[_ngcontent-%COMP%]{flex-shrink:0;flex-grow:0}.d-flex[_ngcontent-%COMP%]{flex-wrap:wrap}.hoverable-chip[_ngcontent-%COMP%]{transition:-webkit-transform .25s;transition:transform .25s;transition:transform .25s,-webkit-transform .25s}.hoverable-chip[_ngcontent-%COMP%]:hover{-webkit-transform:scale(1.05);transform:scale(1.05);cursor:pointer;background-color:#5755d9;color:#fff}"]],data:{}});function gu(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,4,"li",[["class","menu-item"]],null,null,null,null,null)),(l()(),t.qb(1,0,null,null,3,"a",[],[[1,"target",0],[8,"href",4]],[[null,"click"]],function(l,n,u){var e=!0;return"click"===n&&(e=!1!==t.Ab(l,2).onClick(u.button,u.ctrlKey,u.metaKey,u.shiftKey)&&e),e},null,null)),t.pb(2,671744,null,0,r.m,[r.k,r.a,p.h],{routerLink:[0,"routerLink"]},null),t.Bb(3,5),(l()(),t.Ib(4,null,["Create ",""]))],function(l,n){var u=l(n,3,0,"/campaigns",n.component.campaign.id,"entities",n.context.$implicit.id,"create");l(n,2,0,u)},function(l,n){l(n,1,0,t.Ab(n,2).target,t.Ab(n,2).href),l(n,4,0,n.context.$implicit.name)})}function mu(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,4,"li",[["class","menu-item"]],null,null,null,null,null)),(l()(),t.qb(1,0,null,null,3,"a",[],[[1,"target",0],[8,"href",4]],[[null,"click"]],function(l,n,u){var e=!0;return"click"===n&&(e=!1!==t.Ab(l,2).onClick(u.button,u.ctrlKey,u.metaKey,u.shiftKey)&&e),e},null,null)),t.pb(2,671744,null,0,r.m,[r.k,r.a,p.h],{routerLink:[0,"routerLink"]},null),t.Bb(3,3),(l()(),t.Ib(-1,null,["Settings"]))],function(l,n){var u=l(n,3,0,"/campaigns",n.component.campaign.id,"settings");l(n,2,0,u)},function(l,n){l(n,1,0,t.Ab(n,2).target,t.Ab(n,2).href)})}function vu(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,4,"div",[["class","column col-auto col-ml-auto"]],null,null,null,null,null)),(l()(),t.qb(1,0,null,null,3,"button",[["class","btn btn-sm"]],null,[[null,"click"]],function(l,n,u){var t=!0,e=l.component;return"click"===n&&(t=!1!==e.manageMembers()&&t),t},null,null)),(l()(),t.qb(2,0,null,null,1,"span",[["class","hide-sm"]],null,null,null,null,null)),(l()(),t.Ib(-1,null,["Manage "])),(l()(),t.qb(4,0,null,null,0,"i",[["class","icon icon-menu"]],null,null,null,null,null))],null,null)}function yu(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,2,"span",[["class","chip hoverable-chip"]],null,[[null,"click"]],function(l,n,u){var t=!0,e=l.component;return"click"===n&&(t=!1!==e.selectEntity(l.context.$implicit)&&t),t},null,null)),(l()(),t.qb(1,0,null,null,0,"img",[["class","avatar avatar-sm"]],[[8,"src",4]],null,null,null,null)),(l()(),t.Ib(2,null,[" "," "]))],null,function(l,n){l(n,1,0,t.sb(1,"https://res.cloudinary.com/dqhk8k6iv/image/upload/t_thumb/",n.context.$implicit.imageId,"")),l(n,2,0,n.context.$implicit.name)})}function Cu(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,9,"div",[["class","tile tile-centered mb-2"]],null,null,null,null,null)),(l()(),t.qb(1,0,null,null,2,"div",[["class","tile-icon"]],null,null,null,null,null)),(l()(),t.qb(2,0,null,null,1,"figure",[["class","avatar"]],null,null,null,null,null)),(l()(),t.qb(3,0,null,null,0,"img",[],[[8,"src",4]],null,null,null,null)),(l()(),t.qb(4,0,null,null,5,"div",[["class","tile-content"]],null,null,null,null,null)),(l()(),t.qb(5,0,null,null,1,"div",[["class","tile-title"]],null,null,null,null,null)),(l()(),t.Ib(6,null,["",""])),(l()(),t.qb(7,0,null,null,2,"div",[["class","d-flex"]],null,null,null,null,null)),(l()(),t.hb(16777216,null,null,1,null,yu)),t.pb(9,278528,null,0,p.j,[t.P,t.M,t.t],{ngForOf:[0,"ngForOf"]},null)],function(l,n){l(n,9,0,n.component.userEntities(n.context.$implicit.user.id))},function(l,n){l(n,3,0,n.context.$implicit.user.pictureURL),l(n,6,0,n.context.$implicit.user.username)})}function Iu(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,4,"div",[["class","column col-auto col-ml-auto"]],null,null,null,null,null)),(l()(),t.qb(1,0,null,null,3,"button",[["class","btn btn-sm"]],null,[[null,"click"]],function(l,n,u){var t=!0,e=l.component;return"click"===n&&(t=!1!==e.manageQuests()&&t),t},null,null)),(l()(),t.qb(2,0,null,null,1,"span",[["class","hide-sm"]],null,null,null,null,null)),(l()(),t.Ib(-1,null,["Manage "])),(l()(),t.qb(4,0,null,null,0,"i",[["class","icon icon-menu"]],null,null,null,null,null))],null,null)}function qu(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,5,"button",[["class","btn"]],null,[[null,"click"]],function(l,n,u){var e=!0;return"click"===n&&(e=!1!==t.Ab(l,3).onClick()&&e),e},null,null)),t.pb(1,278528,null,0,p.i,[t.t,t.u,t.k,t.E],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),t.Db(2,{"mb-2":0}),t.pb(3,16384,null,0,r.l,[r.k,r.a,[8,null],t.E,t.k],{routerLink:[0,"routerLink"]},null),t.Bb(4,5),(l()(),t.Ib(5,null,[" "," "]))],function(l,n){var u=n.component,t=l(n,2,0,n.context.index!==u.campaign.conceptTypes.length-1);l(n,1,0,"btn",t);var e=l(n,4,0,"/campaigns",u.campaign.id,"concepts",n.context.$implicit.id,"manage");l(n,3,0,e)},function(l,n){l(n,5,0,n.context.$implicit.pluralForm)})}function ku(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,2,"div",[["class","card mt-2 p-2"]],null,null,null,null,null)),(l()(),t.hb(16777216,null,null,1,null,qu)),t.pb(2,278528,null,0,p.j,[t.P,t.M,t.t],{ngForOf:[0,"ngForOf"]},null)],function(l,n){l(n,2,0,n.component.campaign.conceptTypes)},null)}function Au(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,50,"div",[["class","container grid-xl"]],null,null,null,null,null)),(l()(),t.qb(1,0,null,null,16,"div",[["class","columns"]],null,null,null,null,null)),(l()(),t.qb(2,0,null,null,2,"div",[["class","column col-9 col-lg-8 col-md-12 hide-md"]],null,null,null,null,null)),(l()(),t.qb(3,0,null,null,1,"h1",[],null,null,null,null,null)),(l()(),t.Ib(4,null,["",""])),(l()(),t.qb(5,0,null,null,2,"div",[["class","column col-6 col-md-12 show-md"]],null,null,null,null,null)),(l()(),t.qb(6,0,null,null,1,"h3",[],null,null,null,null,null)),(l()(),t.Ib(7,null,["",""])),(l()(),t.qb(8,0,null,null,9,"div",[["class","column col-auto col-ml-auto hide-md"]],null,null,null,null,null)),(l()(),t.qb(9,0,null,null,8,"div",[["class","dropdown dropdown-right"]],null,null,null,null,null)),(l()(),t.qb(10,0,null,null,2,"button",[["class","btn btn-link dropdown-toggle"]],null,null,null,null,null)),(l()(),t.Ib(-1,null,["Menu "])),(l()(),t.qb(12,0,null,null,0,"i",[["class","icon icon-caret"]],null,null,null,null,null)),(l()(),t.qb(13,0,null,null,4,"ul",[["class","menu"]],null,null,null,null,null)),(l()(),t.hb(16777216,null,null,1,null,gu)),t.pb(15,278528,null,0,p.j,[t.P,t.M,t.t],{ngForOf:[0,"ngForOf"]},null),(l()(),t.hb(16777216,null,null,1,null,mu)),t.pb(17,16384,null,0,p.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null),(l()(),t.qb(18,0,null,null,32,"div",[["class","columns"]],null,null,null,null,null)),(l()(),t.qb(19,0,null,null,3,"div",[["class","column col-9 col-xl-8 col-md-12"]],null,null,null,null,null)),(l()(),t.qb(20,0,null,null,2,"dd-quill",[["readOnly","true"]],null,null,null,Sl.b,Sl.a)),t.Fb(5120,null,R.o,function(l){return[l]},[Ol.a]),t.pb(22,1163264,null,0,Ol.a,[f.b,Ml.a,b.a,r.k,P.c,_l.b,Dl.a,Nl.a],{readOnly:[0,"readOnly"],value:[1,"value"]},null),(l()(),t.qb(23,0,null,null,27,"div",[["class","column col-3 col-md-12 col-xl-4 col-ml-auto"]],null,null,null,null,null)),(l()(),t.qb(24,0,null,null,10,"div",[["class","card"]],null,null,null,null,null)),(l()(),t.qb(25,0,null,null,6,"div",[["class","card-header"]],null,null,null,null,null)),(l()(),t.qb(26,0,null,null,5,"div",[["class","columns"]],null,null,null,null,null)),(l()(),t.qb(27,0,null,null,2,"div",[["class","column"]],null,null,null,null,null)),(l()(),t.qb(28,0,null,null,1,"h5",[],null,null,null,null,null)),(l()(),t.Ib(-1,null,["Members"])),(l()(),t.hb(16777216,null,null,1,null,vu)),t.pb(31,16384,null,0,p.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null),(l()(),t.qb(32,0,null,null,2,"div",[["class","card-body"]],null,null,null,null,null)),(l()(),t.hb(16777216,null,null,1,null,Cu)),t.pb(34,278528,null,0,p.j,[t.P,t.M,t.t],{ngForOf:[0,"ngForOf"]},null),(l()(),t.qb(35,0,null,null,10,"div",[["class","card mt-2"]],null,null,null,null,null)),(l()(),t.qb(36,0,null,null,6,"div",[["class","card-header"]],null,null,null,null,null)),(l()(),t.qb(37,0,null,null,5,"div",[["class","columns"]],null,null,null,null,null)),(l()(),t.qb(38,0,null,null,2,"div",[["class","column"]],null,null,null,null,null)),(l()(),t.qb(39,0,null,null,1,"h5",[],null,null,null,null,null)),(l()(),t.Ib(-1,null,["Active Quests"])),(l()(),t.hb(16777216,null,null,1,null,Iu)),t.pb(42,16384,null,0,p.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null),(l()(),t.qb(43,0,null,null,2,"div",[["class","card-body"]],null,null,null,null,null)),(l()(),t.qb(44,0,null,null,1,"dd-quest-quick-view",[],null,null,null,tu,Zn)),t.pb(45,114688,null,0,Wn,[r.k,Yn.a,f.b],null,null),(l()(),t.hb(16777216,null,null,1,null,ku)),t.pb(47,16384,null,0,p.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null),(l()(),t.qb(48,0,null,null,2,"div",[["class","mt-2"]],null,null,null,null,null)),(l()(),t.qb(49,0,null,null,1,"dd-quick-dice",[],null,null,null,du,ou)),t.pb(50,114688,null,0,iu,[],null,null)],function(l,n){var u=n.component;l(n,15,0,u.entityPresets),l(n,17,0,u.editable),l(n,22,0,"true",u.campaign.content),l(n,31,0,u.editable),l(n,34,0,u.campaign.members),l(n,42,0,u.editable),l(n,45,0),l(n,47,0,u.campaign.conceptTypes&&u.campaign.conceptTypes.length>0),l(n,50,0)},function(l,n){var u=n.component;l(n,4,0,u.campaign.name),l(n,7,0,u.campaign.name)})}function wu(l){return t.Kb(0,[(l()(),t.hb(16777216,null,null,1,null,Au)),t.pb(1,16384,null,0,p.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null)],function(l,n){l(n,1,0,n.component.campaign)},null)}function Pu(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,1,"dd-campaign-landing",[],null,null,null,wu,hu)),t.pb(1,114688,null,0,fu,[f.b,r.k,r.a],null,null)],function(l,n){l(n,1,0)},null)}var xu=t.mb("dd-campaign-landing",fu,Pu,{},{},[]),Eu=function(){function l(){}return l.prototype.ngOnInit=function(){},l}(),Tu=t.ob({encapsulation:0,styles:[[""]],data:{}});function Su(l){return t.Kb(0,[(l()(),t.qb(0,16777216,null,null,1,"router-outlet",[],null,null,null,null,null)),t.pb(1,212992,null,0,r.o,[r.b,t.P,t.j,[8,null],t.h],null,null)],function(l,n){l(n,1,0)},null)}function Ou(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,1,"dd-entity",[],null,null,null,Su,Tu)),t.pb(1,114688,null,0,Eu,[],null,null)],function(l,n){l(n,1,0)},null)}var Mu=t.mb("dd-entity",Eu,Ou,{},{},[]),_u=function(){function l(){this.modifiers=[],this.mode="major",this.editable=!1,this.edit=new t.m}return l.prototype.ngOnInit=function(){},l.prototype.editField=function(l){this.edit.emit(l)},l.prototype.trackField=function(l,n){return n.field.name},l.prototype.getModifiers=function(l){return this.modifiers.filter(function(n){return n.config&&n.config.options&&n.config.options.modifierFor===l&&null!==n.field.value&&void 0!==n.field.value})},l.prototype.getModifierString=function(l){return l.map(function(l){return l.field.value}).join(" ")},l}(),Du=t.ob({encapsulation:0,styles:[[""]],data:{}});function Nu(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,1,"figure",[["class","avatar avatar"]],null,null,null,null,null)),(l()(),t.qb(1,0,null,null,0,"img",[],[[8,"src",4]],null,null,null,null))],null,function(l,n){l(n,1,0,t.sb(1,"https://res.cloudinary.com/dqhk8k6iv/image/upload/t_thumb/",n.parent.context.$implicit.config.imageId,""))})}function Lu(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,1,"sup",[],null,null,null,null,null)),(l()(),t.Ib(1,null,["",""]))],null,function(l,n){var u=n.component;l(n,1,0,u.getModifierString(u.getModifiers(n.parent.context.$implicit)))})}function Fu(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,10,"div",[["class","column col-2 col-md-3 col-sm-5 col-mx-auto text-center"]],null,[[null,"click"]],function(l,n,u){var t=!0,e=l.component;return"click"===n&&(t=!1!==e.editField(l.context.$implicit)&&t),t},null,null)),t.pb(1,278528,null,0,p.i,[t.t,t.u,t.k,t.E],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),t.Db(2,{"c-hand":0}),(l()(),t.qb(3,0,null,null,3,"div",[["class","h5 no-select"]],null,null,null,null,null)),(l()(),t.hb(16777216,null,null,1,null,Nu)),t.pb(5,16384,null,0,p.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null),(l()(),t.Ib(6,null,[" "," "])),(l()(),t.qb(7,0,null,null,3,"div",[["class","h4 text-bold"]],null,null,null,null,null)),(l()(),t.Ib(8,null,[" "," "])),(l()(),t.hb(16777216,null,null,1,null,Lu)),t.pb(10,16384,null,0,p.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null)],function(l,n){var u=n.component,t=l(n,2,0,u.editable);l(n,1,0,"column col-2 col-md-3 col-sm-5 col-mx-auto text-center",t),l(n,5,0,n.context.$implicit.config&&n.context.$implicit.config.imageId),l(n,10,0,u.getModifiers(n.context.$implicit.field.name).length>0)},function(l,n){l(n,6,0,n.context.$implicit.config.name),l(n,8,0,n.context.$implicit.field.value)})}function Ku(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,2,"div",[["class","columns mt-2"]],null,null,null,null,null)),(l()(),t.hb(16777216,null,null,1,null,Fu)),t.pb(2,278528,null,0,p.j,[t.P,t.M,t.t],{ngForOf:[0,"ngForOf"],ngForTrackBy:[1,"ngForTrackBy"]},null)],function(l,n){var u=n.component;l(n,2,0,u.fields,u.trackField)},null)}function ju(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,2,"div",[],null,null,null,null,null)),(l()(),t.qb(1,0,null,null,1,"figure",[["class","avatar avatar-sm"]],null,null,null,null,null)),(l()(),t.qb(2,0,null,null,0,"img",[],[[8,"src",4]],null,null,null,null))],null,function(l,n){l(n,2,0,t.sb(1,"https://res.cloudinary.com/dqhk8k6iv/image/upload/t_thumb/",n.parent.context.$implicit.config.imageId,""))})}function Gu(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,1,"sup",[],null,null,null,null,null)),(l()(),t.Ib(1,null,["(",")"]))],null,function(l,n){var u=n.component;l(n,1,0,u.getModifierString(u.getModifiers(n.parent.context.$implicit.field.name)))})}function Uu(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,10,"div",[["class","column col-2 col-md-3 col-sm-4 col-mx-auto text-center"]],null,[[null,"click"]],function(l,n,u){var t=!0,e=l.component;return"click"===n&&(t=!1!==e.editField(l.context.$implicit)&&t),t},null,null)),t.pb(1,278528,null,0,p.i,[t.t,t.u,t.k,t.E],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),t.Db(2,{"c-hand":0}),(l()(),t.qb(3,0,null,null,3,"div",[["class","h6 no-select"]],null,null,null,null,null)),(l()(),t.hb(16777216,null,null,1,null,ju)),t.pb(5,16384,null,0,p.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null),(l()(),t.Ib(6,null,[" "," "])),(l()(),t.qb(7,0,null,null,3,"div",[["class","h5"]],null,null,null,null,null)),(l()(),t.Ib(8,null,[" "," "])),(l()(),t.hb(16777216,null,null,1,null,Gu)),t.pb(10,16384,null,0,p.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null)],function(l,n){var u=n.component,t=l(n,2,0,u.editable);l(n,1,0,"column col-2 col-md-3 col-sm-4 col-mx-auto text-center",t),l(n,5,0,n.context.$implicit.config&&n.context.$implicit.config.imageId),l(n,10,0,u.getModifiers(n.context.$implicit.field.name).length>0)},function(l,n){l(n,6,0,n.context.$implicit.config.name),l(n,8,0,n.context.$implicit.field.value)})}function Ru(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,2,"div",[["class","columns mt-2"]],null,null,null,null,null)),(l()(),t.hb(16777216,null,null,1,null,Uu)),t.pb(2,278528,null,0,p.j,[t.P,t.M,t.t],{ngForOf:[0,"ngForOf"],ngForTrackBy:[1,"ngForTrackBy"]},null)],function(l,n){var u=n.component;l(n,2,0,u.fields,u.trackField)},null)}function Vu(l){return t.Kb(0,[(l()(),t.hb(16777216,null,null,1,null,Ku)),t.pb(1,16384,null,0,p.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null),(l()(),t.hb(16777216,null,null,1,null,Ru)),t.pb(3,16384,null,0,p.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null)],function(l,n){var u=n.component;l(n,1,0,"major"===u.mode),l(n,3,0,"normal"===u.mode)},null)}var Hu=u("7IS7"),$u=u("qcJQ"),Bu=u("0ezk"),zu=u("btaL"),Xu=function(){function l(){this.editable=!1,this.edit=new t.m}return l.prototype.ngOnInit=function(){},l.prototype.editField=function(l){this.edit.emit(l)},l.prototype.trackField=function(l,n){return n.field.name},l}(),Qu=t.ob({encapsulation:0,styles:[[""]],data:{}});function Yu(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,1,"figure",[["class","avatar avatar-xs"]],null,null,null,null,null)),(l()(),t.qb(1,0,null,null,0,"img",[],[[8,"src",4]],null,null,null,null))],null,function(l,n){l(n,1,0,t.sb(1,"https://res.cloudinary.com/dqhk8k6iv/image/upload/t_thumb/",n.parent.context.$implicit.config.imageId,""))})}function Wu(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,8,"tr",[],null,[[null,"click"]],function(l,n,u){var t=!0,e=l.component;return"click"===n&&(t=!1!==e.editField(l.context.$implicit)&&t),t},null,null)),t.pb(1,278528,null,0,p.i,[t.t,t.u,t.k,t.E],{ngClass:[0,"ngClass"]},null),t.Db(2,{"c-hand":0}),(l()(),t.qb(3,0,null,null,3,"td",[["class","no-select py-0"]],null,null,null,null,null)),(l()(),t.hb(16777216,null,null,1,null,Yu)),t.pb(5,16384,null,0,p.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null),(l()(),t.Ib(6,null,[" "," "])),(l()(),t.qb(7,0,null,null,1,"td",[["class","text-bold py-0 text-right"]],null,null,null,null,null)),(l()(),t.Ib(8,null,["",""]))],function(l,n){var u=l(n,2,0,n.component.editable);l(n,1,0,u),l(n,5,0,n.context.$implicit.config&&n.context.$implicit.config.imageId)},function(l,n){l(n,6,0,n.context.$implicit.field.name),l(n,8,0,n.context.$implicit.field.value)})}function Zu(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,10,"div",[["class","table table-striped"]],null,null,null,null,null)),t.pb(1,278528,null,0,p.i,[t.t,t.u,t.k,t.E],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),t.Db(2,{"table-hover":0}),(l()(),t.qb(3,0,null,null,4,"thead",[],null,null,null,null,null)),(l()(),t.qb(4,0,null,null,3,"tr",[],null,null,null,null,null)),(l()(),t.qb(5,0,null,null,1,"th",[["class","w-100"]],null,null,null,null,null)),(l()(),t.Ib(-1,null,["Minor Attributes"])),(l()(),t.qb(7,0,null,null,0,"th",[],null,null,null,null,null)),(l()(),t.qb(8,0,null,null,2,"tbody",[],null,null,null,null,null)),(l()(),t.hb(16777216,null,null,1,null,Wu)),t.pb(10,278528,null,0,p.j,[t.P,t.M,t.t],{ngForOf:[0,"ngForOf"],ngForTrackBy:[1,"ngForTrackBy"]},null)],function(l,n){var u=n.component,t=l(n,2,0,u.editable);l(n,1,0,"table table-striped",t),l(n,10,0,u.fields,u.trackField)},null)}var Ju=u("hU6i"),lt=u("lD+H"),nt=function(){function l(l){this.campaignService=l}return l.prototype.ngOnInit=function(){},l.prototype.editAttribute=function(l,n,u){return t=this,void 0,i=function(){var t,e,i,o=this;return function(l,n){var u,t,e,i,o={label:0,sent:function(){if(1&e[0])throw e[1];return e[1]},trys:[],ops:[]};return i={next:r(0),throw:r(1),return:r(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function r(i){return function(r){return function(i){if(u)throw new TypeError("Generator is already executing.");for(;o;)try{if(u=1,t&&(e=2&i[0]?t.return:i[0]?t.throw||((e=t.return)&&e.call(t),0):t.next)&&!(e=e.call(t,i[1])).done)return e;switch(t=0,e&&(i=[2&i[0],e.value]),i[0]){case 0:case 1:e=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,t=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!(e=(e=o.trys).length>0&&e[e.length-1])&&(6===i[0]||2===i[0])){o=0;continue}if(3===i[0]&&(!e||i[1]>e[0]&&i[1]<e[3])){o.label=i[1];break}if(6===i[0]&&o.label<e[1]){o.label=e[1],e=i;break}if(e&&o.label<e[2]){o.label=e[2],o.ops.push(i);break}e[2]&&o.ops.pop(),o.trys.pop();continue}i=n.call(l,o)}catch(r){i=[6,r],t=0}finally{u=e=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,r])}}}(this,function(r){if(this.config=l,this.modifiers=u,this.control=new R.h(n),this.modifiers)for(this.modifiersGroup=new R.k({}),t=0,e=this.modifiers;t<e.length;t++)i=e[t],this.modifiersGroup.addControl(i.config.name,new R.h(i.field.value));return[2,this.modal.open().then(function(l){return o.config=void 0,o.modifiers=void 0,o.modifiersGroup=void 0,l})]})},new((e=void 0)||(e=Promise))(function(l,n){function u(l){try{r(i.next(l))}catch(u){n(u)}}function o(l){try{r(i.throw(l))}catch(u){n(u)}}function r(n){n.done?l(n.value):new e(function(l){l(n.value)}).then(u,o)}r((i=i.apply(t,[])).next())});var t,e,i},l.prototype.trackModifier=function(l){return l},l.prototype.ok=function(){this.control.invalid||this.modal.close({value:this.control.value,mods:this.modifiersGroup?this.modifiersGroup.value:null})},l.prototype.cancel=function(){this.modal.close(null)},l}(),ut=t.ob({encapsulation:0,styles:[[""]],data:{}});function tt(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,2,"div",[["modal-header",""]],null,null,null,null,null)),(l()(),t.qb(1,0,null,null,1,"div",[["class","modal-title"]],null,null,null,null,null)),(l()(),t.Ib(2,null,["Edit ",""]))],null,function(l,n){l(n,2,0,n.component.config.name)})}function et(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,1,"dd-dynamic-field",[["showLabel","false"]],null,null,null,Ju.b,Ju.a)),t.pb(1,114688,null,0,lt.a,[],{control:[0,"control"],config:[1,"config"],showLabel:[2,"showLabel"]},null)],function(l,n){l(n,1,0,n.component.modifiersGroup.get(n.context.$implicit.config.name),n.context.$implicit.config,"false")},null)}function it(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,2,"div",[],null,null,null,null,null)),(l()(),t.hb(16777216,null,null,1,null,et)),t.pb(2,278528,null,0,p.j,[t.P,t.M,t.t],{ngForOf:[0,"ngForOf"],ngForTrackBy:[1,"ngForTrackBy"]},null)],function(l,n){var u=n.component;l(n,2,0,u.modifiers,u.trackModifier)},null)}function ot(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,9,"div",[["modal-body",""]],null,null,null,null,null)),(l()(),t.qb(1,0,null,null,8,"form",[["novalidate",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngSubmit"],[null,"submit"],[null,"reset"]],function(l,n,u){var e=!0,i=l.component;return"submit"===n&&(e=!1!==t.Ab(l,3).onSubmit(u)&&e),"reset"===n&&(e=!1!==t.Ab(l,3).onReset()&&e),"ngSubmit"===n&&(e=!1!==i.ok()&&e),e},null,null)),t.pb(2,16384,null,0,R.B,[],null,null),t.pb(3,4210688,[["attrForm",4]],0,R.s,[[8,null],[8,null]],null,{ngSubmit:"ngSubmit"}),t.Fb(2048,null,R.c,null,[R.s]),t.pb(5,16384,null,0,R.r,[[4,R.c]],null,null),(l()(),t.qb(6,0,null,null,1,"dd-dynamic-field",[["showLabel","false"]],null,null,null,Ju.b,Ju.a)),t.pb(7,114688,null,0,lt.a,[],{control:[0,"control"],config:[1,"config"],showLabel:[2,"showLabel"]},null),(l()(),t.hb(16777216,null,null,1,null,it)),t.pb(9,16384,null,0,p.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null)],function(l,n){var u=n.component;l(n,7,0,u.control,u.config,"false"),l(n,9,0,u.modifiers&&u.modifiersGroup)},function(l,n){l(n,1,0,t.Ab(n,5).ngClassUntouched,t.Ab(n,5).ngClassTouched,t.Ab(n,5).ngClassPristine,t.Ab(n,5).ngClassDirty,t.Ab(n,5).ngClassValid,t.Ab(n,5).ngClassInvalid,t.Ab(n,5).ngClassPending)})}function rt(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,4,"div",[["modal-footer",""]],null,null,null,null,null)),(l()(),t.qb(1,0,null,null,1,"button",[["class","btn btn-primary mr-2"]],null,[[null,"click"]],function(l,n,u){var t=!0,e=l.component;return"click"===n&&(t=!1!==e.cancel()&&t),t},null,null)),(l()(),t.Ib(-1,null,["Cancel"])),(l()(),t.qb(3,0,null,null,1,"button",[["class","btn"]],[[8,"disabled",0]],[[null,"click"]],function(l,n,u){var t=!0,e=l.component;return"click"===n&&(t=!1!==e.ok()&&t),t},null,null)),(l()(),t.Ib(-1,null,[" Save "]))],null,function(l,n){l(n,3,0,n.component.control.invalid)})}function at(l){return t.Kb(0,[t.Gb(402653184,1,{modal:0}),(l()(),t.qb(1,0,null,null,7,"dd-modal",[],null,null,null,fl.b,fl.a)),t.pb(2,114688,[[1,4],["modal",4]],0,hl.a,[],null,null),(l()(),t.hb(16777216,null,0,1,null,tt)),t.pb(4,16384,null,0,p.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null),(l()(),t.hb(16777216,null,1,1,null,ot)),t.pb(6,16384,null,0,p.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null),(l()(),t.hb(16777216,null,2,1,null,rt)),t.pb(8,16384,null,0,p.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null)],function(l,n){var u=n.component;l(n,2,0),l(n,4,0,u.config&&u.control),l(n,6,0,u.config&&u.control),l(n,8,0,u.config&&u.control)},null)}var ct=u("AxCL"),st=u("dtdw"),pt=u("DwCd"),bt=function(){return(bt=Object.assign||function(l){for(var n,u=1,t=arguments.length;u<t;u++)for(var e in n=arguments[u])Object.prototype.hasOwnProperty.call(n,e)&&(l[e]=n[e]);return l}).apply(this,arguments)},dt=function(l,n,u,t){return new(u||(u=Promise))(function(e,i){function o(l){try{a(t.next(l))}catch(n){i(n)}}function r(l){try{a(t.throw(l))}catch(n){i(n)}}function a(l){l.done?e(l.value):new u(function(n){n(l.value)}).then(o,r)}a((t=t.apply(l,n||[])).next())})},ft=function(l,n){var u,t,e,i,o={label:0,sent:function(){if(1&e[0])throw e[1];return e[1]},trys:[],ops:[]};return i={next:r(0),throw:r(1),return:r(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function r(i){return function(r){return function(i){if(u)throw new TypeError("Generator is already executing.");for(;o;)try{if(u=1,t&&(e=2&i[0]?t.return:i[0]?t.throw||((e=t.return)&&e.call(t),0):t.next)&&!(e=e.call(t,i[1])).done)return e;switch(t=0,e&&(i=[2&i[0],e.value]),i[0]){case 0:case 1:e=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,t=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!(e=(e=o.trys).length>0&&e[e.length-1])&&(6===i[0]||2===i[0])){o=0;continue}if(3===i[0]&&(!e||i[1]>e[0]&&i[1]<e[3])){o.label=i[1];break}if(6===i[0]&&o.label<e[1]){o.label=e[1],e=i;break}if(e&&o.label<e[2]){o.label=e[2],o.ops.push(i);break}e[2]&&o.ops.pop(),o.trys.pop();continue}i=n.call(l,o)}catch(r){i=[6,r],t=0}finally{u=e=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,r])}}},ht=function(){function l(l,n,u,t,e,i,o){this.route=l,this.entityService=n,this.campaignService=u,this.sanitizer=t,this.login=e,this.router=i,this.update=o,this.loading=!1,this.saving=!1}return l.prototype.ngOnInit=function(){var l=this;this.route.paramMap.subscribe(function(n){l.update.subscribeEntities([n.get("ent_id")]),l.loadEntity(n.get("ent_id"))}),this._updateHubStatus$=this.update.stateUpdate.subscribe(function(n){n===st.a.CONNECTED&&l.entity&&l.update.subscribeEntities([l.entity.id])})},l.prototype.ngOnDestroy=function(){this.entity&&this.update.unsubscribeEntities([this.entity.id]),this._updateHubStatus$&&this._updateHubStatus$.unsubscribe()},l.prototype.getEntityField=function(l){return this.entity.preset.fields.find(function(n){return n.name===l})},l.prototype.updateEntity=function(){return dt(this,void 0,void 0,function(){var l;return ft(this,function(n){switch(n.label){case 0:this.saving=!0,l=bt({},this.entity,{preset:void 0}),n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.entityService.updateEntity(l)];case 2:return n.sent(),[3,4];case 3:throw n.sent();case 4:return this.saving=!1,[2]}})})},l.prototype.loadEntity=function(l){return dt(this,void 0,void 0,function(){var n;return ft(this,function(u){switch(u.label){case 0:this.loading=!0,u.label=1;case 1:return u.trys.push([1,3,,4]),n=this,[4,this.entityService.getEntity(l)];case 2:return n.entity=u.sent(),[3,4];case 3:throw u.sent();case 4:return this.loading=!1,[2]}})})},l.prototype.editAttribute=function(l){return dt(this,void 0,void 0,function(){var n,u,t,e,i;return ft(this,function(o){switch(o.label){case 0:return this.editable?(n=this.modifiers.filter(function(n){return(n.config&&n.config.options&&n.config.options.modifierFor)===l.config.name}),[4,this.attributeModal.editAttribute(l.config,l.field.value,n)]):[2];case 1:if(null!=(u=o.sent())){for(t=0,e=this.entity.fields;t<e.length;t++)(i=e[t]).name===l.field.name&&(i.value=u.value),u.mods&&void 0!==u.mods[i.name]&&(i.value=u.mods[i.name]);this.updateEntity()}return[2]}})})},l.prototype.onHPEdit=function(l){return dt(this,void 0,void 0,function(){return ft(this,function(n){switch(n.label){case 0:return this.entity.health=l,[4,this.updateEntity()];case 1:return n.sent(),[2]}})})},l.prototype.editCurrency=function(){return dt(this,void 0,void 0,function(){var l;return ft(this,function(n){switch(n.label){case 0:return this.editable?[4,this.attributeModal.editAttribute({name:"Money",type:pt.a.CURRENCY,options:{required:!0,levels:this.campaignService.campaign.currencyMap,trackCoins:this.campaignService.campaign.trackCoins}},this.entity.currency)]:[2];case 1:return null!=(l=n.sent())&&(this.entity.currency=l.value,this.updateEntity()),[2]}})})},l.prototype.editXP=function(){return dt(this,void 0,void 0,function(){var l;return ft(this,function(n){switch(n.label){case 0:return this.editable?[4,this.attributeModal.editAttribute({name:"XP",description:"Experience points that this "+this.entity.preset.name+" has",type:pt.a.INT,options:{required:!0,min:0}},this.entity.xp.toString())]:[2];case 1:return null!=(l=n.sent())&&(this.entity.xp=parseInt(l.value,10),this.updateEntity()),[2]}})})},l.prototype.openLocationOnMap=function(){this.router.navigate(["campaigns",this.campaignService.campaign.id,"maps",this.entity.mapId],{queryParams:{lat:this.entity.lat,lng:this.entity.lng}})},l.prototype.openConceptEntities=function(l){this.router.navigate(["campaigns",this.campaignService.campaign.id,"entities",this.entity.id,"ct",l])},l.prototype.trackAttribute=function(l,n){return n.name},Object.defineProperty(l.prototype,"majorAttributes",{get:function(){var l=this;return(this.entity.fields||[]).map(function(n){return{field:n,config:l.getEntityField(n.name)}}).filter(function(l){return l.config&&l.config.class===ct.a.MAJOR&&l.config.type!==pt.a.TEXT_FORMATTED&&(null===l.config.options.modifierFor||void 0===l.config.options.modifierFor)})},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"normalAttributes",{get:function(){var l=this;return(this.entity.fields||[]).map(function(n){return{field:n,config:l.getEntityField(n.name)}}).filter(function(l){return l.config&&l.config.class===ct.a.NORMAL&&l.config.type!==pt.a.TEXT_FORMATTED&&(null===l.config.options.modifierFor||void 0===l.config.options.modifierFor)})},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"bigTextAttributes",{get:function(){var l=this;return(this.entity.fields||[]).map(function(n){return{field:n,config:l.getEntityField(n.name)}}).filter(function(l){return l.config&&l.config.type===pt.a.TEXT_FORMATTED&&l.field.value})},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"minorAttributes",{get:function(){var l=this;return(this.entity.fields||[]).map(function(n){return{field:n,config:l.getEntityField(n.name)}}).filter(function(l){return l.config&&l.config.class===ct.a.MINOR&&l.config.type!==pt.a.TEXT_FORMATTED})},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"unimportantAttributes",{get:function(){var l=this;return(this.entity.fields||[]).map(function(n){return{field:n,config:l.getEntityField(n.name)}}).filter(function(l){return l.config&&l.config.class===ct.a.UNIMPORTANT&&l.config.type!==pt.a.TEXT_FORMATTED})},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"modifiers",{get:function(){var l=this;return(this.entity.fields||[]).map(function(n){return{field:n,config:l.getEntityField(n.name)}}).filter(function(l){return l.config&&l.config.options&&null!==l.config.options.modifierFor&&void 0!==l.config.options.modifierFor})},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"level",{get:function(){return this.campaignService.calculateLevel(this.entity.xp)},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"xpToNextLevel",{get:function(){return this.campaignService.getXPToNextLevel(this.entity.xp)},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"editable",{get:function(){return this.campaignService.canEdit||this.entity.userId===this.login.id},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"preset",{get:function(){var l=this;return this.entity?this.campaignService.campaign.entityPresets.find(function(n){return n.id===l.entity.entityPresetId}):null},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"user",{get:function(){var l=this;if(this.entity){var n=this.campaign.members.find(function(n){return n.userId===l.entity.userId});return n?n.user:null}return null},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"campaign",{get:function(){return this.campaignService.campaign},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"conceptTypeList",{get:function(){var l=this;return this.preset?this.campaignService.campaign.conceptTypes.filter(function(n){return-1!==l.preset.conceptTypesEnabled.indexOf(n.id)}):[]},enumerable:!0,configurable:!0}),l.prototype.backgroundCSS=function(l){return this.sanitizer.bypassSecurityTrustStyle('linear-gradient(to bottom, rgba(0, 0, 0, 0) 0%, rgba(0, 0, 0, 1) 100%),\n      url("https://res.cloudinary.com/dqhk8k6iv/image/upload/t_chr_blur/'+l+'.jpg")')},l}(),gt=t.ob({encapsulation:0,styles:[[".player-bg[_ngcontent-%COMP%]{background-color:#000;min-height:30vh;margin-top:-.4rem;background-size:cover;background-repeat:no-repeat;background-position:center}#head-container[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:column;justify-content:end}.currency-box[_ngcontent-%COMP%]{background-color:#ffb700;background-image:url(/assets/hp-pattern.png);background-repeat:repeat;background-blend-mode:multiply}.coin-icon[_ngcontent-%COMP%]{margin-bottom:-.4rem}"]],data:{}});function mt(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,0,"div",[["class","loading loading-lg"]],null,null,null,null,null))],null,null)}function vt(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,1,"div",[["class","column"]],null,null,null,null,null)),(l()(),t.Ib(-1,null,["Saving..."]))],null,null)}function yt(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,3,"a",[["class","text-light"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],function(l,n,u){var e=!0;return"click"===n&&(e=!1!==t.Ab(l,1).onClick(u.button,u.ctrlKey,u.metaKey,u.shiftKey)&&e),e},null,null)),t.pb(1,671744,null,0,r.m,[r.k,r.a,p.h],{routerLink:[0,"routerLink"]},null),t.Bb(2,6),(l()(),t.qb(3,0,null,null,0,"i",[["class","icon icon-edit"]],null,null,null,null,null))],function(l,n){var u=n.component,t=l(n,2,0,"/campaigns",u.campaign.id,"entities",u.entity.preset.id,u.entity.id,"edit");l(n,1,0,t)},function(l,n){l(n,0,0,t.Ab(n,1).target,t.Ab(n,1).href)})}function Ct(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,2,"div",[["class","column col-auto mr-1"]],null,null,null,null,null)),(l()(),t.qb(1,0,null,null,1,"div",[],[[8,"innerHTML",1]],null,null,null,null)),t.pb(2,16384,null,0,Q.a,[Y.c],{user:[0,"user"]},null)],function(l,n){l(n,2,0,n.component.user)},function(l,n){l(n,1,0,t.Ab(n,2).html)})}function It(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,7,"div",[["class","text-right"]],null,null,null,null,null)),(l()(),t.qb(1,0,null,null,6,"span",[],null,[[null,"click"]],function(l,n,u){var t=!0,e=l.component;return"click"===n&&(t=!1!==e.editXP()&&t),t},null,null)),t.pb(2,278528,null,0,p.i,[t.t,t.u,t.k,t.E],{ngClass:[0,"ngClass"]},null),t.Db(3,{"c-hand":0}),(l()(),t.qb(4,0,null,null,1,"span",[["class","h5 no-select mb-0"]],null,null,null,null,null)),(l()(),t.Ib(-1,null,["LV. "])),(l()(),t.qb(6,0,null,null,1,"span",[["class","h3 text-bold mb-0"]],null,null,null,null,null)),(l()(),t.Ib(7,null,["",""]))],function(l,n){var u=l(n,3,0,n.component.editable);l(n,2,0,u)},function(l,n){l(n,7,0,n.component.level)})}function qt(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,2,"div",[["class","text-right tooltip"],["data-tooltip","XP / Next Level"]],null,null,null,null,null)),(l()(),t.qb(1,0,null,null,1,"span",[],null,null,null,null,null)),(l()(),t.Ib(2,null,[""," / ",""]))],null,function(l,n){var u=n.component;l(n,2,0,u.entity.xp,u.xpToNextLevel)})}function kt(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,2,"div",[["class","text-italic no-select c-hand"]],null,[[null,"click"]],function(l,n,u){var t=!0,e=l.component;return"click"===n&&(t=!1!==e.openLocationOnMap()&&t),t},null,null)),(l()(),t.Ib(-1,null,[" Location "])),(l()(),t.qb(2,0,null,null,0,"i",[["class","icon icon-location"]],null,null,null,null,null))],null,null)}function At(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,26,"div",[["class","player-bg d-flex"]],[[4,"background-image",null]],null,null,null,null)),(l()(),t.qb(1,0,null,null,25,"div",[["id","head-container"]],null,null,null,null,null)),(l()(),t.qb(2,0,null,null,3,"div",[["class","container grid-xl mb-auto"]],null,null,null,null,null)),(l()(),t.qb(3,0,null,null,2,"div",[["class","columns text-gray"]],null,null,null,null,null)),(l()(),t.hb(16777216,null,null,1,null,vt)),t.pb(5,16384,null,0,p.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null),(l()(),t.qb(6,0,null,null,20,"div",[["class","container grid-xl"]],null,null,null,null,null)),(l()(),t.qb(7,0,null,null,19,"div",[["class","columns text-light mx-0"]],null,null,null,null,null)),(l()(),t.qb(8,0,null,null,10,"div",[["class","column text-light mb-1 d-flex flex-col justify-end"]],null,null,null,null,null)),(l()(),t.qb(9,0,null,null,9,"div",[],null,null,null,null,null)),(l()(),t.qb(10,0,null,null,3,"h3",[["class","mb-0 text-bold"]],null,null,null,null,null)),(l()(),t.Ib(11,null,[" "," "])),(l()(),t.hb(16777216,null,null,1,null,yt)),t.pb(13,16384,null,0,p.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null),(l()(),t.qb(14,0,null,null,4,"div",[["class","columns col-gapless"]],null,null,null,null,null)),(l()(),t.hb(16777216,null,null,1,null,Ct)),t.pb(16,16384,null,0,p.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null),(l()(),t.qb(17,0,null,null,1,"div",[["class","column text-italic no-select"]],null,null,null,null,null)),(l()(),t.Ib(18,null,["(",")"])),(l()(),t.qb(19,0,null,null,7,"div",[["class","column col-auto d-flex justify-end align-items-end col-ml-auto"],["style","line-height: 1.2"]],null,null,null,null,null)),(l()(),t.qb(20,0,null,null,6,"div",[["class","mb-1"]],null,null,null,null,null)),(l()(),t.hb(16777216,null,null,1,null,It)),t.pb(22,16384,null,0,p.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null),(l()(),t.hb(16777216,null,null,1,null,qt)),t.pb(24,16384,null,0,p.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null),(l()(),t.hb(16777216,null,null,1,null,kt)),t.pb(26,16384,null,0,p.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null)],function(l,n){var u=n.component;l(n,5,0,u.saving),l(n,13,0,u.editable),l(n,16,0,u.user),l(n,22,0,u.preset.isXPEnabled),l(n,24,0,u.preset.isXPEnabled),l(n,26,0,null!==u.entity.mapId)},function(l,n){var u=n.component;l(n,0,0,u.backgroundCSS(u.entity.imageId)),l(n,11,0,u.entity.name),l(n,18,0,u.entity.preset.name)})}function wt(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,1,"dd-attribute-row-view",[],null,[[null,"edit"]],function(l,n,u){var t=!0,e=l.component;return"edit"===n&&(t=!1!==e.editAttribute(u)&&t),t},Vu,Du)),t.pb(1,114688,null,0,_u,[],{fields:[0,"fields"],modifiers:[1,"modifiers"],editable:[2,"editable"]},{edit:"edit"})],function(l,n){var u=n.component;l(n,1,0,u.majorAttributes,u.modifiers,u.editable)},null)}function Pt(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,0,"div",[["class","divider"]],null,null,null,null,null))],null,null)}function xt(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,1,"dd-attribute-row-view",[["mode","normal"]],null,[[null,"edit"]],function(l,n,u){var t=!0,e=l.component;return"edit"===n&&(t=!1!==e.editAttribute(u)&&t),t},Vu,Du)),t.pb(1,114688,null,0,_u,[],{fields:[0,"fields"],modifiers:[1,"modifiers"],mode:[2,"mode"],editable:[3,"editable"]},{edit:"edit"})],function(l,n){var u=n.component;l(n,1,0,u.normalAttributes,u.modifiers,"normal",u.editable)},null)}function Et(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,0,"div",[["class","divider"]],null,null,null,null,null))],null,null)}function Tt(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,5,"div",[["class","column"]],null,null,null,null,null)),t.pb(1,278528,null,0,p.i,[t.t,t.u,t.k,t.E],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),t.Db(2,{"col-9 col-md-7 col-sm-12":0,"col-12 mt-2":1}),(l()(),t.qb(3,0,null,null,2,"div",[["class","h-100"]],null,null,null,null,null)),(l()(),t.qb(4,0,null,null,1,"dd-health-display",[],null,[[null,"healthChange"]],function(l,n,u){var t=!0,e=l.component;return"healthChange"===n&&(t=!1!==e.onHPEdit(u)&&t),t},Hu.b,Hu.a)),t.pb(5,114688,null,0,$u.a,[f.b],{editable:[0,"editable"],health:[1,"health"],preset:[2,"preset"]},{healthChange:"healthChange"})],function(l,n){var u=n.component,t=l(n,2,0,u.preset.isCurrencyEnabled,!u.preset.isCurrencyEnabled);l(n,1,0,"column",t),l(n,5,0,u.editable,u.entity.health,u.entity.preset.health)},null)}function St(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,5,"div",[["class","column col-3 col-md-5 hide-sm"]],null,null,null,null,null)),(l()(),t.qb(1,0,null,null,4,"div",[["class","s-rounded h-100 p-1 currency-box text-center"],["style","height: 36px"]],null,[[null,"click"]],function(l,n,u){var t=!0,e=l.component;return"click"===n&&(t=!1!==e.editCurrency()&&t),t},null,null)),t.pb(2,278528,null,0,p.i,[t.t,t.u,t.k,t.E],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),t.Db(3,{"c-hand":0}),(l()(),t.qb(4,0,null,null,1,"h5",[["class","mb-0"]],[[8,"innerHTML",1]],null,null,null,null)),t.pb(5,16384,null,0,Bu.a,[zu.a,f.b],{currency:[0,"currency"]},null)],function(l,n){var u=n.component,t=l(n,3,0,u.editable);l(n,2,0,"s-rounded h-100 p-1 currency-box text-center",t),l(n,5,0,u.entity.currency)},function(l,n){l(n,4,0,t.Ab(n,5).text)})}function Ot(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,5,"div",[["class","column col-12 show-sm mt-2"]],null,null,null,null,null)),(l()(),t.qb(1,0,null,null,4,"div",[["class","card p-1 currency-box text-center"]],null,[[null,"click"]],function(l,n,u){var t=!0,e=l.component;return"click"===n&&(t=!1!==e.editCurrency()&&t),t},null,null)),t.pb(2,278528,null,0,p.i,[t.t,t.u,t.k,t.E],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),t.Db(3,{"c-hand":0}),(l()(),t.qb(4,0,null,null,1,"h5",[["class","mb-0"]],[[8,"innerHTML",1]],null,null,null,null)),t.pb(5,16384,null,0,Bu.a,[zu.a,f.b],{currency:[0,"currency"]},null)],function(l,n){var u=n.component,t=l(n,3,0,u.editable);l(n,2,0,"card p-1 currency-box text-center",t),l(n,5,0,u.entity.currency)},function(l,n){l(n,4,0,t.Ab(n,5).text)})}function Mt(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,0,"div",[["class","divider"]],null,null,null,null,null))],null,null)}function _t(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,3,"div",[["class","column"]],null,null,null,null,null)),(l()(),t.qb(1,0,null,null,2,"button",[["class","btn btn-sm w-100"]],null,[[null,"click"]],function(l,n,u){var t=!0,e=l.component;return"click"===n&&(t=!1!==e.openConceptEntities(l.context.$implicit.id)&&t),t},null,null)),(l()(),t.Ib(2,null,[" "," "])),(l()(),t.qb(3,0,null,null,0,"i",[["class","icon icon-arrow-right"]],null,null,null,null,null))],null,function(l,n){l(n,2,0,n.context.$implicit.pluralForm)})}function Dt(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,0,"div",[["class","divider"]],null,null,null,null,null))],null,null)}function Nt(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,5,"div",[],null,null,null,null,null)),(l()(),t.qb(1,0,null,null,1,"h3",[],null,null,null,null,null)),(l()(),t.Ib(2,null,["",""])),(l()(),t.qb(3,0,null,null,2,"dd-quill",[["readOnly","true"]],null,null,null,Sl.b,Sl.a)),t.Fb(5120,null,R.o,function(l){return[l]},[Ol.a]),t.pb(5,1163264,null,0,Ol.a,[f.b,Ml.a,b.a,r.k,P.c,_l.b,Dl.a,Nl.a],{readOnly:[0,"readOnly"],value:[1,"value"]},null)],function(l,n){l(n,5,0,"true",n.context.$implicit.field.value)},function(l,n){l(n,2,0,n.context.$implicit.field.name)})}function Lt(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,1,"dd-attribute-table-view",[],null,[[null,"edit"]],function(l,n,u){var t=!0,e=l.component;return"edit"===n&&(t=!1!==e.editAttribute(u)&&t),t},Zu,Qu)),t.pb(1,114688,null,0,Xu,[],{fields:[0,"fields"],editable:[1,"editable"]},{edit:"edit"})],function(l,n){var u=n.component;l(n,1,0,u.minorAttributes,u.editable)},null)}function Ft(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,2,"div",[["class","column col-4 col-md-6 col-sm-12 col-ml-auto"]],null,null,null,null,null)),(l()(),t.hb(16777216,null,null,1,null,Lt)),t.pb(2,16384,null,0,p.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null)],function(l,n){l(n,2,0,n.component.minorAttributes.length>0)},null)}function Kt(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,0,"div",[["class","divider"]],null,null,null,null,null))],null,null)}function jt(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,5,"div",[],null,null,null,null,null)),(l()(),t.qb(1,0,null,null,1,"h3",[],null,null,null,null,null)),(l()(),t.Ib(2,null,["",""])),(l()(),t.qb(3,0,null,null,2,"dd-quill",[["readOnly","true"]],null,null,null,Sl.b,Sl.a)),t.Fb(5120,null,R.o,function(l){return[l]},[Ol.a]),t.pb(5,1163264,null,0,Ol.a,[f.b,Ml.a,b.a,r.k,P.c,_l.b,Dl.a,Nl.a],{readOnly:[0,"readOnly"],value:[1,"value"]},null)],function(l,n){l(n,5,0,"true",n.context.$implicit.field.value)},function(l,n){l(n,2,0,n.context.$implicit.field.name)})}function Gt(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,43,"div",[["class","container grid-xl"]],null,null,null,null,null)),(l()(),t.hb(16777216,null,null,1,null,wt)),t.pb(2,16384,null,0,p.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null),(l()(),t.hb(16777216,null,null,1,null,Pt)),t.pb(4,16384,null,0,p.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null),(l()(),t.hb(16777216,null,null,1,null,xt)),t.pb(6,16384,null,0,p.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null),(l()(),t.hb(16777216,null,null,1,null,Et)),t.pb(8,16384,null,0,p.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null),(l()(),t.qb(9,0,null,null,6,"div",[["class","columns"]],null,null,null,null,null)),(l()(),t.hb(16777216,null,null,1,null,Tt)),t.pb(11,16384,null,0,p.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null),(l()(),t.hb(16777216,null,null,1,null,St)),t.pb(13,16384,null,0,p.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null),(l()(),t.hb(16777216,null,null,1,null,Ot)),t.pb(15,16384,null,0,p.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null),(l()(),t.hb(16777216,null,null,1,null,Mt)),t.pb(17,16384,null,0,p.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null),(l()(),t.qb(18,0,null,null,2,"div",[["class","columns"]],null,null,null,null,null)),(l()(),t.hb(16777216,null,null,1,null,_t)),t.pb(20,278528,null,0,p.j,[t.P,t.M,t.t],{ngForOf:[0,"ngForOf"]},null),(l()(),t.qb(21,0,null,null,22,"div",[["class","columns"]],null,null,null,null,null)),(l()(),t.qb(22,0,null,null,9,"div",[["class","column col-8 col-md-6 col-sm-12 hide-sm"]],null,null,null,null,null)),(l()(),t.qb(23,0,null,null,0,"div",[["class","divider text-center"]],[[1,"data-content",0]],null,null,null,null)),(l()(),t.qb(24,0,null,null,2,"dd-quill",[["readOnly","true"]],null,null,null,Sl.b,Sl.a)),t.Fb(5120,null,R.o,function(l){return[l]},[Ol.a]),t.pb(26,1163264,null,0,Ol.a,[f.b,Ml.a,b.a,r.k,P.c,_l.b,Dl.a,Nl.a],{readOnly:[0,"readOnly"],value:[1,"value"]},null),(l()(),t.qb(27,0,null,null,0,"img",[["class","img-responsive s-rounded mt-2"]],[[8,"src",4]],null,null,null,null)),(l()(),t.hb(16777216,null,null,1,null,Dt)),t.pb(29,16384,null,0,p.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null),(l()(),t.hb(16777216,null,null,1,null,Nt)),t.pb(31,278528,null,0,p.j,[t.P,t.M,t.t],{ngForOf:[0,"ngForOf"],ngForTrackBy:[1,"ngForTrackBy"]},null),(l()(),t.hb(16777216,null,null,1,null,Ft)),t.pb(33,16384,null,0,p.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null),(l()(),t.qb(34,0,null,null,9,"div",[["class","column col-12 show-sm mt-2"]],null,null,null,null,null)),(l()(),t.qb(35,0,null,null,0,"div",[["class","divider text-center"]],[[1,"data-content",0]],null,null,null,null)),(l()(),t.qb(36,0,null,null,2,"dd-quill",[["readOnly","true"]],null,null,null,Sl.b,Sl.a)),t.Fb(5120,null,R.o,function(l){return[l]},[Ol.a]),t.pb(38,1163264,null,0,Ol.a,[f.b,Ml.a,b.a,r.k,P.c,_l.b,Dl.a,Nl.a],{readOnly:[0,"readOnly"],value:[1,"value"]},null),(l()(),t.qb(39,0,null,null,0,"img",[["class","img-responsive s-rounded"]],[[8,"src",4]],null,null,null,null)),(l()(),t.hb(16777216,null,null,1,null,Kt)),t.pb(41,16384,null,0,p.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null),(l()(),t.hb(16777216,null,null,1,null,jt)),t.pb(43,278528,null,0,p.j,[t.P,t.M,t.t],{ngForOf:[0,"ngForOf"],ngForTrackBy:[1,"ngForTrackBy"]},null)],function(l,n){var u=n.component;l(n,2,0,u.majorAttributes.length>0),l(n,4,0,u.majorAttributes.length>0),l(n,6,0,u.normalAttributes.length>0),l(n,8,0,u.normalAttributes.length>0),l(n,11,0,u.preset.isHealthEnabled),l(n,13,0,u.preset.isCurrencyEnabled),l(n,15,0,u.preset.isCurrencyEnabled),l(n,17,0,u.preset.isCurrencyEnabled),l(n,20,0,u.conceptTypeList),l(n,26,0,"true",u.entity.content),l(n,29,0,u.bigTextAttributes.length>0),l(n,31,0,u.bigTextAttributes,u.trackAttribute),l(n,33,0,u.minorAttributes.length>0),l(n,38,0,"true",u.entity.content),l(n,41,0,u.bigTextAttributes.length>0),l(n,43,0,u.bigTextAttributes,u.trackAttribute)},function(l,n){var u=n.component;l(n,23,0,"About "+u.entity.name),l(n,27,0,t.sb(1,"https://res.cloudinary.com/dqhk8k6iv/image/upload/w_500,q_auto:good,f_auto/",u.entity.imageId,"")),l(n,35,0,"About "+u.entity.name),l(n,39,0,t.sb(1,"https://res.cloudinary.com/dqhk8k6iv/image/upload/w_500,q_auto:good,f_auto/",u.entity.imageId,""))})}function Ut(l){return t.Kb(0,[t.Gb(402653184,1,{attributeModal:0}),(l()(),t.hb(16777216,null,null,1,null,mt)),t.pb(2,16384,null,0,p.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null),(l()(),t.qb(3,0,null,null,1,"dd-entity-attribute-editor-modal",[],null,null,null,at,ut)),t.pb(4,114688,[[1,4],["attributemodal",4]],0,nt,[f.b],null,null),(l()(),t.hb(16777216,null,null,1,null,At)),t.pb(6,16384,null,0,p.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null),(l()(),t.hb(16777216,null,null,1,null,Gt)),t.pb(8,16384,null,0,p.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null)],function(l,n){var u=n.component;l(n,2,0,u.loading),l(n,4,0),l(n,6,0,u.entity),l(n,8,0,u.entity)},null)}function Rt(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,1,"dd-entity-view",[],null,null,null,Ut,gt)),t.pb(1,245760,null,0,ht,[r.a,ct.b,f.b,Y.c,b.a,r.k,st.b],null,null)],function(l,n){l(n,1,0)},null)}var Vt=t.mb("dd-entity-view",ht,Rt,{},{},[]),Ht=function(){function l(){this.imageSize=40}return l.prototype.ngOnInit=function(){},Object.defineProperty(l.prototype,"imgSrc",{get:function(){return this.concept.imageId?"https://res.cloudinary.com/dqhk8k6iv/image/upload/t_thumb/"+this.concept.imageId:"https://res.cloudinary.com/dqhk8k6iv/image/upload/t_thumb/winged-sword"},enumerable:!0,configurable:!0}),l}(),$t=t.ob({encapsulation:0,styles:[[""]],data:{}});function Bt(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,5,"div",[["class","columns col-gapless"]],null,null,null,null,null)),(l()(),t.qb(1,0,null,null,1,"div",[["class","column col-auto mr-2"]],null,null,null,null,null)),(l()(),t.qb(2,0,null,null,0,"img",[["class","s-rounded img-responsive"]],[[8,"src",4],[8,"width",0]],null,null,null,null)),(l()(),t.qb(3,0,null,null,2,"div",[["class","column"]],null,null,null,null,null)),(l()(),t.qb(4,0,null,null,1,"h5",[["class","my-0"]],null,null,null,null,null)),(l()(),t.Ib(5,null,["",""]))],null,function(l,n){var u=n.component;l(n,2,0,u.imgSrc,u.imageSize),l(n,5,0,u.concept.name)})}var zt=u("/fvA"),Xt=function(l,n,u,t){return new(u||(u=Promise))(function(e,i){function o(l){try{a(t.next(l))}catch(n){i(n)}}function r(l){try{a(t.throw(l))}catch(n){i(n)}}function a(l){l.done?e(l.value):new u(function(n){n(l.value)}).then(o,r)}a((t=t.apply(l,n||[])).next())})},Qt=function(l,n){var u,t,e,i,o={label:0,sent:function(){if(1&e[0])throw e[1];return e[1]},trys:[],ops:[]};return i={next:r(0),throw:r(1),return:r(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function r(i){return function(r){return function(i){if(u)throw new TypeError("Generator is already executing.");for(;o;)try{if(u=1,t&&(e=2&i[0]?t.return:i[0]?t.throw||((e=t.return)&&e.call(t),0):t.next)&&!(e=e.call(t,i[1])).done)return e;switch(t=0,e&&(i=[2&i[0],e.value]),i[0]){case 0:case 1:e=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,t=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!(e=(e=o.trys).length>0&&e[e.length-1])&&(6===i[0]||2===i[0])){o=0;continue}if(3===i[0]&&(!e||i[1]>e[0]&&i[1]<e[3])){o.label=i[1];break}if(6===i[0]&&o.label<e[1]){o.label=e[1],e=i;break}if(e&&o.label<e[2]){o.label=e[2],o.ops.push(i);break}e[2]&&o.ops.pop(),o.trys.pop();continue}i=n.call(l,o)}catch(r){i=[6,r],t=0}finally{u=e=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,r])}}},Yt=function(){function l(l,n){this.campaignService=l,this.conceptService=n,this.selected=new t.m,this.addChild=new t.m,this.childrenCollapsed=!0}return l.prototype.ngOnInit=function(){},l.prototype.select=function(l){this.selected.emit(l)},l.prototype.conceptDropped=function(l){return Xt(this,void 0,void 0,function(){var n;return Qt(this,function(u){switch(u.label){case 0:return n=this.children,Object(un.k)(n,l.previousIndex,l.currentIndex),n.forEach(function(l,n){l.sortValue=n}),[4,this.conceptService.updateConceptEntities(n,this.conceptEntity.entityId)];case 1:return u.sent(),[2]}})})},l.prototype.doAddChild=function(){this.addChild.emit(!0)},l.prototype.doRemoveFromParent=function(){return Xt(this,void 0,void 0,function(){return Qt(this,function(l){switch(l.label){case 0:return this.conceptEntity.parentConceptId=null,this.conceptEntity.parentEntityId=null,[4,this.conceptService.updateConceptEntity(this.conceptEntity)];case 1:return l.sent(),[2]}})})},Object.defineProperty(l.prototype,"campaign",{get:function(){return this.campaignService.campaign},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"quantityEnabled",{get:function(){return this.conceptType.entityConfig.enabled&&this.conceptType.entityConfig.enableQuantity},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"children",{get:function(){for(var l=[],n=0,u=this.allConceptEntities;n<u.length;n++){var t=u[n];t.parentConceptId===this.conceptEntity.conceptId&&l.push(t)}return l.sort(function(l,n){return l.sortValue-n.sortValue})},enumerable:!0,configurable:!0}),l}(),Wt=t.ob({encapsulation:0,styles:[[""]],data:{}});function Zt(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,1,"div",[["class","column col-auto mr-2 c-move"]],null,null,null,null,null)),(l()(),t.qb(1,0,null,null,0,"i",[["class","icon icon-resize-vert"]],null,null,null,null,null))],null,null)}function Jt(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,0,"i",[["class","icon icon-arrow-down"]],null,null,null,null,null))],null,null)}function le(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,0,"i",[["class","icon icon-arrow-up"]],null,null,null,null,null))],null,null)}function ne(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,5,"div",[["class","column col-auto mr-1"]],null,null,null,null,null)),(l()(),t.qb(1,0,null,null,4,"button",[["class","btn btn-sm"]],null,[[null,"click"]],function(l,n,u){var t=!0,e=l.component;return"click"===n&&(t=0!=(e.childrenCollapsed=!e.childrenCollapsed)&&t),t},null,null)),(l()(),t.hb(16777216,null,null,1,null,Jt)),t.pb(3,16384,null,0,p.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null),(l()(),t.hb(16777216,null,null,1,null,le)),t.pb(5,16384,null,0,p.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null)],function(l,n){var u=n.component;l(n,3,0,u.childrenCollapsed),l(n,5,0,!u.childrenCollapsed)},null)}function ue(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,0,"img",[["class","s-rounded"],["style","margin-bottom: -0.075rem"],["width","30"]],[[8,"src",4]],null,null,null,null))],null,function(l,n){var u=n.component;l(n,0,0,t.sb(1,"https://res.cloudinary.com/dqhk8k6iv/image/upload/t_thumb/",u.conceptEntity.concept.imageId,""))})}function te(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,0,"img",[["class","s-rounded"],["src","https://res.cloudinary.com/dqhk8k6iv/image/upload/t_thumb/winged-sword"],["style","margin-bottom: -0.075rem"],["width","30"]],null,null,null,null,null))],null,null)}function ee(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,1,"sup",[["class","text-bold text-small"]],null,null,null,null,null)),(l()(),t.Ib(1,null,["x",""]))],null,function(l,n){l(n,1,0,n.component.conceptEntity.quantity)})}function ie(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,2,"button",[["class","btn btn-sm btn-error mr-1"]],null,[[null,"click"]],function(l,n,u){var t=!0,e=l.component;return"click"===n&&(t=!1!==e.doRemoveFromParent()&&t),t},null,null)),(l()(),t.qb(1,0,null,null,0,"i",[["class","icon icon-cross"]],null,null,null,null,null)),(l()(),t.qb(2,0,null,null,0,"span",[["class","hide-sm"]],null,null,null,null,null))],null,null)}function oe(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,3,"button",[["class","btn btn-sm mr-1"]],null,[[null,"click"]],function(l,n,u){var t=!0,e=l.component;return"click"===n&&(t=!1!==e.doAddChild()&&t),t},null,null)),(l()(),t.qb(1,0,null,null,0,"i",[["class","icon icon-plus"]],null,null,null,null,null)),(l()(),t.qb(2,0,null,null,1,"span",[["class","hide-sm"]],null,null,null,null,null)),(l()(),t.Ib(3,null,[" Add to ",""]))],null,function(l,n){l(n,3,0,n.component.conceptEntity.concept.name)})}function re(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,2,"div",[["class","empty p-1 mb-1"]],null,null,null,null,null)),(l()(),t.qb(1,0,null,null,1,"div",[["class","empty-subtitle text-italic m-0"]],null,null,null,null,null)),(l()(),t.Ib(2,null,["This "," is empty"]))],null,function(l,n){l(n,2,0,n.component.conceptEntity.concept.name)})}function ae(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,0,"div",[["class","drag-placeholder"]],null,null,null,null,null))],null,null)}function ce(l){return t.Kb(0,[(l()(),t.qb(0,16777216,null,null,9,"div",[["cdkDrag",""],["class","cdk-drag"]],[[2,"cdk-drag-disabled",null],[2,"cdk-drag-dragging",null]],null,null,null,null)),t.Fb(6144,null,un.l,null,[un.c]),t.pb(2,4866048,[[1,4]],3,un.c,[t.k,[3,un.b],p.c,t.A,t.P,tn.a,un.j,un.a,[2,en.a],un.h,t.h],null,null),t.Gb(603979776,2,{_handles:1}),t.Gb(335544320,3,{_previewTemplate:0}),t.Gb(335544320,4,{_placeholderTemplate:0}),(l()(),t.hb(0,null,null,1,null,ae)),t.pb(7,16384,[[4,4]],0,un.e,[t.M],null,null),(l()(),t.qb(8,0,null,null,1,"dd-concept-entity-manager-list-item",[],null,[[null,"selected"]],function(l,n,u){var t=!0,e=l.component;return"selected"===n&&(t=!1!==e.select(u)&&t),t},pe,Wt)),t.pb(9,114688,null,0,Yt,[f.b,zt.a],{conceptEntity:[0,"conceptEntity"],conceptType:[1,"conceptType"],isChild:[2,"isChild"],allConceptEntities:[3,"allConceptEntities"]},{selected:"selected"}),(l()(),t.hb(0,null,null,0))],function(l,n){var u=n.component;l(n,9,0,n.context.$implicit,u.conceptType,!0,u.allConceptEntities)},function(l,n){l(n,0,0,t.Ab(n,2).disabled,t.Ab(n,2)._dragRef.isDragging())})}function se(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,8,"div",[["cdkDropList",""],["class","column col-12 cdk-drop-list"]],[[8,"id",0],[2,"cdk-drop-list-disabled",null],[2,"cdk-drop-list-dragging",null],[2,"cdk-drop-list-receiving",null]],[[null,"cdkDropListDropped"]],function(l,n,u){var t=!0,e=l.component;return"cdkDropListDropped"===n&&(t=!1!==e.conceptDropped(u)&&t),t},null,null)),t.Fb(6144,null,un.b,null,[un.f]),t.pb(2,1196032,null,1,un.f,[t.k,un.j,t.h,[2,en.a],[3,un.g],[2,p.c],un.h],null,{dropped:"cdkDropListDropped"}),t.Gb(603979776,1,{_draggables:1}),t.Fb(256,null,un.g,void 0,[]),(l()(),t.hb(16777216,null,null,1,null,re)),t.pb(6,16384,null,0,p.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null),(l()(),t.hb(16777216,null,null,1,null,ce)),t.pb(8,278528,null,0,p.j,[t.P,t.M,t.t],{ngForOf:[0,"ngForOf"]},null)],function(l,n){var u=n.component;l(n,6,0,0===u.children.length),l(n,8,0,u.children)},function(l,n){l(n,0,0,t.Ab(n,2).id,t.Ab(n,2).disabled,t.Ab(n,2)._dropListRef.isDragging(),t.Ab(n,2)._dropListRef.isReceiving())})}function pe(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,31,"div",[["class","card px-1 pt-1 my-1"]],null,null,null,null,null)),t.pb(1,278528,null,0,p.i,[t.t,t.u,t.k,t.E],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),t.Db(2,{"bg-secondary":0}),(l()(),t.qb(3,0,null,null,28,"div",[["class","columns col-gapless"]],null,null,null,null,null)),(l()(),t.hb(16777216,null,null,1,null,Zt)),t.pb(5,16384,null,0,p.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null),(l()(),t.hb(16777216,null,null,1,null,ne)),t.pb(7,16384,null,0,p.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null),(l()(),t.qb(8,0,null,null,6,"div",[["class","column col-auto mr-2"]],null,[[null,"click"]],function(l,n,u){var t=!0,e=l.component;return"click"===n&&(t=!1!==e.select(e.conceptEntity)&&t),t},null,null)),t.pb(9,278528,null,0,p.i,[t.t,t.u,t.k,t.E],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),t.Db(10,{faded:0}),(l()(),t.hb(16777216,null,null,1,null,ue)),t.pb(12,16384,null,0,p.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null),(l()(),t.hb(16777216,null,null,1,null,te)),t.pb(14,16384,null,0,p.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null),(l()(),t.qb(15,0,null,null,5,"div",[["class","column c-hand no-select"]],null,[[null,"click"]],function(l,n,u){var t=!0,e=l.component;return"click"===n&&(t=!1!==e.select(e.conceptEntity)&&t),t},null,null)),t.pb(16,278528,null,0,p.i,[t.t,t.u,t.k,t.E],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),t.Db(17,{faded:0}),(l()(),t.Ib(18,null,[" "," "])),(l()(),t.hb(16777216,null,null,1,null,ee)),t.pb(20,16384,null,0,p.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null),(l()(),t.qb(21,0,null,null,8,"div",[["class","column col-auto"]],null,null,null,null,null)),(l()(),t.hb(16777216,null,null,1,null,ie)),t.pb(23,16384,null,0,p.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null),(l()(),t.hb(16777216,null,null,1,null,oe)),t.pb(25,16384,null,0,p.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null),(l()(),t.qb(26,0,null,null,3,"button",[["class","btn btn-sm"]],null,[[null,"click"]],function(l,n,u){var e=!0;return"click"===n&&(e=!1!==t.Ab(l,27).onClick()&&e),e},null,null)),t.pb(27,16384,null,0,r.l,[r.k,r.a,[8,null],t.E,t.k],{routerLink:[0,"routerLink"]},null),t.Bb(28,6),(l()(),t.qb(29,0,null,null,0,"i",[["class","icon icon-arrow-right"]],null,null,null,null,null)),(l()(),t.hb(16777216,null,null,1,null,se)),t.pb(31,16384,null,0,p.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null)],function(l,n){var u=n.component,t=l(n,2,0,u.conceptEntity.concept.isContainer);l(n,1,0,"card px-1 pt-1 my-1",t),l(n,5,0,u.draggable),l(n,7,0,u.conceptEntity.concept.isContainer);var e=l(n,10,0,0===u.conceptEntity.quantity);l(n,9,0,"column col-auto mr-2",e),l(n,12,0,u.conceptEntity.concept.imageId),l(n,14,0,!u.conceptEntity.concept.imageId);var i=l(n,17,0,u.quantityEnabled&&0===u.conceptEntity.quantity);l(n,16,0,"column c-hand no-select",i),l(n,20,0,u.quantityEnabled&&1!==u.conceptEntity.quantity&&null!==u.conceptEntity.quantity),l(n,23,0,u.isChild),l(n,25,0,u.conceptEntity.concept.isContainer);var o=l(n,28,0,"/campaigns",u.campaign.id,"concepts",u.conceptType.id,u.conceptEntity.concept.id,"view");l(n,27,0,o),l(n,31,0,u.conceptEntity.concept.isContainer&&!u.childrenCollapsed)},function(l,n){l(n,18,0,n.component.conceptEntity.concept.name)})}var be=u("ad02"),de=u("Gi3i"),fe=function(){return(fe=Object.assign||function(l){for(var n,u=1,t=arguments.length;u<t;u++)for(var e in n=arguments[u])Object.prototype.hasOwnProperty.call(n,e)&&(l[e]=n[e]);return l}).apply(this,arguments)},he=function(l,n,u,t){return new(u||(u=Promise))(function(e,i){function o(l){try{a(t.next(l))}catch(n){i(n)}}function r(l){try{a(t.throw(l))}catch(n){i(n)}}function a(l){l.done?e(l.value):new u(function(n){n(l.value)}).then(o,r)}a((t=t.apply(l,n||[])).next())})},ge=function(l,n){var u,t,e,i,o={label:0,sent:function(){if(1&e[0])throw e[1];return e[1]},trys:[],ops:[]};return i={next:r(0),throw:r(1),return:r(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function r(i){return function(r){return function(i){if(u)throw new TypeError("Generator is already executing.");for(;o;)try{if(u=1,t&&(e=2&i[0]?t.return:i[0]?t.throw||((e=t.return)&&e.call(t),0):t.next)&&!(e=e.call(t,i[1])).done)return e;switch(t=0,e&&(i=[2&i[0],e.value]),i[0]){case 0:case 1:e=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,t=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!(e=(e=o.trys).length>0&&e[e.length-1])&&(6===i[0]||2===i[0])){o=0;continue}if(3===i[0]&&(!e||i[1]>e[0]&&i[1]<e[3])){o.label=i[1];break}if(6===i[0]&&o.label<e[1]){o.label=e[1],e=i;break}if(e&&o.label<e[2]){o.label=e[2],o.ops.push(i);break}e[2]&&o.ops.pop(),o.trys.pop();continue}i=n.call(l,o)}catch(r){i=[6,r],t=0}finally{u=e=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,r])}}},me=function(){function l(l,n,u,t,e,i,o){this.conceptService=l,this.campaignService=n,this.entityService=u,this.updateHub=t,this.login=e,this.router=i,this.route=o,this.loading=!1,this.searchLoading=!1,this.working=!1,this.draggingEnabled=!1,this.selectedConceptEntity=null}return Object.defineProperty(l.prototype,"entity",{get:function(){return this._entity},set:function(l){this._entity=l,this.load()},enumerable:!0,configurable:!0}),l.prototype.ngOnInit=function(){var l=this;this.searchControl=new R.h(null),this.editGroup=new R.k({quantity:new R.h(null),content:new R.h(null)}),this.searchControl.valueChanges.pipe(Object(be.a)(),Object(de.a)(250)).subscribe(function(n){null!=n?l.searchConcepts(n.trim().toLowerCase()):l.searchConcepts("")}),this.route.paramMap.subscribe(function(n){var u=n.get("ct_id"),t=n.get("ent_id");u&&t&&l.loadInitial(t,u)}),this._updateSubscription=this.updateHub.conceptEntityUpdate.subscribe(function(n){if(l.conceptEntities&&l.entity&&l.conceptType&&n.concept.conceptTypeId===l.conceptType.id&&n.entityId===l.entity.id){var u=l.conceptEntities.findIndex(function(l){return l.conceptId===n.conceptId&&l.entityId===n.entityId});-1!==u?l.conceptEntities[u]=n:l.conceptEntities.push(n),l.conceptEntities=l.conceptEntities.slice().sort(function(l,n){return l.sortValue-n.sortValue})}}),this._deleteSubscription=this.updateHub.conceptEntityDelete.subscribe(function(n){l.conceptEntities&&l.entity&&l.conceptType&&n.entityId===l.entity.id&&(l.conceptEntities=l.conceptEntities.filter(function(l){return!(l.conceptId===n.conceptId&&l.entityId===n.entityId)}))})},l.prototype.ngOnDestroy=function(){this._updateSubscription&&this._updateSubscription.unsubscribe(),this._deleteSubscription&&this._deleteSubscription.unsubscribe()},l.prototype.loadInitial=function(l,n){return he(this,void 0,void 0,function(){var u,t,e,i;return ge(this,function(o){switch(o.label){case 0:this.loading=!0,o.label=1;case 1:return o.trys.push([1,6,,7]),[4,Promise.all([this.conceptService.getConceptType(n),this.entityService.getEntity(l)])];case 2:return u=o.sent(),t=u[0],e=u[1],this.conceptType=t,this.entity=e,this.entity?[4,this.updateHub.unsubscribeEntities([this.entity.id])]:[3,4];case 3:o.sent(),o.label=4;case 4:return[4,this.updateHub.subscribeEntities([this.entity.id])];case 5:return o.sent(),[3,7];case 6:return i=o.sent(),this.loadErr=i,[3,7];case 7:return this.loading=!1,[2]}})})},l.prototype.load=function(){return he(this,void 0,void 0,function(){var l;return ge(this,function(n){switch(n.label){case 0:this.loading=!0,n.label=1;case 1:return n.trys.push([1,3,,4]),l=this,[4,this.conceptService.getConceptEntities(this.entity.id,this.conceptType.id)];case 2:return l.conceptEntities=n.sent(),[3,4];case 3:throw n.sent();case 4:return this.loading=!1,[2]}})})},l.prototype.searchConcepts=function(l){return he(this,void 0,void 0,function(){var n;return ge(this,function(u){switch(u.label){case 0:this.searchLoading=!0,u.label=1;case 1:return u.trys.push([1,3,,4]),[4,this.conceptService.getConcepts(this.conceptType.id,10,0,l)];case 2:return n=u.sent(),this.searchResults=n.concepts,this.totalResults=n.total,[3,4];case 3:throw u.sent();case 4:return this.searchLoading=!1,[2]}})})},l.prototype.createConcept=function(){this.router.navigate(["campaigns",this.campaignService.campaign.id,"concepts",this.conceptType.id,"create"],{queryParams:{name:this.searchControl.value}})},l.prototype.add=function(){return he(this,void 0,void 0,function(){var l,n,u,t=this;return ge(this,function(e){switch(e.label){case 0:return this.searchControl.patchValue(null),this.searchConcepts(""),setTimeout(function(){t.searchInput.nativeElement.focus()},1),[4,this.pickerModal.open()];case 1:if(null===(l=e.sent()))return[3,6];n=this.conceptEntities.length,u={conceptId:l.id,concept:l,entityId:this.entity.id,quantity:this.quantityEnabled?1:null,fields:[],sortValue:n},void 0===this.conceptEntities.find(function(l){return l.conceptId===u.conceptId&&l.entityId===u.entityId})&&this.conceptEntities.push(u),this.working=!0,e.label=2;case 2:return e.trys.push([2,4,,5]),[4,this.conceptService.updateConceptEntity(u)];case 3:return e.sent(),[3,5];case 4:throw e.sent();case 5:this.working=!1,e.label=6;case 6:return[2]}})})},l.prototype.select=function(l){return he(this,void 0,void 0,function(){var n=this;return ge(this,function(u){return this.selectedConceptEntity=l,this.editGroup.patchValue({quantity:l.quantity||1,content:l.content}),this.viewAndEditModal.open().then(function(){n.selectedConceptEntity=null}),[2]})})},l.prototype.save=function(){return he(this,void 0,void 0,function(){var l,n,u,t;return ge(this,function(e){switch(e.label){case 0:this.working=!0,e.label=1;case 1:for(e.trys.push([1,3,,4]),l=fe({},this.selectedConceptEntity,{quantity:this.quantityControl.value,content:this.contentControl.value}),n=0,u=this.conceptEntities;n<u.length;n++)(t=u[n]).conceptId===l.conceptId&&t.entityId===l.entityId&&Object.assign(t,l);return this.viewAndEditModal.close(null),[4,this.conceptService.updateConceptEntity(l)];case 2:return e.sent(),[3,4];case 3:throw e.sent();case 4:return this.working=!1,[2]}})})},l.prototype.remove=function(l){return he(this,void 0,void 0,function(){return ge(this,function(n){switch(n.label){case 0:this.working=!0,n.label=1;case 1:return n.trys.push([1,3,,4]),this.conceptEntities=this.conceptEntities.filter(function(n){return!(n.conceptId===l.conceptId&&n.entityId===l.entityId)}),this.viewAndEditModal.close(null),[4,this.conceptService.deleteConceptEntity(l.entityId,l.conceptId)];case 2:return n.sent(),[3,4];case 3:throw n.sent();case 4:return this.working=!1,[2]}})})},l.prototype.trackConcept=function(l,n){return n.id},l.prototype.trackConceptEntity=function(l,n){return n.conceptId+n.entityId},l.prototype.conceptDropped=function(l){var n=this.topLevelConceptEntities;Object(un.k)(n,l.previousIndex,l.currentIndex),n.forEach(function(l,n){l.sortValue=n})},l.prototype.selectChildToNest=function(l){return he(this,void 0,void 0,function(){var n,u;return ge(this,function(t){switch(t.label){case 0:return this.nestSelectorParent=l,[4,this.nestSelector.open()];case 1:if(null===(n=t.sent()))return[3,5];(u=this.conceptEntities.find(function(l){return l.conceptId===n.id})).parentConceptId=l.conceptId,u.parentEntityId=l.entityId,t.label=2;case 2:return t.trys.push([2,4,,5]),[4,this.conceptService.updateConceptEntity(u)];case 3:return t.sent(),[3,5];case 4:throw t.sent();case 5:return[2]}})})},l.prototype.toggleReorder=function(){return he(this,void 0,void 0,function(){return ge(this,function(l){switch(l.label){case 0:return this.draggingEnabled=!this.draggingEnabled,!1!==this.draggingEnabled?[3,2]:[4,this.conceptService.updateConceptEntities(this.topLevelConceptEntities,this.entity.id)];case 1:l.sent(),l.label=2;case 2:return[2]}})})},Object.defineProperty(l.prototype,"quantityEnabled",{get:function(){return this.conceptType.entityConfig.enabled&&this.conceptType.entityConfig.enableQuantity},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"campaign",{get:function(){return this.campaignService.campaign},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"quantityControl",{get:function(){return this.editGroup.get("quantity")},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"contentControl",{get:function(){return this.editGroup.get("content")},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"conceptEntities",{get:function(){return this._conceptEntities},set:function(l){this._conceptEntities=l},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"topLevelConceptEntities",{get:function(){if(this.conceptEntities)return this.conceptEntities.filter(function(l){return null===l.parentConceptId||void 0===l.parentConceptId}).sort(function(l,n){return l.sortValue-n.sortValue})},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"editable",{get:function(){return!!this.entity&&(this.entity.userId===this.login.id||this.campaignService.canEdit)},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"quantityFieldConfig",{get:function(){return this.selectedConceptEntity&&this.entity?{name:"Quantity",description:"How many "+this.selectedConceptEntity.concept.name+" does "+this.entity.name+" have?",type:pt.a.INT,options:{min:0}}:{name:"Quantity",type:pt.a.INT}},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"notesFieldConfig",{get:function(){return{name:"Notes",description:"All players will be able to see these notes",type:pt.a.TEXT_FORMATTED}},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"conceptTypeEditable",{get:function(){return!!this.conceptType&&(this.conceptType.playerEditable||this.campaignService.canEdit)},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"nestableConcepts",{get:function(){var l=this;return this.conceptEntities.filter(function(n){return n.conceptId!==l.nestSelectorParent.conceptId&&(null===n.parentConceptId||void 0===n.parentConceptId)}).map(function(l){return l.concept})},enumerable:!0,configurable:!0}),l}(),ve=t.ob({encapsulation:0,styles:[[""]],data:{}});function ye(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,0,"i",[["class","icon icon-search form-icon"]],null,null,null,null,null))],null,null)}function Ce(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,0,"div",[["class","loading form-icon"]],null,null,null,null,null))],null,null)}function Ie(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,2,"div",[["class","card p-1 my-1 hoverable"]],null,[[null,"click"]],function(l,n,u){var e=!0;return"click"===n&&(e=!1!==t.Ab(l.parent,1).close(l.context.$implicit)&&e),e},null,null)),(l()(),t.qb(1,0,null,null,1,"dd-concept-list-item",[],null,null,null,Bt,$t)),t.pb(2,114688,null,0,Ht,[],{concept:[0,"concept"],imageSize:[1,"imageSize"]},null)],function(l,n){l(n,2,0,n.context.$implicit,25)},null)}function qe(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,3,"div",[["class","card p-1 my-1 hoverable"]],null,[[null,"click"]],function(l,n,u){var t=!0,e=l.component;return"click"===n&&(t=!1!==e.createConcept()&&t),t},null,null)),(l()(),t.qb(1,0,null,null,2,"span",[],null,null,null,null,null)),(l()(),t.qb(2,0,null,null,0,"i",[["class","icon icon-plus"]],null,null,null,null,null)),(l()(),t.Ib(3,null,[" ",""]))],null,function(l,n){l(n,3,0,n.component.searchControl.value)})}function ke(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,1,"p",[["class","empty-subtitle"]],null,null,null,null,null)),(l()(),t.Ib(1,null,["Click the button below to create a new ",""]))],null,function(l,n){l(n,1,0,n.component.conceptType.name)})}function Ae(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,2,"div",[["class","empty-action"]],null,null,null,null,null)),(l()(),t.qb(1,0,null,null,1,"button",[["class","btn btn-primary"]],null,[[null,"click"]],function(l,n,u){var t=!0,e=l.component;return"click"===n&&(t=!1!==e.createConcept()&&t),t},null,null)),(l()(),t.Ib(2,null,["Create ",""]))],null,function(l,n){l(n,2,0,n.component.searchControl.value)})}function we(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,8,"div",[["class","empty mt-2"]],null,null,null,null,null)),(l()(),t.qb(1,0,null,null,1,"div",[["class","empty-icon"]],null,null,null,null,null)),(l()(),t.qb(2,0,null,null,0,"i",[["class","icon icon-search icon-4x"]],null,null,null,null,null)),(l()(),t.qb(3,0,null,null,1,"p",[["class","empty-title h5"]],null,null,null,null,null)),(l()(),t.Ib(-1,null,["Your search returned no results"])),(l()(),t.hb(16777216,null,null,1,null,ke)),t.pb(6,16384,null,0,p.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null),(l()(),t.hb(16777216,null,null,1,null,Ae)),t.pb(8,16384,null,0,p.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null)],function(l,n){var u=n.component;l(n,6,0,u.conceptTypeEditable),l(n,8,0,u.conceptTypeEditable)},null)}function Pe(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,22,"dd-modal",[],null,null,null,fl.b,fl.a)),t.pb(1,114688,[[1,4],["picker",4]],0,hl.a,[],null,null),(l()(),t.qb(2,0,null,0,1,"h4",[["class","mb-0"],["modal-header",""]],null,null,null,null,null)),(l()(),t.Ib(3,null,["Pick ",""])),(l()(),t.qb(4,0,null,1,18,"div",[["modal-body",""]],null,null,null,null,null)),(l()(),t.qb(5,0,null,null,10,"div",[["class","has-icon-right"]],null,null,null,null,null)),(l()(),t.qb(6,0,[[4,0],["searchbar",1]],null,5,"input",[["class","form-input"],["type","text"]],[[8,"placeholder",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(l,n,u){var e=!0;return"input"===n&&(e=!1!==t.Ab(l,7)._handleInput(u.target.value)&&e),"blur"===n&&(e=!1!==t.Ab(l,7).onTouched()&&e),"compositionstart"===n&&(e=!1!==t.Ab(l,7)._compositionStart()&&e),"compositionend"===n&&(e=!1!==t.Ab(l,7)._compositionEnd(u.target.value)&&e),e},null,null)),t.pb(7,16384,null,0,R.d,[t.E,t.k,[2,R.a]],null,null),t.Fb(1024,null,R.o,function(l){return[l]},[R.d]),t.pb(9,540672,null,0,R.i,[[8,null],[8,null],[6,R.o],[2,R.D]],{form:[0,"form"]},null),t.Fb(2048,null,R.p,null,[R.i]),t.pb(11,16384,null,0,R.q,[[4,R.p]],null,null),(l()(),t.hb(16777216,null,null,1,null,ye)),t.pb(13,16384,null,0,p.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null),(l()(),t.hb(16777216,null,null,1,null,Ce)),t.pb(15,16384,null,0,p.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null),(l()(),t.qb(16,0,null,null,4,"div",[],null,null,null,null,null)),(l()(),t.hb(16777216,null,null,1,null,Ie)),t.pb(18,278528,null,0,p.j,[t.P,t.M,t.t],{ngForOf:[0,"ngForOf"],ngForTrackBy:[1,"ngForTrackBy"]},null),(l()(),t.hb(16777216,null,null,1,null,qe)),t.pb(20,16384,null,0,p.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null),(l()(),t.hb(16777216,null,null,1,null,we)),t.pb(22,16384,null,0,p.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null)],function(l,n){var u=n.component;l(n,1,0),l(n,9,0,u.searchControl),l(n,13,0,!u.searchLoading),l(n,15,0,u.searchLoading),l(n,18,0,u.searchResults,u.trackConcept),l(n,20,0,u.searchControl.value&&u.searchControl.value.trim().length>2),l(n,22,0,u.searchResults&&0===u.totalResults&&""!==u.searchControl.value)},function(l,n){var u=n.component;l(n,3,0,u.conceptType.name),l(n,6,0,t.sb(1,"Search ",u.conceptType.pluralForm,""),t.Ab(n,11).ngClassUntouched,t.Ab(n,11).ngClassTouched,t.Ab(n,11).ngClassPristine,t.Ab(n,11).ngClassDirty,t.Ab(n,11).ngClassValid,t.Ab(n,11).ngClassInvalid,t.Ab(n,11).ngClassPending)})}function xe(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,1,"h4",[["class","mb-0"],["modal-header",""]],null,null,null,null,null)),(l()(),t.Ib(1,null,[" "," "]))],null,function(l,n){l(n,1,0,n.component.selectedConceptEntity.concept.name)})}function Ee(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,1,"dd-dynamic-field",[],null,null,null,Ju.b,Ju.a)),t.pb(1,114688,null,0,lt.a,[],{control:[0,"control"],config:[1,"config"]},null)],function(l,n){var u=n.component;l(n,1,0,u.quantityControl,u.quantityFieldConfig)},null)}function Te(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,8,"div",[["modal-body",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"submit"],[null,"reset"]],function(l,n,u){var e=!0;return"submit"===n&&(e=!1!==t.Ab(l,1).onSubmit(u)&&e),"reset"===n&&(e=!1!==t.Ab(l,1).onReset()&&e),e},null,null)),t.pb(1,540672,null,0,R.l,[[8,null],[8,null]],{form:[0,"form"]},null),t.Fb(2048,null,R.c,null,[R.l]),t.pb(3,16384,null,0,R.r,[[4,R.c]],null,null),(l()(),t.hb(16777216,null,null,1,null,Ee)),t.pb(5,16384,null,0,p.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null),(l()(),t.qb(6,0,null,null,0,"div",[["class","my-2"]],null,null,null,null,null)),(l()(),t.qb(7,0,null,null,1,"dd-dynamic-field",[],null,null,null,Ju.b,Ju.a)),t.pb(8,114688,null,0,lt.a,[],{control:[0,"control"],config:[1,"config"]},null)],function(l,n){var u=n.component;l(n,1,0,u.editGroup),l(n,5,0,u.quantityEnabled),l(n,8,0,u.contentControl,u.notesFieldConfig)},function(l,n){l(n,0,0,t.Ab(n,3).ngClassUntouched,t.Ab(n,3).ngClassTouched,t.Ab(n,3).ngClassPristine,t.Ab(n,3).ngClassDirty,t.Ab(n,3).ngClassValid,t.Ab(n,3).ngClassInvalid,t.Ab(n,3).ngClassPending)})}function Se(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,3,"h6",[],null,null,null,null,null)),(l()(),t.Ib(-1,null,[" Quantity: "])),(l()(),t.qb(2,0,null,null,1,"strong",[],null,null,null,null,null)),(l()(),t.Ib(3,null,["",""]))],null,function(l,n){l(n,3,0,n.component.selectedConceptEntity.quantity||1)})}function Oe(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,5,"div",[["modal-body",""]],null,null,null,null,null)),(l()(),t.hb(16777216,null,null,1,null,Se)),t.pb(2,16384,null,0,p.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null),(l()(),t.qb(3,0,null,null,2,"dd-quill",[["readOnly","true"]],null,null,null,Sl.b,Sl.a)),t.Fb(5120,null,R.o,function(l){return[l]},[Ol.a]),t.pb(5,1163264,null,0,Ol.a,[f.b,Ml.a,b.a,r.k,P.c,_l.b,Dl.a,Nl.a],{readOnly:[0,"readOnly"],value:[1,"value"]},null)],function(l,n){var u=n.component;l(n,2,0,u.quantityEnabled),l(n,5,0,"true",u.selectedConceptEntity.content)},null)}function Me(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,6,"div",[["modal-footer",""]],null,null,null,null,null)),(l()(),t.qb(1,0,null,null,1,"button",[["class","btn btn-error mr-1"]],null,[[null,"click"]],function(l,n,u){var t=!0,e=l.component;return"click"===n&&(t=!1!==e.remove(e.selectedConceptEntity)&&t),t},null,null)),(l()(),t.Ib(-1,null,[" Remove "])),(l()(),t.qb(3,0,null,null,1,"button",[["class","btn mr-1"]],null,[[null,"click"]],function(l,n,u){var e=!0;return"click"===n&&(e=!1!==t.Ab(l.parent,7).close(null)&&e),e},null,null)),(l()(),t.Ib(-1,null,["Cancel"])),(l()(),t.qb(5,0,null,null,1,"button",[["class","btn btn-primary"]],null,[[null,"click"]],function(l,n,u){var t=!0,e=l.component;return"click"===n&&(t=!1!==e.save()&&t),t},null,null)),(l()(),t.Ib(-1,null,["Save"]))],null,null)}function _e(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,2,"div",[["class","card p-1 my-1 hoverable"]],null,[[null,"click"]],function(l,n,u){var e=!0;return"click"===n&&(e=!1!==t.Ab(l.parent.parent,17).close(l.context.$implicit)&&e),e},null,null)),(l()(),t.qb(1,0,null,null,1,"dd-concept-list-item",[],null,null,null,Bt,$t)),t.pb(2,114688,null,0,Ht,[],{concept:[0,"concept"],imageSize:[1,"imageSize"]},null)],function(l,n){l(n,2,0,n.context.$implicit,25)},null)}function De(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,2,"div",[["modal-body",""]],null,null,null,null,null)),(l()(),t.hb(16777216,null,null,1,null,_e)),t.pb(2,278528,null,0,p.j,[t.P,t.M,t.t],{ngForOf:[0,"ngForOf"],ngForTrackBy:[1,"ngForTrackBy"]},null)],function(l,n){var u=n.component;l(n,2,0,u.nestableConcepts,u.trackConcept)},null)}function Ne(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,1,"span",[["class","hide-xs"]],null,null,null,null,null)),(l()(),t.Ib(1,null,[" Reorder ",""]))],null,function(l,n){l(n,1,0,n.component.conceptType.pluralForm)})}function Le(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,1,"span",[["class","hide-xs"]],null,null,null,null,null)),(l()(),t.Ib(-1,null,[" Save Order"]))],null,null)}function Fe(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,7,"button",[["class","btn btn-sm"]],null,[[null,"click"]],function(l,n,u){var t=!0,e=l.component;return"click"===n&&(t=!1!==e.toggleReorder()&&t),t},null,null)),(l()(),t.qb(1,0,null,null,2,"i",[["class","icon"]],null,null,null,null,null)),t.pb(2,278528,null,0,p.i,[t.t,t.u,t.k,t.E],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),t.Db(3,{"icon-resize-vert":0,"icon-check":1}),(l()(),t.hb(16777216,null,null,1,null,Ne)),t.pb(5,16384,null,0,p.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null),(l()(),t.hb(16777216,null,null,1,null,Le)),t.pb(7,16384,null,0,p.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null)],function(l,n){var u=n.component,t=l(n,3,0,!u.draggingEnabled,u.draggingEnabled);l(n,2,0,"icon",t),l(n,5,0,!u.draggingEnabled),l(n,7,0,u.draggingEnabled)},null)}function Ke(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,6,"div",[["class","column col-auto"]],null,null,null,null,null)),(l()(),t.hb(16777216,null,null,1,null,Fe)),t.pb(2,16384,null,0,p.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null),(l()(),t.qb(3,0,null,null,3,"button",[["class","btn btn-sm ml-1"]],null,[[null,"click"]],function(l,n,u){var t=!0,e=l.component;return"click"===n&&(t=!1!==e.add()&&t),t},null,null)),(l()(),t.qb(4,0,null,null,0,"i",[["class","icon icon-plus"]],null,null,null,null,null)),(l()(),t.qb(5,0,null,null,1,"span",[["class","hide-xs"]],null,null,null,null,null)),(l()(),t.Ib(6,null,[" Add ",""]))],function(l,n){l(n,2,0,n.component.editable)},function(l,n){l(n,6,0,n.component.conceptType.name)})}function je(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,10,"div",[["class","columns"]],null,null,null,null,null)),(l()(),t.qb(1,0,null,null,4,"div",[["class","column col-auto"]],null,null,null,null,null)),(l()(),t.qb(2,0,null,null,3,"button",[["class","btn btn-sm"]],null,[[null,"click"]],function(l,n,u){var e=!0;return"click"===n&&(e=!1!==t.Ab(l,3).onClick()&&e),e},null,null)),t.pb(3,16384,null,0,r.l,[r.k,r.a,[8,null],t.E,t.k],{routerLink:[0,"routerLink"]},null),t.Bb(4,4),(l()(),t.qb(5,0,null,null,0,"i",[["class","icon icon-arrow-left"]],null,null,null,null,null)),(l()(),t.qb(6,0,null,null,2,"div",[["class","column"]],null,null,null,null,null)),(l()(),t.qb(7,0,null,null,1,"h5",[],null,null,null,null,null)),(l()(),t.Ib(8,null,[""," for ",""])),(l()(),t.hb(16777216,null,null,1,null,Ke)),t.pb(10,16384,null,0,p.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null)],function(l,n){var u=n.component,t=l(n,4,0,"/campaigns",u.campaign.id,"entities",u.entity.id);l(n,3,0,t),l(n,10,0,u.editable)},function(l,n){var u=n.component;l(n,8,0,u.conceptType.pluralForm,u.entity.name)})}function Ge(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,0,"div",[["class","loading loading-lg"]],null,null,null,null,null))],null,null)}function Ue(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,2,"div",[["class","empty p-2"]],null,null,null,null,null)),(l()(),t.qb(1,0,null,null,1,"p",[["class","empty-subtitle"]],null,null,null,null,null)),(l()(),t.Ib(2,null,["No "," here!"]))],null,function(l,n){l(n,2,0,n.component.conceptType.pluralForm)})}function Re(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,0,"div",[["class","drag-placeholder"]],null,null,null,null,null))],null,null)}function Ve(l){return t.Kb(0,[(l()(),t.qb(0,16777216,null,null,9,"div",[["cdkDrag",""],["class","cdk-drag"]],[[2,"cdk-drag-disabled",null],[2,"cdk-drag-dragging",null]],null,null,null,null)),t.Fb(6144,null,un.l,null,[un.c]),t.pb(2,4866048,[[5,4]],3,un.c,[t.k,[3,un.b],p.c,t.A,t.P,tn.a,un.j,un.a,[2,en.a],un.h,t.h],{disabled:[0,"disabled"]},null),t.Gb(603979776,6,{_handles:1}),t.Gb(335544320,7,{_previewTemplate:0}),t.Gb(335544320,8,{_placeholderTemplate:0}),(l()(),t.hb(0,null,null,1,null,Re)),t.pb(7,16384,[[8,4]],0,un.e,[t.M],null,null),(l()(),t.qb(8,0,null,null,1,"dd-concept-entity-manager-list-item",[],null,[[null,"selected"],[null,"addChild"]],function(l,n,u){var t=!0,e=l.component;return"selected"===n&&(t=!1!==e.select(u)&&t),"addChild"===n&&(t=!1!==e.selectChildToNest(l.context.$implicit)&&t),t},pe,Wt)),t.pb(9,114688,null,0,Yt,[f.b,zt.a],{conceptEntity:[0,"conceptEntity"],conceptType:[1,"conceptType"],draggable:[2,"draggable"],allConceptEntities:[3,"allConceptEntities"]},{selected:"selected",addChild:"addChild"}),(l()(),t.hb(0,null,null,0))],function(l,n){var u=n.component;l(n,2,0,!u.editable||!u.draggingEnabled),l(n,9,0,n.context.$implicit,u.conceptType,u.editable&&u.draggingEnabled,u.conceptEntities)},function(l,n){l(n,0,0,t.Ab(n,2).disabled,t.Ab(n,2)._dragRef.isDragging())})}function He(l){return t.Kb(0,[t.Gb(671088640,1,{pickerModal:0}),t.Gb(402653184,2,{viewAndEditModal:0}),t.Gb(402653184,3,{nestSelector:0}),t.Gb(671088640,4,{searchInput:0}),(l()(),t.hb(16777216,null,null,1,null,Pe)),t.pb(5,16384,null,0,p.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null),(l()(),t.qb(6,0,null,null,9,"dd-modal",[],null,null,null,fl.b,fl.a)),t.pb(7,114688,[[2,4],["viewandedit",4]],0,hl.a,[],null,null),(l()(),t.hb(16777216,null,0,1,null,xe)),t.pb(9,16384,null,0,p.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null),(l()(),t.hb(16777216,null,1,1,null,Te)),t.pb(11,16384,null,0,p.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null),(l()(),t.hb(16777216,null,1,1,null,Oe)),t.pb(13,16384,null,0,p.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null),(l()(),t.hb(16777216,null,2,1,null,Me)),t.pb(15,16384,null,0,p.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null),(l()(),t.qb(16,0,null,null,3,"dd-modal",[],null,null,null,fl.b,fl.a)),t.pb(17,114688,[[3,4],["nestselector",4]],0,hl.a,[],null,null),(l()(),t.hb(16777216,null,1,1,null,De)),t.pb(19,16384,null,0,p.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null),(l()(),t.qb(20,0,null,null,13,"div",[["class","container grid-xl"]],null,null,null,null,null)),(l()(),t.hb(16777216,null,null,1,null,je)),t.pb(22,16384,null,0,p.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null),(l()(),t.hb(16777216,null,null,1,null,Ge)),t.pb(24,16384,null,0,p.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null),(l()(),t.hb(16777216,null,null,1,null,Ue)),t.pb(26,16384,null,0,p.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null),(l()(),t.qb(27,0,null,null,6,"div",[["cdkDropList",""],["class","cdk-drop-list"]],[[8,"id",0],[2,"cdk-drop-list-disabled",null],[2,"cdk-drop-list-dragging",null],[2,"cdk-drop-list-receiving",null]],[[null,"cdkDropListDropped"]],function(l,n,u){var t=!0,e=l.component;return"cdkDropListDropped"===n&&(t=!1!==e.conceptDropped(u)&&t),t},null,null)),t.Fb(6144,null,un.b,null,[un.f]),t.pb(29,1196032,null,1,un.f,[t.k,un.j,t.h,[2,en.a],[3,un.g],[2,p.c],un.h],null,{dropped:"cdkDropListDropped"}),t.Gb(603979776,5,{_draggables:1}),t.Fb(256,null,un.g,void 0,[]),(l()(),t.hb(16777216,null,null,1,null,Ve)),t.pb(33,278528,null,0,p.j,[t.P,t.M,t.t],{ngForOf:[0,"ngForOf"],ngForTrackBy:[1,"ngForTrackBy"]},null)],function(l,n){var u=n.component;l(n,5,0,u.conceptType),l(n,7,0),l(n,9,0,u.selectedConceptEntity),l(n,11,0,u.editable&&u.selectedConceptEntity),l(n,13,0,!u.editable&&u.selectedConceptEntity),l(n,15,0,u.editable),l(n,17,0),l(n,19,0,u.nestSelectorParent),l(n,22,0,u.conceptType&&u.entity),l(n,24,0,u.loading),l(n,26,0,u.conceptEntities&&0===u.conceptEntities.length),l(n,33,0,u.topLevelConceptEntities,u.trackConceptEntity)},function(l,n){l(n,27,0,t.Ab(n,29).id,t.Ab(n,29).disabled,t.Ab(n,29)._dropListRef.isDragging(),t.Ab(n,29)._dropListRef.isReceiving())})}function $e(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,1,"dd-concept-entity-manager",[],null,null,null,He,ve)),t.pb(1,245760,null,0,me,[zt.a,f.b,ct.b,st.b,b.a,r.k,r.a],null,null)],function(l,n){l(n,1,0)},null)}var Be=t.mb("dd-concept-entity-manager",me,$e,{conceptType:"conceptType",entity:"entity"},{},[]),ze=u("u+gT"),Xe=u("hEiF"),Qe=u("xzO9"),Ye=u("+awi"),We=u("mrSG"),Ze=function(l){function n(){return l.call(this)||this}return Object(We.__extends)(n,l),n.prototype.ngOnInit=function(){l.prototype.ngOnInit.call(this)},n}(u("nXDu").a),Je=t.ob({encapsulation:0,styles:[["[_nghost-%COMP%]{display:block}"]],data:{}});function li(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,1,"span",[["class","text-primary text-large text-bold"]],null,null,null,null,null)),(l()(),t.Ib(-1,null,["*"]))],null,null)}function ni(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,1,"p",[["class","form-input-hint mb-0"]],null,null,null,null,null)),(l()(),t.Ib(1,null,[" "," "]))],null,function(l,n){l(n,1,0,n.component.fieldConfig.description)})}function ui(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,15,"div",[["class","form-group "]],null,null,null,null,null)),t.pb(1,278528,null,0,p.i,[t.t,t.u,t.k,t.E],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),t.Db(2,{"has-error":0,"has-success":1}),(l()(),t.qb(3,0,null,null,4,"div",[["class","col-2 col-lg-3 col-sm-12"]],null,null,null,null,null)),(l()(),t.qb(4,0,null,null,3,"label",[["class","form-label"]],null,null,null,null,null)),(l()(),t.Ib(5,null,[""," "])),(l()(),t.hb(16777216,null,null,1,null,li)),t.pb(7,16384,null,0,p.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null),(l()(),t.qb(8,0,null,null,7,"div",[["class","col-10 col-lg-9 col-md-12"]],null,null,null,null,null)),(l()(),t.qb(9,0,null,null,6,"div",[],null,null,null,null,null)),(l()(),t.qb(10,0,null,null,1,"dd-dynamic-input",[],null,null,null,ze.b,ze.a)),t.pb(11,114688,null,0,Xe.a,[],{control:[0,"control"],config:[1,"config"]},null),(l()(),t.hb(16777216,null,null,1,null,ni)),t.pb(13,16384,null,0,p.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null),(l()(),t.qb(14,0,null,null,1,"dd-dynamic-validation-errors",[],null,null,null,Qe.b,Qe.a)),t.pb(15,114688,null,0,Ye.a,[],{control:[0,"control"],config:[1,"config"]},null)],function(l,n){var u=n.component,t=l(n,2,0,u.control.invalid&&(u.control.dirty||u.control.touched),u.control.valid&&(u.control.dirty||u.control.touched));l(n,1,0,"form-group ",t),l(n,7,0,u.options.required),l(n,11,0,u.control,u.fieldConfig),l(n,13,0,u.fieldConfig.description),l(n,15,0,u.control,u.fieldConfig)},function(l,n){l(n,5,0,n.component.fieldConfig.name)})}var ti=function(){return(ti=Object.assign||function(l){for(var n,u=1,t=arguments.length;u<t;u++)for(var e in n=arguments[u])Object.prototype.hasOwnProperty.call(n,e)&&(l[e]=n[e]);return l}).apply(this,arguments)},ei=function(l,n,u,t){return new(u||(u=Promise))(function(e,i){function o(l){try{a(t.next(l))}catch(n){i(n)}}function r(l){try{a(t.throw(l))}catch(n){i(n)}}function a(l){l.done?e(l.value):new u(function(n){n(l.value)}).then(o,r)}a((t=t.apply(l,n||[])).next())})},ii=function(l,n){var u,t,e,i,o={label:0,sent:function(){if(1&e[0])throw e[1];return e[1]},trys:[],ops:[]};return i={next:r(0),throw:r(1),return:r(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function r(i){return function(r){return function(i){if(u)throw new TypeError("Generator is already executing.");for(;o;)try{if(u=1,t&&(e=2&i[0]?t.return:i[0]?t.throw||((e=t.return)&&e.call(t),0):t.next)&&!(e=e.call(t,i[1])).done)return e;switch(t=0,e&&(i=[2&i[0],e.value]),i[0]){case 0:case 1:e=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,t=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!(e=(e=o.trys).length>0&&e[e.length-1])&&(6===i[0]||2===i[0])){o=0;continue}if(3===i[0]&&(!e||i[1]>e[0]&&i[1]<e[3])){o.label=i[1];break}if(6===i[0]&&o.label<e[1]){o.label=e[1],e=i;break}if(e&&o.label<e[2]){o.label=e[2],o.ops.push(i);break}e[2]&&o.ops.pop(),o.trys.pop();continue}i=n.call(l,o)}catch(r){i=[6,r],t=0}finally{u=e=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,r])}}},oi=function(){function l(l,n,u,t,e,i){this.route=l,this.router=n,this.entityService=u,this.campaignService=t,this.login=e,this.location=i,this.loading=!1,this.saving=!1}return l.prototype.ngOnInit=function(){var l=this;this._entTypeId=this.route.snapshot.paramMap.get("ent_type_id"),this.formGroup=new R.k({name:new R.h(null,[R.x.required,R.x.minLength(2),R.x.maxLength(20)]),content:new R.h(null),spawnable:new R.h(!1),xp:new R.h(0,[R.x.min(0)]),currency:new R.h(null,[R.x.min(0)]),health:new R.k({max:new R.h(null,[R.x.min(1)]),current:new R.h(null,[R.x.min(0)]),textDamageLevels:new R.e([])}),fields:new R.e([]),imageId:new R.h("uncertainty"),imageColor1:new R.h("#fff"),imageColor2:new R.h("#000")}),this.route.paramMap.subscribe(function(n){var u=n.get("ent_id");l._entTypeId=n.get("ent_type_id"),l.editing&&l.loadEntity(u),l.fields.reset(),(l.preset.fields||[]).forEach(function(){l.fields.push(new R.h(null))})}),this.editing||(this.setFormValidators(),"true"===this.route.snapshot.queryParamMap.get("spawnable")&&this.formGroup.patchValue({spawnable:!0}))},l.prototype.canDeactivate=function(){return this.formGroup.pristine},l.prototype.setFormValidators=function(){this.preset.isXPEnabled&&this.formGroup.get("xp").setValidators([R.x.min(0),R.x.required]),this.preset.isHealthEnabled&&(this.formGroup.get("health.max").setValidators([R.x.min(1),R.x.required]),this.formGroup.get("health.current").setValidators([R.x.min(0),R.x.required]))},l.prototype.constructEntity=function(){var l=this,n=this.formGroup.value,u=null;this.preset.isHealthEnabled&&this.preset.health.type===ct.d.TEXT_BASED&&(u={},this.hpTextLevels.controls.forEach(function(l){u[l.value.percent]=l.value.text}));var t={id:this.entity?this.entity.id:"",name:n.name,content:n.content,xp:n.xp,imageId:n.imageId,imageColor1:n.imageColor1,imageColor2:n.imageColor2,currency:n.currency,spawnable:n.spawnable,fields:this.fields.value.map(function(n,u){return{name:l.preset.fields[u].name,value:n}}).filter(function(l){return null!==l.value&&void 0!==l.value&&""!==l.value}),health:{max:n.health.max,current:n.health.current,textDamageLevels:u},userId:this.editing?this.entity.userId:this.login.id,campaignId:this.campaignService.campaign.id,entityPresetId:this.preset.id};return this.preset.isHealthEnabled||(t.health=null),t},l.prototype.loadEntity=function(l){return ei(this,void 0,void 0,function(){var n,u=this;return ii(this,function(t){switch(t.label){case 0:this.loading=!0,this.entity=null,this.formGroup.disable(),t.label=1;case 1:return t.trys.push([1,3,,4]),[4,this.entityService.getEntity(l)];case 2:return n=t.sent(),this.entity=n,this.setFormValidators(),this.entity.health&&this.entity.health.textDamageLevels&&Object.keys(this.entity.health.textDamageLevels).forEach(function(){u.addHealthText()}),setTimeout(function(){var l=ti({},n);if(l.fields=(u.preset.fields||[]).map(function(l){var n=(u.entity.fields||[]).find(function(n){return n.name===l.name});return n?n.value:null}),l.health&&l.health.textDamageLevels){var t=Object.keys(l.health.textDamageLevels).map(function(n){return{percent:n,text:l.health.textDamageLevels[n]}});l.health.textDamageLevels=t}else l.health&&(l.health.textDamageLevels=[]);null===n.health&&(n.health={max:1,current:0}),u.formGroup.patchValue(l)},1),[3,4];case 3:throw t.sent();case 4:return this.formGroup.enable(),this.loading=!1,[2]}})})},l.prototype.save=function(){return ei(this,void 0,void 0,function(){var l,n;return ii(this,function(u){switch(u.label){case 0:if(l=this.constructEntity(),this.saving=!0,this.formGroup.disable(),!this.editing)return[3,5];u.label=1;case 1:return u.trys.push([1,3,,4]),[4,this.entityService.updateEntity(l)];case 2:return u.sent(),this.formGroup.markAsPristine(),this.cancel(),[3,4];case 3:throw u.sent();case 4:return[3,8];case 5:return u.trys.push([5,7,,8]),[4,this.entityService.createEntity(l)];case 6:return n=u.sent(),this.formGroup.markAsPristine(),this.router.navigate(["campaigns",this.campaignService.campaign.id,"entities",n.id]),[3,8];case 7:throw u.sent();case 8:return this.formGroup.enable(),this.saving=!1,[2]}})})},l.prototype.delete=function(){return ei(this,void 0,void 0,function(){return ii(this,function(l){switch(l.label){case 0:return[4,dn.a.fire({title:"Are you sure?",text:"This cannot be undone!",type:"question",showCancelButton:!0,showConfirmButton:!0})];case 1:if(!0!==l.sent().value)return[3,5];l.label=2;case 2:return l.trys.push([2,4,,5]),[4,this.entityService.deleteEntity(this.entity.id)];case 3:return l.sent(),this.router.navigate(["campaigns",this.campaignService.campaign.id,"overview"]),[3,5];case 4:throw l.sent();case 5:return[2]}})})},l.prototype.addHealthText=function(){this.hpTextLevels.push(new R.k({percent:new R.h(null,[R.x.required,R.x.min(0),R.x.max(100)]),text:new R.h(null,[R.x.required,R.x.maxLength(150)])}))},l.prototype.removeHealthText=function(l){this.hpTextLevels.removeAt(l)},l.prototype.trackField=function(l){return l},l.prototype.getFieldConfig=function(l){return l.type===pt.a.CURRENCY&&(l.options={levels:this.campaignService.campaign.currencyMap,trackCoins:this.campaignService.campaign.trackCoins}),l},l.prototype.cancel=function(){this.location.back()},Object.defineProperty(l.prototype,"preset",{get:function(){var l=this;return this.campaignService.campaign.entityPresets.find(function(n){return n.id===(l._entTypeId||l.route.snapshot.paramMap.get("ent_type_id"))})},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"name",{get:function(){return this.formGroup.get("name")},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"content",{get:function(){return this.formGroup.get("content")},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"xp",{get:function(){return this.formGroup.get("xp")},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"currency",{get:function(){return this.formGroup.get("currency")},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"health",{get:function(){return this.formGroup.get("health")},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"hpMax",{get:function(){return this.formGroup.get("health.max")},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"hpCurrent",{get:function(){return this.formGroup.get("health.current")},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"hpTextLevels",{get:function(){return this.formGroup.get("health.textDamageLevels")},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"campaignEditable",{get:function(){return this.campaignService.canEdit},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"editing",{get:function(){return this.route.snapshot.data.editing},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"currencyConfig",{get:function(){return{name:"Money",type:pt.a.CURRENCY,options:{levels:this.campaignService.campaign.currencyMap,trackCoins:this.campaignService.campaign.trackCoins}}},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"fields",{get:function(){return this.formGroup.get("fields")},enumerable:!0,configurable:!0}),l}(),ri=t.ob({encapsulation:0,styles:[[""]],data:{}});function ai(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,0,"div",[["class","loading loading-lg"]],null,null,null,null,null))],null,null)}function ci(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,1,"button",[["class","btn btn-error mr-2"]],null,[[null,"click"]],function(l,n,u){var t=!0,e=l.component;return"click"===n&&(t=!1!==e.delete()&&t),t},null,null)),(l()(),t.Ib(-1,null,[" Delete "]))],null,null)}function si(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,12,"div",[["class","columns"]],null,null,null,null,null)),(l()(),t.qb(1,0,null,null,2,"div",[["class","column"]],null,null,null,null,null)),(l()(),t.qb(2,0,null,null,1,"h3",[],null,null,null,null,null)),(l()(),t.Ib(3,null,[""," ",""])),(l()(),t.qb(4,0,null,null,8,"div",[["class","column col-auto col-ml-auto"]],null,null,null,null,null)),(l()(),t.qb(5,0,null,null,1,"button",[["class","btn mr-2"]],null,[[null,"click"]],function(l,n,u){var t=!0,e=l.component;return"click"===n&&(t=!1!==e.cancel()&&t),t},null,null)),(l()(),t.Ib(-1,null,["Cancel"])),(l()(),t.hb(16777216,null,null,1,null,ci)),t.pb(8,16384,null,0,p.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null),(l()(),t.qb(9,0,null,null,3,"button",[["class","btn btn-primary"]],[[8,"disabled",0]],[[null,"click"]],function(l,n,u){var t=!0,e=l.component;return"click"===n&&(t=!1!==e.save()&&t),t},null,null)),t.pb(10,278528,null,0,p.i,[t.t,t.u,t.k,t.E],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),t.Db(11,{loading:0}),(l()(),t.Ib(-1,null,[" Save "]))],function(l,n){var u=n.component;l(n,8,0,u.editing);var t=l(n,11,0,u.saving);l(n,10,0,"btn btn-primary",t)},function(l,n){var u=n.component;l(n,3,0,u.editing?"Edit":"Create",u.preset.name),l(n,9,0,u.formGroup.invalid)})}function pi(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,1,"p",[["class","form-input-hint"]],null,null,null,null,null)),(l()(),t.Ib(-1,null,[" An XP value is required "]))],null,null)}function bi(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,1,"p",[["class","form-input-hint"]],null,null,null,null,null)),(l()(),t.Ib(-1,null,[" Can't have negative XP :/ "]))],null,null)}function di(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,17,"div",[["class","form-group"]],null,null,null,null,null)),t.pb(1,278528,null,0,p.i,[t.t,t.u,t.k,t.E],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),t.Db(2,{"has-error":0,"has-success":1}),(l()(),t.qb(3,0,null,null,3,"label",[["class","form-label"],["for","xp"]],null,null,null,null,null)),(l()(),t.Ib(-1,null,["XP "])),(l()(),t.qb(5,0,null,null,1,"span",[["class","text-large text-bold text-primary"]],null,null,null,null,null)),(l()(),t.Ib(-1,null,["*"])),(l()(),t.qb(7,0,null,null,6,"input",[["class","form-input"],["formControlName","xp"],["id","xp"],["name","xp"],["placeholder","XP"],["type","number"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"]],function(l,n,u){var e=!0;return"input"===n&&(e=!1!==t.Ab(l,8)._handleInput(u.target.value)&&e),"blur"===n&&(e=!1!==t.Ab(l,8).onTouched()&&e),"compositionstart"===n&&(e=!1!==t.Ab(l,8)._compositionStart()&&e),"compositionend"===n&&(e=!1!==t.Ab(l,8)._compositionEnd(u.target.value)&&e),"change"===n&&(e=!1!==t.Ab(l,9).onChange(u.target.value)&&e),"input"===n&&(e=!1!==t.Ab(l,9).onChange(u.target.value)&&e),"blur"===n&&(e=!1!==t.Ab(l,9).onTouched()&&e),e},null,null)),t.pb(8,16384,null,0,R.d,[t.E,t.k,[2,R.a]],null,null),t.pb(9,16384,null,0,R.z,[t.E,t.k],null,null),t.Fb(1024,null,R.o,function(l,n){return[l,n]},[R.d,R.z]),t.pb(11,671744,null,0,R.j,[[3,R.c],[8,null],[8,null],[6,R.o],[2,R.D]],{name:[0,"name"]},null),t.Fb(2048,null,R.p,null,[R.j]),t.pb(13,16384,null,0,R.q,[[4,R.p]],null,null),(l()(),t.hb(16777216,null,null,1,null,pi)),t.pb(15,16384,null,0,p.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null),(l()(),t.hb(16777216,null,null,1,null,bi)),t.pb(17,16384,null,0,p.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null)],function(l,n){var u=n.component,t=l(n,2,0,u.xp.invalid&&(u.xp.touched||u.xp.dirty),u.xp.valid&&(u.xp.touched||u.xp.dirty));l(n,1,0,"form-group",t),l(n,11,0,"xp"),l(n,15,0,u.xp.invalid&&(u.xp.touched||u.xp.dirty)&&u.xp.errors.required),l(n,17,0,u.xp.invalid&&(u.xp.touched||u.xp.dirty)&&u.xp.errors.min)},function(l,n){l(n,7,0,t.Ab(n,13).ngClassUntouched,t.Ab(n,13).ngClassTouched,t.Ab(n,13).ngClassPristine,t.Ab(n,13).ngClassDirty,t.Ab(n,13).ngClassValid,t.Ab(n,13).ngClassInvalid,t.Ab(n,13).ngClassPending)})}function fi(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,1,"p",[["class","form-input-hint"]],null,null,null,null,null)),(l()(),t.Ib(-1,null,[" A name is required "]))],null,null)}function hi(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,1,"p",[["class","form-input-hint"]],null,null,null,null,null)),(l()(),t.Ib(-1,null,[" The name can't be shorter than 2 characters "]))],null,null)}function gi(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,1,"p",[["class","form-input-hint"]],null,null,null,null,null)),(l()(),t.Ib(-1,null,[" The name can't be longer than 20 characters "]))],null,null)}function mi(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,11,"div",[["class","form-group"]],null,null,null,null,null)),(l()(),t.qb(1,0,null,null,8,"label",[["class","form-checkbox"]],null,null,null,null,null)),(l()(),t.qb(2,0,null,null,5,"input",[["formControlName","spawnable"],["type","checkbox"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"change"],[null,"blur"]],function(l,n,u){var e=!0;return"change"===n&&(e=!1!==t.Ab(l,3).onChange(u.target.checked)&&e),"blur"===n&&(e=!1!==t.Ab(l,3).onTouched()&&e),e},null,null)),t.pb(3,16384,null,0,R.b,[t.E,t.k],null,null),t.Fb(1024,null,R.o,function(l){return[l]},[R.b]),t.pb(5,671744,null,0,R.j,[[3,R.c],[8,null],[8,null],[6,R.o],[2,R.D]],{name:[0,"name"]},null),t.Fb(2048,null,R.p,null,[R.j]),t.pb(7,16384,null,0,R.q,[[4,R.p]],null,null),(l()(),t.qb(8,0,null,null,0,"i",[["class","form-icon"]],null,null,null,null,null)),(l()(),t.Ib(9,null,[" This "," is spawnable "])),(l()(),t.qb(10,0,null,null,1,"p",[["class","form-input-hint"]],null,null,null,null,null)),(l()(),t.Ib(11,null,["Turns this "," into a preset that can be quickly spawned into game sessions."]))],function(l,n){l(n,5,0,"spawnable")},function(l,n){var u=n.component;l(n,2,0,t.Ab(n,7).ngClassUntouched,t.Ab(n,7).ngClassTouched,t.Ab(n,7).ngClassPristine,t.Ab(n,7).ngClassDirty,t.Ab(n,7).ngClassValid,t.Ab(n,7).ngClassInvalid,t.Ab(n,7).ngClassPending),l(n,9,0,u.preset.name),l(n,11,0,u.preset.name)})}function vi(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,1,"dd-dynamic-field",[],null,null,null,Ju.b,Ju.a)),t.pb(1,114688,null,0,lt.a,[],{control:[0,"control"],config:[1,"config"]},null)],function(l,n){var u=n.component;l(n,1,0,u.currency,u.currencyConfig)},null)}function yi(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,1,"p",[["class","form-input-hint mb-0"]],null,null,null,null,null)),(l()(),t.Ib(-1,null,[" A value is required for current health "]))],null,null)}function Ci(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,1,"p",[["class","form-input-hint mb-0"]],null,null,null,null,null)),(l()(),t.Ib(-1,null,[" A value is required for max health "]))],null,null)}function Ii(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,30,"div",[["class","form-group"],["formGroupName","health"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],null,null,null,null)),t.pb(1,278528,null,0,p.i,[t.t,t.u,t.k,t.E],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),t.Db(2,{"has-error":0,"has-success":1}),t.pb(3,212992,null,0,R.m,[[3,R.c],[8,null],[8,null]],{name:[0,"name"]},null),t.Fb(2048,null,R.c,null,[R.m]),t.pb(5,16384,null,0,R.r,[[4,R.c]],null,null),(l()(),t.qb(6,0,null,null,3,"label",[["class","form-label"]],null,null,null,null,null)),(l()(),t.Ib(-1,null,["Health "])),(l()(),t.qb(8,0,null,null,1,"span",[["class","text-primary text-large text-bold"]],null,null,null,null,null)),(l()(),t.Ib(-1,null,["*"])),(l()(),t.qb(10,0,null,null,16,"div",[["class","input-group"]],null,null,null,null,null)),(l()(),t.qb(11,0,null,null,6,"input",[["class","form-input"],["formControlName","current"],["id","current-hp"],["name","current-hp"],["placeholder","Current HP"],["type","number"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"]],function(l,n,u){var e=!0;return"input"===n&&(e=!1!==t.Ab(l,12)._handleInput(u.target.value)&&e),"blur"===n&&(e=!1!==t.Ab(l,12).onTouched()&&e),"compositionstart"===n&&(e=!1!==t.Ab(l,12)._compositionStart()&&e),"compositionend"===n&&(e=!1!==t.Ab(l,12)._compositionEnd(u.target.value)&&e),"change"===n&&(e=!1!==t.Ab(l,13).onChange(u.target.value)&&e),"input"===n&&(e=!1!==t.Ab(l,13).onChange(u.target.value)&&e),"blur"===n&&(e=!1!==t.Ab(l,13).onTouched()&&e),e},null,null)),t.pb(12,16384,null,0,R.d,[t.E,t.k,[2,R.a]],null,null),t.pb(13,16384,null,0,R.z,[t.E,t.k],null,null),t.Fb(1024,null,R.o,function(l,n){return[l,n]},[R.d,R.z]),t.pb(15,671744,null,0,R.j,[[3,R.c],[8,null],[8,null],[6,R.o],[2,R.D]],{name:[0,"name"]},null),t.Fb(2048,null,R.p,null,[R.j]),t.pb(17,16384,null,0,R.q,[[4,R.p]],null,null),(l()(),t.qb(18,0,null,null,1,"span",[["class","input-group-addon"]],null,null,null,null,null)),(l()(),t.Ib(-1,null,["/"])),(l()(),t.qb(20,0,null,null,6,"input",[["class","form-input"],["formControlName","max"],["id","current-hp"],["name","current-hp"],["placeholder","Max HP"],["type","number"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"]],function(l,n,u){var e=!0;return"input"===n&&(e=!1!==t.Ab(l,21)._handleInput(u.target.value)&&e),"blur"===n&&(e=!1!==t.Ab(l,21).onTouched()&&e),"compositionstart"===n&&(e=!1!==t.Ab(l,21)._compositionStart()&&e),"compositionend"===n&&(e=!1!==t.Ab(l,21)._compositionEnd(u.target.value)&&e),"change"===n&&(e=!1!==t.Ab(l,22).onChange(u.target.value)&&e),"input"===n&&(e=!1!==t.Ab(l,22).onChange(u.target.value)&&e),"blur"===n&&(e=!1!==t.Ab(l,22).onTouched()&&e),e},null,null)),t.pb(21,16384,null,0,R.d,[t.E,t.k,[2,R.a]],null,null),t.pb(22,16384,null,0,R.z,[t.E,t.k],null,null),t.Fb(1024,null,R.o,function(l,n){return[l,n]},[R.d,R.z]),t.pb(24,671744,null,0,R.j,[[3,R.c],[8,null],[8,null],[6,R.o],[2,R.D]],{name:[0,"name"]},null),t.Fb(2048,null,R.p,null,[R.j]),t.pb(26,16384,null,0,R.q,[[4,R.p]],null,null),(l()(),t.hb(16777216,null,null,1,null,yi)),t.pb(28,16384,null,0,p.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null),(l()(),t.hb(16777216,null,null,1,null,Ci)),t.pb(30,16384,null,0,p.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null)],function(l,n){var u=n.component,t=l(n,2,0,u.health.invalid&&(u.health.dirty||u.health.touched),u.health.valid&&(u.health.dirty||u.health.touched));l(n,1,0,"form-group",t),l(n,3,0,"health"),l(n,15,0,"current"),l(n,24,0,"max"),l(n,28,0,u.hpCurrent.invalid&&(u.hpMax.dirty||u.hpMax.touched||u.hpCurrent.dirty||u.hpCurrent.touched)&&u.hpCurrent.errors.required),l(n,30,0,u.hpMax.invalid&&(u.hpMax.dirty||u.hpMax.touched||u.hpCurrent.dirty||u.hpCurrent.touched)&&u.hpMax.errors.required)},function(l,n){l(n,0,0,t.Ab(n,5).ngClassUntouched,t.Ab(n,5).ngClassTouched,t.Ab(n,5).ngClassPristine,t.Ab(n,5).ngClassDirty,t.Ab(n,5).ngClassValid,t.Ab(n,5).ngClassInvalid,t.Ab(n,5).ngClassPending),l(n,11,0,t.Ab(n,17).ngClassUntouched,t.Ab(n,17).ngClassTouched,t.Ab(n,17).ngClassPristine,t.Ab(n,17).ngClassDirty,t.Ab(n,17).ngClassValid,t.Ab(n,17).ngClassInvalid,t.Ab(n,17).ngClassPending),l(n,20,0,t.Ab(n,26).ngClassUntouched,t.Ab(n,26).ngClassTouched,t.Ab(n,26).ngClassPristine,t.Ab(n,26).ngClassDirty,t.Ab(n,26).ngClassValid,t.Ab(n,26).ngClassInvalid,t.Ab(n,26).ngClassPending)})}function qi(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,2,"div",[["class","empty p-2"]],null,null,null,null,null)),(l()(),t.qb(1,0,null,null,1,"p",[["class","empty-subtitle"]],null,null,null,null,null)),(l()(),t.Ib(2,null,["This "," has no health text yet, (players will see nothing)"]))],null,function(l,n){l(n,2,0,n.component.preset.name)})}function ki(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,25,"div",[],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"submit"],[null,"reset"]],function(l,n,u){var e=!0;return"submit"===n&&(e=!1!==t.Ab(l,1).onSubmit(u)&&e),"reset"===n&&(e=!1!==t.Ab(l,1).onReset()&&e),e},null,null)),t.pb(1,540672,null,0,R.l,[[8,null],[8,null]],{form:[0,"form"]},null),t.Fb(2048,null,R.c,null,[R.l]),t.pb(3,16384,null,0,R.r,[[4,R.c]],null,null),(l()(),t.qb(4,0,null,null,21,"div",[["class","columns"]],null,null,null,null,null)),(l()(),t.qb(5,0,null,null,10,"div",[["class","column col-2 form-group"]],null,null,null,null,null)),(l()(),t.qb(6,0,null,null,9,"div",[["class","input-group"]],null,null,null,null,null)),(l()(),t.qb(7,0,null,null,6,"input",[["class","form-input"],["formControlName","percent"],["max","100"],["min","0"],["placeholder","80"],["type","number"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"]],function(l,n,u){var e=!0;return"input"===n&&(e=!1!==t.Ab(l,8)._handleInput(u.target.value)&&e),"blur"===n&&(e=!1!==t.Ab(l,8).onTouched()&&e),"compositionstart"===n&&(e=!1!==t.Ab(l,8)._compositionStart()&&e),"compositionend"===n&&(e=!1!==t.Ab(l,8)._compositionEnd(u.target.value)&&e),"change"===n&&(e=!1!==t.Ab(l,9).onChange(u.target.value)&&e),"input"===n&&(e=!1!==t.Ab(l,9).onChange(u.target.value)&&e),"blur"===n&&(e=!1!==t.Ab(l,9).onTouched()&&e),e},null,null)),t.pb(8,16384,null,0,R.d,[t.E,t.k,[2,R.a]],null,null),t.pb(9,16384,null,0,R.z,[t.E,t.k],null,null),t.Fb(1024,null,R.o,function(l,n){return[l,n]},[R.d,R.z]),t.pb(11,671744,null,0,R.j,[[3,R.c],[8,null],[8,null],[6,R.o],[2,R.D]],{name:[0,"name"]},null),t.Fb(2048,null,R.p,null,[R.j]),t.pb(13,16384,null,0,R.q,[[4,R.p]],null,null),(l()(),t.qb(14,0,null,null,1,"div",[["class","input-group-addon"]],null,null,null,null,null)),(l()(),t.Ib(-1,null,[" % "])),(l()(),t.qb(16,0,null,null,6,"div",[["class","column"]],null,null,null,null,null)),(l()(),t.qb(17,0,null,null,5,"input",[["class","form-input"],["formControlName","text"],["placeholder","Looking a little bit sad"],["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(l,n,u){var e=!0;return"input"===n&&(e=!1!==t.Ab(l,18)._handleInput(u.target.value)&&e),"blur"===n&&(e=!1!==t.Ab(l,18).onTouched()&&e),"compositionstart"===n&&(e=!1!==t.Ab(l,18)._compositionStart()&&e),"compositionend"===n&&(e=!1!==t.Ab(l,18)._compositionEnd(u.target.value)&&e),e},null,null)),t.pb(18,16384,null,0,R.d,[t.E,t.k,[2,R.a]],null,null),t.Fb(1024,null,R.o,function(l){return[l]},[R.d]),t.pb(20,671744,null,0,R.j,[[3,R.c],[8,null],[8,null],[6,R.o],[2,R.D]],{name:[0,"name"]},null),t.Fb(2048,null,R.p,null,[R.j]),t.pb(22,16384,null,0,R.q,[[4,R.p]],null,null),(l()(),t.qb(23,0,null,null,2,"div",[["class","column col-auto"]],null,null,null,null,null)),(l()(),t.qb(24,0,null,null,1,"button",[["class","btn btn-error"]],null,[[null,"click"]],function(l,n,u){var t=!0,e=l.component;return"click"===n&&(t=!1!==e.removeHealthText(l.context.index)&&t),t},null,null)),(l()(),t.qb(25,0,null,null,0,"i",[["class","icon icon-cross"]],null,null,null,null,null))],function(l,n){l(n,1,0,n.context.$implicit),l(n,11,0,"percent"),l(n,20,0,"text")},function(l,n){l(n,0,0,t.Ab(n,3).ngClassUntouched,t.Ab(n,3).ngClassTouched,t.Ab(n,3).ngClassPristine,t.Ab(n,3).ngClassDirty,t.Ab(n,3).ngClassValid,t.Ab(n,3).ngClassInvalid,t.Ab(n,3).ngClassPending),l(n,7,0,t.Ab(n,13).ngClassUntouched,t.Ab(n,13).ngClassTouched,t.Ab(n,13).ngClassPristine,t.Ab(n,13).ngClassDirty,t.Ab(n,13).ngClassValid,t.Ab(n,13).ngClassInvalid,t.Ab(n,13).ngClassPending),l(n,17,0,t.Ab(n,22).ngClassUntouched,t.Ab(n,22).ngClassTouched,t.Ab(n,22).ngClassPristine,t.Ab(n,22).ngClassDirty,t.Ab(n,22).ngClassValid,t.Ab(n,22).ngClassInvalid,t.Ab(n,22).ngClassPending)})}function Ai(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,14,"div",[["class","form-group"],["formGroupName","health"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],null,null,null,null)),t.pb(1,212992,null,0,R.m,[[3,R.c],[8,null],[8,null]],{name:[0,"name"]},null),t.Fb(2048,null,R.c,null,[R.m]),t.pb(3,16384,null,0,R.r,[[4,R.c]],null,null),(l()(),t.qb(4,0,null,null,6,"div",[["class","columns"]],null,null,null,null,null)),(l()(),t.qb(5,0,null,null,2,"div",[["class","column"]],null,null,null,null,null)),(l()(),t.qb(6,0,null,null,1,"label",[["class","form-label"]],null,null,null,null,null)),(l()(),t.Ib(-1,null,["Health Text"])),(l()(),t.qb(8,0,null,null,2,"div",[["class","column col-auto"]],null,null,null,null,null)),(l()(),t.qb(9,0,null,null,1,"button",[["class","button btn btn-sm"]],null,[[null,"click"]],function(l,n,u){var t=!0,e=l.component;return"click"===n&&(t=!1!==e.addHealthText()&&t),t},null,null)),(l()(),t.qb(10,0,null,null,0,"div",[["class","i icon icon-plus"]],null,null,null,null,null)),(l()(),t.hb(16777216,null,null,1,null,qi)),t.pb(12,16384,null,0,p.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null),(l()(),t.hb(16777216,null,null,1,null,ki)),t.pb(14,278528,null,0,p.j,[t.P,t.M,t.t],{ngForOf:[0,"ngForOf"]},null)],function(l,n){var u=n.component;l(n,1,0,"health"),l(n,12,0,0===u.hpTextLevels.length),l(n,14,0,u.hpTextLevels.controls)},function(l,n){l(n,0,0,t.Ab(n,3).ngClassUntouched,t.Ab(n,3).ngClassTouched,t.Ab(n,3).ngClassPristine,t.Ab(n,3).ngClassDirty,t.Ab(n,3).ngClassValid,t.Ab(n,3).ngClassInvalid,t.Ab(n,3).ngClassPending)})}function wi(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,1,"h3",[["class","mt-2"]],null,null,null,null,null)),(l()(),t.Ib(-1,null,["Custom Attributes"]))],null,null)}function Pi(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,1,"dd-dynamic-field-horizontal",[["class","col-12 mb-2"]],null,null,null,ui,Je)),t.pb(1,114688,null,0,Ze,[],{control:[0,"control"],config:[1,"config"]},null)],function(l,n){var u=n.component;l(n,1,0,u.fields.controls[n.context.index],u.getFieldConfig(n.context.$implicit))},null)}function xi(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,55,"div",[],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"submit"],[null,"reset"]],function(l,n,u){var e=!0;return"submit"===n&&(e=!1!==t.Ab(l,1).onSubmit(u)&&e),"reset"===n&&(e=!1!==t.Ab(l,1).onReset()&&e),e},null,null)),t.pb(1,540672,null,0,R.l,[[8,null],[8,null]],{form:[0,"form"]},null),t.Fb(2048,null,R.c,null,[R.l]),t.pb(3,16384,null,0,R.r,[[4,R.c]],null,null),(l()(),t.qb(4,0,null,null,46,"div",[["class","columns"]],null,null,null,null,null)),(l()(),t.qb(5,0,null,null,8,"div",[["class","column col-3 col-md-12"]],null,null,null,null,null)),(l()(),t.qb(6,0,null,null,5,"dd-image-upload",[["formControlName","imageId"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],null,null,Tl,Il)),t.pb(7,4308992,null,0,Cl,[b.a,f.b],null,null),t.Fb(1024,null,R.o,function(l){return[l]},[Cl]),t.pb(9,671744,null,0,R.j,[[3,R.c],[8,null],[8,null],[6,R.o],[2,R.D]],{name:[0,"name"]},null),t.Fb(2048,null,R.p,null,[R.j]),t.pb(11,16384,null,0,R.q,[[4,R.p]],null,null),(l()(),t.hb(16777216,null,null,1,null,di)),t.pb(13,16384,null,0,p.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null),(l()(),t.qb(14,0,null,null,36,"div",[["class","column col-9 col-md-12"]],null,null,null,null,null)),(l()(),t.qb(15,0,null,null,18,"div",[["class","form-group"]],null,null,null,null,null)),t.pb(16,278528,null,0,p.i,[t.t,t.u,t.k,t.E],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),t.Db(17,{"has-error":0,"has-success":1}),(l()(),t.qb(18,0,null,null,3,"label",[["class","form-lable"],["for","name"]],null,null,null,null,null)),(l()(),t.Ib(-1,null,["Name "])),(l()(),t.qb(20,0,null,null,1,"span",[["class","text-large text-bold text-primary"]],null,null,null,null,null)),(l()(),t.Ib(-1,null,["*"])),(l()(),t.qb(22,0,null,null,5,"input",[["class","form-input"],["formControlName","name"],["id","name"],["name","name"],["placeholder","Name"],["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(l,n,u){var e=!0;return"input"===n&&(e=!1!==t.Ab(l,23)._handleInput(u.target.value)&&e),"blur"===n&&(e=!1!==t.Ab(l,23).onTouched()&&e),"compositionstart"===n&&(e=!1!==t.Ab(l,23)._compositionStart()&&e),"compositionend"===n&&(e=!1!==t.Ab(l,23)._compositionEnd(u.target.value)&&e),e},null,null)),t.pb(23,16384,null,0,R.d,[t.E,t.k,[2,R.a]],null,null),t.Fb(1024,null,R.o,function(l){return[l]},[R.d]),t.pb(25,671744,null,0,R.j,[[3,R.c],[8,null],[8,null],[6,R.o],[2,R.D]],{name:[0,"name"]},null),t.Fb(2048,null,R.p,null,[R.j]),t.pb(27,16384,null,0,R.q,[[4,R.p]],null,null),(l()(),t.hb(16777216,null,null,1,null,fi)),t.pb(29,16384,null,0,p.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null),(l()(),t.hb(16777216,null,null,1,null,hi)),t.pb(31,16384,null,0,p.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null),(l()(),t.hb(16777216,null,null,1,null,gi)),t.pb(33,16384,null,0,p.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null),(l()(),t.qb(34,0,null,null,8,"div",[["class","form-group"]],null,null,null,null,null)),(l()(),t.qb(35,0,null,null,1,"label",[["class","form-label"],["for","description"]],null,null,null,null,null)),(l()(),t.Ib(-1,null,["Description"])),(l()(),t.qb(37,0,null,null,5,"dd-quill",[["formControlName","content"],["placeholder","Description"],["simple","true"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],null,null,Sl.b,Sl.a)),t.pb(38,1163264,null,0,Ol.a,[f.b,Ml.a,b.a,r.k,P.c,_l.b,Dl.a,Nl.a],{simple:[0,"simple"],placeholder:[1,"placeholder"]},null),t.Fb(1024,null,R.o,function(l){return[l]},[Ol.a]),t.pb(40,671744,null,0,R.j,[[3,R.c],[8,null],[8,null],[6,R.o],[2,R.D]],{name:[0,"name"]},null),t.Fb(2048,null,R.p,null,[R.j]),t.pb(42,16384,null,0,R.q,[[4,R.p]],null,null),(l()(),t.hb(16777216,null,null,1,null,mi)),t.pb(44,16384,null,0,p.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null),(l()(),t.hb(16777216,null,null,1,null,vi)),t.pb(46,16384,null,0,p.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null),(l()(),t.hb(16777216,null,null,1,null,Ii)),t.pb(48,16384,null,0,p.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null),(l()(),t.hb(16777216,null,null,1,null,Ai)),t.pb(50,16384,null,0,p.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null),(l()(),t.hb(16777216,null,null,1,null,wi)),t.pb(52,16384,null,0,p.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null),(l()(),t.qb(53,0,null,null,2,"div",[["class","form-horizontal"]],null,null,null,null,null)),(l()(),t.hb(16777216,null,null,1,null,Pi)),t.pb(55,278528,null,0,p.j,[t.P,t.M,t.t],{ngForOf:[0,"ngForOf"],ngForTrackBy:[1,"ngForTrackBy"]},null)],function(l,n){var u=n.component;l(n,1,0,u.formGroup),l(n,7,0),l(n,9,0,"imageId"),l(n,13,0,u.preset.isXPEnabled);var t=l(n,17,0,u.name.invalid&&(u.name.touched||u.name.dirty),u.name.valid&&(u.name.touched||u.name.dirty));l(n,16,0,"form-group",t),l(n,25,0,"name"),l(n,29,0,u.name.invalid&&(u.name.touched||u.name.dirty)&&u.name.errors.required),l(n,31,0,u.name.invalid&&(u.name.touched||u.name.dirty)&&u.name.errors.minlength),l(n,33,0,u.name.invalid&&(u.name.touched||u.name.dirty)&&u.name.errors.maxlength),l(n,38,0,"true","Description"),l(n,40,0,"content"),l(n,44,0,u.campaignEditable),l(n,46,0,u.preset.isCurrencyEnabled),l(n,48,0,u.preset.isHealthEnabled),l(n,50,0,u.preset.isHealthEnabled&&1===u.preset.health.type),l(n,52,0,u.preset.fields&&u.preset.fields.length>0),l(n,55,0,u.preset.fields,u.trackField)},function(l,n){l(n,0,0,t.Ab(n,3).ngClassUntouched,t.Ab(n,3).ngClassTouched,t.Ab(n,3).ngClassPristine,t.Ab(n,3).ngClassDirty,t.Ab(n,3).ngClassValid,t.Ab(n,3).ngClassInvalid,t.Ab(n,3).ngClassPending),l(n,6,0,t.Ab(n,11).ngClassUntouched,t.Ab(n,11).ngClassTouched,t.Ab(n,11).ngClassPristine,t.Ab(n,11).ngClassDirty,t.Ab(n,11).ngClassValid,t.Ab(n,11).ngClassInvalid,t.Ab(n,11).ngClassPending),l(n,22,0,t.Ab(n,27).ngClassUntouched,t.Ab(n,27).ngClassTouched,t.Ab(n,27).ngClassPristine,t.Ab(n,27).ngClassDirty,t.Ab(n,27).ngClassValid,t.Ab(n,27).ngClassInvalid,t.Ab(n,27).ngClassPending),l(n,37,0,t.Ab(n,42).ngClassUntouched,t.Ab(n,42).ngClassTouched,t.Ab(n,42).ngClassPristine,t.Ab(n,42).ngClassDirty,t.Ab(n,42).ngClassValid,t.Ab(n,42).ngClassInvalid,t.Ab(n,42).ngClassPending)})}function Ei(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,6,"div",[["class","container grid-xl"]],null,null,null,null,null)),(l()(),t.hb(16777216,null,null,1,null,ai)),t.pb(2,16384,null,0,p.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null),(l()(),t.hb(16777216,null,null,1,null,si)),t.pb(4,16384,null,0,p.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null),(l()(),t.hb(16777216,null,null,1,null,xi)),t.pb(6,16384,null,0,p.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null)],function(l,n){var u=n.component;l(n,2,0,u.loading),l(n,4,0,u.entity||!u.editing),l(n,6,0,u.entity||!u.editing)},null)}function Ti(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,1,"dd-entity-editor",[],null,null,null,Ei,ri)),t.pb(1,114688,null,0,oi,[r.a,r.k,ct.b,f.b,b.a,p.g],null,null)],function(l,n){l(n,1,0)},null)}var Si=t.mb("dd-entity-editor",oi,Ti,{},{},[]),Oi=u("wDmS"),Mi=u("HRrE"),_i=function(){function l(l){this.campaignService=l,this.hideExtra=!0,this.uniqueFieldId=(new eu.Chance).guid()}return l.createFormGroup=function(l){return null==l&&(l={name:null,type:null}),new R.k({name:new R.h(l.name,[R.x.required,R.x.maxLength(30)]),description:new R.h(l.description),type:new R.h(l.type,[R.x.required]),imageId:new R.h(l.imageId),options:this.createOptionsFormGroup(l.type,l.options)})},l.createOptionsFormGroup=function(l,n){var u;switch(null==n&&(n={}),l){case pt.a.STRING:return u=n,new R.k({maxLength:new R.h(u.maxLength),minLength:new R.h(u.minLength),required:new R.h(u.required),modifierFor:new R.h(u.modifierFor)});case pt.a.INT:case pt.a.FLOAT:return u=n,new R.k({min:new R.h(u.min),max:new R.h(u.max),required:new R.h(u.required),modifierFor:new R.h(u.modifierFor)});case pt.a.ENUM:case pt.a.ENUM_MULTI:return u=n,new R.k({choices:new R.e(u.choices?u.choices.map(function(l){return new R.h(l)}):[]),required:new R.h(u.required),modifierFor:new R.h(u.modifierFor)});default:return new R.k({required:new R.h(n.required),modifierFor:new R.h(n.modifierFor)})}},l.prototype.ngOnInit=function(){var n=this;this.formGroup.get("type").valueChanges.subscribe(function(u){u=parseInt(u,10),n.options=l.createOptionsFormGroup(u,n.formGroup.value.options),n.formGroup.setControl("options",n.options)}),this.options=l.createOptionsFormGroup(this.type.value,this.formGroup.value.options),this.formGroup.setControl("options",this.options)},Object.defineProperty(l.prototype,"campaign",{get:function(){return this.campaignService.campaign},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"name",{get:function(){return this.formGroup.get("name")},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"type",{get:function(){return this.formGroup.get("type")},enumerable:!0,configurable:!0}),l}(),Di=t.ob({encapsulation:0,styles:[[""]],data:{}});function Ni(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,1,"p",[["class","form-input-hint mb-0"]],null,null,null,null,null)),(l()(),t.Ib(-1,null,[" A name is required "]))],null,null)}function Li(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,1,"p",[["class","form-input-hint mb-0"]],null,null,null,null,null)),(l()(),t.Ib(-1,null,[" A type is required "]))],null,null)}function Fi(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,16,"div",[["class","columns"]],null,null,null,null,null)),(l()(),t.qb(1,0,null,null,7,"div",[["class","column"]],null,null,null,null,null)),(l()(),t.qb(2,0,null,null,6,"input",[["class","form-input input-sm"],["formControlName","minLength"],["placeholder","Minimum Length"],["type","number"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"]],function(l,n,u){var e=!0;return"input"===n&&(e=!1!==t.Ab(l,3)._handleInput(u.target.value)&&e),"blur"===n&&(e=!1!==t.Ab(l,3).onTouched()&&e),"compositionstart"===n&&(e=!1!==t.Ab(l,3)._compositionStart()&&e),"compositionend"===n&&(e=!1!==t.Ab(l,3)._compositionEnd(u.target.value)&&e),"change"===n&&(e=!1!==t.Ab(l,4).onChange(u.target.value)&&e),"input"===n&&(e=!1!==t.Ab(l,4).onChange(u.target.value)&&e),"blur"===n&&(e=!1!==t.Ab(l,4).onTouched()&&e),e},null,null)),t.pb(3,16384,null,0,R.d,[t.E,t.k,[2,R.a]],null,null),t.pb(4,16384,null,0,R.z,[t.E,t.k],null,null),t.Fb(1024,null,R.o,function(l,n){return[l,n]},[R.d,R.z]),t.pb(6,671744,null,0,R.j,[[3,R.c],[8,null],[8,null],[6,R.o],[2,R.D]],{name:[0,"name"]},null),t.Fb(2048,null,R.p,null,[R.j]),t.pb(8,16384,null,0,R.q,[[4,R.p]],null,null),(l()(),t.qb(9,0,null,null,7,"div",[["class","column"]],null,null,null,null,null)),(l()(),t.qb(10,0,null,null,6,"input",[["class","form-input input-sm"],["formControlName","maxLength"],["placeholder","Maximum Length"],["type","number"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"]],function(l,n,u){var e=!0;return"input"===n&&(e=!1!==t.Ab(l,11)._handleInput(u.target.value)&&e),"blur"===n&&(e=!1!==t.Ab(l,11).onTouched()&&e),"compositionstart"===n&&(e=!1!==t.Ab(l,11)._compositionStart()&&e),"compositionend"===n&&(e=!1!==t.Ab(l,11)._compositionEnd(u.target.value)&&e),"change"===n&&(e=!1!==t.Ab(l,12).onChange(u.target.value)&&e),"input"===n&&(e=!1!==t.Ab(l,12).onChange(u.target.value)&&e),"blur"===n&&(e=!1!==t.Ab(l,12).onTouched()&&e),e},null,null)),t.pb(11,16384,null,0,R.d,[t.E,t.k,[2,R.a]],null,null),t.pb(12,16384,null,0,R.z,[t.E,t.k],null,null),t.Fb(1024,null,R.o,function(l,n){return[l,n]},[R.d,R.z]),t.pb(14,671744,null,0,R.j,[[3,R.c],[8,null],[8,null],[6,R.o],[2,R.D]],{name:[0,"name"]},null),t.Fb(2048,null,R.p,null,[R.j]),t.pb(16,16384,null,0,R.q,[[4,R.p]],null,null)],function(l,n){l(n,6,0,"minLength"),l(n,14,0,"maxLength")},function(l,n){l(n,2,0,t.Ab(n,8).ngClassUntouched,t.Ab(n,8).ngClassTouched,t.Ab(n,8).ngClassPristine,t.Ab(n,8).ngClassDirty,t.Ab(n,8).ngClassValid,t.Ab(n,8).ngClassInvalid,t.Ab(n,8).ngClassPending),l(n,10,0,t.Ab(n,16).ngClassUntouched,t.Ab(n,16).ngClassTouched,t.Ab(n,16).ngClassPristine,t.Ab(n,16).ngClassDirty,t.Ab(n,16).ngClassValid,t.Ab(n,16).ngClassInvalid,t.Ab(n,16).ngClassPending)})}function Ki(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,16,"div",[["class","columns"]],null,null,null,null,null)),(l()(),t.qb(1,0,null,null,7,"div",[["class","column"]],null,null,null,null,null)),(l()(),t.qb(2,0,null,null,6,"input",[["class","form-input input-sm"],["formControlName","min"],["placeholder","Minimum"],["type","number"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"]],function(l,n,u){var e=!0;return"input"===n&&(e=!1!==t.Ab(l,3)._handleInput(u.target.value)&&e),"blur"===n&&(e=!1!==t.Ab(l,3).onTouched()&&e),"compositionstart"===n&&(e=!1!==t.Ab(l,3)._compositionStart()&&e),"compositionend"===n&&(e=!1!==t.Ab(l,3)._compositionEnd(u.target.value)&&e),"change"===n&&(e=!1!==t.Ab(l,4).onChange(u.target.value)&&e),"input"===n&&(e=!1!==t.Ab(l,4).onChange(u.target.value)&&e),"blur"===n&&(e=!1!==t.Ab(l,4).onTouched()&&e),e},null,null)),t.pb(3,16384,null,0,R.d,[t.E,t.k,[2,R.a]],null,null),t.pb(4,16384,null,0,R.z,[t.E,t.k],null,null),t.Fb(1024,null,R.o,function(l,n){return[l,n]},[R.d,R.z]),t.pb(6,671744,null,0,R.j,[[3,R.c],[8,null],[8,null],[6,R.o],[2,R.D]],{name:[0,"name"]},null),t.Fb(2048,null,R.p,null,[R.j]),t.pb(8,16384,null,0,R.q,[[4,R.p]],null,null),(l()(),t.qb(9,0,null,null,7,"div",[["class","column"]],null,null,null,null,null)),(l()(),t.qb(10,0,null,null,6,"input",[["class","form-input input-sm"],["formControlName","max"],["placeholder","Maximum"],["type","number"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"]],function(l,n,u){var e=!0;return"input"===n&&(e=!1!==t.Ab(l,11)._handleInput(u.target.value)&&e),"blur"===n&&(e=!1!==t.Ab(l,11).onTouched()&&e),"compositionstart"===n&&(e=!1!==t.Ab(l,11)._compositionStart()&&e),"compositionend"===n&&(e=!1!==t.Ab(l,11)._compositionEnd(u.target.value)&&e),"change"===n&&(e=!1!==t.Ab(l,12).onChange(u.target.value)&&e),"input"===n&&(e=!1!==t.Ab(l,12).onChange(u.target.value)&&e),"blur"===n&&(e=!1!==t.Ab(l,12).onTouched()&&e),e},null,null)),t.pb(11,16384,null,0,R.d,[t.E,t.k,[2,R.a]],null,null),t.pb(12,16384,null,0,R.z,[t.E,t.k],null,null),t.Fb(1024,null,R.o,function(l,n){return[l,n]},[R.d,R.z]),t.pb(14,671744,null,0,R.j,[[3,R.c],[8,null],[8,null],[6,R.o],[2,R.D]],{name:[0,"name"]},null),t.Fb(2048,null,R.p,null,[R.j]),t.pb(16,16384,null,0,R.q,[[4,R.p]],null,null)],function(l,n){l(n,6,0,"min"),l(n,14,0,"max")},function(l,n){l(n,2,0,t.Ab(n,8).ngClassUntouched,t.Ab(n,8).ngClassTouched,t.Ab(n,8).ngClassPristine,t.Ab(n,8).ngClassDirty,t.Ab(n,8).ngClassValid,t.Ab(n,8).ngClassInvalid,t.Ab(n,8).ngClassPending),l(n,10,0,t.Ab(n,16).ngClassUntouched,t.Ab(n,16).ngClassTouched,t.Ab(n,16).ngClassPristine,t.Ab(n,16).ngClassDirty,t.Ab(n,16).ngClassValid,t.Ab(n,16).ngClassInvalid,t.Ab(n,16).ngClassPending)})}function ji(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,6,"div",[["class","columns"]],null,null,null,null,null)),(l()(),t.qb(1,0,null,null,5,"div",[["class","column"]],null,null,null,null,null)),(l()(),t.qb(2,0,null,null,4,"dd-tag-editor",[["controlName","choices"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"submit"],[null,"reset"]],function(l,n,u){var e=!0;return"submit"===n&&(e=!1!==t.Ab(l,3).onSubmit(u)&&e),"reset"===n&&(e=!1!==t.Ab(l,3).onReset()&&e),e},Oi.b,Oi.a)),t.pb(3,540672,null,0,R.l,[[8,null],[8,null]],{form:[0,"form"]},null),t.Fb(2048,null,R.c,null,[R.l]),t.pb(5,16384,null,0,R.r,[[4,R.c]],null,null),t.pb(6,114688,null,0,Mi.a,[],{formGroup:[0,"formGroup"],controlName:[1,"controlName"]},null)],function(l,n){var u=n.component;l(n,3,0,u.options),l(n,6,0,u.options,"choices")},function(l,n){l(n,2,0,t.Ab(n,5).ngClassUntouched,t.Ab(n,5).ngClassTouched,t.Ab(n,5).ngClassPristine,t.Ab(n,5).ngClassDirty,t.Ab(n,5).ngClassValid,t.Ab(n,5).ngClassInvalid,t.Ab(n,5).ngClassPending)})}function Gi(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,10,"div",[],[[8,"hidden",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"submit"],[null,"reset"]],function(l,n,u){var e=!0;return"submit"===n&&(e=!1!==t.Ab(l,2).onSubmit(u)&&e),"reset"===n&&(e=!1!==t.Ab(l,2).onReset()&&e),e},null,null)),t.pb(1,16384,null,0,p.n,[],{ngSwitch:[0,"ngSwitch"]},null),t.pb(2,540672,null,0,R.l,[[8,null],[8,null]],{form:[0,"form"]},null),t.Fb(2048,null,R.c,null,[R.l]),t.pb(4,16384,null,0,R.r,[[4,R.c]],null,null),(l()(),t.hb(16777216,null,null,1,null,Fi)),t.pb(6,278528,null,0,p.o,[t.P,t.M,p.n],{ngSwitchCase:[0,"ngSwitchCase"]},null),(l()(),t.hb(16777216,null,null,1,null,Ki)),t.pb(8,278528,null,0,p.o,[t.P,t.M,p.n],{ngSwitchCase:[0,"ngSwitchCase"]},null),(l()(),t.hb(16777216,null,null,1,null,ji)),t.pb(10,278528,null,0,p.o,[t.P,t.M,p.n],{ngSwitchCase:[0,"ngSwitchCase"]},null)],function(l,n){var u=n.component;l(n,1,0,!0),l(n,2,0,u.options),l(n,6,0,"0"===u.type.value||0===u.type.value),l(n,8,0,"1"===u.type.value||"2"===u.type.value||1===u.type.value||2===u.type.value),l(n,10,0,"3"===u.type.value||"4"===u.type.value||3===u.type.value||4===u.type.value)},function(l,n){l(n,0,0,n.component.hideExtra,t.Ab(n,4).ngClassUntouched,t.Ab(n,4).ngClassTouched,t.Ab(n,4).ngClassPristine,t.Ab(n,4).ngClassDirty,t.Ab(n,4).ngClassValid,t.Ab(n,4).ngClassInvalid,t.Ab(n,4).ngClassPending)})}function Ui(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,12,"div",[["class","form-group"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"submit"],[null,"reset"]],function(l,n,u){var e=!0;return"submit"===n&&(e=!1!==t.Ab(l,1).onSubmit(u)&&e),"reset"===n&&(e=!1!==t.Ab(l,1).onReset()&&e),e},null,null)),t.pb(1,540672,null,0,R.l,[[8,null],[8,null]],{form:[0,"form"]},null),t.Fb(2048,null,R.c,null,[R.l]),t.pb(3,16384,null,0,R.r,[[4,R.c]],null,null),(l()(),t.qb(4,0,null,null,8,"label",[["class","form-checkbox"]],null,null,null,null,null)),(l()(),t.qb(5,0,null,null,5,"input",[["formControlName","required"],["type","checkbox"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"change"],[null,"blur"]],function(l,n,u){var e=!0;return"change"===n&&(e=!1!==t.Ab(l,6).onChange(u.target.checked)&&e),"blur"===n&&(e=!1!==t.Ab(l,6).onTouched()&&e),e},null,null)),t.pb(6,16384,null,0,R.b,[t.E,t.k],null,null),t.Fb(1024,null,R.o,function(l){return[l]},[R.b]),t.pb(8,671744,null,0,R.j,[[3,R.c],[8,null],[8,null],[6,R.o],[2,R.D]],{name:[0,"name"]},null),t.Fb(2048,null,R.p,null,[R.j]),t.pb(10,16384,null,0,R.q,[[4,R.p]],null,null),(l()(),t.qb(11,0,null,null,0,"i",[["class","form-icon"]],null,null,null,null,null)),(l()(),t.Ib(-1,null,[" Required "]))],function(l,n){l(n,1,0,n.component.options),l(n,8,0,"required")},function(l,n){l(n,0,0,t.Ab(n,3).ngClassUntouched,t.Ab(n,3).ngClassTouched,t.Ab(n,3).ngClassPristine,t.Ab(n,3).ngClassDirty,t.Ab(n,3).ngClassValid,t.Ab(n,3).ngClassInvalid,t.Ab(n,3).ngClassPending),l(n,5,0,t.Ab(n,10).ngClassUntouched,t.Ab(n,10).ngClassTouched,t.Ab(n,10).ngClassPristine,t.Ab(n,10).ngClassDirty,t.Ab(n,10).ngClassValid,t.Ab(n,10).ngClassInvalid,t.Ab(n,10).ngClassPending)})}function Ri(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,3,"option",[],null,null,null,null,null)),t.pb(1,147456,null,0,R.t,[t.k,t.E,[2,R.v]],{value:[0,"value"]},null),t.pb(2,147456,null,0,R.E,[t.k,t.E,[8,null]],{value:[0,"value"]},null),(l()(),t.Ib(3,null,["",""]))],function(l,n){l(n,1,0,n.context.$implicit),l(n,2,0,n.context.$implicit)},function(l,n){l(n,3,0,n.context.$implicit)})}function Vi(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,1,"span",[["class","fake-link"]],null,[[null,"click"]],function(l,n,u){var t=!0,e=l.component;return"click"===n&&(t=0!=(e.hideExtra=!1)&&t),t},null,null)),(l()(),t.Ib(-1,null,["Show More"]))],null,null)}function Hi(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,1,"span",[["class","fake-link"]],null,[[null,"click"]],function(l,n,u){var t=!0,e=l.component;return"click"===n&&(t=0!=(e.hideExtra=!0)&&t),t},null,null)),(l()(),t.Ib(-1,null,["Show Less"]))],null,null)}function $i(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,99,"div",[["class","columns"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"submit"],[null,"reset"]],function(l,n,u){var e=!0;return"submit"===n&&(e=!1!==t.Ab(l,1).onSubmit(u)&&e),"reset"===n&&(e=!1!==t.Ab(l,1).onReset()&&e),e},null,null)),t.pb(1,540672,null,0,R.l,[[8,null],[8,null]],{form:[0,"form"]},null),t.Fb(2048,null,R.c,null,[R.l]),t.pb(3,16384,null,0,R.r,[[4,R.c]],null,null),(l()(),t.qb(4,0,null,null,6,"div",[["class","column col-3"]],[[8,"hidden",0]],null,null,null,null)),(l()(),t.qb(5,0,null,null,5,"dd-image-upload",[["formControlName","imageId"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],null,null,Tl,Il)),t.pb(6,4308992,null,0,Cl,[b.a,f.b],{eleId:[0,"eleId"]},null),t.Fb(1024,null,R.o,function(l){return[l]},[Cl]),t.pb(8,671744,null,0,R.j,[[3,R.c],[8,null],[8,null],[6,R.o],[2,R.D]],{name:[0,"name"]},null),t.Fb(2048,null,R.p,null,[R.j]),t.pb(10,16384,null,0,R.q,[[4,R.p]],null,null),(l()(),t.qb(11,0,null,null,69,"div",[["class","column col-9"]],null,null,null,null,null)),t.pb(12,278528,null,0,p.i,[t.t,t.u,t.k,t.E],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),t.Db(13,{"col-9":0,"col-12":1}),(l()(),t.qb(14,0,null,null,10,"div",[["class","form-group"]],null,null,null,null,null)),t.pb(15,278528,null,0,p.i,[t.t,t.u,t.k,t.E],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),t.Db(16,{"has-error":0}),(l()(),t.qb(17,0,null,null,5,"input",[["class","form-input input-sm"],["formControlName","name"],["name","name"],["placeholder","Name"],["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(l,n,u){var e=!0;return"input"===n&&(e=!1!==t.Ab(l,18)._handleInput(u.target.value)&&e),"blur"===n&&(e=!1!==t.Ab(l,18).onTouched()&&e),"compositionstart"===n&&(e=!1!==t.Ab(l,18)._compositionStart()&&e),"compositionend"===n&&(e=!1!==t.Ab(l,18)._compositionEnd(u.target.value)&&e),e},null,null)),t.pb(18,16384,null,0,R.d,[t.E,t.k,[2,R.a]],null,null),t.Fb(1024,null,R.o,function(l){return[l]},[R.d]),t.pb(20,671744,null,0,R.j,[[3,R.c],[8,null],[8,null],[6,R.o],[2,R.D]],{name:[0,"name"]},null),t.Fb(2048,null,R.p,null,[R.j]),t.pb(22,16384,null,0,R.q,[[4,R.p]],null,null),(l()(),t.hb(16777216,null,null,1,null,Ni)),t.pb(24,16384,null,0,p.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null),(l()(),t.qb(25,0,null,null,6,"div",[["class","form-group"]],[[8,"hidden",0]],null,null,null,null)),(l()(),t.qb(26,0,null,null,5,"input",[["class","form-input input-sm"],["formControlName","description"],["name","description"],["placeholder","Short Description"],["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(l,n,u){var e=!0;return"input"===n&&(e=!1!==t.Ab(l,27)._handleInput(u.target.value)&&e),"blur"===n&&(e=!1!==t.Ab(l,27).onTouched()&&e),"compositionstart"===n&&(e=!1!==t.Ab(l,27)._compositionStart()&&e),"compositionend"===n&&(e=!1!==t.Ab(l,27)._compositionEnd(u.target.value)&&e),e},null,null)),t.pb(27,16384,null,0,R.d,[t.E,t.k,[2,R.a]],null,null),t.Fb(1024,null,R.o,function(l){return[l]},[R.d]),t.pb(29,671744,null,0,R.j,[[3,R.c],[8,null],[8,null],[6,R.o],[2,R.D]],{name:[0,"name"]},null),t.Fb(2048,null,R.p,null,[R.j]),t.pb(31,16384,null,0,R.q,[[4,R.p]],null,null),(l()(),t.qb(32,0,null,null,46,"div",[["class","form-group"]],null,null,null,null,null)),t.pb(33,278528,null,0,p.i,[t.t,t.u,t.k,t.E],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),t.Db(34,{"has-error":0}),(l()(),t.qb(35,0,null,null,41,"select",[["class","form-input input-sm mt-1"],["formControlName","type"],["name","type"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"change"],[null,"blur"]],function(l,n,u){var e=!0;return"change"===n&&(e=!1!==t.Ab(l,36).onChange(u.target.value)&&e),"blur"===n&&(e=!1!==t.Ab(l,36).onTouched()&&e),e},null,null)),t.pb(36,16384,null,0,R.v,[t.E,t.k],null,null),t.Fb(1024,null,R.o,function(l){return[l]},[R.v]),t.pb(38,671744,null,0,R.j,[[3,R.c],[8,null],[8,null],[6,R.o],[2,R.D]],{name:[0,"name"]},null),t.Fb(2048,null,R.p,null,[R.j]),t.pb(40,16384,null,0,R.q,[[4,R.p]],null,null),(l()(),t.qb(41,0,null,null,3,"option",[["disabled",""]],null,null,null,null,null)),t.pb(42,147456,null,0,R.t,[t.k,t.E,[2,R.v]],{value:[0,"value"]},null),t.pb(43,147456,null,0,R.E,[t.k,t.E,[8,null]],{value:[0,"value"]},null),(l()(),t.Ib(-1,null,["Type"])),(l()(),t.qb(45,0,null,null,3,"option",[["value","0"]],null,null,null,null,null)),t.pb(46,147456,null,0,R.t,[t.k,t.E,[2,R.v]],{value:[0,"value"]},null),t.pb(47,147456,null,0,R.E,[t.k,t.E,[8,null]],{value:[0,"value"]},null),(l()(),t.Ib(-1,null,["Word"])),(l()(),t.qb(49,0,null,null,3,"option",[["value","1"]],null,null,null,null,null)),t.pb(50,147456,null,0,R.t,[t.k,t.E,[2,R.v]],{value:[0,"value"]},null),t.pb(51,147456,null,0,R.E,[t.k,t.E,[8,null]],{value:[0,"value"]},null),(l()(),t.Ib(-1,null,["Whole Number"])),(l()(),t.qb(53,0,null,null,3,"option",[["value","2"]],null,null,null,null,null)),t.pb(54,147456,null,0,R.t,[t.k,t.E,[2,R.v]],{value:[0,"value"]},null),t.pb(55,147456,null,0,R.E,[t.k,t.E,[8,null]],{value:[0,"value"]},null),(l()(),t.Ib(-1,null,["Real Number"])),(l()(),t.qb(57,0,null,null,3,"option",[["value","3"]],null,null,null,null,null)),t.pb(58,147456,null,0,R.t,[t.k,t.E,[2,R.v]],{value:[0,"value"]},null),t.pb(59,147456,null,0,R.E,[t.k,t.E,[8,null]],{value:[0,"value"]},null),(l()(),t.Ib(-1,null,["Selection"])),(l()(),t.qb(61,0,null,null,3,"option",[["value","4"]],null,null,null,null,null)),t.pb(62,147456,null,0,R.t,[t.k,t.E,[2,R.v]],{value:[0,"value"]},null),t.pb(63,147456,null,0,R.E,[t.k,t.E,[8,null]],{value:[0,"value"]},null),(l()(),t.Ib(-1,null,["Selection (Multiple)"])),(l()(),t.qb(65,0,null,null,3,"option",[["value","5"]],null,null,null,null,null)),t.pb(66,147456,null,0,R.t,[t.k,t.E,[2,R.v]],{value:[0,"value"]},null),t.pb(67,147456,null,0,R.E,[t.k,t.E,[8,null]],{value:[0,"value"]},null),(l()(),t.Ib(-1,null,["Text (Formatted)"])),(l()(),t.qb(69,0,null,null,3,"option",[["value","6"]],null,null,null,null,null)),t.pb(70,147456,null,0,R.t,[t.k,t.E,[2,R.v]],{value:[0,"value"]},null),t.pb(71,147456,null,0,R.E,[t.k,t.E,[8,null]],{value:[0,"value"]},null),(l()(),t.Ib(-1,null,["Currency"])),(l()(),t.qb(73,0,null,null,3,"option",[["value","7"]],null,null,null,null,null)),t.pb(74,147456,null,0,R.t,[t.k,t.E,[2,R.v]],{value:[0,"value"]},null),t.pb(75,147456,null,0,R.E,[t.k,t.E,[8,null]],{value:[0,"value"]},null),(l()(),t.Ib(-1,null,["Yes or No"])),(l()(),t.hb(16777216,null,null,1,null,Li)),t.pb(78,16384,null,0,p.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null),(l()(),t.hb(16777216,null,null,1,null,Gi)),t.pb(80,16384,null,0,p.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null),(l()(),t.qb(81,0,null,null,2,"div",[["class","column col-auto mt-1"]],[[8,"hidden",0]],null,null,null,null)),(l()(),t.hb(16777216,null,null,1,null,Ui)),t.pb(83,16384,null,0,p.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null),(l()(),t.qb(84,0,null,null,15,"div",[["class","column mt-1"]],[[8,"hidden",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"submit"],[null,"reset"]],function(l,n,u){var e=!0;return"submit"===n&&(e=!1!==t.Ab(l,85).onSubmit(u)&&e),"reset"===n&&(e=!1!==t.Ab(l,85).onReset()&&e),e},null,null)),t.pb(85,540672,null,0,R.l,[[8,null],[8,null]],{form:[0,"form"]},null),t.Fb(2048,null,R.c,null,[R.l]),t.pb(87,16384,null,0,R.r,[[4,R.c]],null,null),(l()(),t.qb(88,0,null,null,11,"select",[["class","form-select"],["formControlName","modifierFor"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"change"],[null,"blur"]],function(l,n,u){var e=!0;return"change"===n&&(e=!1!==t.Ab(l,89).onChange(u.target.value)&&e),"blur"===n&&(e=!1!==t.Ab(l,89).onTouched()&&e),e},null,null)),t.pb(89,16384,null,0,R.v,[t.E,t.k],null,null),t.Fb(1024,null,R.o,function(l){return[l]},[R.v]),t.pb(91,671744,null,0,R.j,[[3,R.c],[8,null],[8,null],[6,R.o],[2,R.D]],{name:[0,"name"]},null),t.Fb(2048,null,R.p,null,[R.j]),t.pb(93,16384,null,0,R.q,[[4,R.p]],null,null),(l()(),t.qb(94,0,null,null,3,"option",[],null,null,null,null,null)),t.pb(95,147456,null,0,R.t,[t.k,t.E,[2,R.v]],{value:[0,"value"]},null),t.pb(96,147456,null,0,R.E,[t.k,t.E,[8,null]],{value:[0,"value"]},null),(l()(),t.Ib(-1,null,["Modifier For"])),(l()(),t.hb(16777216,null,null,1,null,Ri)),t.pb(99,278528,null,0,p.j,[t.P,t.M,t.t],{ngForOf:[0,"ngForOf"]},null),(l()(),t.hb(16777216,null,null,1,null,Vi)),t.pb(101,16384,null,0,p.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null),(l()(),t.hb(16777216,null,null,1,null,Hi)),t.pb(103,16384,null,0,p.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null)],function(l,n){var u=n.component;l(n,1,0,u.formGroup),l(n,6,0,u.uniqueFieldId),l(n,8,0,"imageId");var t=l(n,13,0,!u.hideExtra,u.hideExtra);l(n,12,0,"column col-9",t);var e=l(n,16,0,u.name.invalid&&(u.name.dirty||u.name.touched));l(n,15,0,"form-group",e),l(n,20,0,"name"),l(n,24,0,u.name.invalid&&(u.name.dirty||u.name.touched)&&u.name.errors.required),l(n,29,0,"description");var i=l(n,34,0,u.type.invalid&&(u.type.dirty||u.type.touched));l(n,33,0,"form-group",i),l(n,38,0,"type"),l(n,42,0,null),l(n,43,0,null),l(n,46,0,"0"),l(n,47,0,"0"),l(n,50,0,"1"),l(n,51,0,"1"),l(n,54,0,"2"),l(n,55,0,"2"),l(n,58,0,"3"),l(n,59,0,"3"),l(n,62,0,"4"),l(n,63,0,"4"),l(n,66,0,"5"),l(n,67,0,"5"),l(n,70,0,"6"),l(n,71,0,"6"),l(n,74,0,"7"),l(n,75,0,"7"),l(n,78,0,u.type.invalid&&(u.type.dirty||u.type.touched)&&u.type.errors.required),l(n,80,0,u.options),l(n,83,0,u.options),l(n,85,0,u.options),l(n,91,0,"modifierFor"),l(n,95,0,null),l(n,96,0,null),l(n,99,0,u.otherFields),l(n,101,0,u.hideExtra),l(n,103,0,!u.hideExtra)},function(l,n){var u=n.component;l(n,0,0,t.Ab(n,3).ngClassUntouched,t.Ab(n,3).ngClassTouched,t.Ab(n,3).ngClassPristine,t.Ab(n,3).ngClassDirty,t.Ab(n,3).ngClassValid,t.Ab(n,3).ngClassInvalid,t.Ab(n,3).ngClassPending),l(n,4,0,u.hideExtra),l(n,5,0,t.Ab(n,10).ngClassUntouched,t.Ab(n,10).ngClassTouched,t.Ab(n,10).ngClassPristine,t.Ab(n,10).ngClassDirty,t.Ab(n,10).ngClassValid,t.Ab(n,10).ngClassInvalid,t.Ab(n,10).ngClassPending),l(n,17,0,t.Ab(n,22).ngClassUntouched,t.Ab(n,22).ngClassTouched,t.Ab(n,22).ngClassPristine,t.Ab(n,22).ngClassDirty,t.Ab(n,22).ngClassValid,t.Ab(n,22).ngClassInvalid,t.Ab(n,22).ngClassPending),l(n,25,0,u.hideExtra),l(n,26,0,t.Ab(n,31).ngClassUntouched,t.Ab(n,31).ngClassTouched,t.Ab(n,31).ngClassPristine,t.Ab(n,31).ngClassDirty,t.Ab(n,31).ngClassValid,t.Ab(n,31).ngClassInvalid,t.Ab(n,31).ngClassPending),l(n,35,0,t.Ab(n,40).ngClassUntouched,t.Ab(n,40).ngClassTouched,t.Ab(n,40).ngClassPristine,t.Ab(n,40).ngClassDirty,t.Ab(n,40).ngClassValid,t.Ab(n,40).ngClassInvalid,t.Ab(n,40).ngClassPending),l(n,81,0,u.hideExtra),l(n,84,0,u.hideExtra,t.Ab(n,87).ngClassUntouched,t.Ab(n,87).ngClassTouched,t.Ab(n,87).ngClassPristine,t.Ab(n,87).ngClassDirty,t.Ab(n,87).ngClassValid,t.Ab(n,87).ngClassInvalid,t.Ab(n,87).ngClassPending),l(n,88,0,t.Ab(n,93).ngClassUntouched,t.Ab(n,93).ngClassTouched,t.Ab(n,93).ngClassPristine,t.Ab(n,93).ngClassDirty,t.Ab(n,93).ngClassValid,t.Ab(n,93).ngClassInvalid,t.Ab(n,93).ngClassPending)})}var Bi=u("6dNQ"),zi=u("kNgC"),Xi=function(l,n,u,t){return new(u||(u=Promise))(function(e,i){function o(l){try{a(t.next(l))}catch(n){i(n)}}function r(l){try{a(t.throw(l))}catch(n){i(n)}}function a(l){l.done?e(l.value):new u(function(n){n(l.value)}).then(o,r)}a((t=t.apply(l,n||[])).next())})},Qi=function(l,n){var u,t,e,i,o={label:0,sent:function(){if(1&e[0])throw e[1];return e[1]},trys:[],ops:[]};return i={next:r(0),throw:r(1),return:r(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function r(i){return function(r){return function(i){if(u)throw new TypeError("Generator is already executing.");for(;o;)try{if(u=1,t&&(e=2&i[0]?t.return:i[0]?t.throw||((e=t.return)&&e.call(t),0):t.next)&&!(e=e.call(t,i[1])).done)return e;switch(t=0,e&&(i=[2&i[0],e.value]),i[0]){case 0:case 1:e=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,t=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!(e=(e=o.trys).length>0&&e[e.length-1])&&(6===i[0]||2===i[0])){o=0;continue}if(3===i[0]&&(!e||i[1]>e[0]&&i[1]<e[3])){o.label=i[1];break}if(6===i[0]&&o.label<e[1]){o.label=e[1],e=i;break}if(e&&o.label<e[2]){o.label=e[2],o.ops.push(i);break}e[2]&&o.ops.pop(),o.trys.pop();continue}i=n.call(l,o)}catch(r){i=[6,r],t=0}finally{u=e=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,r])}}},Yi=function(){function l(l,n,u,t,e,i){this.route=l,this.campaignService=n,this.conceptService=u,this.login=t,this.location=e,this.router=i,this.saving=!1,this.deleting=!1,this.loading=!1,this.nameFieldConfig={name:"Name",description:"The name of this concept",type:pt.a.STRING,options:{maxLength:30,required:!0}},this.pluralFormFieldConfig={name:"Plural Form",description:"This will be used in various places, the plural form",type:pt.a.STRING,options:{maxLength:32,required:!0}},this.descriptionFieldConfig={name:"Description",type:pt.a.STRING,options:{maxLength:100,required:!1}}}return l.prototype.ngOnInit=function(){var l=this;this.formGroup=new R.k({name:new R.h(null,[R.x.required]),pluralForm:new R.h(null,[R.x.required]),description:new R.h(null),icon:new R.h(null),fields:new R.e([]),playerEditable:new R.h(!1),entityConfig:new R.k({enabled:new R.h(!1),enableQuantity:new R.h(!1),fields:new R.e([])})}),this.editing&&this.route.paramMap.subscribe(function(n){var u=n.get("ct_id");l.load(u)}),this.name.valueChanges.subscribe()},l.prototype.constructConceptType=function(){var l={name:this.name.value,pluralForm:this.pluarlForm.value,description:this.description.value,userId:this.login.id,icon:this.icon.value,playerEditable:this.playerEditable.value,campaignId:this.campaignService.campaign.id,fields:this.fields.value||[],entityConfig:this.entityConfig.value};return this.editing&&(l.id=this.conceptType.id,l.userId=this.conceptType.userId),l},l.prototype.load=function(l){return Xi(this,void 0,void 0,function(){var n,u=this;return Qi(this,function(t){switch(t.label){case 0:this.loading=!0,this.formGroup.disable(),t.label=1;case 1:return t.trys.push([1,3,,4]),n=this,[4,this.conceptService.getConceptType(l)];case 2:return n.conceptType=t.sent(),this.conceptType.fields.forEach(function(l){return u.fields.push(_i.createFormGroup(l))}),this.formGroup.patchValue(this.conceptType,{emitEvent:!1}),[3,4];case 3:throw t.sent();case 4:return this.formGroup.enable({emitEvent:!1}),this.loading=!1,[2]}})})},l.prototype.addField=function(){this.fields.push(_i.createFormGroup(null))},l.prototype.removeField=function(l){this.fields.removeAt(l),this.formGroup.markAsDirty()},l.prototype.canDeactivate=function(){return!this.formGroup.dirty},l.prototype.save=function(){return Xi(this,void 0,void 0,function(){var l;return Qi(this,function(n){switch(n.label){case 0:this.saving=!0,n.label=1;case 1:return n.trys.push([1,6,,7]),l=this.constructConceptType(),this.editing?[4,this.conceptService.updateConceptType(l)]:[3,3];case 2:return n.sent(),[3,5];case 3:return[4,this.conceptService.createConceptType(l)];case 4:n.sent(),n.label=5;case 5:return this.formGroup.markAsPristine(),[3,7];case 6:throw n.sent();case 7:return this.formGroup.markAsPristine(),this.saving=!1,[4,this.router.navigate(["campaigns",this.campaignService.campaign.id,"settings"],{queryParams:{refresh:!0}})];case 8:return n.sent(),[2]}})})},l.prototype.trackField=function(l){return l},l.prototype.cancel=function(){this.location.back()},l.prototype.delete=function(){return Xi(this,void 0,void 0,function(){return Qi(this,function(l){switch(l.label){case 0:this.deleting=!0,l.label=1;case 1:return l.trys.push([1,3,,4]),[4,this.conceptService.deleteConceptType(this.conceptType.id)];case 2:return l.sent(),[3,4];case 3:throw l.sent();case 4:return this.formGroup.markAsPristine(),this.cancel(),this.deleting=!1,[2]}})})},Object.defineProperty(l.prototype,"editing",{get:function(){return this.route.snapshot.data.editing},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"name",{get:function(){return this.formGroup.get("name")},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"description",{get:function(){return this.formGroup.get("description")},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"pluarlForm",{get:function(){return this.formGroup.get("pluralForm")},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"icon",{get:function(){return this.formGroup.get("icon")},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"playerEditable",{get:function(){return this.formGroup.get("playerEditable")},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"entityConfig",{get:function(){return this.formGroup.get("entityConfig")},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"fields",{get:function(){return this.formGroup.get("fields")},enumerable:!0,configurable:!0}),l}(),Wi=t.ob({encapsulation:0,styles:[[".big-space[_ngcontent-%COMP%]{margin-top:2rem}"]],data:{}});function Zi(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,3,"button",[["class","btn btn-error mr-2"]],null,[[null,"click"]],function(l,n,u){var t=!0,e=l.component;return"click"===n&&(t=!1!==e.delete()&&t),t},null,null)),t.pb(1,278528,null,0,p.i,[t.t,t.u,t.k,t.E],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),t.Db(2,{loading:0}),(l()(),t.Ib(-1,null,[" Delete "]))],function(l,n){var u=l(n,2,0,n.component.deleting);l(n,1,0,"btn btn-error mr-2",u)},null)}function Ji(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,11,"div",[["class","form-group"]],null,null,null,null,null)),(l()(),t.qb(1,0,null,null,8,"label",[["class","form-checkbox mb-0"]],null,null,null,null,null)),(l()(),t.qb(2,0,null,null,5,"input",[["formControlName","enableQuantity"],["type","checkbox"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"change"],[null,"blur"]],function(l,n,u){var e=!0;return"change"===n&&(e=!1!==t.Ab(l,3).onChange(u.target.checked)&&e),"blur"===n&&(e=!1!==t.Ab(l,3).onTouched()&&e),e},null,null)),t.pb(3,16384,null,0,R.b,[t.E,t.k],null,null),t.Fb(1024,null,R.o,function(l){return[l]},[R.b]),t.pb(5,671744,null,0,R.j,[[3,R.c],[8,null],[8,null],[6,R.o],[2,R.D]],{name:[0,"name"]},null),t.Fb(2048,null,R.p,null,[R.j]),t.pb(7,16384,null,0,R.q,[[4,R.p]],null,null),(l()(),t.qb(8,0,null,null,0,"i",[["class","form-icon"]],null,null,null,null,null)),(l()(),t.Ib(-1,null,[" Enable quantities "])),(l()(),t.qb(10,0,null,null,1,"div",[["class","form-input-hint mt-0"]],null,null,null,null,null)),(l()(),t.Ib(-1,null,["This would be like characters having a specific number of a certain item"]))],function(l,n){l(n,5,0,"enableQuantity")},function(l,n){l(n,2,0,t.Ab(n,7).ngClassUntouched,t.Ab(n,7).ngClassTouched,t.Ab(n,7).ngClassPristine,t.Ab(n,7).ngClassDirty,t.Ab(n,7).ngClassValid,t.Ab(n,7).ngClassInvalid,t.Ab(n,7).ngClassPending)})}function lo(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,14,"div",[["class","mt-2"]],null,null,null,null,null)),(l()(),t.qb(1,0,null,null,8,"div",[["class","columns mb-1"]],null,null,null,null,null)),(l()(),t.qb(2,0,null,null,2,"div",[["class","column"]],null,null,null,null,null)),(l()(),t.qb(3,0,null,null,1,"h6",[["class","mb-0"]],null,null,null,null,null)),(l()(),t.Ib(4,null,["",""])),(l()(),t.qb(5,0,null,null,4,"div",[["class","column col-auto"]],null,null,null,null,null)),(l()(),t.qb(6,0,null,null,3,"button",[["class","btn btn-sm btn-error"]],null,[[null,"click"]],function(l,n,u){var t=!0,e=l.component;return"click"===n&&(t=!1!==e.removeField(l.context.index)&&t),t},null,null)),(l()(),t.qb(7,0,null,null,0,"i",[["class","icon icon-cross"]],null,null,null,null,null)),(l()(),t.qb(8,0,null,null,1,"span",[["class","hide-sm"]],null,null,null,null,null)),(l()(),t.Ib(-1,null,[" Remove"])),(l()(),t.qb(10,0,null,null,4,"dd-field-definition-form",[],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"submit"],[null,"reset"]],function(l,n,u){var e=!0;return"submit"===n&&(e=!1!==t.Ab(l,11).onSubmit(u)&&e),"reset"===n&&(e=!1!==t.Ab(l,11).onReset()&&e),e},$i,Di)),t.pb(11,540672,null,0,R.l,[[8,null],[8,null]],{form:[0,"form"]},null),t.Fb(2048,null,R.c,null,[R.l]),t.pb(13,16384,null,0,R.r,[[4,R.c]],null,null),t.pb(14,114688,null,0,_i,[f.b],{formGroup:[0,"formGroup"]},null)],function(l,n){l(n,11,0,n.context.$implicit),l(n,14,0,n.context.$implicit)},function(l,n){l(n,4,0,n.context.$implicit.value.name),l(n,10,0,t.Ab(n,13).ngClassUntouched,t.Ab(n,13).ngClassTouched,t.Ab(n,13).ngClassPristine,t.Ab(n,13).ngClassDirty,t.Ab(n,13).ngClassValid,t.Ab(n,13).ngClassInvalid,t.Ab(n,13).ngClassPending)})}function no(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,69,"div",[["class","container grid-xl"]],null,null,null,null,null)),(l()(),t.qb(1,0,null,null,12,"div",[["class","columns"]],null,null,null,null,null)),(l()(),t.qb(2,0,null,null,2,"div",[["class","column mb-0"]],null,null,null,null,null)),(l()(),t.qb(3,0,null,null,1,"h3",[],null,null,null,null,null)),(l()(),t.Ib(4,null,[""," Concept Type"])),(l()(),t.qb(5,0,null,null,8,"div",[["class","column col-auto"]],null,null,null,null,null)),(l()(),t.hb(16777216,null,null,1,null,Zi)),t.pb(7,16384,null,0,p.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null),(l()(),t.qb(8,0,null,null,1,"button",[["class","btn mr-2"]],null,[[null,"click"]],function(l,n,u){var t=!0,e=l.component;return"click"===n&&(t=!1!==e.cancel()&&t),t},null,null)),(l()(),t.Ib(-1,null,[" Cancel "])),(l()(),t.qb(10,0,null,null,3,"button",[["class","btn btn-primary"]],[[8,"disabled",0]],[[null,"click"]],function(l,n,u){var t=!0,e=l.component;return"click"===n&&(t=!1!==e.save()&&t),t},null,null)),t.pb(11,278528,null,0,p.i,[t.t,t.u,t.k,t.E],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),t.Db(12,{loading:0}),(l()(),t.Ib(-1,null,[" Save "])),(l()(),t.qb(14,0,null,null,55,"div",[["class","mt-2"]],null,null,null,null,null)),(l()(),t.qb(15,0,null,null,1,"dd-dynamic-field",[["showLabel","true"]],null,null,null,Ju.b,Ju.a)),t.pb(16,114688,null,0,lt.a,[],{control:[0,"control"],config:[1,"config"],showLabel:[2,"showLabel"]},null),(l()(),t.qb(17,0,null,null,1,"dd-dynamic-field",[["showLabel","true"]],null,null,null,Ju.b,Ju.a)),t.pb(18,114688,null,0,lt.a,[],{control:[0,"control"],config:[1,"config"],showLabel:[2,"showLabel"]},null),(l()(),t.qb(19,0,null,null,1,"dd-dynamic-field",[["showLabel","true"]],null,null,null,Ju.b,Ju.a)),t.pb(20,114688,null,0,lt.a,[],{control:[0,"control"],config:[1,"config"],showLabel:[2,"showLabel"]},null),(l()(),t.qb(21,0,null,null,8,"div",[["class","form-group mt-2"]],null,null,null,null,null)),(l()(),t.qb(22,0,null,null,1,"label",[],null,null,null,null,null)),(l()(),t.Ib(-1,null,["Icon"])),(l()(),t.qb(24,0,null,null,5,"dd-icon-picker",[],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],null,null,Bi.b,Bi.a)),t.pb(25,114688,null,0,zi.a,[Nl.a],null,null),t.Fb(1024,null,R.o,function(l){return[l]},[zi.a]),t.pb(27,540672,null,0,R.i,[[8,null],[8,null],[6,R.o],[2,R.D]],{form:[0,"form"]},null),t.Fb(2048,null,R.p,null,[R.i]),t.pb(29,16384,null,0,R.q,[[4,R.p]],null,null),(l()(),t.qb(30,0,null,null,9,"div",[["class","form-group"]],null,null,null,null,null)),(l()(),t.qb(31,0,null,null,8,"label",[["class","form-checkbox mb-0"]],null,null,null,null,null)),(l()(),t.qb(32,0,null,null,5,"input",[["type","checkbox"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"change"],[null,"blur"]],function(l,n,u){var e=!0;return"change"===n&&(e=!1!==t.Ab(l,33).onChange(u.target.checked)&&e),"blur"===n&&(e=!1!==t.Ab(l,33).onTouched()&&e),e},null,null)),t.pb(33,16384,null,0,R.b,[t.E,t.k],null,null),t.Fb(1024,null,R.o,function(l){return[l]},[R.b]),t.pb(35,540672,null,0,R.i,[[8,null],[8,null],[6,R.o],[2,R.D]],{form:[0,"form"]},null),t.Fb(2048,null,R.p,null,[R.i]),t.pb(37,16384,null,0,R.q,[[4,R.p]],null,null),(l()(),t.qb(38,0,null,null,0,"i",[["class","form-icon"]],null,null,null,null,null)),(l()(),t.Ib(-1,null,[" Players can manage this concept "])),(l()(),t.qb(40,0,null,null,19,"div",[["class","big-space"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"submit"],[null,"reset"]],function(l,n,u){var e=!0;return"submit"===n&&(e=!1!==t.Ab(l,41).onSubmit(u)&&e),"reset"===n&&(e=!1!==t.Ab(l,41).onReset()&&e),e},null,null)),t.pb(41,540672,null,0,R.l,[[8,null],[8,null]],{form:[0,"form"]},null),t.Fb(2048,null,R.c,null,[R.l]),t.pb(43,16384,null,0,R.r,[[4,R.c]],null,null),(l()(),t.qb(44,0,null,null,1,"h3",[["class","my-2"]],null,null,null,null,null)),(l()(),t.Ib(-1,null,["Entity Settings"])),(l()(),t.qb(46,0,null,null,11,"div",[["class","form-group"]],null,null,null,null,null)),(l()(),t.qb(47,0,null,null,8,"label",[["class","form-checkbox mb-0"]],null,null,null,null,null)),(l()(),t.qb(48,0,null,null,5,"input",[["formControlName","enabled"],["type","checkbox"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"change"],[null,"blur"]],function(l,n,u){var e=!0;return"change"===n&&(e=!1!==t.Ab(l,49).onChange(u.target.checked)&&e),"blur"===n&&(e=!1!==t.Ab(l,49).onTouched()&&e),e},null,null)),t.pb(49,16384,null,0,R.b,[t.E,t.k],null,null),t.Fb(1024,null,R.o,function(l){return[l]},[R.b]),t.pb(51,671744,null,0,R.j,[[3,R.c],[8,null],[8,null],[6,R.o],[2,R.D]],{name:[0,"name"]},null),t.Fb(2048,null,R.p,null,[R.j]),t.pb(53,16384,null,0,R.q,[[4,R.p]],null,null),(l()(),t.qb(54,0,null,null,0,"i",[["class","form-icon"]],null,null,null,null,null)),(l()(),t.Ib(-1,null,[" Entities can have this concept "])),(l()(),t.qb(56,0,null,null,1,"div",[["class","form-input-hint mt-0"]],null,null,null,null,null)),(l()(),t.Ib(-1,null,[" This would be like characters having items for example "])),(l()(),t.hb(16777216,null,null,1,null,Ji)),t.pb(59,16384,null,0,p.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null),(l()(),t.qb(60,0,null,null,7,"div",[["class","columns big-space"]],null,null,null,null,null)),(l()(),t.qb(61,0,null,null,2,"div",[["class","column"]],null,null,null,null,null)),(l()(),t.qb(62,0,null,null,1,"h3",[],null,null,null,null,null)),(l()(),t.Ib(-1,null,["Fields"])),(l()(),t.qb(64,0,null,null,3,"div",[["class","column col-auto"]],null,null,null,null,null)),(l()(),t.qb(65,0,null,null,2,"button",[["class","btn btn-sm"]],null,[[null,"click"]],function(l,n,u){var t=!0,e=l.component;return"click"===n&&(t=!1!==e.addField()&&t),t},null,null)),(l()(),t.qb(66,0,null,null,0,"i",[["class","icon icon-plus"]],null,null,null,null,null)),(l()(),t.Ib(-1,null,[" Add Field"])),(l()(),t.hb(16777216,null,null,1,null,lo)),t.pb(69,278528,null,0,p.j,[t.P,t.M,t.t],{ngForOf:[0,"ngForOf"],ngForTrackBy:[1,"ngForTrackBy"]},null)],function(l,n){var u=n.component;l(n,7,0,u.editing);var t=l(n,12,0,u.saving);l(n,11,0,"btn btn-primary",t),l(n,16,0,u.name,u.nameFieldConfig,"true"),l(n,18,0,u.pluarlForm,u.pluralFormFieldConfig,"true"),l(n,20,0,u.description,u.descriptionFieldConfig,"true"),l(n,25,0),l(n,27,0,u.icon),l(n,35,0,u.playerEditable),l(n,41,0,u.entityConfig),l(n,51,0,"enabled"),l(n,59,0,u.entityConfig.value.enabled),l(n,69,0,u.fields.controls,u.trackField)},function(l,n){var u=n.component;l(n,4,0,u.editing?"Edit":"Create"),l(n,10,0,u.formGroup.invalid||u.formGroup.pristine),l(n,24,0,t.Ab(n,29).ngClassUntouched,t.Ab(n,29).ngClassTouched,t.Ab(n,29).ngClassPristine,t.Ab(n,29).ngClassDirty,t.Ab(n,29).ngClassValid,t.Ab(n,29).ngClassInvalid,t.Ab(n,29).ngClassPending),l(n,32,0,t.Ab(n,37).ngClassUntouched,t.Ab(n,37).ngClassTouched,t.Ab(n,37).ngClassPristine,t.Ab(n,37).ngClassDirty,t.Ab(n,37).ngClassValid,t.Ab(n,37).ngClassInvalid,t.Ab(n,37).ngClassPending),l(n,40,0,t.Ab(n,43).ngClassUntouched,t.Ab(n,43).ngClassTouched,t.Ab(n,43).ngClassPristine,t.Ab(n,43).ngClassDirty,t.Ab(n,43).ngClassValid,t.Ab(n,43).ngClassInvalid,t.Ab(n,43).ngClassPending),l(n,48,0,t.Ab(n,53).ngClassUntouched,t.Ab(n,53).ngClassTouched,t.Ab(n,53).ngClassPristine,t.Ab(n,53).ngClassDirty,t.Ab(n,53).ngClassValid,t.Ab(n,53).ngClassInvalid,t.Ab(n,53).ngClassPending)})}function uo(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,1,"dd-concept-type-editor",[],null,null,null,no,Wi)),t.pb(1,114688,null,0,Yi,[r.a,f.b,zt.a,b.a,p.g,r.k],null,null)],function(l,n){l(n,1,0)},null)}var to=t.mb("dd-concept-type-editor",Yi,uo,{},{},[]),eo=u("tZWP"),io=u("y4Wg"),oo=u("jORH"),ro=u("/AKn"),ao=function(){function l(l,n,u,t){this.route=l,this.router=n,this.conceptService=u,this.campaignService=t,this.loading=!1,this.search=null,this.page=1}return l.prototype.ngOnInit=function(){var l=this;this.searchControl=new R.h(null),this.searchControl.valueChanges.pipe(Object(be.a)(),Object(de.a)(250)).subscribe(function(n){null==n||0===n.trim().length?l.search=null:l.search=n.trim(),l.conceptType&&(l.page=1,l.load(l.conceptType.id))}),this.route.paramMap.subscribe(function(n){var u=n.get("ct_id");l.conceptType=l.getConceptType(u),l.concepts=null;var t=l.readQueryFromURL();l.searchControl.setValue(t.search),l.page=t.offset/t.limit+1,l.search=t.search,l.load(u)})},l.prototype.getConceptType=function(l){return this.campaignService.campaign.conceptTypes.find(function(n){return n.id===l})},l.prototype.writeQueryToURL=function(){var l={limit:10,offset:10*(this.page-1)};this.search&&(l.search=this.search),this.router.navigate([],{relativeTo:this.route,queryParams:l,replaceUrl:!0})},l.prototype.readQueryFromURL=function(){var l={limit:10,offset:0,search:void 0},n=this.route.snapshot.queryParamMap;try{n.has("limit")&&(l.limit=parseInt(n.get("limit"),10)),n.has("offset")&&(l.offset=parseInt(n.get("offset"),10)),n.has("search")&&(l.search=n.get("search"))}catch(u){}return l},l.prototype.load=function(l){return n=this,void 0,t=function(){var n,u;return function(l,n){var u,t,e,i,o={label:0,sent:function(){if(1&e[0])throw e[1];return e[1]},trys:[],ops:[]};return i={next:r(0),throw:r(1),return:r(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function r(i){return function(r){return function(i){if(u)throw new TypeError("Generator is already executing.");for(;o;)try{if(u=1,t&&(e=2&i[0]?t.return:i[0]?t.throw||((e=t.return)&&e.call(t),0):t.next)&&!(e=e.call(t,i[1])).done)return e;switch(t=0,e&&(i=[2&i[0],e.value]),i[0]){case 0:case 1:e=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,t=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!(e=(e=o.trys).length>0&&e[e.length-1])&&(6===i[0]||2===i[0])){o=0;continue}if(3===i[0]&&(!e||i[1]>e[0]&&i[1]<e[3])){o.label=i[1];break}if(6===i[0]&&o.label<e[1]){o.label=e[1],e=i;break}if(e&&o.label<e[2]){o.label=e[2],o.ops.push(i);break}e[2]&&o.ops.pop(),o.trys.pop();continue}i=n.call(l,o)}catch(r){i=[6,r],t=0}finally{u=e=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,r])}}}(this,function(t){switch(t.label){case 0:if(!this.conceptType)return this.loadError={status:404},[2];this.loadError=void 0,this.loading=!0,t.label=1;case 1:return t.trys.push([1,3,,4]),[4,this.conceptService.getConcepts(l,10,10*(this.page-1),this.search)];case 2:return n=t.sent(),this.concepts=n.concepts,this.totalConcepts=n.total,this.writeQueryToURL(),[3,4];case 3:return u=t.sent(),this.loadError=u,[3,4];case 4:return this.loading=!1,[2]}})},new((u=void 0)||(u=Promise))(function(l,e){function i(l){try{r(t.next(l))}catch(n){e(n)}}function o(l){try{r(t.throw(l))}catch(n){e(n)}}function r(n){n.done?l(n.value):new u(function(l){l(n.value)}).then(i,o)}r((t=t.apply(n,[])).next())});var n,u,t},l.prototype.create=function(){this.router.navigate(["campaigns",this.campaignService.campaign.id,"concepts",this.conceptType.id,"create"])},l.prototype.createFromSearch=function(){this.router.navigate(["campaigns",this.campaignService.campaign.id,"concepts",this.conceptType.id,"create"],{queryParams:{name:this.search}})},l.prototype.selectConcept=function(l){this.router.navigate(["campaigns",this.campaignService.campaign.id,"concepts",this.conceptType.id,l.id,"view"])},l.prototype.trackConcept=function(l,n){return n.id},l.prototype.changePage=function(l){this.page=l,this.load(this.conceptType.id)},Object.defineProperty(l.prototype,"editing",{get:function(){return this.campaignService.canEdit||this.conceptType&&this.conceptType.playerEditable},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"canCreateFromSearch",{get:function(){return this.editing&&this.search},enumerable:!0,configurable:!0}),l}(),co=t.ob({encapsulation:0,styles:[[""]],data:{}});function so(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,3,"button",[["class","btn btn-sm"]],null,[[null,"click"]],function(l,n,u){var t=!0,e=l.component;return"click"===n&&(t=!1!==e.create()&&t),t},null,null)),(l()(),t.qb(1,0,null,null,0,"i",[["class","icon icon-plus"]],null,null,null,null,null)),(l()(),t.qb(2,0,null,null,1,"span",[["class","hide-sm"]],null,null,null,null,null)),(l()(),t.Ib(3,null,[" New ",""]))],null,function(l,n){l(n,3,0,n.component.conceptType.name)})}function po(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,0,"i",[["class","icon icon-search form-icon"]],null,null,null,null,null))],null,null)}function bo(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,0,"div",[["class","loading form-icon"]],null,null,null,null,null))],null,null)}function fo(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,18,"div",[["class","columns"]],null,null,null,null,null)),(l()(),t.qb(1,0,null,null,2,"div",[["class","column col-auto"]],null,null,null,null,null)),(l()(),t.qb(2,0,null,null,1,"h3",[["class","mb-0"]],null,null,null,null,null)),(l()(),t.Ib(3,null,["",""])),(l()(),t.qb(4,0,null,null,2,"div",[["class","column col-auto"]],null,null,null,null,null)),(l()(),t.hb(16777216,null,null,1,null,so)),t.pb(6,16384,null,0,p.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null),(l()(),t.qb(7,0,null,null,11,"div",[["class","column col-sm-12 my-1"]],null,null,null,null,null)),(l()(),t.qb(8,0,null,null,10,"div",[["class","has-icon-right"]],null,null,null,null,null)),(l()(),t.qb(9,0,null,null,5,"input",[["class","form-input"],["placeholder","Search..."],["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(l,n,u){var e=!0;return"input"===n&&(e=!1!==t.Ab(l,10)._handleInput(u.target.value)&&e),"blur"===n&&(e=!1!==t.Ab(l,10).onTouched()&&e),"compositionstart"===n&&(e=!1!==t.Ab(l,10)._compositionStart()&&e),"compositionend"===n&&(e=!1!==t.Ab(l,10)._compositionEnd(u.target.value)&&e),e},null,null)),t.pb(10,16384,null,0,R.d,[t.E,t.k,[2,R.a]],null,null),t.Fb(1024,null,R.o,function(l){return[l]},[R.d]),t.pb(12,540672,null,0,R.i,[[8,null],[8,null],[6,R.o],[2,R.D]],{form:[0,"form"]},null),t.Fb(2048,null,R.p,null,[R.i]),t.pb(14,16384,null,0,R.q,[[4,R.p]],null,null),(l()(),t.hb(16777216,null,null,1,null,po)),t.pb(16,16384,null,0,p.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null),(l()(),t.hb(16777216,null,null,1,null,bo)),t.pb(18,16384,null,0,p.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null)],function(l,n){var u=n.component;l(n,6,0,u.editing),l(n,12,0,u.searchControl),l(n,16,0,!u.loading||!u.concepts),l(n,18,0,u.loading&&u.concepts)},function(l,n){l(n,3,0,n.component.conceptType.pluralForm),l(n,9,0,t.Ab(n,14).ngClassUntouched,t.Ab(n,14).ngClassTouched,t.Ab(n,14).ngClassPristine,t.Ab(n,14).ngClassDirty,t.Ab(n,14).ngClassValid,t.Ab(n,14).ngClassInvalid,t.Ab(n,14).ngClassPending)})}function ho(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,0,"div",[["class","loading loading-lg"]],null,null,null,null,null))],null,null)}function go(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,2,"div",[["class","card p-1 hoverable mb-1"]],null,[[null,"click"]],function(l,n,u){var t=!0,e=l.component;return"click"===n&&(t=!1!==e.selectConcept(l.context.$implicit)&&t),t},null,null)),(l()(),t.qb(1,0,null,null,1,"dd-concept-list-item",[],null,null,null,Bt,$t)),t.pb(2,114688,null,0,Ht,[],{concept:[0,"concept"]},null)],function(l,n){l(n,2,0,n.context.$implicit)},null)}function mo(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,1,"dd-paginator",[],null,[[null,"pageChange"]],function(l,n,u){var t=!0,e=l.component;return"pageChange"===n&&(t=!1!==e.changePage(u)&&t),t},eo.b,eo.a)),t.pb(1,114688,null,0,io.a,[],{totalItems:[0,"totalItems"],itemsPerPage:[1,"itemsPerPage"],page:[2,"page"],autoHide:[3,"autoHide"],loading:[4,"loading"]},{pageChange:"pageChange"})],function(l,n){var u=n.component;l(n,1,0,u.totalConcepts,10,u.page,!1,u.loading)},null)}function vo(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,4,"div",[],null,null,null,null,null)),(l()(),t.hb(16777216,null,null,1,null,go)),t.pb(2,278528,null,0,p.j,[t.P,t.M,t.t],{ngForOf:[0,"ngForOf"],ngForTrackBy:[1,"ngForTrackBy"]},null),(l()(),t.hb(16777216,null,null,1,null,mo)),t.pb(4,16384,null,0,p.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null)],function(l,n){var u=n.component;l(n,2,0,u.concepts,u.trackConcept),l(n,4,0,u.concepts&&u.concepts.length>0)},null)}function yo(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,1,"p",[["class","empty-subtitle"]],null,null,null,null,null)),(l()(),t.Ib(-1,null,["Click the button to create one"]))],null,null)}function Co(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,2,"div",[["class","empty-action"]],null,null,null,null,null)),(l()(),t.qb(1,0,null,null,1,"button",[["class","btn btn-primary"]],null,[[null,"click"]],function(l,n,u){var t=!0,e=l.component;return"click"===n&&(t=!1!==e.create()&&t),t},null,null)),(l()(),t.Ib(2,null,["Create ",""]))],null,function(l,n){l(n,2,0,n.component.conceptType.name)})}function Io(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,8,"div",[["class","empty"]],null,null,null,null,null)),(l()(),t.qb(1,0,null,null,1,"div",[["class","empty-icon"]],null,null,null,null,null)),(l()(),t.qb(2,0,null,null,0,"i",[["class","icon icon-search icon-4x"]],null,null,null,null,null)),(l()(),t.qb(3,0,null,null,1,"p",[["class","empty-title h5"]],null,null,null,null,null)),(l()(),t.Ib(4,null,["There are no ",""])),(l()(),t.hb(16777216,null,null,1,null,yo)),t.pb(6,16384,null,0,p.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null),(l()(),t.hb(16777216,null,null,1,null,Co)),t.pb(8,16384,null,0,p.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null)],function(l,n){var u=n.component;l(n,6,0,u.editing),l(n,8,0,u.editing)},function(l,n){l(n,4,0,n.component.conceptType.pluralForm)})}function qo(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,1,"p",[["class","empty-subtitle"]],null,null,null,null,null)),(l()(),t.Ib(1,null,[" Click the button below to create a new "," called "," "]))],null,function(l,n){var u=n.component;l(n,1,0,u.conceptType.name,u.search)})}function ko(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,2,"div",[["class","empty-action"]],null,null,null,null,null)),(l()(),t.qb(1,0,null,null,1,"button",[["class","btn btn-primary"]],null,[[null,"click"]],function(l,n,u){var t=!0,e=l.component;return"click"===n&&(t=!1!==e.createFromSearch()&&t),t},null,null)),(l()(),t.Ib(2,null,["Create ",""]))],null,function(l,n){l(n,2,0,n.component.search)})}function Ao(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,8,"div",[["class","empty"]],null,null,null,null,null)),(l()(),t.qb(1,0,null,null,1,"div",[["class","empty-icon"]],null,null,null,null,null)),(l()(),t.qb(2,0,null,null,0,"i",[["class","icon icon-search icon-4x"]],null,null,null,null,null)),(l()(),t.qb(3,0,null,null,1,"p",[["class","empty-title h5"]],null,null,null,null,null)),(l()(),t.Ib(-1,null,["Your search returned nothing"])),(l()(),t.hb(16777216,null,null,1,null,qo)),t.pb(6,16384,null,0,p.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null),(l()(),t.hb(16777216,null,null,1,null,ko)),t.pb(8,16384,null,0,p.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null)],function(l,n){var u=n.component;l(n,6,0,u.canCreateFromSearch),l(n,8,0,u.canCreateFromSearch)},null)}function wo(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,12,"div",[["class","container grid-xl"]],null,null,null,null,null)),(l()(),t.qb(1,0,null,null,1,"dd-http-errors",[],null,null,null,oo.b,oo.a)),t.pb(2,114688,null,0,ro.a,[],{error:[0,"error"]},null),(l()(),t.hb(16777216,null,null,1,null,fo)),t.pb(4,16384,null,0,p.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null),(l()(),t.hb(16777216,null,null,1,null,ho)),t.pb(6,16384,null,0,p.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null),(l()(),t.hb(16777216,null,null,1,null,vo)),t.pb(8,16384,null,0,p.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null),(l()(),t.hb(16777216,null,null,1,null,Io)),t.pb(10,16384,null,0,p.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null),(l()(),t.hb(16777216,null,null,1,null,Ao)),t.pb(12,16384,null,0,p.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null)],function(l,n){var u=n.component;l(n,2,0,u.loadError),l(n,4,0,u.conceptType),l(n,6,0,u.loading&&!u.concepts),l(n,8,0,u.concepts&&u.conceptType),l(n,10,0,u.conceptType&&u.concepts&&0===u.totalConcepts&&!u.search),l(n,12,0,u.conceptType&&u.concepts&&0===u.concepts.length&&u.search)},null)}function Po(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,1,"dd-concept-manager",[],null,null,null,wo,co)),t.pb(1,114688,null,0,ao,[r.a,r.k,zt.a,f.b],null,null)],function(l,n){l(n,1,0)},null)}var xo=t.mb("dd-concept-manager",ao,Po,{},{},[]),Eo=function(){return(Eo=Object.assign||function(l){for(var n,u=1,t=arguments.length;u<t;u++)for(var e in n=arguments[u])Object.prototype.hasOwnProperty.call(n,e)&&(l[e]=n[e]);return l}).apply(this,arguments)},To=function(l,n,u,t){return new(u||(u=Promise))(function(e,i){function o(l){try{a(t.next(l))}catch(n){i(n)}}function r(l){try{a(t.throw(l))}catch(n){i(n)}}function a(l){l.done?e(l.value):new u(function(n){n(l.value)}).then(o,r)}a((t=t.apply(l,n||[])).next())})},So=function(l,n){var u,t,e,i,o={label:0,sent:function(){if(1&e[0])throw e[1];return e[1]},trys:[],ops:[]};return i={next:r(0),throw:r(1),return:r(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function r(i){return function(r){return function(i){if(u)throw new TypeError("Generator is already executing.");for(;o;)try{if(u=1,t&&(e=2&i[0]?t.return:i[0]?t.throw||((e=t.return)&&e.call(t),0):t.next)&&!(e=e.call(t,i[1])).done)return e;switch(t=0,e&&(i=[2&i[0],e.value]),i[0]){case 0:case 1:e=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,t=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!(e=(e=o.trys).length>0&&e[e.length-1])&&(6===i[0]||2===i[0])){o=0;continue}if(3===i[0]&&(!e||i[1]>e[0]&&i[1]<e[3])){o.label=i[1];break}if(6===i[0]&&o.label<e[1]){o.label=e[1],e=i;break}if(e&&o.label<e[2]){o.label=e[2],o.ops.push(i);break}e[2]&&o.ops.pop(),o.trys.pop();continue}i=n.call(l,o)}catch(r){i=[6,r],t=0}finally{u=e=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,r])}}},Oo=function(){function l(l,n,u,t,e){this.route=l,this.router=n,this.conceptService=u,this.campaignService=t,this.location=e,this.loading=!1,this.saving=!1,this.deleting=!0,this.nameFieldConfig={name:"Name",description:"The name of this concept",type:pt.a.STRING,options:{maxLength:30,required:!0}},this.descriptionFieldConfig={name:"Description",type:pt.a.TEXT_FORMATTED}}return l.prototype.ngOnInit=function(){var l=this;this.formGroup=new R.k({name:new R.h(null,[R.x.required,R.x.maxLength(30)]),imageId:new R.h(null),content:new R.h(null),isContainer:new R.h(!1),fields:new R.e([]),tags:new R.e([])}),!this.editing&&this.route.snapshot.queryParamMap.has("name")&&(this.name.setValue(this.route.snapshot.queryParamMap.get("name")),this.name.markAsDirty()),this.route.paramMap.subscribe(function(n){var u=n.get("ct_id"),t=n.get("c_id");l.conceptType=l.getConceptType(u),null===l.conceptType||void 0===l.conceptType?l.error={status:404}:(l.conceptType.fields.forEach(function(){l.fields.push(new R.h(null))}),l.editing&&l.load(t))})},l.prototype.getConceptType=function(l){return this.campaignService.campaign.conceptTypes.find(function(n){return n.id===l})},l.prototype.constructConcept=function(){var l=this,n={name:this.name.value,content:this.description.value,userId:"dmmy",isContainer:this.isContainer.value,fields:this.fields.value.map(function(n,u){return{name:l.conceptType.fields[u].name,value:n}}).filter(function(l){return null!==l.value&&void 0!==l.value&&""!==l.value}),tags:this.tags.value,imageId:this.imageId.value,conceptTypeId:this.conceptType.id};return this.editing&&(n.id=this.concept.id),n},l.prototype.load=function(l){return To(this,void 0,void 0,function(){var n,u=this;return So(this,function(t){switch(t.label){case 0:this.loading=!0,this.formGroup.disable(),t.label=1;case 1:return t.trys.push([1,3,,4]),n=this,[4,this.conceptService.getConcept(l)];case 2:return n.concept=t.sent(),[3,4];case 3:throw t.sent();case 4:return this.formGroup.patchValue(Eo({},this.concept,{fields:this.conceptType.fields.map(function(l){var n=u.concept.fields.find(function(n){return n.name===l.name});return n?n.value:null})}),{emitEvent:!1}),this.formGroup.setControl("tags",new R.e(this.concept.tags.map(function(l){return new R.h(l)}))),this.formGroup.enable(),this.loading=!1,this.formGroup.markAsPristine(),[2]}})})},l.prototype.cancel=function(){this.location.back()},l.prototype.delete=function(){return To(this,void 0,void 0,function(){return So(this,function(l){switch(l.label){case 0:return[4,dn.a.fire({title:"Are you sure?",text:"You will not be able to undo this",showCancelButton:!0})];case 1:if(!l.sent().value)return[2];this.formGroup.markAsPristine(),this.formGroup.disable(),this.deleting=!0,l.label=2;case 2:return l.trys.push([2,4,,5]),[4,this.conceptService.deleteConcept(this.concept.id)];case 3:return l.sent(),[3,5];case 4:throw l.sent();case 5:return this.cancel(),[2]}})})},l.prototype.save=function(){return To(this,void 0,void 0,function(){var l;return So(this,function(n){switch(n.label){case 0:if(!this.formGroup.valid)return[2];this.saving=!0,n.label=1;case 1:return n.trys.push([1,6,,7]),l=this.constructConcept(),this.editing?[4,this.conceptService.updateConcept(l)]:[3,3];case 2:return n.sent(),[3,5];case 3:return[4,this.conceptService.createConcept(l)];case 4:n.sent(),n.label=5;case 5:return this.formGroup.markAsPristine(),this.cancel(),[3,7];case 6:throw n.sent();case 7:return this.saving=!1,[2]}})})},l.prototype.trackField=function(l){return l},l.prototype.getFieldConfig=function(l){return l.type===pt.a.CURRENCY&&(l.options={levels:this.campaignService.campaign.currencyMap,trackCoins:this.campaignService.campaign.trackCoins}),l},Object.defineProperty(l.prototype,"editing",{get:function(){return this.route.snapshot.data.editing},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"name",{get:function(){return this.formGroup.get("name")},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"description",{get:function(){return this.formGroup.get("content")},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"imageId",{get:function(){return this.formGroup.get("imageId")},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"isContainer",{get:function(){return this.formGroup.get("isContainer")},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"fields",{get:function(){return this.formGroup.get("fields")},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"tags",{get:function(){return this.formGroup.get("tags")},enumerable:!0,configurable:!0}),l}(),Mo=t.ob({encapsulation:0,styles:[[""]],data:{}});function _o(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,0,"div",[["class","loading loading-lg"]],null,null,null,null,null))],null,null)}function Do(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,2,"button",[["class","btn btn-error mr-2"]],null,[[null,"click"]],function(l,n,u){var t=!0,e=l.component;return"click"===n&&(t=!1!==e.delete()&&t),t},null,null)),(l()(),t.qb(1,0,null,null,0,"i",[["class","icon icon-cross"]],null,null,null,null,null)),(l()(),t.Ib(-1,null,[" Delete"]))],null,null)}function No(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,14,"div",[["class","columns"]],null,null,null,null,null)),(l()(),t.qb(1,0,null,null,2,"div",[["class","column"]],null,null,null,null,null)),(l()(),t.qb(2,0,null,null,1,"h3",[],null,null,null,null,null)),(l()(),t.Ib(3,null,[""," ",""])),(l()(),t.qb(4,0,null,null,10,"div",[["class","column col-auto"]],null,null,null,null,null)),(l()(),t.qb(5,0,null,null,2,"button",[["class","btn mr-2"]],null,[[null,"click"]],function(l,n,u){var t=!0,e=l.component;return"click"===n&&(t=!1!==e.cancel()&&t),t},null,null)),(l()(),t.qb(6,0,null,null,0,"i",[["class","icon icon-arrow-left"]],null,null,null,null,null)),(l()(),t.Ib(-1,null,[" Cancel"])),(l()(),t.hb(16777216,null,null,1,null,Do)),t.pb(9,16384,null,0,p.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null),(l()(),t.qb(10,0,null,null,4,"button",[["class","btn btn-primary"]],[[8,"disabled",0]],[[null,"click"]],function(l,n,u){var t=!0,e=l.component;return"click"===n&&(t=!1!==e.save()&&t),t},null,null)),t.pb(11,278528,null,0,p.i,[t.t,t.u,t.k,t.E],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),t.Db(12,{loading:0}),(l()(),t.qb(13,0,null,null,0,"i",[["class","icon icon-check"]],null,null,null,null,null)),(l()(),t.Ib(-1,null,[" Save "]))],function(l,n){var u=n.component;l(n,9,0,u.editing);var t=l(n,12,0,u.saving);l(n,11,0,"btn btn-primary",t)},function(l,n){var u=n.component;l(n,3,0,u.editing?"Edit":"Create",u.conceptType.name),l(n,10,0,u.formGroup.invalid||u.formGroup.pristine)})}function Lo(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,1,"dd-dynamic-field-horizontal",[["class","col-12 mb-2"]],null,null,null,ui,Je)),t.pb(1,114688,null,0,Ze,[],{control:[0,"control"],config:[1,"config"]},null)],function(l,n){var u=n.component;l(n,1,0,u.fields.controls[n.context.index],u.getFieldConfig(n.context.$implicit))},null)}function Fo(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,36,"div",[],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"submit"],[null,"reset"]],function(l,n,u){var e=!0;return"submit"===n&&(e=!1!==t.Ab(l,1).onSubmit(u)&&e),"reset"===n&&(e=!1!==t.Ab(l,1).onReset()&&e),e},null,null)),t.pb(1,540672,null,0,R.l,[[8,null],[8,null]],{form:[0,"form"]},null),t.Fb(2048,null,R.c,null,[R.l]),t.pb(3,16384,null,0,R.r,[[4,R.c]],null,null),(l()(),t.qb(4,0,null,null,29,"div",[["class","columns"]],null,null,null,null,null)),(l()(),t.qb(5,0,null,null,6,"div",[["class","column col-auto"]],null,null,null,null,null)),(l()(),t.qb(6,0,null,null,5,"dd-image-upload",[["formControlName","imageId"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],null,null,Tl,Il)),t.pb(7,4308992,null,0,Cl,[b.a,f.b],null,null),t.Fb(1024,null,R.o,function(l){return[l]},[Cl]),t.pb(9,671744,null,0,R.j,[[3,R.c],[8,null],[8,null],[6,R.o],[2,R.D]],{name:[0,"name"]},null),t.Fb(2048,null,R.p,null,[R.j]),t.pb(11,16384,null,0,R.q,[[4,R.p]],null,null),(l()(),t.qb(12,0,null,null,21,"div",[["class","column"]],null,null,null,null,null)),(l()(),t.qb(13,0,null,null,1,"dd-dynamic-field",[["showLabel","true"]],null,null,null,Ju.b,Ju.a)),t.pb(14,114688,null,0,lt.a,[],{control:[0,"control"],config:[1,"config"],showLabel:[2,"showLabel"]},null),(l()(),t.qb(15,0,null,null,1,"dd-dynamic-field",[["showLabel","true"]],null,null,null,Ju.b,Ju.a)),t.pb(16,114688,null,0,lt.a,[],{control:[0,"control"],config:[1,"config"],showLabel:[2,"showLabel"]},null),(l()(),t.qb(17,0,null,null,7,"div",[["class","form-group"]],null,null,null,null,null)),(l()(),t.qb(18,0,null,null,1,"label",[["class","form-label"]],null,null,null,null,null)),(l()(),t.Ib(-1,null,["Tags"])),(l()(),t.qb(20,0,null,null,4,"dd-tag-editor",[],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"submit"],[null,"reset"]],function(l,n,u){var e=!0;return"submit"===n&&(e=!1!==t.Ab(l,21).onSubmit(u)&&e),"reset"===n&&(e=!1!==t.Ab(l,21).onReset()&&e),e},Oi.b,Oi.a)),t.pb(21,540672,null,0,R.l,[[8,null],[8,null]],{form:[0,"form"]},null),t.Fb(2048,null,R.c,null,[R.l]),t.pb(23,16384,null,0,R.r,[[4,R.c]],null,null),t.pb(24,114688,null,0,Mi.a,[],{formGroup:[0,"formGroup"]},null),(l()(),t.qb(25,0,null,null,8,"label",[["class","form-checkbox"]],null,null,null,null,null)),(l()(),t.qb(26,0,null,null,5,"input",[["formControlName","isContainer"],["type","checkbox"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"change"],[null,"blur"]],function(l,n,u){var e=!0;return"change"===n&&(e=!1!==t.Ab(l,27).onChange(u.target.checked)&&e),"blur"===n&&(e=!1!==t.Ab(l,27).onTouched()&&e),e},null,null)),t.pb(27,16384,null,0,R.b,[t.E,t.k],null,null),t.Fb(1024,null,R.o,function(l){return[l]},[R.b]),t.pb(29,671744,null,0,R.j,[[3,R.c],[8,null],[8,null],[6,R.o],[2,R.D]],{name:[0,"name"]},null),t.Fb(2048,null,R.p,null,[R.j]),t.pb(31,16384,null,0,R.q,[[4,R.p]],null,null),(l()(),t.qb(32,0,null,null,0,"i",[["class","form-icon"]],null,null,null,null,null)),(l()(),t.Ib(33,null,[" This "," is a container "])),(l()(),t.qb(34,0,null,null,2,"div",[["class","form-horizontal"]],null,null,null,null,null)),(l()(),t.hb(16777216,null,null,1,null,Lo)),t.pb(36,278528,null,0,p.j,[t.P,t.M,t.t],{ngForOf:[0,"ngForOf"],ngForTrackBy:[1,"ngForTrackBy"]},null)],function(l,n){var u=n.component;l(n,1,0,u.formGroup),l(n,7,0),l(n,9,0,"imageId"),l(n,14,0,u.name,u.nameFieldConfig,"true"),l(n,16,0,u.description,u.descriptionFieldConfig,"true"),l(n,21,0,u.formGroup),l(n,24,0,u.formGroup),l(n,29,0,"isContainer"),l(n,36,0,u.conceptType.fields,u.trackField)},function(l,n){var u=n.component;l(n,0,0,t.Ab(n,3).ngClassUntouched,t.Ab(n,3).ngClassTouched,t.Ab(n,3).ngClassPristine,t.Ab(n,3).ngClassDirty,t.Ab(n,3).ngClassValid,t.Ab(n,3).ngClassInvalid,t.Ab(n,3).ngClassPending),l(n,6,0,t.Ab(n,11).ngClassUntouched,t.Ab(n,11).ngClassTouched,t.Ab(n,11).ngClassPristine,t.Ab(n,11).ngClassDirty,t.Ab(n,11).ngClassValid,t.Ab(n,11).ngClassInvalid,t.Ab(n,11).ngClassPending),l(n,20,0,t.Ab(n,23).ngClassUntouched,t.Ab(n,23).ngClassTouched,t.Ab(n,23).ngClassPristine,t.Ab(n,23).ngClassDirty,t.Ab(n,23).ngClassValid,t.Ab(n,23).ngClassInvalid,t.Ab(n,23).ngClassPending),l(n,26,0,t.Ab(n,31).ngClassUntouched,t.Ab(n,31).ngClassTouched,t.Ab(n,31).ngClassPristine,t.Ab(n,31).ngClassDirty,t.Ab(n,31).ngClassValid,t.Ab(n,31).ngClassInvalid,t.Ab(n,31).ngClassPending),l(n,33,0,u.conceptType.name)})}function Ko(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,8,"div",[["class","container grid-xl"]],null,null,null,null,null)),(l()(),t.qb(1,0,null,null,1,"dd-http-errors",[],null,null,null,oo.b,oo.a)),t.pb(2,114688,null,0,ro.a,[],{error:[0,"error"]},null),(l()(),t.hb(16777216,null,null,1,null,_o)),t.pb(4,16384,null,0,p.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null),(l()(),t.hb(16777216,null,null,1,null,No)),t.pb(6,16384,null,0,p.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null),(l()(),t.hb(16777216,null,null,1,null,Fo)),t.pb(8,16384,null,0,p.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null)],function(l,n){var u=n.component;l(n,2,0,u.error),l(n,4,0,u.loading),l(n,6,0,u.conceptType),l(n,8,0,u.conceptType)},null)}function jo(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,1,"dd-concept-editor",[],null,null,null,Ko,Mo)),t.pb(1,114688,null,0,Oo,[r.a,r.k,zt.a,f.b,p.g],null,null)],function(l,n){l(n,1,0)},null)}var Go=t.mb("dd-concept-editor",Oo,jo,{},{},[]),Uo=function(){function l(l,n,u,t){this.route=l,this.router=n,this.campaignService=u,this.conceptService=t,this.loading=!1}return l.prototype.ngOnInit=function(){var l=this;this.route.paramMap.subscribe(function(n){var u=n.get("c_id"),t=n.get("ct_id");l.conceptType=l.getConceptType(t),void 0===l.conceptType||null===l.conceptType?l.loadError={status:404}:l.load(u)})},l.prototype.getConceptType=function(l){return this.campaignService.campaign.conceptTypes.find(function(n){return n.id===l})},l.prototype.load=function(l){return n=this,void 0,t=function(){var n,u;return function(l,n){var u,t,e,i,o={label:0,sent:function(){if(1&e[0])throw e[1];return e[1]},trys:[],ops:[]};return i={next:r(0),throw:r(1),return:r(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function r(i){return function(r){return function(i){if(u)throw new TypeError("Generator is already executing.");for(;o;)try{if(u=1,t&&(e=2&i[0]?t.return:i[0]?t.throw||((e=t.return)&&e.call(t),0):t.next)&&!(e=e.call(t,i[1])).done)return e;switch(t=0,e&&(i=[2&i[0],e.value]),i[0]){case 0:case 1:e=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,t=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!(e=(e=o.trys).length>0&&e[e.length-1])&&(6===i[0]||2===i[0])){o=0;continue}if(3===i[0]&&(!e||i[1]>e[0]&&i[1]<e[3])){o.label=i[1];break}if(6===i[0]&&o.label<e[1]){o.label=e[1],e=i;break}if(e&&o.label<e[2]){o.label=e[2],o.ops.push(i);break}e[2]&&o.ops.pop(),o.trys.pop();continue}i=n.call(l,o)}catch(r){i=[6,r],t=0}finally{u=e=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,r])}}}(this,function(t){switch(t.label){case 0:this.loading=!0,t.label=1;case 1:return t.trys.push([1,3,,4]),n=this,[4,this.conceptService.getConcept(l)];case 2:return n.concept=t.sent(),[3,4];case 3:return u=t.sent(),this.loadError=u,[3,4];case 4:return this.loading=!1,[2]}})},new((u=void 0)||(u=Promise))(function(l,e){function i(l){try{r(t.next(l))}catch(n){e(n)}}function o(l){try{r(t.throw(l))}catch(n){e(n)}}function r(n){n.done?l(n.value):new u(function(l){l(n.value)}).then(i,o)}r((t=t.apply(n,[])).next())});var n,u,t},l.prototype.edit=function(){this.router.navigate(["campaigns",this.campaignService.campaign.id,"concepts",this.conceptType.id,this.concept.id,"edit"])},l.prototype.history=function(){this.router.navigate(["campaigns",this.campaignService.campaign.id,"concepts",this.conceptType.id,this.concept.id,"history"])},l.prototype.getFieldConfig=function(l){return this.conceptType.fields.find(function(n){return n.name===l.name})},l.prototype.trackField=function(l){return l},Object.defineProperty(l.prototype,"tableFields",{get:function(){for(var l=[],n=0,u=this.concept.fields;n<u.length;n++){var t=u[n],e=this.getFieldConfig(t);-1!==[pt.a.BOOLEAN,pt.a.ENUM,pt.a.ENUM_MULTI,pt.a.FLOAT,pt.a.INT,pt.a.STRING,pt.a.CURRENCY].indexOf(e.type)&&l.push({field:t,config:e})}return l},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"formattedTextFields",{get:function(){for(var l=[],n=0,u=this.concept.fields;n<u.length;n++){var t=u[n];this.getFieldConfig(t).type===pt.a.TEXT_FORMATTED&&l.push(t)}return l},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"editable",{get:function(){return this.campaignService.canEdit||this.conceptType&&this.conceptType.playerEditable},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"user",{get:function(){var l=this;if(this.concept){var n=this.campaignService.campaign.members.find(function(n){return n.userId===l.concept.userId});if(n)return n.user}return null},enumerable:!0,configurable:!0}),l}(),Ro=t.ob({encapsulation:0,styles:[[".big-space[_ngcontent-%COMP%]{margin-top:2rem}"]],data:{}});function Vo(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,0,"div",[["class","loading loading-lg"]],null,null,null,null,null))],null,null)}function Ho(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,0,"img",[["alt","Item Picture"],["class","s-rounded"],["width","64"]],[[8,"src",4]],null,null,null,null))],null,function(l,n){var u=n.component;l(n,0,0,t.sb(1,"https://res.cloudinary.com/dqhk8k6iv/image/upload/t_thumb/",u.concept.imageId,""))})}function $o(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,0,"img",[["alt","Item Fallback Picture"],["class","s-rounded"],["src","https://res.cloudinary.com/dqhk8k6iv/image/upload/t_thumb/winged-sword"],["width","64"]],null,null,null,null,null))],null,null)}function Bo(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,3,"button",[["class","btn btn-sm"]],null,[[null,"click"]],function(l,n,u){var t=!0,e=l.component;return"click"===n&&(t=!1!==e.edit()&&t),t},null,null)),(l()(),t.qb(1,0,null,null,0,"i",[["class","icon icon-edit"]],null,null,null,null,null)),(l()(),t.qb(2,0,null,null,1,"span",[["class","hide-sm"]],null,null,null,null,null)),(l()(),t.Ib(-1,null,[" Edit"]))],null,null)}function zo(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,17,"div",[["class","columns"]],null,null,null,null,null)),(l()(),t.qb(1,0,null,null,4,"div",[["class","column col-auto"]],null,null,null,null,null)),(l()(),t.hb(16777216,null,null,1,null,Ho)),t.pb(3,16384,null,0,p.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null),(l()(),t.hb(16777216,null,null,1,null,$o)),t.pb(5,16384,null,0,p.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null),(l()(),t.qb(6,0,null,null,2,"div",[["class","column"]],null,null,null,null,null)),(l()(),t.qb(7,0,null,null,1,"h2",[["class","mb-0"]],null,null,null,null,null)),(l()(),t.Ib(8,null,["",""])),(l()(),t.qb(9,0,null,null,1,"div",[["class","column col-auto"]],[[8,"innerHTML",1]],null,null,null,null)),t.pb(10,16384,null,0,Q.a,[Y.c],{user:[0,"user"]},null),(l()(),t.qb(11,0,null,null,6,"div",[["class","column col-auto"]],null,null,null,null,null)),(l()(),t.qb(12,0,null,null,3,"button",[["class","btn btn-sm mr-1"]],null,[[null,"click"]],function(l,n,u){var t=!0,e=l.component;return"click"===n&&(t=!1!==e.history()&&t),t},null,null)),(l()(),t.qb(13,0,null,null,0,"i",[["class","icon icon-time"]],null,null,null,null,null)),(l()(),t.qb(14,0,null,null,1,"span",[["class","hide-sm"]],null,null,null,null,null)),(l()(),t.Ib(-1,null,[" History"])),(l()(),t.hb(16777216,null,null,1,null,Bo)),t.pb(17,16384,null,0,p.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null)],function(l,n){var u=n.component;l(n,3,0,u.concept.imageId),l(n,5,0,!u.concept.imageId),l(n,10,0,u.user),l(n,17,0,u.editable)},function(l,n){l(n,8,0,n.component.concept.name),l(n,9,0,t.Ab(n,10).html)})}function Xo(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,1,"div",[["class","column col-4 hide-md"]],null,null,null,null,null)),(l()(),t.qb(1,0,null,null,0,"img",[["class","img-responsive s-rounded"]],[[8,"src",4],[8,"alt",0]],null,null,null,null))],null,function(l,n){var u=n.component;l(n,1,0,t.sb(1,"https://res.cloudinary.com/dqhk8k6iv/image/upload/w_500,q_auto:good,f_auto/",u.concept.imageId,""),"picture of"+u.concept.name)})}function Qo(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,2,"dd-quill",[["readOnly","true"]],null,null,null,Sl.b,Sl.a)),t.Fb(5120,null,R.o,function(l){return[l]},[Ol.a]),t.pb(2,1163264,null,0,Ol.a,[f.b,Ml.a,b.a,r.k,P.c,_l.b,Dl.a,Nl.a],{readOnly:[0,"readOnly"],value:[1,"value"]},null)],function(l,n){l(n,2,0,"true",n.component.concept.content)},null)}function Yo(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,1,"p",[["class","text-italic text-center"]],null,null,null,null,null)),(l()(),t.Ib(-1,null,[" There is nothing here... "]))],null,null)}function Wo(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,5,"div",[["class","mt-2"]],null,null,null,null,null)),(l()(),t.qb(1,0,null,null,1,"h5",[["class","mb-1"]],null,null,null,null,null)),(l()(),t.Ib(2,null,["",""])),(l()(),t.qb(3,0,null,null,2,"dd-quill",[["readOnly","true"]],null,null,null,Sl.b,Sl.a)),t.Fb(5120,null,R.o,function(l){return[l]},[Ol.a]),t.pb(5,1163264,null,0,Ol.a,[f.b,Ml.a,b.a,r.k,P.c,_l.b,Dl.a,Nl.a],{readOnly:[0,"readOnly"],value:[1,"value"]},null)],function(l,n){l(n,5,0,"true",n.context.$implicit.value)},function(l,n){l(n,2,0,n.context.$implicit.name)})}function Zo(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,1,"div",[["class","label label-rounded mr-1 mb-1"]],null,null,null,null,null)),(l()(),t.Ib(1,null,[" "," "]))],null,function(l,n){l(n,1,0,n.context.$implicit)})}function Jo(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,2,"div",[["class","big-space"]],null,null,null,null,null)),(l()(),t.hb(16777216,null,null,1,null,Zo)),t.pb(2,278528,null,0,p.j,[t.P,t.M,t.t],{ngForOf:[0,"ngForOf"]},null)],function(l,n){l(n,2,0,n.component.concept.tags)},null)}function lr(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,1,"span",[],[[8,"innerHTML",1]],null,null,null,null)),t.pb(1,16384,null,0,Bu.a,[zu.a,f.b],{currency:[0,"currency"]},null)],function(l,n){l(n,1,0,n.parent.context.$implicit.field.value)},function(l,n){l(n,0,0,t.Ab(n,1).text)})}function nr(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,1,"span",[],null,null,null,null,null)),(l()(),t.Ib(1,null,[" "," "]))],null,function(l,n){l(n,1,0,n.parent.context.$implicit.field.value)})}function ur(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,8,"tr",[],null,null,null,null,null)),(l()(),t.qb(1,0,null,null,1,"td",[],null,null,null,null,null)),(l()(),t.Ib(2,null,["",""])),(l()(),t.qb(3,0,null,null,5,"td",[],null,null,null,null,null)),t.pb(4,16384,null,0,p.n,[],{ngSwitch:[0,"ngSwitch"]},null),(l()(),t.hb(16777216,null,null,1,null,lr)),t.pb(6,278528,null,0,p.o,[t.P,t.M,p.n],{ngSwitchCase:[0,"ngSwitchCase"]},null),(l()(),t.hb(16777216,null,null,1,null,nr)),t.pb(8,16384,null,0,p.p,[t.P,t.M,p.n],null,null)],function(l,n){l(n,4,0,n.context.$implicit.config.type),l(n,6,0,6)},function(l,n){l(n,2,0,n.context.$implicit.field.name)})}function tr(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,8,"table",[["class","table"]],null,null,null,null,null)),(l()(),t.qb(1,0,null,null,4,"thead",[],null,null,null,null,null)),(l()(),t.qb(2,0,null,null,1,"th",[],null,null,null,null,null)),(l()(),t.Ib(-1,null,["Field"])),(l()(),t.qb(4,0,null,null,1,"th",[],null,null,null,null,null)),(l()(),t.Ib(-1,null,["Value"])),(l()(),t.qb(6,0,null,null,2,"tbody",[],null,null,null,null,null)),(l()(),t.hb(16777216,null,null,1,null,ur)),t.pb(8,278528,null,0,p.j,[t.P,t.M,t.t],{ngForOf:[0,"ngForOf"],ngForTrackBy:[1,"ngForTrackBy"]},null)],function(l,n){var u=n.component;l(n,8,0,u.tableFields,u.trackField)},null)}function er(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,1,"div",[["class","column col-md-8 col-xs-11 col-mx-auto show-md mt-2"]],null,null,null,null,null)),(l()(),t.qb(1,0,null,null,0,"img",[["class","img-responsive s-rounded"]],[[8,"src",4],[8,"alt",0]],null,null,null,null))],null,function(l,n){var u=n.component;l(n,1,0,t.sb(1,"https://res.cloudinary.com/dqhk8k6iv/image/upload/w_500,q_auto:good,f_auto/",u.concept.imageId,""),"picture of"+u.concept.name)})}function ir(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,17,"div",[["class","columns mt-2"]],null,null,null,null,null)),(l()(),t.hb(16777216,null,null,1,null,Xo)),t.pb(2,16384,null,0,p.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null),(l()(),t.qb(3,0,null,null,12,"div",[["class","column col-md-12"]],null,null,null,null,null)),t.pb(4,278528,null,0,p.i,[t.t,t.u,t.k,t.E],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),t.Db(5,{"col-8":0,"col-12":1}),(l()(),t.hb(16777216,null,null,1,null,Qo)),t.pb(7,16384,null,0,p.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null),(l()(),t.hb(16777216,null,null,1,null,Yo)),t.pb(9,16384,null,0,p.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null),(l()(),t.hb(16777216,null,null,1,null,Wo)),t.pb(11,278528,null,0,p.j,[t.P,t.M,t.t],{ngForOf:[0,"ngForOf"]},null),(l()(),t.hb(16777216,null,null,1,null,Jo)),t.pb(13,16384,null,0,p.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null),(l()(),t.hb(16777216,null,null,1,null,tr)),t.pb(15,16384,null,0,p.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null),(l()(),t.hb(16777216,null,null,1,null,er)),t.pb(17,16384,null,0,p.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null)],function(l,n){var u=n.component;l(n,2,0,u.concept.imageId);var t=l(n,5,0,null!==u.concept.imageId,null===u.concept.imageId);l(n,4,0,"column col-md-12",t),l(n,7,0,u.concept.content),l(n,9,0,!u.concept.content),l(n,11,0,u.formattedTextFields),l(n,13,0,u.concept.tags),l(n,15,0,u.tableFields.length>0),l(n,17,0,u.concept.imageId)},null)}function or(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,8,"div",[["class","container grid-xl"]],null,null,null,null,null)),(l()(),t.hb(16777216,null,null,1,null,Vo)),t.pb(2,16384,null,0,p.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null),(l()(),t.qb(3,0,null,null,1,"dd-http-errors",[],null,null,null,oo.b,oo.a)),t.pb(4,114688,null,0,ro.a,[],{error:[0,"error"]},null),(l()(),t.hb(16777216,null,null,1,null,zo)),t.pb(6,16384,null,0,p.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null),(l()(),t.hb(16777216,null,null,1,null,ir)),t.pb(8,16384,null,0,p.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null)],function(l,n){var u=n.component;l(n,2,0,u.loading),l(n,4,0,u.loadError),l(n,6,0,u.concept),l(n,8,0,u.concept)},null)}function rr(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,1,"dd-concept-view",[],null,null,null,or,Ro)),t.pb(1,114688,null,0,Uo,[r.a,r.k,f.b,zt.a],null,null)],function(l,n){l(n,1,0)},null)}var ar=t.mb("dd-concept-view",Uo,rr,{},{},[]),cr=function(l){return l[l.CREATE=0]="CREATE",l[l.UPDATE=1]="UPDATE",l[l.DELETE=2]="DELETE",l[l.RESTORE=3]="RESTORE",l}({}),sr=u("bo1M"),pr=function(){return(pr=Object.assign||function(l){for(var n,u=1,t=arguments.length;u<t;u++)for(var e in n=arguments[u])Object.prototype.hasOwnProperty.call(n,e)&&(l[e]=n[e]);return l}).apply(this,arguments)},br=function(l,n,u,t){return new(u||(u=Promise))(function(e,i){function o(l){try{a(t.next(l))}catch(n){i(n)}}function r(l){try{a(t.throw(l))}catch(n){i(n)}}function a(l){l.done?e(l.value):new u(function(n){n(l.value)}).then(o,r)}a((t=t.apply(l,n||[])).next())})},dr=function(l,n){var u,t,e,i,o={label:0,sent:function(){if(1&e[0])throw e[1];return e[1]},trys:[],ops:[]};return i={next:r(0),throw:r(1),return:r(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function r(i){return function(r){return function(i){if(u)throw new TypeError("Generator is already executing.");for(;o;)try{if(u=1,t&&(e=2&i[0]?t.return:i[0]?t.throw||((e=t.return)&&e.call(t),0):t.next)&&!(e=e.call(t,i[1])).done)return e;switch(t=0,e&&(i=[2&i[0],e.value]),i[0]){case 0:case 1:e=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,t=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!(e=(e=o.trys).length>0&&e[e.length-1])&&(6===i[0]||2===i[0])){o=0;continue}if(3===i[0]&&(!e||i[1]>e[0]&&i[1]<e[3])){o.label=i[1];break}if(6===i[0]&&o.label<e[1]){o.label=e[1],e=i;break}if(e&&o.label<e[2]){o.label=e[2],o.ops.push(i);break}e[2]&&o.ops.pop(),o.trys.pop();continue}i=n.call(l,o)}catch(r){i=[6,r],t=0}finally{u=e=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,r])}}},fr=function(){function l(l,n,u,t){this.conceptService=l,this.campaignService=n,this.router=u,this.route=t,this.loading=!1}return l.prototype.ngOnInit=function(){var l=this;this.route.paramMap.subscribe(function(n){var u=n.get("c_id");n.get("ct_id"),l.load(u)})},l.prototype.load=function(l){return br(this,void 0,void 0,function(){var n,u;return dr(this,function(t){switch(t.label){case 0:this.loading=!0,t.label=1;case 1:return t.trys.push([1,3,,4]),n=this,[4,this.conceptService.getConceptHistory(l)];case 2:return n.conceptHistory=t.sent(),this.diffedHistory=this.makeDiffedHistory(this.conceptHistory),console.log(this.diffedHistory),[3,4];case 3:return u=t.sent(),this.loadErr=u,[3,4];case 4:return this.loading=!1,[2]}})})},l.prototype.prefilterHistory=function(l,n){return-1!==["id","userId","dateTime","actionType","actionSource","conceptId","conceptTypeId"].indexOf(n)},l.prototype.makeDiffedHistory=function(l){for(var n=[],u=0;u<l.length;u++)if(0!==u){var t=sr.diff(l[u-1],l[u],this.prefilterHistory);n.push(pr({},l[u],{diff:t}))}else n.push(pr({},l[u],{diff:null}));return n},l.prototype.restore=function(l){return br(this,void 0,void 0,function(){return dr(this,function(n){switch(n.label){case 0:this.restoringId=l.id,n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.conceptService.restoreConcept(l.conceptId,l.id)];case 2:return n.sent(),this.load(l.conceptId),[3,4];case 3:throw n.sent();case 4:return this.restoringId=null,[2]}})})},l.prototype.getUser=function(l){var n=this.campaignService.campaign.members.find(function(n){return n.userId===l});return n?n.user:null},l.prototype.getDate=function(l){return new Date(l.dateTime)},l.prototype.getEntryActionText=function(l){switch(l.actionType){case cr.CREATE:return"created";case cr.DELETE:return"deleted";case cr.UPDATE:return"updated";case cr.RESTORE:return"restored"}},Object.defineProperty(l.prototype,"editable",{get:function(){return this.campaignService.canEdit},enumerable:!0,configurable:!0}),l}(),hr=t.ob({encapsulation:0,styles:[[""]],data:{}});function gr(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,0,"div",[["class","loading loading-lg"]],null,null,null,null,null))],null,null)}function mr(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,1,"dd-http-errors",[],null,null,null,oo.b,oo.a)),t.pb(1,114688,null,0,ro.a,[],{error:[0,"error"]},null)],function(l,n){l(n,1,0,n.component.loadErr)},null)}function vr(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,0,"i",[["class","icon icon-edit"]],null,null,null,null,null))],null,null)}function yr(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,0,"i",[["class","icon icon-delete"]],null,null,null,null,null))],null,null)}function Cr(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,0,"i",[["class","icon icon-refresh"]],null,null,null,null,null))],null,null)}function Ir(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,5,"button",[["class","btn btn-sm"]],null,[[null,"click"]],function(l,n,u){var t=!0,e=l.component;return"click"===n&&(t=!1!==e.restore(l.parent.context.$implicit)&&t),t},null,null)),t.pb(1,278528,null,0,p.i,[t.t,t.u,t.k,t.E],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),t.Db(2,{loading:0}),(l()(),t.qb(3,0,null,null,0,"i",[["class","icon icon-refresh"]],null,null,null,null,null)),(l()(),t.qb(4,0,null,null,1,"span",[["class","hide-sm"]],null,null,null,null,null)),(l()(),t.Ib(-1,null,[" Restore"]))],function(l,n){var u=l(n,2,0,n.component.restoringId===n.parent.context.$implicit.id);l(n,1,0,"btn btn-sm",u)},null)}function qr(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,25,"div",[["class","timeline-item"]],null,null,null,null,null)),(l()(),t.qb(1,0,null,null,10,"div",[["class","timeline-left"]],null,null,null,null,null)),(l()(),t.qb(2,0,null,null,9,"a",[["class","timeline-icon"]],null,null,null,null,null)),t.pb(3,278528,null,0,p.i,[t.t,t.u,t.k,t.E],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),t.Db(4,{"icon-lg":0}),t.pb(5,16384,null,0,p.n,[],{ngSwitch:[0,"ngSwitch"]},null),(l()(),t.hb(16777216,null,null,1,null,vr)),t.pb(7,278528,null,0,p.o,[t.P,t.M,p.n],{ngSwitchCase:[0,"ngSwitchCase"]},null),(l()(),t.hb(16777216,null,null,1,null,yr)),t.pb(9,278528,null,0,p.o,[t.P,t.M,p.n],{ngSwitchCase:[0,"ngSwitchCase"]},null),(l()(),t.hb(16777216,null,null,1,null,Cr)),t.pb(11,278528,null,0,p.o,[t.P,t.M,p.n],{ngSwitchCase:[0,"ngSwitchCase"]},null),(l()(),t.qb(12,0,null,null,13,"div",[["class","timeline-content"]],null,null,null,null,null)),(l()(),t.qb(13,0,null,null,12,"div",[["class","tile"]],null,null,null,null,null)),(l()(),t.qb(14,0,null,null,8,"div",[["class","tile-content"]],null,null,null,null,null)),(l()(),t.qb(15,0,null,null,1,"strong",[],null,null,null,null,null)),(l()(),t.Ib(16,null,["",""])),(l()(),t.Ib(17,null,[" ",". "])),(l()(),t.qb(18,0,null,null,2,"div",[],null,null,null,null,null)),(l()(),t.Ib(19,null,["",""])),t.Eb(20,2),(l()(),t.qb(21,0,null,null,1,"div",[],[[8,"innerHTML",1]],null,null,null,null)),t.pb(22,16384,null,0,Q.a,[Y.c],{user:[0,"user"]},null),(l()(),t.qb(23,0,null,null,2,"div",[["class","tile-action"]],null,null,null,null,null)),(l()(),t.hb(16777216,null,null,1,null,Ir)),t.pb(25,16384,null,0,p.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null)],function(l,n){var u=n.component,t=l(n,4,0,!n.context.first);l(n,3,0,"timeline-icon",t),l(n,5,0,n.context.$implicit.actionType),l(n,7,0,1),l(n,9,0,2),l(n,11,0,3),l(n,22,0,u.getUser(n.context.$implicit.userId)),l(n,25,0,!n.context.last&&u.editable)},function(l,n){var u=n.component;l(n,16,0,n.context.$implicit.name),l(n,17,0,1===n.context.$implicit.actionSource?"imported":u.getEntryActionText(n.context.$implicit));var e=t.Jb(n,19,0,l(n,20,0,t.Ab(n.parent.parent,0),u.getDate(n.context.$implicit),"short"));l(n,19,0,e),l(n,21,0,t.Ab(n,22).html)})}function kr(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,2,"div",[["class","timeline"]],null,null,null,null,null)),(l()(),t.hb(16777216,null,null,1,null,qr)),t.pb(2,278528,null,0,p.j,[t.P,t.M,t.t],{ngForOf:[0,"ngForOf"]},null)],function(l,n){l(n,2,0,n.component.diffedHistory)},null)}function Ar(l){return t.Kb(0,[t.Cb(0,p.d,[t.v]),(l()(),t.qb(1,0,null,null,6,"div",[["class","container grid-sm"]],null,null,null,null,null)),(l()(),t.hb(16777216,null,null,1,null,gr)),t.pb(3,16384,null,0,p.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null),(l()(),t.hb(16777216,null,null,1,null,mr)),t.pb(5,16384,null,0,p.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null),(l()(),t.hb(16777216,null,null,1,null,kr)),t.pb(7,16384,null,0,p.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null)],function(l,n){var u=n.component;l(n,3,0,u.loading),l(n,5,0,u.loadErr),l(n,7,0,u.diffedHistory)},null)}function wr(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,1,"dd-concept-history",[],null,null,null,Ar,hr)),t.pb(1,114688,null,0,fr,[zt.a,f.b,r.k,r.a],null,null)],function(l,n){l(n,1,0)},null)}var Pr=t.mb("dd-concept-history",fr,wr,{},{},[]),xr=function(){function l(){}return l.prototype.ngOnInit=function(){},l.prototype.close=function(){return l=this,void 0,u=function(){return function(l,n){var u,t,e,i,o={label:0,sent:function(){if(1&e[0])throw e[1];return e[1]},trys:[],ops:[]};return i={next:r(0),throw:r(1),return:r(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function r(i){return function(r){return function(i){if(u)throw new TypeError("Generator is already executing.");for(;o;)try{if(u=1,t&&(e=2&i[0]?t.return:i[0]?t.throw||((e=t.return)&&e.call(t),0):t.next)&&!(e=e.call(t,i[1])).done)return e;switch(t=0,e&&(i=[2&i[0],e.value]),i[0]){case 0:case 1:e=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,t=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!(e=(e=o.trys).length>0&&e[e.length-1])&&(6===i[0]||2===i[0])){o=0;continue}if(3===i[0]&&(!e||i[1]>e[0]&&i[1]<e[3])){o.label=i[1];break}if(6===i[0]&&o.label<e[1]){o.label=e[1],e=i;break}if(e&&o.label<e[2]){o.label=e[2],o.ops.push(i);break}e[2]&&o.ops.pop(),o.trys.pop();continue}i=n.call(l,o)}catch(r){i=[6,r],t=0}finally{u=e=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,r])}}}(this,function(l){return[2,this.modal.close(!1)]})},new((n=void 0)||(n=Promise))(function(t,e){function i(l){try{r(u.next(l))}catch(n){e(n)}}function o(l){try{r(u.throw(l))}catch(n){e(n)}}function r(l){l.done?t(l.value):new n(function(n){n(l.value)}).then(i,o)}r((u=u.apply(l,[])).next())});var l,n,u},l.prototype.confirm=function(){return this.modal.close(!0)},l.prototype.deny=function(){return this.modal.close(!1)},l.prototype.getConfirmation=function(l,n){return void 0===l&&(l="Are you sure?"),void 0===n&&(n="Confirm"),this.title=n,this.question=l,this.modal.open()},l}(),Er=t.ob({encapsulation:0,styles:[[""]],data:{}});function Tr(l){return t.Kb(0,[t.Gb(402653184,1,{modal:0}),(l()(),t.qb(1,0,null,null,11,"dd-modal",[["size","small"]],null,null,null,fl.b,fl.a)),t.pb(2,114688,[[1,4],["modal",4]],0,hl.a,[],{size:[0,"size"]},null),(l()(),t.qb(3,0,null,0,2,"div",[["modal-header",""]],null,null,null,null,null)),(l()(),t.qb(4,0,null,null,1,"h5",[["class","modal-title h5"]],null,null,null,null,null)),(l()(),t.Ib(5,null,["",""])),(l()(),t.qb(6,0,null,1,1,"div",[["modal-body",""]],null,null,null,null,null)),(l()(),t.Ib(7,null,["",""])),(l()(),t.qb(8,0,null,2,4,"div",[["modal-footer",""]],null,null,null,null,null)),(l()(),t.qb(9,0,null,null,1,"button",[["class","btn mr-2"]],null,[[null,"click"]],function(l,n,u){var t=!0,e=l.component;return"click"===n&&(t=!1!==e.confirm()&&t),t},null,null)),(l()(),t.Ib(-1,null,["Yes"])),(l()(),t.qb(11,0,null,null,1,"button",[["class","btn btn-primary"]],null,[[null,"click"]],function(l,n,u){var t=!0,e=l.component;return"click"===n&&(t=!1!==e.deny()&&t),t},null,null)),(l()(),t.Ib(-1,null,["No"]))],function(l,n){l(n,2,0,"small")},function(l,n){var u=n.component;l(n,5,0,u.title),l(n,7,0,u.question)})}var Sr=[{name:"AC",description:"Armor Class",type:pt.a.INT,class:ct.a.MAJOR,options:{required:!0}},{name:"Init",description:"Initiative",type:pt.a.INT,class:ct.a.MAJOR,options:{required:!0}},{name:"Speed",description:"Speed",type:pt.a.STRING,class:ct.a.MAJOR,options:{required:!0}},{name:"Class",description:"Class",type:pt.a.ENUM_MULTI,class:ct.a.NORMAL,options:{required:!0,choices:["Barbarian","Bard","Cleric","Druid","Fighter","Paladin","Ranger","Rogue","Sorcerer","Warlock","Wizard"]}},{name:"Strength",description:"Strength",type:pt.a.INT,class:ct.a.NORMAL,options:{required:!0}},{name:"Strength Mod",description:"Strength Modifier",type:pt.a.STRING,class:ct.a.NORMAL,options:{required:!1,modifierFor:"Strength"}},{name:"Dexterity",description:"Dexterity",type:pt.a.INT,class:ct.a.NORMAL,options:{required:!0}},{name:"Dex Mod",description:"Dexterity Modifier",type:pt.a.STRING,class:ct.a.NORMAL,options:{required:!1,modifierFor:"Dexterity"}},{name:"Constitution",description:"Constitution",type:pt.a.INT,class:ct.a.NORMAL,options:{required:!0}},{name:"Con Mod",description:"Constitution Modifier",type:pt.a.STRING,class:ct.a.NORMAL,options:{required:!1,modifierFor:"Constitution"}},{name:"Intelligence",description:"Intelligence",type:pt.a.INT,class:ct.a.NORMAL,options:{required:!0}},{name:"Int Mod",description:"Intelligence Modifier",type:pt.a.STRING,class:ct.a.NORMAL,options:{required:!1,modifierFor:"Intelligence"}},{name:"Wisdom",description:"Wisdom",type:pt.a.INT,class:ct.a.NORMAL,options:{required:!0}},{name:"Wis Mod",description:"Wisdom Modifier",type:pt.a.STRING,class:ct.a.NORMAL,options:{required:!1,modifierFor:"Wisdom"}},{name:"Charisma",description:"Charisma",type:pt.a.INT,class:ct.a.NORMAL,options:{required:!0}},{name:"Cha Mod",description:"Charisma Modifier",type:pt.a.STRING,class:ct.a.NORMAL,options:{required:!1,modifierFor:"Charisma"}},{name:"Acrobatics",description:"Acrobatics",type:pt.a.INT,class:ct.a.MINOR,options:{required:!1}},{name:"Animal Handling",description:"Animal Handling",type:pt.a.INT,class:ct.a.MINOR,options:{required:!1}},{name:"Arcana",description:"Arcana",type:pt.a.INT,class:ct.a.MINOR,options:{required:!1}},{name:"Athletics",description:"Athletics",type:pt.a.INT,class:ct.a.MINOR,options:{required:!1}},{name:"Deception",description:"Deception",type:pt.a.INT,class:ct.a.MINOR,options:{required:!1}},{name:"History",description:"History",type:pt.a.INT,class:ct.a.MINOR,options:{required:!1}},{name:"Insight",description:"Insight",type:pt.a.INT,class:ct.a.MINOR,options:{required:!1}},{name:"Intimidation",description:"Intimidation",type:pt.a.INT,class:ct.a.MINOR,options:{required:!1}},{name:"Investigation",description:"Investigation",type:pt.a.INT,class:ct.a.MINOR,options:{required:!1}},{name:"Medicine",description:"Medicine",type:pt.a.INT,class:ct.a.MINOR,options:{required:!1}},{name:"Nature",description:"Nature",type:pt.a.INT,class:ct.a.MINOR,options:{required:!1}},{name:"Perception",description:"Perception",type:pt.a.INT,class:ct.a.MINOR,options:{required:!1}},{name:"Performance",description:"Performance",type:pt.a.INT,class:ct.a.MINOR,options:{required:!1}},{name:"Persuasion",description:"Persuasion",type:pt.a.INT,class:ct.a.MINOR,options:{required:!1}},{name:"Religion",description:"Religion",type:pt.a.INT,class:ct.a.MINOR,options:{required:!1}},{name:"Sleight of Hand",description:"Sleight of Hand",type:pt.a.INT,class:ct.a.MINOR,options:{required:!1}},{name:"Stealth",description:"Stealth",type:pt.a.INT,class:ct.a.MINOR,options:{required:!1}},{name:"Survival",description:"Survival",type:pt.a.INT,class:ct.a.MINOR,options:{required:!1}},{name:"Alignment",description:"Alignment",type:pt.a.STRING,class:ct.a.MINOR,options:{required:!1}},{name:"Race",description:"Race",type:pt.a.ENUM,class:ct.a.MINOR,options:{required:!1,choices:["Dragonborn","Dwarf","Eladrin","Elf","Gnome","Half-elf","Half-orc","Halfling","Human","Tiefling"]}},{name:"Age",description:"Age",type:pt.a.INT,class:ct.a.MINOR,options:{required:!1}},{name:"Height",description:"Height",type:pt.a.STRING,class:ct.a.MINOR,options:{required:!1}},{name:"Weight",description:"Weight",type:pt.a.STRING,class:ct.a.MINOR,options:{required:!1}},{name:"Eyes",description:"Eyes",type:pt.a.STRING,class:ct.a.MINOR,options:{required:!1}},{name:"Skin",description:"Skin",type:pt.a.STRING,class:ct.a.MINOR,options:{required:!1}},{name:"Hair",description:"Hair",type:pt.a.STRING,class:ct.a.MINOR,options:{required:!1}},{name:"Allies & Orgs",description:"Allies & Organizations",type:pt.a.TEXT_FORMATTED,class:ct.a.MINOR,options:{required:!1}},{name:"Features & Traits",description:"Features & Traits",type:pt.a.TEXT_FORMATTED,class:ct.a.MINOR,options:{required:!1}},{name:"Backstory",description:"Backstory",type:pt.a.TEXT_FORMATTED,class:ct.a.MINOR,options:{required:!1}}],Or=function(){function l(){}return l.prototype.getPresets=function(){return l=this,void 0,u=function(){return function(l,n){var u,t,e,i,o={label:0,sent:function(){if(1&e[0])throw e[1];return e[1]},trys:[],ops:[]};return i={next:r(0),throw:r(1),return:r(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function r(i){return function(r){return function(i){if(u)throw new TypeError("Generator is already executing.");for(;o;)try{if(u=1,t&&(e=2&i[0]?t.return:i[0]?t.throw||((e=t.return)&&e.call(t),0):t.next)&&!(e=e.call(t,i[1])).done)return e;switch(t=0,e&&(i=[2&i[0],e.value]),i[0]){case 0:case 1:e=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,t=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!(e=(e=o.trys).length>0&&e[e.length-1])&&(6===i[0]||2===i[0])){o=0;continue}if(3===i[0]&&(!e||i[1]>e[0]&&i[1]<e[3])){o.label=i[1];break}if(6===i[0]&&o.label<e[1]){o.label=e[1],e=i;break}if(e&&o.label<e[2]){o.label=e[2],o.ops.push(i);break}e[2]&&o.ops.pop(),o.trys.pop();continue}i=n.call(l,o)}catch(r){i=[6,r],t=0}finally{u=e=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,r])}}}(this,function(l){return[2,[{name:"DnD 5e",description:"Attributes from the 5th edition of DnD",fields:Sr}]]})},new((n=void 0)||(n=Promise))(function(t,e){function i(l){try{r(u.next(l))}catch(n){e(n)}}function o(l){try{r(u.throw(l))}catch(n){e(n)}}function r(l){l.done?t(l.value):new n(function(n){n(l.value)}).then(i,o)}r((u=u.apply(l,[])).next())});var l,n,u},l.ngInjectableDef=t.T({factory:function(){return new l},token:l,providedIn:"root"}),l}(),Mr=function(){return(Mr=Object.assign||function(l){for(var n,u=1,t=arguments.length;u<t;u++)for(var e in n=arguments[u])Object.prototype.hasOwnProperty.call(n,e)&&(l[e]=n[e]);return l}).apply(this,arguments)},_r=function(l,n,u,t){return new(u||(u=Promise))(function(e,i){function o(l){try{a(t.next(l))}catch(n){i(n)}}function r(l){try{a(t.throw(l))}catch(n){i(n)}}function a(l){l.done?e(l.value):new u(function(n){n(l.value)}).then(o,r)}a((t=t.apply(l,n||[])).next())})},Dr=function(l,n){var u,t,e,i,o={label:0,sent:function(){if(1&e[0])throw e[1];return e[1]},trys:[],ops:[]};return i={next:r(0),throw:r(1),return:r(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function r(i){return function(r){return function(i){if(u)throw new TypeError("Generator is already executing.");for(;o;)try{if(u=1,t&&(e=2&i[0]?t.return:i[0]?t.throw||((e=t.return)&&e.call(t),0):t.next)&&!(e=e.call(t,i[1])).done)return e;switch(t=0,e&&(i=[2&i[0],e.value]),i[0]){case 0:case 1:e=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,t=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!(e=(e=o.trys).length>0&&e[e.length-1])&&(6===i[0]||2===i[0])){o=0;continue}if(3===i[0]&&(!e||i[1]>e[0]&&i[1]<e[3])){o.label=i[1];break}if(6===i[0]&&o.label<e[1]){o.label=e[1],e=i;break}if(e&&o.label<e[2]){o.label=e[2],o.ops.push(i);break}e[2]&&o.ops.pop(),o.trys.pop();continue}i=n.call(l,o)}catch(r){i=[6,r],t=0}finally{u=e=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,r])}}},Nr=function(){function l(l,n,u,t,e,i){this.entityService=l,this.campaignService=n,this.presets=u,this.login=t,this.router=e,this.route=i,this.saving=!1,this.deleting=!1,this.loading=!1}return l.prototype.ngOnInit=function(){var l=this;this.formGroup=new R.k({id:new R.h,name:new R.h(null,[R.x.required,R.x.minLength(3),R.x.maxLength(30)]),description:new R.h(null,[R.x.required,R.x.minLength(3)]),health:new R.k({type:new R.h("0"),colorType:new R.h("0"),staticColor:new R.h(null),amountHidden:new R.h(!1)}),playerCreatable:new R.h(!1),spawnable:new R.h(!1),isCurrencyEnabled:new R.h(!1),isXPEnabled:new R.h(!1),isHealthEnabled:new R.h(!1),conceptTypesEnabled:new R.h([]),imageId:new R.h(null,R.x.required),attributes:new R.e([]),fields:new R.e([])}),this.route.params.subscribe(function(n){n.ent_id&&l.loadEntityPreset(n.ent_id)}),this.presets.getPresets().then(function(n){return l.presetList=n})},l.prototype.canDeactivate=function(){return!this.formGroup.dirty},l.prototype.loadEntityPreset=function(l){return _r(this,void 0,void 0,function(){var n,u=this;return Dr(this,function(t){switch(t.label){case 0:this.loading=!0,this.formGroup.disable(),t.label=1;case 1:return t.trys.push([1,3,,4]),[4,this.entityService.getEntityPreset(l)];case 2:return n=t.sent(),this.entityPreset=n,setTimeout(function(){(n.fields||[]).forEach(function(l){var n=_i.createFormGroup(l);n.addControl("class",new R.h(0)),u.fields.push(n)}),u.formGroup.patchValue(Mr({},n,{fields:n.fields||[]}),{emitEvent:!1})},1),[3,4];case 3:throw t.sent();case 4:return this.loading=!1,this.formGroup.enable(),[2]}})})},l.prototype.constructEntityPreset=function(){var l=this.formGroup.value;l.health||(l.health={});var n={userId:this.login.id,campaignId:this.campaignService.campaign.id,name:l.name,description:l.description,health:{type:l.health.type,colorType:l.health.colorType,staticColor:l.health.staticColor,amountHidden:l.health.amountHidden},fields:l.fields,imageId:l.imageId,isCurrencyEnabled:l.isCurrencyEnabled,isXPEnabled:l.isXPEnabled,isHealthEnabled:l.isHealthEnabled,conceptTypesEnabled:l.conceptTypesEnabled,playerCreatable:l.playerCreatable};return this.editing&&(n.id=this.entityPreset.id,n.userId=this.entityPreset.userId,n.campaignId=this.entityPreset.campaignId),n},l.prototype.usePreset=function(l){var n=this;this.fields.reset(),setTimeout(function(){l.fields.forEach(function(l){var u=_i.createFormGroup(l);u.addControl("class",new R.h(l.class)),n.fields.push(u)}),n.presetsModal.close()},1)},l.prototype.removeAttribute=function(l){this.formGroup.get("attributes").removeAt(l)},l.prototype.save=function(){return _r(this,void 0,void 0,function(){var l;return Dr(this,function(n){switch(n.label){case 0:if(this.formGroup.invalid)return[2];l=this.constructEntityPreset(),this.formGroup.disable(),this.saving=!0,n.label=1;case 1:return n.trys.push([1,7,,8]),this.editing?[4,this.entityService.updateEntityPreset(l)]:[3,3];case 2:return n.sent(),[3,5];case 3:return[4,this.entityService.createEntityPreset(l)];case 4:n.sent(),n.label=5;case 5:return[4,this.router.navigate(["campaigns",this.campaignService.campaign.id,"settings"],{queryParams:{refresh:!0}})];case 6:return n.sent(),[3,8];case 7:throw n.sent();case 8:return this.formGroup.enable(),this.formGroup.markAsPristine(),this.saving=!1,[2]}})})},l.prototype.delete=function(){return _r(this,void 0,void 0,function(){return Dr(this,function(l){switch(l.label){case 0:return[4,this.confirmModal.getConfirmation("Are you sure you want to delete this entity? This cannot be undone")];case 1:if(!l.sent())return[3,7];this.deleting=!0,this.formGroup.disable(),l.label=2;case 2:return l.trys.push([2,5,,6]),[4,this.entityService.deleteEntityPreset(this.campaignService.campaign.id,"1")];case 3:return l.sent(),[4,this.router.navigate(["campaigns",this.campaignService.campaign.id,"settings"])];case 4:return l.sent(),[3,6];case 5:throw l.sent();case 6:this.formGroup.enable(),this.deleting=!1,l.label=7;case 7:return[2]}})})},l.prototype.addField=function(){this.fields.push(_i.createFormGroup(null))},l.prototype.backToTop=function(){document.getElementById("app-content").scrollTo(0,0)},l.prototype.removeField=function(l){this.fields.removeAt(l),this.formGroup.markAsDirty()},l.prototype.drop=function(l){var n=this.fields.at(l.previousIndex);this.fields.removeAt(l.previousIndex),this.fields.insert(l.currentIndex,n)},Object.defineProperty(l.prototype,"attributeControls",{get:function(){return this.formGroup.get("attributes").controls},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"name",{get:function(){return this.formGroup.get("name")},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"description",{get:function(){return this.formGroup.get("description")},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"isHealthEnabled",{get:function(){return this.formGroup.get("isHealthEnabled")},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"hpColorType",{get:function(){return this.formGroup.get("health.colorType")},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"hpType",{get:function(){return this.formGroup.get("health.type")},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"conceptTypeList",{get:function(){return this.campaignService.campaign.conceptTypes.filter(function(l){return!0===l.entityConfig.enabled})},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"fields",{get:function(){return this.formGroup.get("fields")},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"otherFieldNames",{get:function(){return this.fields.value.map(function(l){return l.name})},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"editing",{get:function(){return this.route.snapshot.data.editing},enumerable:!0,configurable:!0}),l}(),Lr=t.ob({encapsulation:0,styles:[[""]],data:{}});function Fr(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,3,"div",[["class","card p-1 mb-1 hoverable"]],null,[[null,"click"]],function(l,n,u){var t=!0,e=l.component;return"click"===n&&(t=!1!==e.usePreset(l.context.$implicit)&&t),t},null,null)),(l()(),t.Ib(1,null,[" "," "])),(l()(),t.qb(2,0,null,null,1,"span",[["class","text-gray"]],null,null,null,null,null)),(l()(),t.Ib(3,null,["",""]))],null,function(l,n){l(n,1,0,n.context.$implicit.name),l(n,3,0,n.context.$implicit.description)})}function Kr(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,1,"h3",[],null,null,null,null,null)),(l()(),t.Ib(-1,null,["Create Entity Preset"]))],null,null)}function jr(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,1,"h3",[],null,null,null,null,null)),(l()(),t.Ib(-1,null,["Edit Entity Preset"]))],null,null)}function Gr(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,3,"button",[["class","btn btn-error mr-2"]],null,[[null,"click"]],function(l,n,u){var t=!0,e=l.component;return"click"===n&&(t=!1!==e.delete()&&t),t},null,null)),t.pb(1,278528,null,0,p.i,[t.t,t.u,t.k,t.E],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),t.Db(2,{loading:0}),(l()(),t.Ib(-1,null,[" Delete "]))],function(l,n){var u=l(n,2,0,n.component.deleting);l(n,1,0,"btn btn-error mr-2",u)},null)}function Ur(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,1,"p",[["class","form-input-hint"]],null,null,null,null,null)),(l()(),t.Ib(-1,null,[" A name is required "]))],null,null)}function Rr(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,1,"p",[["class","form-input-hint"]],null,null,null,null,null)),(l()(),t.Ib(-1,null,[" Name should not have less than 3 characters "]))],null,null)}function Vr(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,1,"p",[["class","form-input-hint"]],null,null,null,null,null)),(l()(),t.Ib(-1,null,[" Name should not have more than 30 characters "]))],null,null)}function Hr(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,1,"p",[["class","form-input-hint"]],null,null,null,null,null)),(l()(),t.Ib(-1,null,[" A description is required "]))],null,null)}function $r(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,1,"p",[["class","form-input-hint"]],null,null,null,null,null)),(l()(),t.Ib(-1,null,[" The description should not have less than 3 characters "]))],null,null)}function Br(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,3,"option",[],null,null,null,null,null)),t.pb(1,147456,null,0,R.t,[t.k,t.E,[8,null]],{value:[0,"value"]},null),t.pb(2,147456,null,0,R.E,[t.k,t.E,[2,R.w]],{value:[0,"value"]},null),(l()(),t.Ib(3,null,["",""]))],function(l,n){l(n,1,0,n.context.$implicit.id),l(n,2,0,n.context.$implicit.id)},function(l,n){l(n,3,0,n.context.$implicit.name)})}function zr(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,9,"div",[["class","column"]],[[8,"hidden",0]],null,null,null,null)),(l()(),t.qb(1,0,null,null,8,"div",[["class","form-group"]],null,null,null,null,null)),(l()(),t.qb(2,0,null,null,1,"label",[["class","form-label"],["for","bar-color"]],null,null,null,null,null)),(l()(),t.Ib(-1,null,["Bar Color"])),(l()(),t.qb(4,0,null,null,5,"input",[["class","form-input"],["formControlName","staticColor"],["id","bar-color"],["name","bar-color"],["type","color"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(l,n,u){var e=!0;return"input"===n&&(e=!1!==t.Ab(l,5)._handleInput(u.target.value)&&e),"blur"===n&&(e=!1!==t.Ab(l,5).onTouched()&&e),"compositionstart"===n&&(e=!1!==t.Ab(l,5)._compositionStart()&&e),"compositionend"===n&&(e=!1!==t.Ab(l,5)._compositionEnd(u.target.value)&&e),e},null,null)),t.pb(5,16384,null,0,R.d,[t.E,t.k,[2,R.a]],null,null),t.Fb(1024,null,R.o,function(l){return[l]},[R.d]),t.pb(7,671744,null,0,R.j,[[3,R.c],[8,null],[8,null],[6,R.o],[2,R.D]],{name:[0,"name"]},null),t.Fb(2048,null,R.p,null,[R.j]),t.pb(9,16384,null,0,R.q,[[4,R.p]],null,null)],function(l,n){l(n,7,0,"staticColor")},function(l,n){var u=n.component;l(n,0,0,"0"!==u.hpType.value&&0!==u.hpType.value),l(n,4,0,t.Ab(n,9).ngClassUntouched,t.Ab(n,9).ngClassTouched,t.Ab(n,9).ngClassPristine,t.Ab(n,9).ngClassDirty,t.Ab(n,9).ngClassValid,t.Ab(n,9).ngClassInvalid,t.Ab(n,9).ngClassPending)})}function Xr(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,54,"div",[["class","columns mb-2"],["formGroupName","health"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],null,null,null,null)),t.pb(1,212992,null,0,R.m,[[3,R.c],[8,null],[8,null]],{name:[0,"name"]},null),t.Fb(2048,null,R.c,null,[R.m]),t.pb(3,16384,null,0,R.r,[[4,R.c]],null,null),(l()(),t.qb(4,0,null,null,17,"div",[["class","column"]],null,null,null,null,null)),(l()(),t.qb(5,0,null,null,16,"div",[["class","form-group"]],null,null,null,null,null)),(l()(),t.qb(6,0,null,null,1,"label",[["class","form-label"],["for","health-type"]],null,null,null,null,null)),(l()(),t.Ib(-1,null,["Health Type"])),(l()(),t.qb(8,0,null,null,13,"select",[["class","form-input"],["formControlName","type"],["id","health-type"],["name","health-type"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"change"],[null,"blur"]],function(l,n,u){var e=!0;return"change"===n&&(e=!1!==t.Ab(l,9).onChange(u.target.value)&&e),"blur"===n&&(e=!1!==t.Ab(l,9).onTouched()&&e),e},null,null)),t.pb(9,16384,null,0,R.v,[t.E,t.k],null,null),t.Fb(1024,null,R.o,function(l){return[l]},[R.v]),t.pb(11,671744,null,0,R.j,[[3,R.c],[8,null],[8,null],[6,R.o],[2,R.D]],{name:[0,"name"]},null),t.Fb(2048,null,R.p,null,[R.j]),t.pb(13,16384,null,0,R.q,[[4,R.p]],null,null),(l()(),t.qb(14,0,null,null,3,"option",[["value","0"]],null,null,null,null,null)),t.pb(15,147456,null,0,R.t,[t.k,t.E,[2,R.v]],{value:[0,"value"]},null),t.pb(16,147456,null,0,R.E,[t.k,t.E,[8,null]],{value:[0,"value"]},null),(l()(),t.Ib(-1,null,["Normal"])),(l()(),t.qb(18,0,null,null,3,"option",[["value","1"]],null,null,null,null,null)),t.pb(19,147456,null,0,R.t,[t.k,t.E,[2,R.v]],{value:[0,"value"]},null),t.pb(20,147456,null,0,R.E,[t.k,t.E,[8,null]],{value:[0,"value"]},null),(l()(),t.Ib(-1,null,["Text Based"])),(l()(),t.qb(22,0,null,null,17,"div",[["class","column"]],[[8,"hidden",0]],null,null,null,null)),(l()(),t.qb(23,0,null,null,16,"div",[["class","form-group"]],null,null,null,null,null)),(l()(),t.qb(24,0,null,null,1,"label",[["class","form-label"],["for","bar-type"]],null,null,null,null,null)),(l()(),t.Ib(-1,null,["HP Bar Type"])),(l()(),t.qb(26,0,null,null,13,"select",[["class","form-input"],["formControlName","colorType"],["id","bar-type"],["name","bar-type"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"change"],[null,"blur"]],function(l,n,u){var e=!0;return"change"===n&&(e=!1!==t.Ab(l,27).onChange(u.target.value)&&e),"blur"===n&&(e=!1!==t.Ab(l,27).onTouched()&&e),e},null,null)),t.pb(27,16384,null,0,R.v,[t.E,t.k],null,null),t.Fb(1024,null,R.o,function(l){return[l]},[R.v]),t.pb(29,671744,null,0,R.j,[[3,R.c],[8,null],[8,null],[6,R.o],[2,R.D]],{name:[0,"name"]},null),t.Fb(2048,null,R.p,null,[R.j]),t.pb(31,16384,null,0,R.q,[[4,R.p]],null,null),(l()(),t.qb(32,0,null,null,3,"option",[["value","0"]],null,null,null,null,null)),t.pb(33,147456,null,0,R.t,[t.k,t.E,[2,R.v]],{value:[0,"value"]},null),t.pb(34,147456,null,0,R.E,[t.k,t.E,[8,null]],{value:[0,"value"]},null),(l()(),t.Ib(-1,null,["Dynamic"])),(l()(),t.qb(36,0,null,null,3,"option",[["value","1"]],null,null,null,null,null)),t.pb(37,147456,null,0,R.t,[t.k,t.E,[2,R.v]],{value:[0,"value"]},null),t.pb(38,147456,null,0,R.E,[t.k,t.E,[8,null]],{value:[0,"value"]},null),(l()(),t.Ib(-1,null,["Static"])),(l()(),t.hb(16777216,null,null,1,null,zr)),t.pb(41,16384,null,0,p.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null),(l()(),t.qb(42,0,null,null,12,"div",[["class","column"]],[[8,"hidden",0]],null,null,null,null)),(l()(),t.qb(43,0,null,null,11,"div",[["class","form-group"]],null,null,null,null,null)),(l()(),t.qb(44,0,null,null,1,"label",[["class","form-label"]],null,null,null,null,null)),(l()(),t.Ib(-1,null,["Visibility"])),(l()(),t.qb(46,0,null,null,8,"label",[["class","form-checkbox"]],null,null,null,null,null)),(l()(),t.qb(47,0,null,null,5,"input",[["formControlName","amountHidden"],["type","checkbox"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"change"],[null,"blur"]],function(l,n,u){var e=!0;return"change"===n&&(e=!1!==t.Ab(l,48).onChange(u.target.checked)&&e),"blur"===n&&(e=!1!==t.Ab(l,48).onTouched()&&e),e},null,null)),t.pb(48,16384,null,0,R.b,[t.E,t.k],null,null),t.Fb(1024,null,R.o,function(l){return[l]},[R.b]),t.pb(50,671744,null,0,R.j,[[3,R.c],[8,null],[8,null],[6,R.o],[2,R.D]],{name:[0,"name"]},null),t.Fb(2048,null,R.p,null,[R.j]),t.pb(52,16384,null,0,R.q,[[4,R.p]],null,null),(l()(),t.qb(53,0,null,null,0,"i",[["class","form-icon"]],null,null,null,null,null)),(l()(),t.Ib(-1,null,[" Hide amount for players "]))],function(l,n){var u=n.component;l(n,1,0,"health"),l(n,11,0,"type"),l(n,15,0,"0"),l(n,16,0,"0"),l(n,19,0,"1"),l(n,20,0,"1"),l(n,29,0,"colorType"),l(n,33,0,"0"),l(n,34,0,"0"),l(n,37,0,"1"),l(n,38,0,"1"),l(n,41,0,"1"===u.hpColorType.value||1===u.hpColorType.value),l(n,50,0,"amountHidden")},function(l,n){var u=n.component;l(n,0,0,t.Ab(n,3).ngClassUntouched,t.Ab(n,3).ngClassTouched,t.Ab(n,3).ngClassPristine,t.Ab(n,3).ngClassDirty,t.Ab(n,3).ngClassValid,t.Ab(n,3).ngClassInvalid,t.Ab(n,3).ngClassPending),l(n,8,0,t.Ab(n,13).ngClassUntouched,t.Ab(n,13).ngClassTouched,t.Ab(n,13).ngClassPristine,t.Ab(n,13).ngClassDirty,t.Ab(n,13).ngClassValid,t.Ab(n,13).ngClassInvalid,t.Ab(n,13).ngClassPending),l(n,22,0,"0"!==u.hpType.value&&0!==u.hpType.value),l(n,26,0,t.Ab(n,31).ngClassUntouched,t.Ab(n,31).ngClassTouched,t.Ab(n,31).ngClassPristine,t.Ab(n,31).ngClassDirty,t.Ab(n,31).ngClassValid,t.Ab(n,31).ngClassInvalid,t.Ab(n,31).ngClassPending),l(n,42,0,"0"!==u.hpType.value&&0!==u.hpType.value),l(n,47,0,t.Ab(n,52).ngClassUntouched,t.Ab(n,52).ngClassTouched,t.Ab(n,52).ngClassPristine,t.Ab(n,52).ngClassDirty,t.Ab(n,52).ngClassValid,t.Ab(n,52).ngClassInvalid,t.Ab(n,52).ngClassPending)})}function Qr(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,0,"div",[["class","drag-placeholder"]],null,null,null,null,null))],null,null)}function Yr(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,22,"div",[["class","column col-auto"]],null,null,null,null,null)),(l()(),t.qb(1,0,null,null,21,"select",[["class","form-input input-sm"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"change"],[null,"blur"]],function(l,n,u){var e=!0;return"change"===n&&(e=!1!==t.Ab(l,2).onChange(u.target.value)&&e),"blur"===n&&(e=!1!==t.Ab(l,2).onTouched()&&e),e},null,null)),t.pb(2,16384,null,0,R.v,[t.E,t.k],null,null),t.Fb(1024,null,R.o,function(l){return[l]},[R.v]),t.pb(4,540672,null,0,R.i,[[8,null],[8,null],[6,R.o],[2,R.D]],{form:[0,"form"]},null),t.Fb(2048,null,R.p,null,[R.i]),t.pb(6,16384,null,0,R.q,[[4,R.p]],null,null),(l()(),t.qb(7,0,null,null,3,"option",[["value","0"]],null,null,null,null,null)),t.pb(8,147456,null,0,R.t,[t.k,t.E,[2,R.v]],{value:[0,"value"]},null),t.pb(9,147456,null,0,R.E,[t.k,t.E,[8,null]],{value:[0,"value"]},null),(l()(),t.Ib(-1,null,["Major"])),(l()(),t.qb(11,0,null,null,3,"option",[["value","1"]],null,null,null,null,null)),t.pb(12,147456,null,0,R.t,[t.k,t.E,[2,R.v]],{value:[0,"value"]},null),t.pb(13,147456,null,0,R.E,[t.k,t.E,[8,null]],{value:[0,"value"]},null),(l()(),t.Ib(-1,null,["Normal"])),(l()(),t.qb(15,0,null,null,3,"option",[["value","2"]],null,null,null,null,null)),t.pb(16,147456,null,0,R.t,[t.k,t.E,[2,R.v]],{value:[0,"value"]},null),t.pb(17,147456,null,0,R.E,[t.k,t.E,[8,null]],{value:[0,"value"]},null),(l()(),t.Ib(-1,null,["Minor"])),(l()(),t.qb(19,0,null,null,3,"option",[["value","3"]],null,null,null,null,null)),t.pb(20,147456,null,0,R.t,[t.k,t.E,[2,R.v]],{value:[0,"value"]},null),t.pb(21,147456,null,0,R.E,[t.k,t.E,[8,null]],{value:[0,"value"]},null),(l()(),t.Ib(-1,null,["Unimportant"]))],function(l,n){var u=n.parent.context.$implicit.get("class");l(n,4,0,u),l(n,8,0,"0"),l(n,9,0,"0"),l(n,12,0,"1"),l(n,13,0,"1"),l(n,16,0,"2"),l(n,17,0,"2"),l(n,20,0,"3"),l(n,21,0,"3")},function(l,n){l(n,1,0,t.Ab(n,6).ngClassUntouched,t.Ab(n,6).ngClassTouched,t.Ab(n,6).ngClassPristine,t.Ab(n,6).ngClassDirty,t.Ab(n,6).ngClassValid,t.Ab(n,6).ngClassInvalid,t.Ab(n,6).ngClassPending)})}function Wr(l){return t.Kb(0,[(l()(),t.qb(0,16777216,null,null,26,"div",[["cdkDrag",""],["class","mt-2 cdk-drag"]],[[2,"cdk-drag-disabled",null],[2,"cdk-drag-dragging",null]],null,null,null,null)),t.pb(1,4866048,[[3,4]],3,un.c,[t.k,[3,un.b],p.c,t.A,t.P,tn.a,un.j,un.a,[2,en.a],un.h,t.h],null,null),t.Gb(603979776,4,{_handles:1}),t.Gb(335544320,5,{_previewTemplate:0}),t.Gb(335544320,6,{_placeholderTemplate:0}),t.Fb(2048,null,un.l,null,[un.c]),(l()(),t.hb(0,null,null,1,null,Qr)),t.pb(7,16384,[[6,4]],0,un.e,[t.M],null,null),(l()(),t.qb(8,0,null,null,13,"div",[["class","columns mb-1"]],null,null,null,null,null)),(l()(),t.qb(9,0,null,null,2,"div",[["cdkDragHandle",""],["class","column col-auto c-move cdk-drag-handle"]],null,null,null,null,null)),t.pb(10,147456,[[4,4]],0,un.d,[t.k,[2,un.l]],null,null),(l()(),t.qb(11,0,null,null,0,"i",[["class","icon icon-resize-vert"]],null,null,null,null,null)),(l()(),t.qb(12,0,null,null,2,"div",[["class","column d-flex align-items-center"]],null,null,null,null,null)),(l()(),t.qb(13,0,null,null,1,"h6",[["class","mb-0"]],null,null,null,null,null)),(l()(),t.Ib(14,null,["",""])),(l()(),t.hb(16777216,null,null,1,null,Yr)),t.pb(16,16384,null,0,p.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null),(l()(),t.qb(17,0,null,null,4,"div",[["class","column col-auto"]],null,null,null,null,null)),(l()(),t.qb(18,0,null,null,3,"button",[["class","btn btn-sm btn-error"]],null,[[null,"click"]],function(l,n,u){var t=!0,e=l.component;return"click"===n&&(t=!1!==e.removeField(l.context.index)&&t),t},null,null)),(l()(),t.qb(19,0,null,null,0,"i",[["class","icon icon-cross"]],null,null,null,null,null)),(l()(),t.qb(20,0,null,null,1,"span",[["class","hide-sm"]],null,null,null,null,null)),(l()(),t.Ib(-1,null,[" Remove"])),(l()(),t.qb(22,0,null,null,4,"dd-field-definition-form",[],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"submit"],[null,"reset"]],function(l,n,u){var e=!0;return"submit"===n&&(e=!1!==t.Ab(l,23).onSubmit(u)&&e),"reset"===n&&(e=!1!==t.Ab(l,23).onReset()&&e),e},$i,Di)),t.pb(23,540672,null,0,R.l,[[8,null],[8,null]],{form:[0,"form"]},null),t.Fb(2048,null,R.c,null,[R.l]),t.pb(25,16384,null,0,R.r,[[4,R.c]],null,null),t.pb(26,114688,null,0,_i,[f.b],{formGroup:[0,"formGroup"],otherFields:[1,"otherFields"]},null),(l()(),t.hb(0,null,null,0))],function(l,n){var u=n.component,t=n.context.$implicit.get("class");l(n,16,0,t),l(n,23,0,n.context.$implicit),l(n,26,0,n.context.$implicit,u.otherFieldNames)},function(l,n){l(n,0,0,t.Ab(n,1).disabled,t.Ab(n,1)._dragRef.isDragging()),l(n,14,0,n.context.$implicit.value.name),l(n,22,0,t.Ab(n,25).ngClassUntouched,t.Ab(n,25).ngClassTouched,t.Ab(n,25).ngClassPristine,t.Ab(n,25).ngClassDirty,t.Ab(n,25).ngClassValid,t.Ab(n,25).ngClassInvalid,t.Ab(n,25).ngClassPending)})}function Zr(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,140,"div",[["class","container grid-xl"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"submit"],[null,"reset"]],function(l,n,u){var e=!0;return"submit"===n&&(e=!1!==t.Ab(l,1).onSubmit(u)&&e),"reset"===n&&(e=!1!==t.Ab(l,1).onReset()&&e),e},null,null)),t.pb(1,540672,null,0,R.l,[[8,null],[8,null]],{form:[0,"form"]},null),t.Fb(2048,null,R.c,null,[R.l]),t.pb(3,16384,null,0,R.r,[[4,R.c]],null,null),(l()(),t.qb(4,0,null,null,12,"div",[["class","columns"]],null,null,null,null,null)),(l()(),t.qb(5,0,null,null,4,"div",[["class","column"]],null,null,null,null,null)),(l()(),t.hb(16777216,null,null,1,null,Kr)),t.pb(7,16384,null,0,p.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null),(l()(),t.hb(16777216,null,null,1,null,jr)),t.pb(9,16384,null,0,p.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null),(l()(),t.qb(10,0,null,null,6,"div",[["class","column col-auto col-ml-auto"]],null,null,null,null,null)),(l()(),t.hb(16777216,null,null,1,null,Gr)),t.pb(12,16384,null,0,p.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null),(l()(),t.qb(13,0,null,null,3,"button",[["class","btn"]],[[8,"disabled",0]],[[null,"click"]],function(l,n,u){var t=!0,e=l.component;return"click"===n&&(t=!1!==e.save()&&t),t},null,null)),t.pb(14,278528,null,0,p.i,[t.t,t.u,t.k,t.E],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),t.Db(15,{loading:0}),(l()(),t.Ib(-1,null,[" Save "])),(l()(),t.qb(17,0,null,null,102,"div",[["class","columns"]],null,null,null,null,null)),(l()(),t.qb(18,0,null,null,8,"div",[["class","column col-3 col-md-5 col-sm-12 col-mx-auto"]],null,null,null,null,null)),(l()(),t.qb(19,0,null,null,1,"label",[["class","form-label"]],null,null,null,null,null)),(l()(),t.Ib(-1,null,["Icon"])),(l()(),t.qb(21,0,null,null,5,"dd-image-upload",[["formControlName","imageId"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],null,null,Tl,Il)),t.pb(22,4308992,null,0,Cl,[b.a,f.b],null,null),t.Fb(1024,null,R.o,function(l){return[l]},[Cl]),t.pb(24,671744,null,0,R.j,[[3,R.c],[8,null],[8,null],[6,R.o],[2,R.D]],{name:[0,"name"]},null),t.Fb(2048,null,R.p,null,[R.j]),t.pb(26,16384,null,0,R.q,[[4,R.p]],null,null),(l()(),t.qb(27,0,null,null,32,"div",[["class","column col-9 col-md-12"]],null,null,null,null,null)),(l()(),t.qb(28,0,null,null,16,"div",[["class","form-group"]],null,null,null,null,null)),t.pb(29,278528,null,0,p.i,[t.t,t.u,t.k,t.E],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),t.Db(30,{"has-error":0}),(l()(),t.qb(31,0,null,null,1,"label",[["class","form-label"],["for","name"]],null,null,null,null,null)),(l()(),t.Ib(-1,null,["Name"])),(l()(),t.qb(33,0,null,null,5,"input",[["class","form-input"],["formControlName","name"],["id","name"],["name","name"],["placeholder","Name"],["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(l,n,u){var e=!0;return"input"===n&&(e=!1!==t.Ab(l,34)._handleInput(u.target.value)&&e),"blur"===n&&(e=!1!==t.Ab(l,34).onTouched()&&e),"compositionstart"===n&&(e=!1!==t.Ab(l,34)._compositionStart()&&e),"compositionend"===n&&(e=!1!==t.Ab(l,34)._compositionEnd(u.target.value)&&e),e},null,null)),t.pb(34,16384,null,0,R.d,[t.E,t.k,[2,R.a]],null,null),t.Fb(1024,null,R.o,function(l){return[l]},[R.d]),t.pb(36,671744,null,0,R.j,[[3,R.c],[8,null],[8,null],[6,R.o],[2,R.D]],{name:[0,"name"]},null),t.Fb(2048,null,R.p,null,[R.j]),t.pb(38,16384,null,0,R.q,[[4,R.p]],null,null),(l()(),t.hb(16777216,null,null,1,null,Ur)),t.pb(40,16384,null,0,p.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null),(l()(),t.hb(16777216,null,null,1,null,Rr)),t.pb(42,16384,null,0,p.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null),(l()(),t.hb(16777216,null,null,1,null,Vr)),t.pb(44,16384,null,0,p.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null),(l()(),t.qb(45,0,null,null,14,"div",[["class","form-group"]],null,null,null,null,null)),t.pb(46,278528,null,0,p.i,[t.t,t.u,t.k,t.E],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),t.Db(47,{"has-error":0}),(l()(),t.qb(48,0,null,null,1,"label",[["class","form-label"],["for","description"]],null,null,null,null,null)),(l()(),t.Ib(-1,null,["Description"])),(l()(),t.qb(50,0,null,null,5,"textarea",[["class","form-input"],["formControlName","description"],["id","description"],["name","description"],["placeholder","Description"],["rows","4"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(l,n,u){var e=!0;return"input"===n&&(e=!1!==t.Ab(l,51)._handleInput(u.target.value)&&e),"blur"===n&&(e=!1!==t.Ab(l,51).onTouched()&&e),"compositionstart"===n&&(e=!1!==t.Ab(l,51)._compositionStart()&&e),"compositionend"===n&&(e=!1!==t.Ab(l,51)._compositionEnd(u.target.value)&&e),e},null,null)),t.pb(51,16384,null,0,R.d,[t.E,t.k,[2,R.a]],null,null),t.Fb(1024,null,R.o,function(l){return[l]},[R.d]),t.pb(53,671744,null,0,R.j,[[3,R.c],[8,null],[8,null],[6,R.o],[2,R.D]],{name:[0,"name"]},null),t.Fb(2048,null,R.p,null,[R.j]),t.pb(55,16384,null,0,R.q,[[4,R.p]],null,null),(l()(),t.hb(16777216,null,null,1,null,Hr)),t.pb(57,16384,null,0,p.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null),(l()(),t.hb(16777216,null,null,1,null,$r)),t.pb(59,16384,null,0,p.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null),(l()(),t.qb(60,0,null,null,59,"div",[["class","column col-12"]],null,null,null,null,null)),(l()(),t.qb(61,0,null,null,1,"h5",[["class","mt-2"]],null,null,null,null,null)),(l()(),t.Ib(-1,null,["Misc"])),(l()(),t.qb(63,0,null,null,54,"div",[["class","columns"]],null,null,null,null,null)),(l()(),t.qb(64,0,null,null,53,"div",[["class","column"]],null,null,null,null,null)),(l()(),t.qb(65,0,null,null,9,"div",[["class","form-group"]],null,null,null,null,null)),(l()(),t.qb(66,0,null,null,8,"label",[["class","form-checkbox"]],null,null,null,null,null)),(l()(),t.qb(67,0,null,null,5,"input",[["formControlName","playerCreatable"],["type","checkbox"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"change"],[null,"blur"]],function(l,n,u){var e=!0;return"change"===n&&(e=!1!==t.Ab(l,68).onChange(u.target.checked)&&e),"blur"===n&&(e=!1!==t.Ab(l,68).onTouched()&&e),e},null,null)),t.pb(68,16384,null,0,R.b,[t.E,t.k],null,null),t.Fb(1024,null,R.o,function(l){return[l]},[R.b]),t.pb(70,671744,null,0,R.j,[[3,R.c],[8,null],[8,null],[6,R.o],[2,R.D]],{name:[0,"name"]},null),t.Fb(2048,null,R.p,null,[R.j]),t.pb(72,16384,null,0,R.q,[[4,R.p]],null,null),(l()(),t.qb(73,0,null,null,0,"i",[["class","form-icon"]],null,null,null,null,null)),(l()(),t.Ib(-1,null,[" Players can create this type of entity "])),(l()(),t.qb(75,0,null,null,9,"div",[["class","form-group"]],null,null,null,null,null)),(l()(),t.qb(76,0,null,null,8,"label",[["class","form-checkbox"]],null,null,null,null,null)),(l()(),t.qb(77,0,null,null,5,"input",[["formControlName","isCurrencyEnabled"],["type","checkbox"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"change"],[null,"blur"]],function(l,n,u){var e=!0;return"change"===n&&(e=!1!==t.Ab(l,78).onChange(u.target.checked)&&e),"blur"===n&&(e=!1!==t.Ab(l,78).onTouched()&&e),e},null,null)),t.pb(78,16384,null,0,R.b,[t.E,t.k],null,null),t.Fb(1024,null,R.o,function(l){return[l]},[R.b]),t.pb(80,671744,null,0,R.j,[[3,R.c],[8,null],[8,null],[6,R.o],[2,R.D]],{name:[0,"name"]},null),t.Fb(2048,null,R.p,null,[R.j]),t.pb(82,16384,null,0,R.q,[[4,R.p]],null,null),(l()(),t.qb(83,0,null,null,0,"i",[["class","form-icon"]],null,null,null,null,null)),(l()(),t.Ib(-1,null,[" This entity can have gold "])),(l()(),t.qb(85,0,null,null,9,"div",[["class","form-group"]],null,null,null,null,null)),(l()(),t.qb(86,0,null,null,8,"label",[["class","form-checkbox"]],null,null,null,null,null)),(l()(),t.qb(87,0,null,null,5,"input",[["formControlName","isXPEnabled"],["type","checkbox"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"change"],[null,"blur"]],function(l,n,u){var e=!0;return"change"===n&&(e=!1!==t.Ab(l,88).onChange(u.target.checked)&&e),"blur"===n&&(e=!1!==t.Ab(l,88).onTouched()&&e),e},null,null)),t.pb(88,16384,null,0,R.b,[t.E,t.k],null,null),t.Fb(1024,null,R.o,function(l){return[l]},[R.b]),t.pb(90,671744,null,0,R.j,[[3,R.c],[8,null],[8,null],[6,R.o],[2,R.D]],{name:[0,"name"]},null),t.Fb(2048,null,R.p,null,[R.j]),t.pb(92,16384,null,0,R.q,[[4,R.p]],null,null),(l()(),t.qb(93,0,null,null,0,"i",[["class","form-icon"]],null,null,null,null,null)),(l()(),t.Ib(-1,null,[" This entity can have XP "])),(l()(),t.qb(95,0,null,null,9,"div",[["class","form-group"]],null,null,null,null,null)),(l()(),t.qb(96,0,null,null,8,"label",[["class","form-checkbox"]],null,null,null,null,null)),(l()(),t.qb(97,0,null,null,5,"input",[["formControlName","isHealthEnabled"],["type","checkbox"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"change"],[null,"blur"]],function(l,n,u){var e=!0;return"change"===n&&(e=!1!==t.Ab(l,98).onChange(u.target.checked)&&e),"blur"===n&&(e=!1!==t.Ab(l,98).onTouched()&&e),e},null,null)),t.pb(98,16384,null,0,R.b,[t.E,t.k],null,null),t.Fb(1024,null,R.o,function(l){return[l]},[R.b]),t.pb(100,671744,null,0,R.j,[[3,R.c],[8,null],[8,null],[6,R.o],[2,R.D]],{name:[0,"name"]},null),t.Fb(2048,null,R.p,null,[R.j]),t.pb(102,16384,null,0,R.q,[[4,R.p]],null,null),(l()(),t.qb(103,0,null,null,0,"i",[["class","form-icon"]],null,null,null,null,null)),(l()(),t.Ib(-1,null,[" This entity can have health "])),(l()(),t.qb(105,0,null,null,12,"div",[["class","form-group"]],null,null,null,null,null)),(l()(),t.qb(106,0,null,null,1,"label",[["class","form-label"],["for","conceptTypesEnabled"]],null,null,null,null,null)),(l()(),t.Ib(-1,null,["Concept Types"])),(l()(),t.qb(108,0,null,null,7,"select",[["class","form-select"],["formControlName","conceptTypesEnabled"],["id","conceptTypesEnabled"],["multiple",""],["name","conceptTypesEnabled"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"change"],[null,"blur"]],function(l,n,u){var e=!0;return"change"===n&&(e=!1!==t.Ab(l,109).onChange(u.target)&&e),"blur"===n&&(e=!1!==t.Ab(l,109).onTouched()&&e),e},null,null)),t.pb(109,16384,null,0,R.w,[t.E,t.k],null,null),t.Fb(1024,null,R.o,function(l){return[l]},[R.w]),t.pb(111,671744,null,0,R.j,[[3,R.c],[8,null],[8,null],[6,R.o],[2,R.D]],{name:[0,"name"]},null),t.Fb(2048,null,R.p,null,[R.j]),t.pb(113,16384,null,0,R.q,[[4,R.p]],null,null),(l()(),t.hb(16777216,null,null,1,null,Br)),t.pb(115,278528,null,0,p.j,[t.P,t.M,t.t],{ngForOf:[0,"ngForOf"]},null),(l()(),t.qb(116,0,null,null,1,"div",[["class","form-input-hint"]],null,null,null,null,null)),(l()(),t.Ib(-1,null,["The entity will have these concept types enabled"])),(l()(),t.hb(16777216,null,null,1,null,Xr)),t.pb(119,16384,null,0,p.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null),(l()(),t.qb(120,0,null,null,17,"div",[],null,null,null,null,null)),(l()(),t.qb(121,0,null,null,9,"div",[["class","columns"]],null,null,null,null,null)),(l()(),t.qb(122,0,null,null,2,"div",[["class","column"]],null,null,null,null,null)),(l()(),t.qb(123,0,null,null,1,"h3",[["class","mt-2"]],null,null,null,null,null)),(l()(),t.Ib(-1,null,["Fields"])),(l()(),t.qb(125,0,null,null,5,"div",[["class","column col-auto"]],null,null,null,null,null)),(l()(),t.qb(126,0,null,null,1,"button",[["class","btn btn-sm mr-2"]],null,[[null,"click"]],function(l,n,u){var e=!0;return"click"===n&&(e=!1!==t.Ab(l.parent,5).open()&&e),e},null,null)),(l()(),t.Ib(-1,null,[" Use Preset "])),(l()(),t.qb(128,0,null,null,2,"button",[["class","btn btn-sm"]],null,[[null,"click"]],function(l,n,u){var t=!0,e=l.component;return"click"===n&&(t=!1!==e.addField()&&t),t},null,null)),(l()(),t.qb(129,0,null,null,0,"i",[["class","icon icon-plus"]],null,null,null,null,null)),(l()(),t.Ib(-1,null,[" Add Field"])),(l()(),t.qb(131,0,null,null,6,"div",[["cdkDropList",""],["class","cdk-drop-list"]],[[8,"id",0],[2,"cdk-drop-list-disabled",null],[2,"cdk-drop-list-dragging",null],[2,"cdk-drop-list-receiving",null]],[[null,"cdkDropListDropped"]],function(l,n,u){var t=!0,e=l.component;return"cdkDropListDropped"===n&&(t=!1!==e.drop(u)&&t),t},null,null)),t.Fb(6144,null,un.b,null,[un.f]),t.pb(133,1196032,null,1,un.f,[t.k,un.j,t.h,[2,en.a],[3,un.g],[2,p.c],un.h],null,{dropped:"cdkDropListDropped"}),t.Gb(603979776,3,{_draggables:1}),t.Fb(256,null,un.g,void 0,[]),(l()(),t.hb(16777216,null,null,1,null,Wr)),t.pb(137,278528,null,0,p.j,[t.P,t.M,t.t],{ngForOf:[0,"ngForOf"]},null),(l()(),t.qb(138,0,null,null,2,"div",[["class","text-center"]],null,null,null,null,null)),(l()(),t.qb(139,0,null,null,1,"button",[["class","btn btn-link"]],null,[[null,"click"]],function(l,n,u){var t=!0,e=l.component;return"click"===n&&(t=!1!==e.backToTop()&&t),t},null,null)),(l()(),t.Ib(-1,null,["Back to Top"]))],function(l,n){var u=n.component;l(n,1,0,u.formGroup),l(n,7,0,!u.editing),l(n,9,0,u.editing),l(n,12,0,u.editing);var t=l(n,15,0,u.saving);l(n,14,0,"btn",t),l(n,22,0),l(n,24,0,"imageId");var e=l(n,30,0,u.name.invalid&&(u.name.dirty||u.name.touched));l(n,29,0,"form-group",e),l(n,36,0,"name"),l(n,40,0,u.name.invalid&&u.name.dirty&&u.name.errors.required),l(n,42,0,u.name.invalid&&u.name.dirty&&u.name.errors.minlength),l(n,44,0,u.name.invalid&&u.name.dirty&&u.name.errors.maxlength);var i=l(n,47,0,u.description.invalid&&(u.description.dirty||u.description.touched));l(n,46,0,"form-group",i),l(n,53,0,"description"),l(n,57,0,u.description.invalid&&u.description.dirty&&u.description.errors.required),l(n,59,0,u.description.invalid&&u.description.dirty&&u.description.errors.minlength),l(n,70,0,"playerCreatable"),l(n,80,0,"isCurrencyEnabled"),l(n,90,0,"isXPEnabled"),l(n,100,0,"isHealthEnabled"),l(n,111,0,"conceptTypesEnabled"),l(n,115,0,u.conceptTypeList),l(n,119,0,!0===u.isHealthEnabled.value),l(n,137,0,u.fields.controls)},function(l,n){var u=n.component;l(n,0,0,t.Ab(n,3).ngClassUntouched,t.Ab(n,3).ngClassTouched,t.Ab(n,3).ngClassPristine,t.Ab(n,3).ngClassDirty,t.Ab(n,3).ngClassValid,t.Ab(n,3).ngClassInvalid,t.Ab(n,3).ngClassPending),l(n,13,0,u.formGroup.invalid),l(n,21,0,t.Ab(n,26).ngClassUntouched,t.Ab(n,26).ngClassTouched,t.Ab(n,26).ngClassPristine,t.Ab(n,26).ngClassDirty,t.Ab(n,26).ngClassValid,t.Ab(n,26).ngClassInvalid,t.Ab(n,26).ngClassPending),l(n,33,0,t.Ab(n,38).ngClassUntouched,t.Ab(n,38).ngClassTouched,t.Ab(n,38).ngClassPristine,t.Ab(n,38).ngClassDirty,t.Ab(n,38).ngClassValid,t.Ab(n,38).ngClassInvalid,t.Ab(n,38).ngClassPending),l(n,50,0,t.Ab(n,55).ngClassUntouched,t.Ab(n,55).ngClassTouched,t.Ab(n,55).ngClassPristine,t.Ab(n,55).ngClassDirty,t.Ab(n,55).ngClassValid,t.Ab(n,55).ngClassInvalid,t.Ab(n,55).ngClassPending),l(n,67,0,t.Ab(n,72).ngClassUntouched,t.Ab(n,72).ngClassTouched,t.Ab(n,72).ngClassPristine,t.Ab(n,72).ngClassDirty,t.Ab(n,72).ngClassValid,t.Ab(n,72).ngClassInvalid,t.Ab(n,72).ngClassPending),l(n,77,0,t.Ab(n,82).ngClassUntouched,t.Ab(n,82).ngClassTouched,t.Ab(n,82).ngClassPristine,t.Ab(n,82).ngClassDirty,t.Ab(n,82).ngClassValid,t.Ab(n,82).ngClassInvalid,t.Ab(n,82).ngClassPending),l(n,87,0,t.Ab(n,92).ngClassUntouched,t.Ab(n,92).ngClassTouched,t.Ab(n,92).ngClassPristine,t.Ab(n,92).ngClassDirty,t.Ab(n,92).ngClassValid,t.Ab(n,92).ngClassInvalid,t.Ab(n,92).ngClassPending),l(n,97,0,t.Ab(n,102).ngClassUntouched,t.Ab(n,102).ngClassTouched,t.Ab(n,102).ngClassPristine,t.Ab(n,102).ngClassDirty,t.Ab(n,102).ngClassValid,t.Ab(n,102).ngClassInvalid,t.Ab(n,102).ngClassPending),l(n,108,0,t.Ab(n,113).ngClassUntouched,t.Ab(n,113).ngClassTouched,t.Ab(n,113).ngClassPristine,t.Ab(n,113).ngClassDirty,t.Ab(n,113).ngClassValid,t.Ab(n,113).ngClassInvalid,t.Ab(n,113).ngClassPending),l(n,131,0,t.Ab(n,133).id,t.Ab(n,133).disabled,t.Ab(n,133)._dropListRef.isDragging(),t.Ab(n,133)._dropListRef.isReceiving())})}function Jr(l){return t.Kb(0,[t.Gb(402653184,1,{presetsModal:0}),t.Gb(402653184,2,{confirmModal:0}),(l()(),t.qb(2,0,null,null,1,"dd-confirmation-modal",[],null,null,null,Tr,Er)),t.pb(3,114688,[[2,4],["confirmmodal",4]],0,xr,[],null,null),(l()(),t.qb(4,0,null,null,7,"dd-modal",[],null,null,null,fl.b,fl.a)),t.pb(5,114688,[[1,4],["presets",4]],0,hl.a,[],null,null),(l()(),t.qb(6,0,null,0,2,"div",[["modal-header",""]],null,null,null,null,null)),(l()(),t.qb(7,0,null,null,1,"h4",[],null,null,null,null,null)),(l()(),t.Ib(-1,null,["Attribute Presets"])),(l()(),t.qb(9,0,null,1,2,"div",[["modal-body",""]],null,null,null,null,null)),(l()(),t.hb(16777216,null,null,1,null,Fr)),t.pb(11,278528,null,0,p.j,[t.P,t.M,t.t],{ngForOf:[0,"ngForOf"]},null),(l()(),t.hb(16777216,null,null,1,null,Zr)),t.pb(13,16384,null,0,p.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null)],function(l,n){var u=n.component;l(n,3,0),l(n,5,0),l(n,11,0,u.presetList),l(n,13,0,u.entityPreset||!u.editing)},null)}function la(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,1,"dd-entity-preset-editor",[],null,null,null,Jr,Lr)),t.pb(1,114688,null,0,Nr,[ct.b,f.b,Or,b.a,r.k,r.a],null,null)],function(l,n){l(n,1,0)},null)}var na=t.mb("dd-entity-preset-editor",Nr,la,{},{},[]),ua=function(){function l(){this.sliderMax=10,this.max=60,this.min=1,this.loading=!1,this.selected=new t.m,this.cancel=new t.m,this.customInput=!1}return l.prototype.ngOnInit=function(){this.inputControl=new R.h(1,[R.x.required,R.x.min(this.min),R.x.max(this.max)])},l.prototype.submit=function(){this.inputControl.valid&&this.selected.emit(this.inputControl.value)},Object.defineProperty(l.prototype,"number",{get:function(){return this.inputControl.value},set:function(l){this.inputControl.setValue(l)},enumerable:!0,configurable:!0}),l}(),ta=t.ob({encapsulation:0,styles:[[""]],data:{}});function ea(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,14,"div",[["class","columns"]],null,null,null,null,null)),(l()(),t.qb(1,0,null,null,7,"div",[["class","column"]],null,null,null,null,null)),(l()(),t.qb(2,0,null,null,6,"input",[["class","slider tooltip"],["name","slider"],["type","range"]],[[8,"min",0],[8,"max",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"]],function(l,n,u){var e=!0;return"input"===n&&(e=!1!==t.Ab(l,3)._handleInput(u.target.value)&&e),"blur"===n&&(e=!1!==t.Ab(l,3).onTouched()&&e),"compositionstart"===n&&(e=!1!==t.Ab(l,3)._compositionStart()&&e),"compositionend"===n&&(e=!1!==t.Ab(l,3)._compositionEnd(u.target.value)&&e),"change"===n&&(e=!1!==t.Ab(l,4).onChange(u.target.value)&&e),"input"===n&&(e=!1!==t.Ab(l,4).onChange(u.target.value)&&e),"blur"===n&&(e=!1!==t.Ab(l,4).onTouched()&&e),e},null,null)),t.pb(3,16384,null,0,R.d,[t.E,t.k,[2,R.a]],null,null),t.pb(4,16384,null,0,R.A,[t.E,t.k],null,null),t.Fb(1024,null,R.o,function(l,n){return[l,n]},[R.d,R.A]),t.pb(6,540672,null,0,R.i,[[8,null],[8,null],[6,R.o],[2,R.D]],{form:[0,"form"]},null),t.Fb(2048,null,R.p,null,[R.i]),t.pb(8,16384,null,0,R.q,[[4,R.p]],null,null),(l()(),t.qb(9,0,null,null,5,"div",[["class","column col-auto"]],null,null,null,null,null)),(l()(),t.qb(10,0,null,null,1,"button",[["class","btn btn-sm mr-1"]],null,[[null,"click"]],function(l,n,u){var t=!0,e=l.component;return"click"===n&&(t=!1!==e.cancel.emit(!0)&&t),t},null,null)),(l()(),t.qb(11,0,null,null,0,"i",[["class","icon icon-cross"]],null,null,null,null,null)),(l()(),t.qb(12,0,null,null,2,"button",[["class","btn btn-sm"]],[[8,"disabled",0]],[[null,"click"]],function(l,n,u){var t=!0,e=l.component;return"click"===n&&(t=!1!==e.submit()&&t),t},null,null)),(l()(),t.qb(13,0,null,null,0,"i",[["class","icon icon-check"]],null,null,null,null,null)),(l()(),t.Ib(14,null,[" "," "]))],function(l,n){l(n,6,0,n.component.inputControl)},function(l,n){var u=n.component;l(n,2,0,t.sb(1,"",u.min,""),t.sb(1,"",u.sliderMax,""),t.Ab(n,8).ngClassUntouched,t.Ab(n,8).ngClassTouched,t.Ab(n,8).ngClassPristine,t.Ab(n,8).ngClassDirty,t.Ab(n,8).ngClassValid,t.Ab(n,8).ngClassInvalid,t.Ab(n,8).ngClassPending),l(n,12,0,u.inputControl.invalid||u.loading),l(n,14,0,u.inputControl.value)})}var ia=function(){function l(l,n,u){this.entityService=l,this.router=n,this.campaignService=u,this.spawnMode=!1,this.spawning=!1}return l.prototype.ngOnInit=function(){},l.prototype.edit=function(){this.router.navigate(["campaigns",this.campaignService.campaign.id,"entities",this.spawnable.id])},l.prototype.spawn=function(l){return n=this,void 0,t=function(){return function(l,n){var u,t,e,i,o={label:0,sent:function(){if(1&e[0])throw e[1];return e[1]},trys:[],ops:[]};return i={next:r(0),throw:r(1),return:r(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function r(i){return function(r){return function(i){if(u)throw new TypeError("Generator is already executing.");for(;o;)try{if(u=1,t&&(e=2&i[0]?t.return:i[0]?t.throw||((e=t.return)&&e.call(t),0):t.next)&&!(e=e.call(t,i[1])).done)return e;switch(t=0,e&&(i=[2&i[0],e.value]),i[0]){case 0:case 1:e=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,t=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!(e=(e=o.trys).length>0&&e[e.length-1])&&(6===i[0]||2===i[0])){o=0;continue}if(3===i[0]&&(!e||i[1]>e[0]&&i[1]<e[3])){o.label=i[1];break}if(6===i[0]&&o.label<e[1]){o.label=e[1],e=i;break}if(e&&o.label<e[2]){o.label=e[2],o.ops.push(i);break}e[2]&&o.ops.pop(),o.trys.pop();continue}i=n.call(l,o)}catch(r){i=[6,r],t=0}finally{u=e=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,r])}}}(this,function(n){switch(n.label){case 0:this.spawning=!0,n.label=1;case 1:return n.trys.push([1,4,,5]),[4,this.entityService.spawnSpawnable(this.spawnable.id,l)];case 2:return n.sent(),[4,this.router.navigate(["campaigns",this.campaignService.campaign.id,"overview"])];case 3:return n.sent(),[3,5];case 4:throw n.sent();case 5:return this.spawning=!1,[2]}})},new((u=void 0)||(u=Promise))(function(l,e){function i(l){try{r(t.next(l))}catch(n){e(n)}}function o(l){try{r(t.throw(l))}catch(n){e(n)}}function r(n){n.done?l(n.value):new u(function(l){l(n.value)}).then(i,o)}r((t=t.apply(n,[])).next())});var n,u,t},l}(),oa=t.ob({encapsulation:0,styles:[[""]],data:{}});function ra(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,4,"div",[["class","column text-right"]],null,null,null,null,null)),(l()(),t.qb(1,0,null,null,1,"button",[["class","btn btn-sm mr-2"]],null,[[null,"click"]],function(l,n,u){var t=!0,e=l.component;return"click"===n&&(t=!1!==e.edit()&&t),t},null,null)),(l()(),t.Ib(-1,null,["Edit"])),(l()(),t.qb(3,0,null,null,1,"button",[["class","btn btn-sm"]],null,[[null,"click"]],function(l,n,u){var t=!0,e=l.component;return"click"===n&&(t=0!=(e.spawnMode=!0)&&t),t},null,null)),(l()(),t.Ib(-1,null,["Spawn"]))],null,null)}function aa(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,2,"div",[["class","column col-sm-12"]],null,null,null,null,null)),(l()(),t.qb(1,0,null,null,1,"dd-number-quick-select",[],null,[[null,"selected"],[null,"cancel"]],function(l,n,u){var t=!0,e=l.component;return"selected"===n&&(t=!1!==e.spawn(u)&&t),"cancel"===n&&(t=0!=(e.spawnMode=!1)&&t),t},ea,ta)),t.pb(2,114688,null,0,ua,[],{loading:[0,"loading"]},{selected:"selected",cancel:"cancel"})],function(l,n){l(n,2,0,n.component.spawning)},null)}function ca(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,7,"div",[["class","columns"]],null,null,null,null,null)),(l()(),t.qb(1,0,null,null,2,"div",[["class","column"]],null,null,null,null,null)),(l()(),t.qb(2,0,null,null,1,"h5",[["class","mb-0"]],null,null,null,null,null)),(l()(),t.Ib(3,null,["",""])),(l()(),t.hb(16777216,null,null,1,null,ra)),t.pb(5,16384,null,0,p.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null),(l()(),t.hb(16777216,null,null,1,null,aa)),t.pb(7,16384,null,0,p.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null)],function(l,n){var u=n.component;l(n,5,0,!u.spawnMode),l(n,7,0,u.spawnMode)},function(l,n){l(n,3,0,n.component.spawnable.name)})}var sa=function(){function l(l,n,u){this.router=l,this.entityService=n,this.campaignService=u,this.loading=!1,this.spawnables=null}return l.prototype.ngOnInit=function(){this.load()},l.prototype.load=function(){return l=this,void 0,u=function(){var l;return function(l,n){var u,t,e,i,o={label:0,sent:function(){if(1&e[0])throw e[1];return e[1]},trys:[],ops:[]};return i={next:r(0),throw:r(1),return:r(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function r(i){return function(r){return function(i){if(u)throw new TypeError("Generator is already executing.");for(;o;)try{if(u=1,t&&(e=2&i[0]?t.return:i[0]?t.throw||((e=t.return)&&e.call(t),0):t.next)&&!(e=e.call(t,i[1])).done)return e;switch(t=0,e&&(i=[2&i[0],e.value]),i[0]){case 0:case 1:e=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,t=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!(e=(e=o.trys).length>0&&e[e.length-1])&&(6===i[0]||2===i[0])){o=0;continue}if(3===i[0]&&(!e||i[1]>e[0]&&i[1]<e[3])){o.label=i[1];break}if(6===i[0]&&o.label<e[1]){o.label=e[1],e=i;break}if(e&&o.label<e[2]){o.label=e[2],o.ops.push(i);break}e[2]&&o.ops.pop(),o.trys.pop();continue}i=n.call(l,o)}catch(r){i=[6,r],t=0}finally{u=e=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,r])}}}(this,function(n){switch(n.label){case 0:this.loading=!0,n.label=1;case 1:return n.trys.push([1,3,,4]),l=this,[4,this.entityService.getEntities(this.campaignService.campaign.id,!0)];case 2:return l.spawnables=n.sent(),[3,4];case 3:throw n.sent();case 4:return this.loading=!1,[2]}})},new((n=void 0)||(n=Promise))(function(t,e){function i(l){try{r(u.next(l))}catch(n){e(n)}}function o(l){try{r(u.throw(l))}catch(n){e(n)}}function r(l){l.done?t(l.value):new n(function(n){n(l.value)}).then(i,o)}r((u=u.apply(l,[])).next())});var l,n,u},l.prototype.addSpawnable=function(l){this.router.navigate(["campaigns",this.campaignService.campaign.id,"entities",l.id,"create"],{queryParams:{spawnable:!0}})},l.prototype.selectSpawnable=function(l){this.router.navigate(["campaigns",this.campaignService.campaign.id,"entities",l.entityPresetId,l.id,"edit"])},Object.defineProperty(l.prototype,"campaign",{get:function(){return this.campaignService.campaign},enumerable:!0,configurable:!0}),l}(),pa=t.ob({encapsulation:0,styles:[[""]],data:{}});function ba(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,2,"button",[["class","btn btn-sm ml-1"]],null,[[null,"click"]],function(l,n,u){var t=!0,e=l.component;return"click"===n&&(t=!1!==e.addSpawnable(l.context.$implicit)&&t),t},null,null)),(l()(),t.qb(1,0,null,null,0,"i",[["class","icon icon-plus"]],null,null,null,null,null)),(l()(),t.Ib(2,null,[" "," "]))],null,function(l,n){l(n,2,0,n.context.$implicit.name)})}function da(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,0,"div",[["class","loading loading-lg"]],null,null,null,null,null))],null,null)}function fa(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,6,"div",[["class","empty"]],null,null,null,null,null)),(l()(),t.qb(1,0,null,null,1,"div",[["class","empty-icon"]],null,null,null,null,null)),(l()(),t.qb(2,0,null,null,0,"i",[["class","icon icon-search icon-4x"]],null,null,null,null,null)),(l()(),t.qb(3,0,null,null,1,"p",[["class","empty-title h5"]],null,null,null,null,null)),(l()(),t.Ib(-1,null,["There are no spawnables :("])),(l()(),t.qb(5,0,null,null,1,"p",[["class","empty-subtitle"]],null,null,null,null,null)),(l()(),t.Ib(-1,null,["Use the buttons above to create one"]))],null,null)}function ha(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,2,"div",[["class","card mb-2 p-2"]],null,null,null,null,null)),(l()(),t.qb(1,0,null,null,1,"dd-spawnable-list-item",[],null,null,null,ca,oa)),t.pb(2,114688,null,0,ia,[ct.b,r.k,f.b],{spawnable:[0,"spawnable"]},null)],function(l,n){l(n,2,0,n.context.$implicit)},null)}function ga(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,4,"div",[],null,null,null,null,null)),(l()(),t.hb(16777216,null,null,1,null,fa)),t.pb(2,16384,null,0,p.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null),(l()(),t.hb(16777216,null,null,1,null,ha)),t.pb(4,278528,null,0,p.j,[t.P,t.M,t.t],{ngForOf:[0,"ngForOf"]},null)],function(l,n){var u=n.component;l(n,2,0,0===u.spawnables.length),l(n,4,0,u.spawnables)},null)}function ma(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,11,"div",[["class","container grid-xl"]],null,null,null,null,null)),(l()(),t.qb(1,0,null,null,6,"div",[["class","columns"]],null,null,null,null,null)),(l()(),t.qb(2,0,null,null,2,"div",[["class","column"]],null,null,null,null,null)),(l()(),t.qb(3,0,null,null,1,"h3",[],null,null,null,null,null)),(l()(),t.Ib(-1,null,["Spawnables"])),(l()(),t.qb(5,0,null,null,2,"div",[["class","column col-auto col-ml-auto"]],null,null,null,null,null)),(l()(),t.hb(16777216,null,null,1,null,ba)),t.pb(7,278528,null,0,p.j,[t.P,t.M,t.t],{ngForOf:[0,"ngForOf"]},null),(l()(),t.hb(16777216,null,null,1,null,da)),t.pb(9,16384,null,0,p.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null),(l()(),t.hb(16777216,null,null,1,null,ga)),t.pb(11,16384,null,0,p.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null)],function(l,n){var u=n.component;l(n,7,0,u.campaign.entityPresets),l(n,9,0,u.loading),l(n,11,0,u.spawnables)},null)}function va(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,1,"dd-spawnable-manager",[],null,null,null,ma,pa)),t.pb(1,114688,null,0,sa,[r.k,ct.b,f.b],null,null)],function(l,n){l(n,1,0)},null)}var ya=t.mb("dd-spawnable-manager",sa,va,{},{},[]),Ca=function(){function l(l,n,u,t){this.router=l,this.campaignService=n,this.questService=u,this.route=t,this.loading=!1}return l.prototype.ngOnInit=function(){this.loadQuests()},l.prototype.loadQuests=function(){return l=this,void 0,u=function(){var l;return function(l,n){var u,t,e,i,o={label:0,sent:function(){if(1&e[0])throw e[1];return e[1]},trys:[],ops:[]};return i={next:r(0),throw:r(1),return:r(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function r(i){return function(r){return function(i){if(u)throw new TypeError("Generator is already executing.");for(;o;)try{if(u=1,t&&(e=2&i[0]?t.return:i[0]?t.throw||((e=t.return)&&e.call(t),0):t.next)&&!(e=e.call(t,i[1])).done)return e;switch(t=0,e&&(i=[2&i[0],e.value]),i[0]){case 0:case 1:e=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,t=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!(e=(e=o.trys).length>0&&e[e.length-1])&&(6===i[0]||2===i[0])){o=0;continue}if(3===i[0]&&(!e||i[1]>e[0]&&i[1]<e[3])){o.label=i[1];break}if(6===i[0]&&o.label<e[1]){o.label=e[1],e=i;break}if(e&&o.label<e[2]){o.label=e[2],o.ops.push(i);break}e[2]&&o.ops.pop(),o.trys.pop();continue}i=n.call(l,o)}catch(r){i=[6,r],t=0}finally{u=e=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,r])}}}(this,function(n){switch(n.label){case 0:this.loading=!0,n.label=1;case 1:return n.trys.push([1,3,,4]),l=this,[4,this.questService.getQuests(this.campaignService.campaign.id)];case 2:return l.quests=n.sent(),[3,4];case 3:throw n.sent();case 4:return this.loading=!1,[2]}})},new((n=void 0)||(n=Promise))(function(t,e){function i(l){try{r(u.next(l))}catch(n){e(n)}}function o(l){try{r(u.throw(l))}catch(n){e(n)}}function r(l){l.done?t(l.value):new n(function(n){n(l.value)}).then(i,o)}r((u=u.apply(l,[])).next())});var l,n,u},l.prototype.viewQuest=function(l){this.router.navigate([l.id],{relativeTo:this.route})},l.prototype.addQuest=function(){this.router.navigate(["campaigns",this.campaignService.campaign.id,"quests","create"])},Object.defineProperty(l.prototype,"editable",{get:function(){return this.campaignService.canEdit},enumerable:!0,configurable:!0}),l}(),Ia=t.ob({encapsulation:0,styles:[[""]],data:{}});function qa(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,3,"button",[["class","btn btn-sm"]],null,[[null,"click"]],function(l,n,u){var t=!0,e=l.component;return"click"===n&&(t=!1!==e.addQuest()&&t),t},null,null)),(l()(),t.qb(1,0,null,null,0,"i",[["class","icon icon-plus"]],null,null,null,null,null)),(l()(),t.qb(2,0,null,null,1,"span",[["class","hide-sm"]],null,null,null,null,null)),(l()(),t.Ib(-1,null,[" Add Quest"]))],null,null)}function ka(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,0,"div",[["class","loading loading-lg"]],null,null,null,null,null))],null,null)}function Aa(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,1,"p",[["class","empty-subtitle"]],null,null,null,null,null)),(l()(),t.Ib(-1,null,[" Click the button to create one. "]))],null,null)}function wa(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,1,"button",[["class","btn btn-primary"]],null,[[null,"click"]],function(l,n,u){var t=!0,e=l.component;return"click"===n&&(t=!1!==e.addQuest()&&t),t},null,null)),(l()(),t.Ib(-1,null,[" Create Quest "]))],null,null)}function Pa(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,9,"div",[["class","empty"]],null,null,null,null,null)),(l()(),t.qb(1,0,null,null,1,"div",[["class","empty-icon"]],null,null,null,null,null)),(l()(),t.qb(2,0,null,null,0,"i",[["class","icon icon-search icon-4x"]],null,null,null,null,null)),(l()(),t.qb(3,0,null,null,1,"p",[["class","empty-title h5"]],null,null,null,null,null)),(l()(),t.Ib(-1,null,["There are no quests here"])),(l()(),t.hb(16777216,null,null,1,null,Aa)),t.pb(6,16384,null,0,p.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null),(l()(),t.qb(7,0,null,null,2,"div",[["class","empty-action"]],null,null,null,null,null)),(l()(),t.hb(16777216,null,null,1,null,wa)),t.pb(9,16384,null,0,p.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null)],function(l,n){var u=n.component;l(n,6,0,u.editable),l(n,9,0,u.editable)},null)}function xa(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,1,"div",[["class","column col-auto mr-1"]],null,null,null,null,null)),(l()(),t.qb(1,0,null,null,0,"i",[["class","icon icon-flag"]],null,null,null,null,null))],null,null)}function Ea(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,1,"span",[["class","label label-rounded"]],null,null,null,null,null)),(l()(),t.Ib(-1,null,["Unavailable"]))],null,null)}function Ta(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,1,"span",[["class","label label-rounded ml-1"]],null,null,null,null,null)),(l()(),t.Ib(-1,null,["Hidden"]))],null,null)}function Sa(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,12,"div",[["class","card p-2 mb-2 hoverable"]],null,[[null,"click"]],function(l,n,u){var t=!0,e=l.component;return"click"===n&&(t=!1!==e.viewQuest(l.context.$implicit)&&t),t},null,null)),(l()(),t.qb(1,0,null,null,11,"div",[["class","columns col-gapless"]],null,null,null,null,null)),(l()(),t.hb(16777216,null,null,1,null,xa)),t.pb(3,16384,null,0,p.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null),(l()(),t.qb(4,0,null,null,8,"div",[["class","column"]],null,null,null,null,null)),(l()(),t.qb(5,0,null,null,3,"span",[],null,null,null,null,null)),t.pb(6,278528,null,0,p.i,[t.t,t.u,t.k,t.E],{ngClass:[0,"ngClass"]},null),t.Db(7,{"text-gray":0}),(l()(),t.Ib(8,null,[" "," "])),(l()(),t.hb(16777216,null,null,1,null,Ea)),t.pb(10,16384,null,0,p.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null),(l()(),t.hb(16777216,null,null,1,null,Ta)),t.pb(12,16384,null,0,p.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null)],function(l,n){l(n,3,0,n.context.$implicit.active);var u=l(n,7,0,!n.context.$implicit.visible);l(n,6,0,u),l(n,10,0,!n.context.$implicit.available),l(n,12,0,!n.context.$implicit.visible)},function(l,n){l(n,8,0,n.context.$implicit.name)})}function Oa(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,2,"div",[],null,null,null,null,null)),(l()(),t.hb(16777216,null,null,1,null,Sa)),t.pb(2,278528,null,0,p.j,[t.P,t.M,t.t],{ngForOf:[0,"ngForOf"]},null)],function(l,n){l(n,2,0,n.component.quests)},null)}function Ma(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,13,"div",[["class","container grid-xl"]],null,null,null,null,null)),(l()(),t.qb(1,0,null,null,6,"div",[["class","columns"]],null,null,null,null,null)),(l()(),t.qb(2,0,null,null,2,"div",[["class","column"]],null,null,null,null,null)),(l()(),t.qb(3,0,null,null,1,"h3",[],null,null,null,null,null)),(l()(),t.Ib(-1,null,["Quests"])),(l()(),t.qb(5,0,null,null,2,"div",[["class","column col-auto col-ml-auto"]],null,null,null,null,null)),(l()(),t.hb(16777216,null,null,1,null,qa)),t.pb(7,16384,null,0,p.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null),(l()(),t.hb(16777216,null,null,1,null,ka)),t.pb(9,16384,null,0,p.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null),(l()(),t.hb(16777216,null,null,1,null,Pa)),t.pb(11,16384,null,0,p.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null),(l()(),t.hb(16777216,null,null,1,null,Oa)),t.pb(13,16384,null,0,p.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null)],function(l,n){var u=n.component;l(n,7,0,u.editable),l(n,9,0,u.loading),l(n,11,0,u.quests&&0===u.quests.length),l(n,13,0,u.quests)},null)}function _a(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,1,"dd-quest-manager",[],null,null,null,Ma,Ia)),t.pb(1,114688,null,0,Ca,[r.k,f.b,Yn.a,r.a],null,null)],function(l,n){l(n,1,0)},null)}var Da=t.mb("dd-quest-manager",Ca,_a,{},{},[]),Na=function(l,n,u,t){return new(u||(u=Promise))(function(e,i){function o(l){try{a(t.next(l))}catch(n){i(n)}}function r(l){try{a(t.throw(l))}catch(n){i(n)}}function a(l){l.done?e(l.value):new u(function(n){n(l.value)}).then(o,r)}a((t=t.apply(l,n||[])).next())})},La=function(l,n){var u,t,e,i,o={label:0,sent:function(){if(1&e[0])throw e[1];return e[1]},trys:[],ops:[]};return i={next:r(0),throw:r(1),return:r(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function r(i){return function(r){return function(i){if(u)throw new TypeError("Generator is already executing.");for(;o;)try{if(u=1,t&&(e=2&i[0]?t.return:i[0]?t.throw||((e=t.return)&&e.call(t),0):t.next)&&!(e=e.call(t,i[1])).done)return e;switch(t=0,e&&(i=[2&i[0],e.value]),i[0]){case 0:case 1:e=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,t=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!(e=(e=o.trys).length>0&&e[e.length-1])&&(6===i[0]||2===i[0])){o=0;continue}if(3===i[0]&&(!e||i[1]>e[0]&&i[1]<e[3])){o.label=i[1];break}if(6===i[0]&&o.label<e[1]){o.label=e[1],e=i;break}if(e&&o.label<e[2]){o.label=e[2],o.ops.push(i);break}e[2]&&o.ops.pop(),o.trys.pop();continue}i=n.call(l,o)}catch(r){i=[6,r],t=0}finally{u=e=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,r])}}},Fa=function(){function l(l,n,u,t,e){this.router=l,this.route=n,this.campaignService=u,this.questService=t,this.location=e,this.loading=!1,this.deleting=!1}return l.prototype.ngOnInit=function(){var l=this;if(this.formGroup=new R.k({name:new R.h(null,[R.x.required,R.x.minLength(3),R.x.maxLength(30)]),accepted:new R.h(!1),available:new R.h(!1),visible:new R.h(!1),status:new R.h("0"),content:new R.h(null)}),this.visible.valueChanges.subscribe(function(){l.dataToUI()}),this.available.valueChanges.pipe(Object(be.a)()).subscribe(function(){l.dataToUI()}),this.dataToUI(),this.editing){var n=this.route.snapshot.paramMap.get("q_id");this.loadQuest(n)}},l.prototype.canDeactivate=function(){return!this.formGroup.dirty},l.prototype.dataToUI=function(){if(this.quest||!this.editing){var l=this.available.value;this.visible.value?(this.available.enable(),l?(this.accepted.enable(),this.status.enable()):(this.accepted.setValue(!1),this.status.setValue(Yn.b.NONE),this.accepted.disable(),this.status.disable())):(this.available.setValue(!1),this.accepted.setValue(!1),this.status.setValue(Yn.b.NONE),this.accepted.disable(),this.available.disable(),this.status.disable())}},l.prototype.loadQuest=function(l){return Na(this,void 0,void 0,function(){var n,u=this;return La(this,function(t){switch(t.label){case 0:this.loading=!0,this.formGroup.disable(),t.label=1;case 1:return t.trys.push([1,3,,4]),[4,this.questService.getQuest(l)];case 2:return n=t.sent(),this.formGroup.patchValue(n),this.quest=n,setTimeout(function(){u.dataToUI()},1),[3,4];case 3:throw t.sent();case 4:return this.loading=!1,this.formGroup.enable(),[2]}})})},l.prototype.constructQuest=function(){var l={name:this.name.value,accepted:this.accepted.value,available:this.available.value,visible:this.visible.value,content:this.formGroup.get("content").value,status:this.status.value,campaignId:this.campaignService.campaign.id};return this.editing&&(l.id=this.quest.id),l},l.prototype.submit=function(){return Na(this,void 0,void 0,function(){var l,n;return La(this,function(u){switch(u.label){case 0:if(this.formGroup.invalid)return[2];if(l=this.constructQuest(),this.loading=!0,!this.editing)return[3,5];u.label=1;case 1:return u.trys.push([1,3,,4]),[4,this.questService.updateQuest(l)];case 2:return u.sent(),this.formGroup.markAsPristine(),this.cancel(),[3,4];case 3:throw u.sent();case 4:return[3,8];case 5:return u.trys.push([5,7,,8]),[4,this.questService.createQuest(l)];case 6:return n=u.sent(),this.formGroup.markAsPristine(),this.router.navigate(["campaigns",this.campaignService.campaign.id,"quests",n.id]),[3,8];case 7:throw u.sent();case 8:return this.loading=!1,[2]}})})},l.prototype.delete=function(){return Na(this,void 0,void 0,function(){return La(this,function(l){switch(l.label){case 0:this.deleting=!0,l.label=1;case 1:return l.trys.push([1,3,,4]),[4,this.questService.deleteQuest(this.quest)];case 2:return l.sent(),[3,4];case 3:throw l.sent();case 4:return this.location.back(),this.deleting=!1,[2]}})})},l.prototype.cancel=function(){this.location.back()},Object.defineProperty(l.prototype,"editing",{get:function(){return this.route.snapshot.data.editing},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"name",{get:function(){return this.formGroup.get("name")},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"accepted",{get:function(){return this.formGroup.get("accepted")},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"available",{get:function(){return this.formGroup.get("available")},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"visible",{get:function(){return this.formGroup.get("visible")},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"status",{get:function(){return this.formGroup.get("status")},enumerable:!0,configurable:!0}),l}(),Ka=t.ob({encapsulation:0,styles:[[""]],data:{}});function ja(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,3,"button",[["class","btn btn-error mr-2"],["type","button"]],null,[[null,"click"]],function(l,n,u){var t=!0,e=l.component;return"click"===n&&(t=!1!==e.delete()&&t),t},null,null)),t.pb(1,278528,null,0,p.i,[t.t,t.u,t.k,t.E],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),t.Db(2,{loading:0}),(l()(),t.Ib(-1,null,[" Delete "]))],function(l,n){var u=l(n,2,0,n.component.deleting);l(n,1,0,"btn btn-error mr-2",u)},null)}function Ga(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,1,"p",[["class","form-input-hint"]],null,null,null,null,null)),(l()(),t.Ib(-1,null,[" The quest needs a name "]))],null,null)}function Ua(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,1,"p",[["class","form-input-hint"]],null,null,null,null,null)),(l()(),t.Ib(-1,null,[" The name is too short "]))],null,null)}function Ra(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,1,"p",[["class","form-input-hint"]],null,null,null,null,null)),(l()(),t.Ib(-1,null,[" The name can't be more than 30 characters long "]))],null,null)}function Va(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,97,"div",[["class","container grid-xl"]],null,null,null,null,null)),(l()(),t.qb(1,0,null,null,96,"form",[["novalidate",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngSubmit"],[null,"submit"],[null,"reset"]],function(l,n,u){var e=!0,i=l.component;return"submit"===n&&(e=!1!==t.Ab(l,3).onSubmit(u)&&e),"reset"===n&&(e=!1!==t.Ab(l,3).onReset()&&e),"ngSubmit"===n&&(e=!1!==i.submit()&&e),e},null,null)),t.pb(2,16384,null,0,R.B,[],null,null),t.pb(3,540672,null,0,R.l,[[8,null],[8,null]],{form:[0,"form"]},{ngSubmit:"ngSubmit"}),t.Fb(2048,null,R.c,null,[R.l]),t.pb(5,16384,null,0,R.r,[[4,R.c]],null,null),(l()(),t.qb(6,0,null,null,10,"div",[["class","columns"]],null,null,null,null,null)),(l()(),t.qb(7,0,null,null,2,"div",[["class","column"]],null,null,null,null,null)),(l()(),t.qb(8,0,null,null,1,"h3",[],null,null,null,null,null)),(l()(),t.Ib(9,null,[""," Quest"])),(l()(),t.qb(10,0,null,null,6,"div",[["class","column col-auto col-ml-auto"]],null,null,null,null,null)),(l()(),t.qb(11,0,null,null,1,"button",[["class","btn mr-2"],["type","button"]],null,[[null,"click"]],function(l,n,u){var t=!0,e=l.component;return"click"===n&&(t=!1!==e.cancel()&&t),t},null,null)),(l()(),t.Ib(-1,null,[" Cancel "])),(l()(),t.hb(16777216,null,null,1,null,ja)),t.pb(14,16384,null,0,p.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null),(l()(),t.qb(15,0,null,null,1,"button",[["class","btn btn-primary"]],[[8,"disabled",0]],null,null,null,null)),(l()(),t.Ib(-1,null,[" Save "])),(l()(),t.qb(17,0,null,null,16,"div",[["class","form-group"]],null,null,null,null,null)),t.pb(18,278528,null,0,p.i,[t.t,t.u,t.k,t.E],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),t.Db(19,{"has-error":0,"has-success":1}),(l()(),t.qb(20,0,null,null,1,"label",[["class","form-label label-lg"],["for","name"]],null,null,null,null,null)),(l()(),t.Ib(-1,null,["Name"])),(l()(),t.qb(22,0,null,null,5,"input",[["class","form-input input-lg"],["formControlName","name"],["id","name"],["placeholder","Name"],["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(l,n,u){var e=!0;return"input"===n&&(e=!1!==t.Ab(l,23)._handleInput(u.target.value)&&e),"blur"===n&&(e=!1!==t.Ab(l,23).onTouched()&&e),"compositionstart"===n&&(e=!1!==t.Ab(l,23)._compositionStart()&&e),"compositionend"===n&&(e=!1!==t.Ab(l,23)._compositionEnd(u.target.value)&&e),e},null,null)),t.pb(23,16384,null,0,R.d,[t.E,t.k,[2,R.a]],null,null),t.Fb(1024,null,R.o,function(l){return[l]},[R.d]),t.pb(25,671744,null,0,R.j,[[3,R.c],[8,null],[8,null],[6,R.o],[2,R.D]],{name:[0,"name"]},null),t.Fb(2048,null,R.p,null,[R.j]),t.pb(27,16384,null,0,R.q,[[4,R.p]],null,null),(l()(),t.hb(16777216,null,null,1,null,Ga)),t.pb(29,16384,null,0,p.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null),(l()(),t.hb(16777216,null,null,1,null,Ua)),t.pb(31,16384,null,0,p.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null),(l()(),t.hb(16777216,null,null,1,null,Ra)),t.pb(33,16384,null,0,p.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null),(l()(),t.qb(34,0,null,null,8,"div",[["class","form-group"]],null,null,null,null,null)),(l()(),t.qb(35,0,null,null,1,"label",[["class","form-label"],["for","item-description"]],null,null,null,null,null)),(l()(),t.Ib(-1,null,["Description"])),(l()(),t.qb(37,0,null,null,5,"dd-quill",[["formControlName","content"],["placeholder","Do Quest"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],null,null,Sl.b,Sl.a)),t.pb(38,1163264,null,0,Ol.a,[f.b,Ml.a,b.a,r.k,P.c,_l.b,Dl.a,Nl.a],{placeholder:[0,"placeholder"]},null),t.Fb(1024,null,R.o,function(l){return[l]},[Ol.a]),t.pb(40,671744,null,0,R.j,[[3,R.c],[8,null],[8,null],[6,R.o],[2,R.D]],{name:[0,"name"]},null),t.Fb(2048,null,R.p,null,[R.j]),t.pb(42,16384,null,0,R.q,[[4,R.p]],null,null),(l()(),t.qb(43,0,null,null,9,"div",[["class","form-group"]],null,null,null,null,null)),(l()(),t.qb(44,0,null,null,8,"label",[["class","form-switch"],["for","accepted"]],null,null,null,null,null)),(l()(),t.qb(45,0,null,null,5,"input",[["formControlName","accepted"],["id","accepted"],["name","accepted"],["type","checkbox"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"change"],[null,"blur"]],function(l,n,u){var e=!0;return"change"===n&&(e=!1!==t.Ab(l,46).onChange(u.target.checked)&&e),"blur"===n&&(e=!1!==t.Ab(l,46).onTouched()&&e),e},null,null)),t.pb(46,16384,null,0,R.b,[t.E,t.k],null,null),t.Fb(1024,null,R.o,function(l){return[l]},[R.b]),t.pb(48,671744,null,0,R.j,[[3,R.c],[8,null],[8,null],[6,R.o],[2,R.D]],{name:[0,"name"]},null),t.Fb(2048,null,R.p,null,[R.j]),t.pb(50,16384,null,0,R.q,[[4,R.p]],null,null),(l()(),t.qb(51,0,null,null,0,"i",[["class","form-icon"]],null,null,null,null,null)),(l()(),t.Ib(-1,null,[" The players have accepted this quest "])),(l()(),t.qb(53,0,null,null,9,"div",[["class","form-group"]],null,null,null,null,null)),(l()(),t.qb(54,0,null,null,8,"label",[["class","form-switch"],["for","available"]],null,null,null,null,null)),(l()(),t.qb(55,0,null,null,5,"input",[["formControlName","available"],["id","available"],["name","available"],["type","checkbox"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"change"],[null,"blur"]],function(l,n,u){var e=!0;return"change"===n&&(e=!1!==t.Ab(l,56).onChange(u.target.checked)&&e),"blur"===n&&(e=!1!==t.Ab(l,56).onTouched()&&e),e},null,null)),t.pb(56,16384,null,0,R.b,[t.E,t.k],null,null),t.Fb(1024,null,R.o,function(l){return[l]},[R.b]),t.pb(58,671744,null,0,R.j,[[3,R.c],[8,null],[8,null],[6,R.o],[2,R.D]],{name:[0,"name"]},null),t.Fb(2048,null,R.p,null,[R.j]),t.pb(60,16384,null,0,R.q,[[4,R.p]],null,null),(l()(),t.qb(61,0,null,null,0,"i",[["class","form-icon"]],null,null,null,null,null)),(l()(),t.Ib(-1,null,[" This quest is available for players to accept "])),(l()(),t.qb(63,0,null,null,9,"div",[["class","form-group"]],null,null,null,null,null)),(l()(),t.qb(64,0,null,null,8,"label",[["class","form-switch"],["for","visible"]],null,null,null,null,null)),(l()(),t.qb(65,0,null,null,5,"input",[["formControlName","visible"],["id","visible"],["name","visible"],["type","checkbox"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"change"],[null,"blur"]],function(l,n,u){var e=!0;return"change"===n&&(e=!1!==t.Ab(l,66).onChange(u.target.checked)&&e),"blur"===n&&(e=!1!==t.Ab(l,66).onTouched()&&e),e},null,null)),t.pb(66,16384,null,0,R.b,[t.E,t.k],null,null),t.Fb(1024,null,R.o,function(l){return[l]},[R.b]),t.pb(68,671744,null,0,R.j,[[3,R.c],[8,null],[8,null],[6,R.o],[2,R.D]],{name:[0,"name"]},null),t.Fb(2048,null,R.p,null,[R.j]),t.pb(70,16384,null,0,R.q,[[4,R.p]],null,null),(l()(),t.qb(71,0,null,null,0,"i",[["class","form-icon"]],null,null,null,null,null)),(l()(),t.Ib(-1,null,[" Players can see this quest "])),(l()(),t.qb(73,0,null,null,24,"div",[["class","form-group"]],null,null,null,null,null)),(l()(),t.qb(74,0,null,null,1,"label",[["class","form-label"],["for","status"]],null,null,null,null,null)),(l()(),t.Ib(-1,null,[" Status "])),(l()(),t.qb(76,0,null,null,21,"select",[["class","form-input"],["formControlName","status"],["id","status"],["name","status"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"change"],[null,"blur"]],function(l,n,u){var e=!0;return"change"===n&&(e=!1!==t.Ab(l,77).onChange(u.target.value)&&e),"blur"===n&&(e=!1!==t.Ab(l,77).onTouched()&&e),e},null,null)),t.pb(77,16384,null,0,R.v,[t.E,t.k],null,null),t.Fb(1024,null,R.o,function(l){return[l]},[R.v]),t.pb(79,671744,null,0,R.j,[[3,R.c],[8,null],[8,null],[6,R.o],[2,R.D]],{name:[0,"name"]},null),t.Fb(2048,null,R.p,null,[R.j]),t.pb(81,16384,null,0,R.q,[[4,R.p]],null,null),(l()(),t.qb(82,0,null,null,3,"option",[["value","0"]],null,null,null,null,null)),t.pb(83,147456,null,0,R.t,[t.k,t.E,[2,R.v]],{value:[0,"value"]},null),t.pb(84,147456,null,0,R.E,[t.k,t.E,[8,null]],{value:[0,"value"]},null),(l()(),t.Ib(-1,null,["None"])),(l()(),t.qb(86,0,null,null,3,"option",[["value","1"]],null,null,null,null,null)),t.pb(87,147456,null,0,R.t,[t.k,t.E,[2,R.v]],{value:[0,"value"]},null),t.pb(88,147456,null,0,R.E,[t.k,t.E,[8,null]],{value:[0,"value"]},null),(l()(),t.Ib(-1,null,["On Hold"])),(l()(),t.qb(90,0,null,null,3,"option",[["value","2"]],null,null,null,null,null)),t.pb(91,147456,null,0,R.t,[t.k,t.E,[2,R.v]],{value:[0,"value"]},null),t.pb(92,147456,null,0,R.E,[t.k,t.E,[8,null]],{value:[0,"value"]},null),(l()(),t.Ib(-1,null,["In Progress"])),(l()(),t.qb(94,0,null,null,3,"option",[["value","3"]],null,null,null,null,null)),t.pb(95,147456,null,0,R.t,[t.k,t.E,[2,R.v]],{value:[0,"value"]},null),t.pb(96,147456,null,0,R.E,[t.k,t.E,[8,null]],{value:[0,"value"]},null),(l()(),t.Ib(-1,null,["To Do"]))],function(l,n){var u=n.component;l(n,3,0,u.formGroup),l(n,14,0,u.editing);var t=l(n,19,0,u.name.invalid&&(u.name.dirty||u.name.touched),u.name.valid);l(n,18,0,"form-group",t),l(n,25,0,"name"),l(n,29,0,u.name.invalid&&(u.name.dirty||u.name.touched)&&u.name.errors.required),l(n,31,0,u.name.invalid&&(u.name.dirty||u.name.touched)&&u.name.errors.minlength),l(n,33,0,u.name.invalid&&(u.name.dirty||u.name.touched)&&u.name.errors.maxlength),l(n,38,0,"Do Quest"),l(n,40,0,"content"),l(n,48,0,"accepted"),l(n,58,0,"available"),l(n,68,0,"visible"),l(n,79,0,"status"),l(n,83,0,"0"),l(n,84,0,"0"),l(n,87,0,"1"),l(n,88,0,"1"),l(n,91,0,"2"),l(n,92,0,"2"),l(n,95,0,"3"),l(n,96,0,"3")},function(l,n){var u=n.component;l(n,1,0,t.Ab(n,5).ngClassUntouched,t.Ab(n,5).ngClassTouched,t.Ab(n,5).ngClassPristine,t.Ab(n,5).ngClassDirty,t.Ab(n,5).ngClassValid,t.Ab(n,5).ngClassInvalid,t.Ab(n,5).ngClassPending),l(n,9,0,u.editing?"Edit":"Create"),l(n,15,0,u.formGroup.invalid),l(n,22,0,t.Ab(n,27).ngClassUntouched,t.Ab(n,27).ngClassTouched,t.Ab(n,27).ngClassPristine,t.Ab(n,27).ngClassDirty,t.Ab(n,27).ngClassValid,t.Ab(n,27).ngClassInvalid,t.Ab(n,27).ngClassPending),l(n,37,0,t.Ab(n,42).ngClassUntouched,t.Ab(n,42).ngClassTouched,t.Ab(n,42).ngClassPristine,t.Ab(n,42).ngClassDirty,t.Ab(n,42).ngClassValid,t.Ab(n,42).ngClassInvalid,t.Ab(n,42).ngClassPending),l(n,45,0,t.Ab(n,50).ngClassUntouched,t.Ab(n,50).ngClassTouched,t.Ab(n,50).ngClassPristine,t.Ab(n,50).ngClassDirty,t.Ab(n,50).ngClassValid,t.Ab(n,50).ngClassInvalid,t.Ab(n,50).ngClassPending),l(n,55,0,t.Ab(n,60).ngClassUntouched,t.Ab(n,60).ngClassTouched,t.Ab(n,60).ngClassPristine,t.Ab(n,60).ngClassDirty,t.Ab(n,60).ngClassValid,t.Ab(n,60).ngClassInvalid,t.Ab(n,60).ngClassPending),l(n,65,0,t.Ab(n,70).ngClassUntouched,t.Ab(n,70).ngClassTouched,t.Ab(n,70).ngClassPristine,t.Ab(n,70).ngClassDirty,t.Ab(n,70).ngClassValid,t.Ab(n,70).ngClassInvalid,t.Ab(n,70).ngClassPending),l(n,76,0,t.Ab(n,81).ngClassUntouched,t.Ab(n,81).ngClassTouched,t.Ab(n,81).ngClassPristine,t.Ab(n,81).ngClassDirty,t.Ab(n,81).ngClassValid,t.Ab(n,81).ngClassInvalid,t.Ab(n,81).ngClassPending)})}function Ha(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,1,"dd-quest-form",[],null,null,null,Va,Ka)),t.pb(1,114688,null,0,Fa,[r.k,r.a,f.b,Yn.a,p.g],null,null)],function(l,n){l(n,1,0)},null)}var $a=t.mb("dd-quest-form",Fa,Ha,{},{},[]),Ba=u("sJeg"),za=u("Kjs6"),Xa=u("a8fi"),Qa=function(){function l(l,n,u,t,e){this.router=l,this.route=n,this.questService=u,this.campaignService=t,this.noteService=e,this.loading=!1}return l.prototype.ngOnInit=function(){var l=this;this.route.paramMap.subscribe(function(n){n.get("q_id")&&(l.quest=void 0,l.loadQuest(n.get("q_id")))})},l.prototype.loadQuest=function(l){return n=this,void 0,t=function(){var n,u;return function(l,n){var u,t,e,i,o={label:0,sent:function(){if(1&e[0])throw e[1];return e[1]},trys:[],ops:[]};return i={next:r(0),throw:r(1),return:r(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function r(i){return function(r){return function(i){if(u)throw new TypeError("Generator is already executing.");for(;o;)try{if(u=1,t&&(e=2&i[0]?t.return:i[0]?t.throw||((e=t.return)&&e.call(t),0):t.next)&&!(e=e.call(t,i[1])).done)return e;switch(t=0,e&&(i=[2&i[0],e.value]),i[0]){case 0:case 1:e=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,t=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!(e=(e=o.trys).length>0&&e[e.length-1])&&(6===i[0]||2===i[0])){o=0;continue}if(3===i[0]&&(!e||i[1]>e[0]&&i[1]<e[3])){o.label=i[1];break}if(6===i[0]&&o.label<e[1]){o.label=e[1],e=i;break}if(e&&o.label<e[2]){o.label=e[2],o.ops.push(i);break}e[2]&&o.ops.pop(),o.trys.pop();continue}i=n.call(l,o)}catch(r){i=[6,r],t=0}finally{u=e=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,r])}}}(this,function(t){switch(t.label){case 0:this.loading=!0,t.label=1;case 1:return t.trys.push([1,3,,4]),n=this,[4,this.questService.getQuest(l)];case 2:return n.quest=t.sent(),this.noteService.getNotes(this.campaignService.campaign.id,{questId:this.quest.id}),[3,4];case 3:return u=t.sent(),this.loadError=u,[3,4];case 4:return this.loading=!1,[2]}})},new((u=void 0)||(u=Promise))(function(l,e){function i(l){try{r(t.next(l))}catch(n){e(n)}}function o(l){try{r(t.throw(l))}catch(n){e(n)}}function r(n){n.done?l(n.value):new u(function(l){l(n.value)}).then(i,o)}r((t=t.apply(n,[])).next())});var n,u,t},l.prototype.addNote=function(){this.noteService.addNote({type:Xa.b.QUEST,questId:this.quest.id})},l.prototype.edit=function(){this.editable&&this.router.navigate(["campaigns",this.campaignService.campaign.id,"quests",this.quest.id,"edit"])},Object.defineProperty(l.prototype,"editable",{get:function(){return this.campaignService.canEdit},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"notes",{get:function(){return this.quest?this.noteService.getQuestNotes(this.quest.id):[]},enumerable:!0,configurable:!0}),l}(),Ya=t.ob({encapsulation:0,styles:[[""]],data:{}});function Wa(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,0,"div",[["class","loading loading-lg"]],null,null,null,null,null))],null,null)}function Za(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,1,"dd-http-errors",[],null,null,null,oo.b,oo.a)),t.pb(1,114688,null,0,ro.a,[],{error:[0,"error"]},null)],function(l,n){l(n,1,0,n.component.loadError)},null)}function Ja(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,0,"i",[["class","icon icon-flag"]],null,null,null,null,null))],null,null)}function lc(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,3,"button",[["class","btn btn-sm"]],null,[[null,"click"]],function(l,n,u){var t=!0,e=l.component;return"click"===n&&(t=!1!==e.edit()&&t),t},null,null)),(l()(),t.qb(1,0,null,null,0,"i",[["class","icon icon-edit"]],null,null,null,null,null)),(l()(),t.qb(2,0,null,null,1,"span",[["class","hide-sm"]],null,null,null,null,null)),(l()(),t.Ib(-1,null,[" Edit"]))],null,null)}function nc(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,18,"div",[],null,null,null,null,null)),(l()(),t.qb(1,0,null,null,12,"div",[["class","columns"]],null,null,null,null,null)),(l()(),t.qb(2,0,null,null,4,"div",[["class","column"]],null,null,null,null,null)),(l()(),t.qb(3,0,null,null,3,"h3",[],null,null,null,null,null)),(l()(),t.hb(16777216,null,null,1,null,Ja)),t.pb(5,16384,null,0,p.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null),(l()(),t.Ib(6,null,[" ",""])),(l()(),t.qb(7,0,null,null,6,"div",[["class","column col-auto col-ml-auto"]],null,null,null,null,null)),(l()(),t.qb(8,0,null,null,3,"button",[["class","btn btn-sm mr-2"]],null,[[null,"click"]],function(l,n,u){var t=!0,e=l.component;return"click"===n&&(t=!1!==e.addNote()&&t),t},null,null)),(l()(),t.qb(9,0,null,null,0,"i",[["class","icon icon-link"]],null,null,null,null,null)),(l()(),t.qb(10,0,null,null,1,"span",[["class","hide-sm"]],null,null,null,null,null)),(l()(),t.Ib(-1,null,[" Add Note"])),(l()(),t.hb(16777216,null,null,1,null,lc)),t.pb(13,16384,null,0,p.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null),(l()(),t.qb(14,0,null,null,2,"dd-quill",[["readOnly","true"]],null,null,null,Sl.b,Sl.a)),t.Fb(5120,null,R.o,function(l){return[l]},[Ol.a]),t.pb(16,1163264,null,0,Ol.a,[f.b,Ml.a,b.a,r.k,P.c,_l.b,Dl.a,Nl.a],{readOnly:[0,"readOnly"],value:[1,"value"]},null),(l()(),t.qb(17,0,null,null,1,"dd-note-list",[],null,null,null,Ba.b,Ba.a)),t.pb(18,114688,null,0,za.a,[Xa.a,f.b,b.a],{notes:[0,"notes"]},null)],function(l,n){var u=n.component;l(n,5,0,u.quest.accepted),l(n,13,0,u.editable),l(n,16,0,"true",u.quest.content),l(n,18,0,u.notes)},function(l,n){l(n,6,0,n.component.quest.name)})}function uc(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,6,"div",[["class","container grid-lg"]],null,null,null,null,null)),(l()(),t.hb(16777216,null,null,1,null,Wa)),t.pb(2,16384,null,0,p.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null),(l()(),t.hb(16777216,null,null,1,null,Za)),t.pb(4,16384,null,0,p.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null),(l()(),t.hb(16777216,null,null,1,null,nc)),t.pb(6,16384,null,0,p.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null)],function(l,n){var u=n.component;l(n,2,0,u.loading),l(n,4,0,u.loadError),l(n,6,0,u.quest)},null)}function tc(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,1,"dd-quest-view",[],null,null,null,uc,Ya)),t.pb(1,114688,null,0,Qa,[r.k,r.a,Yn.a,f.b,Xa.a],null,null)],function(l,n){l(n,1,0)},null)}var ec=t.mb("dd-quest-view",Qa,tc,{},{},[]),ic=function(){return(ic=Object.assign||function(l){for(var n,u=1,t=arguments.length;u<t;u++)for(var e in n=arguments[u])Object.prototype.hasOwnProperty.call(n,e)&&(l[e]=n[e]);return l}).apply(this,arguments)},oc=function(l,n,u,t){return new(u||(u=Promise))(function(e,i){function o(l){try{a(t.next(l))}catch(n){i(n)}}function r(l){try{a(t.throw(l))}catch(n){i(n)}}function a(l){l.done?e(l.value):new u(function(n){n(l.value)}).then(o,r)}a((t=t.apply(l,n||[])).next())})},rc=function(l,n){var u,t,e,i,o={label:0,sent:function(){if(1&e[0])throw e[1];return e[1]},trys:[],ops:[]};return i={next:r(0),throw:r(1),return:r(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function r(i){return function(r){return function(i){if(u)throw new TypeError("Generator is already executing.");for(;o;)try{if(u=1,t&&(e=2&i[0]?t.return:i[0]?t.throw||((e=t.return)&&e.call(t),0):t.next)&&!(e=e.call(t,i[1])).done)return e;switch(t=0,e&&(i=[2&i[0],e.value]),i[0]){case 0:case 1:e=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,t=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!(e=(e=o.trys).length>0&&e[e.length-1])&&(6===i[0]||2===i[0])){o=0;continue}if(3===i[0]&&(!e||i[1]>e[0]&&i[1]<e[3])){o.label=i[1];break}if(6===i[0]&&o.label<e[1]){o.label=e[1],e=i;break}if(e&&o.label<e[2]){o.label=e[2],o.ops.push(i);break}e[2]&&o.ops.pop(),o.trys.pop();continue}i=n.call(l,o)}catch(r){i=[6,r],t=0}finally{u=e=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,r])}}},ac=function(){function l(l){this.campaignService=l,this.loading=!1,this.creatingInvite=!1}return l.prototype.ngOnInit=function(){this.loadInvites()},l.prototype.createInvite=function(){return oc(this,void 0,void 0,function(){var l,n;return rc(this,function(u){switch(u.label){case 0:this.creatingInvite=!0,l=new eu.Chance,u.label=1;case 1:return u.trys.push([1,3,,4]),[4,this.campaignService.createInvite(l.state({full:!0,territories:!0})+" "+l.animal())];case 2:return n=u.sent(),this.invites.push(n),[3,4];case 3:throw u.sent();case 4:return this.creatingInvite=!1,[2]}})})},l.prototype.revokeInvite=function(l){return oc(this,void 0,void 0,function(){var n;return rc(this,function(u){switch(u.label){case 0:return u.trys.push([0,2,,3]),n=ic({},l,{status:f.a.REVOKED}),[4,this.campaignService.updateInvite(n)];case 1:return u.sent(),l.status=n.status,[3,3];case 2:throw u.sent();case 3:return[2]}})})},l.prototype.getInviteLink=function(l){return location.protocol+"//"+location.host+"/invite/"+l},l.prototype.loadInvites=function(){return oc(this,void 0,void 0,function(){var l;return rc(this,function(n){switch(n.label){case 0:this.loading=!0,n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.campaignService.getInvites()];case 2:return l=n.sent(),this.invites=l,[3,4];case 3:throw n.sent();case 4:return this.loading=!1,[2]}})})},l}(),cc=t.ob({encapsulation:0,styles:[[""]],data:{}});function sc(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,0,"div",[["class","loading"]],null,null,null,null,null))],null,null)}function pc(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,11,"div",[["class","empty"]],null,null,null,null,null)),(l()(),t.qb(1,0,null,null,1,"div",[["class","empty-icon"]],null,null,null,null,null)),(l()(),t.qb(2,0,null,null,0,"i",[["class","icon icon-people icon-4x"]],null,null,null,null,null)),(l()(),t.qb(3,0,null,null,1,"p",[["class","empty-title h5"]],null,null,null,null,null)),(l()(),t.Ib(-1,null,["There are no invites"])),(l()(),t.qb(5,0,null,null,1,"p",[["class","empty-subtitle"]],null,null,null,null,null)),(l()(),t.Ib(-1,null,["Click the button below to create one"])),(l()(),t.qb(7,0,null,null,4,"div",[["class","empty-action"]],null,null,null,null,null)),(l()(),t.qb(8,0,null,null,3,"button",[["class","btn btn-primary"]],null,[[null,"click"]],function(l,n,u){var t=!0,e=l.component;return"click"===n&&(t=!1!==e.createInvite()&&t),t},null,null)),t.pb(9,278528,null,0,p.i,[t.t,t.u,t.k,t.E],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),t.Db(10,{loading:0}),(l()(),t.Ib(-1,null,[" Create invite "]))],function(l,n){var u=l(n,10,0,n.component.creatingInvite);l(n,9,0,"btn btn-primary",u)},null)}function bc(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,5,"button",[["class","btn btn-sm"]],null,[[null,"click"]],function(l,n,u){var t=!0,e=l.component;return"click"===n&&(t=!1!==e.createInvite()&&t),t},null,null)),t.pb(1,278528,null,0,p.i,[t.t,t.u,t.k,t.E],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),t.Db(2,{loading:0}),(l()(),t.qb(3,0,null,null,0,"i",[["class","icon icon-plus"]],null,null,null,null,null)),(l()(),t.qb(4,0,null,null,1,"span",[["class","hide-sm"]],null,null,null,null,null)),(l()(),t.Ib(-1,null,[" Create Invite"]))],function(l,n){var u=l(n,2,0,n.component.creatingInvite);l(n,1,0,"btn btn-sm",u)},null)}function dc(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,1,"span",[],null,null,null,null,null)),(l()(),t.Ib(-1,null,["Pending"]))],null,null)}function fc(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,1,"span",[],null,null,null,null,null)),(l()(),t.Ib(-1,null,["Revoked"]))],null,null)}function hc(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,1,"span",[],null,null,null,null,null)),(l()(),t.Ib(-1,null,["Accepted"]))],null,null)}function gc(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,1,"span",[],null,null,null,null,null)),(l()(),t.Ib(-1,null,["Declined"]))],null,null)}function mc(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,1,"span",[],null,null,null,null,null)),(l()(),t.Ib(-1,null,["N/A"]))],null,null)}function vc(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,2,"button",[["class","btn btn-link btn-sm"]],null,[[null,"click"]],function(l,n,u){var t=!0,e=l.component;return"click"===n&&(t=!1!==e.revokeInvite(l.parent.context.$implicit)&&t),t},null,null)),(l()(),t.qb(1,0,null,null,0,"i",[["class","icon icon-cross"]],null,null,null,null,null)),(l()(),t.Ib(-1,null,["Revoke "]))],null,null)}function yc(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,23,"tr",[],null,null,null,null,null)),(l()(),t.qb(1,0,null,null,2,"td",[],null,null,null,null,null)),(l()(),t.qb(2,0,null,null,1,"a",[],[[8,"href",4]],null,null,null,null)),(l()(),t.Ib(-1,null,["Link"])),(l()(),t.qb(4,0,null,null,1,"td",[],null,null,null,null,null)),(l()(),t.Ib(5,null,["",""])),(l()(),t.qb(6,0,null,null,9,"td",[],null,null,null,null,null)),t.pb(7,16384,null,0,p.n,[],{ngSwitch:[0,"ngSwitch"]},null),(l()(),t.hb(16777216,null,null,1,null,dc)),t.pb(9,278528,null,0,p.o,[t.P,t.M,p.n],{ngSwitchCase:[0,"ngSwitchCase"]},null),(l()(),t.hb(16777216,null,null,1,null,fc)),t.pb(11,278528,null,0,p.o,[t.P,t.M,p.n],{ngSwitchCase:[0,"ngSwitchCase"]},null),(l()(),t.hb(16777216,null,null,1,null,hc)),t.pb(13,278528,null,0,p.o,[t.P,t.M,p.n],{ngSwitchCase:[0,"ngSwitchCase"]},null),(l()(),t.hb(16777216,null,null,1,null,gc)),t.pb(15,278528,null,0,p.o,[t.P,t.M,p.n],{ngSwitchCase:[0,"ngSwitchCase"]},null),(l()(),t.qb(16,0,null,null,4,"td",[],null,null,null,null,null)),(l()(),t.qb(17,0,null,null,1,"div",[],[[8,"innerHTML",1]],null,null,null,null)),t.pb(18,16384,null,0,Q.a,[Y.c],{user:[0,"user"]},null),(l()(),t.hb(16777216,null,null,1,null,mc)),t.pb(20,16384,null,0,p.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null),(l()(),t.qb(21,0,null,null,2,"td",[],null,null,null,null,null)),(l()(),t.hb(16777216,null,null,1,null,vc)),t.pb(23,16384,null,0,p.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null)],function(l,n){l(n,7,0,n.context.$implicit.status),l(n,9,0,0),l(n,11,0,1),l(n,13,0,2),l(n,15,0,3),l(n,18,0,n.context.$implicit.user),l(n,20,0,!n.context.$implicit.user),l(n,23,0,0===n.context.$implicit.status)},function(l,n){l(n,2,0,n.component.getInviteLink(n.context.$implicit.id)),l(n,5,0,n.context.$implicit.name),l(n,17,0,t.Ab(n,18).html)})}function Cc(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,14,"table",[["class","table"]],null,null,null,null,null)),(l()(),t.qb(1,0,null,null,10,"thead",[],null,null,null,null,null)),(l()(),t.qb(2,0,null,null,9,"tr",[],null,null,null,null,null)),(l()(),t.qb(3,0,null,null,1,"th",[],null,null,null,null,null)),(l()(),t.Ib(-1,null,["Link"])),(l()(),t.qb(5,0,null,null,1,"th",[],null,null,null,null,null)),(l()(),t.Ib(-1,null,["Name"])),(l()(),t.qb(7,0,null,null,1,"th",[],null,null,null,null,null)),(l()(),t.Ib(-1,null,["Status"])),(l()(),t.qb(9,0,null,null,1,"th",[],null,null,null,null,null)),(l()(),t.Ib(-1,null,["User"])),(l()(),t.qb(11,0,null,null,0,"th",[],null,null,null,null,null)),(l()(),t.qb(12,0,null,null,2,"tbody",[],null,null,null,null,null)),(l()(),t.hb(16777216,null,null,1,null,yc)),t.pb(14,278528,null,0,p.j,[t.P,t.M,t.t],{ngForOf:[0,"ngForOf"]},null)],function(l,n){l(n,14,0,n.component.invites)},null)}function Ic(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,11,"div",[],null,null,null,null,null)),(l()(),t.hb(16777216,null,null,1,null,pc)),t.pb(2,16384,null,0,p.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null),(l()(),t.qb(3,0,null,null,6,"div",[["class","columns"]],null,null,null,null,null)),(l()(),t.qb(4,0,null,null,2,"div",[["class","column"]],null,null,null,null,null)),(l()(),t.qb(5,0,null,null,1,"h4",[["class","mb-0"]],null,null,null,null,null)),(l()(),t.Ib(-1,null,["Invites"])),(l()(),t.qb(7,0,null,null,2,"div",[["class","column col-auto"]],null,null,null,null,null)),(l()(),t.hb(16777216,null,null,1,null,bc)),t.pb(9,16384,null,0,p.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null),(l()(),t.hb(16777216,null,null,1,null,Cc)),t.pb(11,16384,null,0,p.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null)],function(l,n){var u=n.component;l(n,2,0,0===u.invites.length),l(n,9,0,u.invites.length>0),l(n,11,0,u.invites.length>0)},null)}function qc(l){return t.Kb(0,[(l()(),t.hb(16777216,null,null,1,null,sc)),t.pb(1,16384,null,0,p.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null),(l()(),t.hb(16777216,null,null,1,null,Ic)),t.pb(3,16384,null,0,p.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null)],function(l,n){var u=n.component;l(n,1,0,u.loading),l(n,3,0,u.invites)},null)}var kc=function(){function l(l){this.campaignService=l}return l.prototype.ngOnInit=function(){},l.prototype.remove=function(l){return n=this,void 0,t=function(){return function(l,n){var u,t,e,i,o={label:0,sent:function(){if(1&e[0])throw e[1];return e[1]},trys:[],ops:[]};return i={next:r(0),throw:r(1),return:r(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function r(i){return function(r){return function(i){if(u)throw new TypeError("Generator is already executing.");for(;o;)try{if(u=1,t&&(e=2&i[0]?t.return:i[0]?t.throw||((e=t.return)&&e.call(t),0):t.next)&&!(e=e.call(t,i[1])).done)return e;switch(t=0,e&&(i=[2&i[0],e.value]),i[0]){case 0:case 1:e=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,t=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!(e=(e=o.trys).length>0&&e[e.length-1])&&(6===i[0]||2===i[0])){o=0;continue}if(3===i[0]&&(!e||i[1]>e[0]&&i[1]<e[3])){o.label=i[1];break}if(6===i[0]&&o.label<e[1]){o.label=e[1],e=i;break}if(e&&o.label<e[2]){o.label=e[2],o.ops.push(i);break}e[2]&&o.ops.pop(),o.trys.pop();continue}i=n.call(l,o)}catch(r){i=[6,r],t=0}finally{u=e=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,r])}}}(this,function(n){switch(n.label){case 0:return[4,dn.a.fire({titleText:"Are you sure?",showCancelButton:!0})];case 1:if(!0!==n.sent().value)return[3,5];this.campaignService.campaign.members=this.campaignService.campaign.members.filter(function(n){return!(n.userId===l.userId&&n.campaignId===l.campaignId)}),n.label=2;case 2:return n.trys.push([2,4,,5]),[4,this.campaignService.removeMember(l)];case 3:return n.sent(),[3,5];case 4:throw n.sent();case 5:return[2]}})},new((u=void 0)||(u=Promise))(function(l,e){function i(l){try{r(t.next(l))}catch(n){e(n)}}function o(l){try{r(t.throw(l))}catch(n){e(n)}}function r(n){n.done?l(n.value):new u(function(l){l(n.value)}).then(i,o)}r((t=t.apply(n,[])).next())});var n,u,t},Object.defineProperty(l.prototype,"members",{get:function(){return this.campaignService.campaign.members},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"campaign",{get:function(){return this.campaignService.campaign},enumerable:!0,configurable:!0}),l}(),Ac=t.ob({encapsulation:0,styles:[[".big-space[_ngcontent-%COMP%]{margin-top:2rem}"]],data:{}});function wc(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,1,"span",[["class","fake-link"]],null,[[null,"click"]],function(l,n,u){var t=!0,e=l.component;return"click"===n&&(t=!1!==e.remove(l.parent.context.$implicit)&&t),t},null,null)),(l()(),t.Ib(-1,null,["Remove"]))],null,null)}function Pc(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,9,"tr",[],null,null,null,null,null)),t.pb(1,278528,null,0,p.i,[t.t,t.u,t.k,t.E],{ngClass:[0,"ngClass"]},null),t.Db(2,{faded:0}),(l()(),t.qb(3,0,null,null,1,"td",[],[[8,"innerHTML",1]],null,null,null,null)),t.pb(4,16384,null,0,Q.a,[Y.c],{user:[0,"user"]},null),(l()(),t.qb(5,0,null,null,1,"td",[],null,null,null,null,null)),(l()(),t.Ib(-1,null,["A Date"])),(l()(),t.qb(7,0,null,null,2,"td",[],null,null,null,null,null)),(l()(),t.hb(16777216,null,null,1,null,wc)),t.pb(9,16384,null,0,p.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null)],function(l,n){var u=n.component,t=l(n,2,0,n.context.$implicit.userId===u.campaign.userId);l(n,1,0,t),l(n,4,0,n.context.$implicit.user),l(n,9,0,n.context.$implicit.userId!==u.campaign.userId)},function(l,n){l(n,3,0,t.Ab(n,4).html)})}function xc(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,19,"div",[["class","container grid-xl"]],null,null,null,null,null)),(l()(),t.qb(1,0,null,null,4,"div",[["class","columns"]],null,null,null,null,null)),(l()(),t.qb(2,0,null,null,2,"div",[["class","column"]],null,null,null,null,null)),(l()(),t.qb(3,0,null,null,1,"h3",[["class","mb-0"]],null,null,null,null,null)),(l()(),t.Ib(-1,null,["Members"])),(l()(),t.qb(5,0,null,null,0,"div",[["class","column col-auto"]],null,null,null,null,null)),(l()(),t.qb(6,0,null,null,10,"table",[["class","table"]],null,null,null,null,null)),(l()(),t.qb(7,0,null,null,6,"thead",[],null,null,null,null,null)),(l()(),t.qb(8,0,null,null,1,"th",[],null,null,null,null,null)),(l()(),t.Ib(-1,null,["User"])),(l()(),t.qb(10,0,null,null,1,"th",[],null,null,null,null,null)),(l()(),t.Ib(-1,null,["Added On"])),(l()(),t.qb(12,0,null,null,1,"th",[],null,null,null,null,null)),(l()(),t.Ib(-1,null,["Remove"])),(l()(),t.qb(14,0,null,null,2,"tbody",[],null,null,null,null,null)),(l()(),t.hb(16777216,null,null,1,null,Pc)),t.pb(16,278528,null,0,p.j,[t.P,t.M,t.t],{ngForOf:[0,"ngForOf"]},null),(l()(),t.qb(17,0,null,null,2,"div",[["class","big-space"]],null,null,null,null,null)),(l()(),t.qb(18,0,null,null,1,"dd-invite-manager",[],null,null,null,qc,cc)),t.pb(19,114688,null,0,ac,[f.b],null,null)],function(l,n){l(n,16,0,n.component.members),l(n,19,0)},null)}function Ec(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,1,"dd-member-manager",[],null,null,null,xc,Ac)),t.pb(1,114688,null,0,kc,[f.b],null,null)],function(l,n){l(n,1,0)},null)}var Tc=t.mb("dd-member-manager",kc,Ec,{},{},[]),Sc=u("XePT"),Oc=u("1Kyw"),Mc=u("+p2H"),_c=u("1p7a"),Dc=u("cFsh"),Nc=u("t53f"),Lc=u("TSOj"),Fc=u("M0Fr"),Kc=t.ob({encapsulation:0,styles:[[""]],data:{}});function jc(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,1,"span",[],null,null,null,null,null)),(l()(),t.Ib(1,null,[" LV ",""]))],null,function(l,n){l(n,1,0,n.component.level)})}function Gc(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,1,"span",[["class","text-gray"]],null,null,null,null,null)),(l()(),t.Ib(-1,null,[" \u2022 "]))],null,null)}function Uc(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,2,"div",[["class","mb-2"]],null,null,null,null,null)),(l()(),t.qb(1,0,null,null,1,"dd-health-display",[],null,null,null,Hu.b,Hu.a)),t.pb(2,114688,null,0,$u.a,[f.b],{editable:[0,"editable"],health:[1,"health"],preset:[2,"preset"],mini:[3,"mini"]},null)],function(l,n){var u=n.component;l(n,2,0,!1,u.entity.health,u.entity.preset.health,!0)},null)}function Rc(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,27,"div",[],null,null,null,null,null)),(l()(),t.qb(1,0,null,null,1,"div",[],null,null,null,null,null)),(l()(),t.qb(2,0,null,null,0,"img",[],[[8,"src",4],[8,"alt",0]],null,null,null,null)),(l()(),t.qb(3,0,null,null,10,"div",[["class","columns"]],null,null,null,null,null)),(l()(),t.qb(4,0,null,null,2,"div",[["class","column"]],null,null,null,null,null)),(l()(),t.qb(5,0,null,null,1,"h5",[["class","mt-0 mb-1"]],null,null,null,null,null)),(l()(),t.Ib(6,null,["",""])),(l()(),t.qb(7,0,null,null,6,"div",[["class","column text-right"]],null,null,null,null,null)),(l()(),t.hb(16777216,null,null,1,null,jc)),t.pb(9,16384,null,0,p.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null),(l()(),t.hb(16777216,null,null,1,null,Gc)),t.pb(11,16384,null,0,p.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null),(l()(),t.qb(12,0,null,null,1,"span",[["class","text-italic"]],null,null,null,null,null)),(l()(),t.Ib(13,null,["",""])),(l()(),t.hb(16777216,null,null,1,null,Uc)),t.pb(15,16384,null,0,p.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null),(l()(),t.qb(16,0,null,null,11,"div",[["class","columns"]],null,null,null,null,null)),(l()(),t.qb(17,0,null,null,2,"div",[["class","column col-auto mt-auto"]],null,null,null,null,null)),(l()(),t.qb(18,0,null,null,1,"div",[],[[8,"innerHTML",1]],null,null,null,null)),t.pb(19,16384,null,0,Q.a,[Y.c],{user:[0,"user"]},null),(l()(),t.qb(20,0,null,null,7,"div",[["class","column col-auto col-ml-auto"]],null,null,null,null,null)),(l()(),t.qb(21,0,null,null,3,"button",[["class","btn btn-sm btn-error mr-1 tooltip"],["data-tooltip","Remove from map"]],null,[[null,"click"]],function(l,n,u){var t=!0,e=l.component;return"click"===n&&(t=!1!==e.removeFromMap()&&t),t},null,null)),t.pb(22,278528,null,0,p.i,[t.t,t.u,t.k,t.E],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),t.Db(23,{loading:0}),(l()(),t.qb(24,0,null,null,0,"i",[["class","icon icon-cross"]],null,null,null,null,null)),(l()(),t.qb(25,0,null,null,2,"button",[["class","btn btn-sm"]],null,[[null,"click"]],function(l,n,u){var t=!0,e=l.component;return"click"===n&&(t=!1!==e.viewMore()&&t),t},null,null)),(l()(),t.Ib(-1,null,["More "])),(l()(),t.qb(27,0,null,null,0,"i",[["class","icon icon-arrow-right"]],null,null,null,null,null))],function(l,n){var u=n.component;l(n,9,0,u.entity.preset.isXPEnabled),l(n,11,0,u.entity.preset.isXPEnabled),l(n,15,0,u.entity.preset.isHealthEnabled),l(n,19,0,u.user);var t=l(n,23,0,u.removing);l(n,22,0,"btn btn-sm btn-error mr-1 tooltip",t)},function(l,n){var u=n.component;l(n,2,0,t.sb(1,"https://res.cloudinary.com/dqhk8k6iv/image/upload/bo_1px_solid_rgb:000000,c_lfill,g_faces:auto,h_20,r_0,w_250/",u.entity.imageId,""),t.sb(1,"Picture Of ",u.entity.name,"")),l(n,6,0,u.entity.name),l(n,13,0,u.entity.preset.name),l(n,18,0,t.Ab(n,19).html)})}function Vc(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,1,"dd-entity-view-mini",[],null,null,null,Rc,Kc)),t.pb(1,114688,null,0,Fc.a,[f.b,b.a,r.k,ct.b],null,null)],function(l,n){l(n,1,0)},null)}var Hc=t.mb("dd-entity-view-mini",Fc.a,Vc,{entity:"entity"},{},[]),$c=u("VnD/"),Bc=function(){function l(l,n){this.login=l,this.updateHub=n,this.cursorUpdates=new t.m,this.deltaUpdates=new t.m,this.noteChange=new t.m,this.editable=!1,this.advancedEditable=!1}return Object.defineProperty(l.prototype,"note",{get:function(){return this._note},set:function(l){this._note=l,this.formGroup&&this.formGroup.patchValue(l)},enumerable:!0,configurable:!0}),l.prototype.ngOnInit=function(){var l=this;this.formGroup=new R.k({content:new R.h(this.note.content),title:new R.h(this.note.title),publicView:new R.h(this.note.publicView),publicEdit:new R.h(this.note.publicEdit)}),this.note.title="Placeholder",this.formGroup.valueChanges.subscribe(function(n){l.note.title=n.title||"Placeholder",l.note.publicEdit=n.publicEdit,l.note.publicView=n.publicView,l.note.content=n.content,l.noteChange.emit(l.note)}),this.updateHub.subscribeNote(this.note.id),this.updateHub.stateUpdate.subscribe(function(n){n===st.a.CONNECTED&&l.updateHub.subscribeNote(l.note.id)}),this.updateHub.cursorUpdate.pipe(Object($c.a)(function(n){return n.noteId===l.note.id})).subscribe(function(n){l.cursorUpdates.emit(n)}),this.updateHub.noteDeltaUpdate.pipe(Object($c.a)(function(n){return n.id===l.note.id})).subscribe(function(n){l.deltaUpdates.emit(n.delta)})},l.prototype.ngOnDestroy=function(){this.updateHub.sendNoteCursorUpdate(this.note.id,null),this.updateHub.unsubscribeNote(this.note.id)},l.prototype.textChange=function(l){this.note.publicEdit&&this.updateHub.sendNoteDeltaUpdate(this.note.id,l)},l.prototype.selectionChange=function(l){this.note.publicEdit&&this.updateHub.sendNoteCursorUpdate(this.note.id,l)},l}(),zc=t.ob({encapsulation:0,styles:[[""]],data:{}});function Xc(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,6,"div",[["class","form-group"]],null,null,null,null,null)),(l()(),t.qb(1,0,null,null,5,"input",[["class","form-input input-sm"],["formControlName","title"],["placeholder","Title"],["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(l,n,u){var e=!0;return"input"===n&&(e=!1!==t.Ab(l,2)._handleInput(u.target.value)&&e),"blur"===n&&(e=!1!==t.Ab(l,2).onTouched()&&e),"compositionstart"===n&&(e=!1!==t.Ab(l,2)._compositionStart()&&e),"compositionend"===n&&(e=!1!==t.Ab(l,2)._compositionEnd(u.target.value)&&e),e},null,null)),t.pb(2,16384,null,0,R.d,[t.E,t.k,[2,R.a]],null,null),t.Fb(1024,null,R.o,function(l){return[l]},[R.d]),t.pb(4,671744,null,0,R.j,[[3,R.c],[8,null],[8,null],[6,R.o],[2,R.D]],{name:[0,"name"]},null),t.Fb(2048,null,R.p,null,[R.j]),t.pb(6,16384,null,0,R.q,[[4,R.p]],null,null)],function(l,n){l(n,4,0,"title")},function(l,n){l(n,1,0,t.Ab(n,6).ngClassUntouched,t.Ab(n,6).ngClassTouched,t.Ab(n,6).ngClassPristine,t.Ab(n,6).ngClassDirty,t.Ab(n,6).ngClassValid,t.Ab(n,6).ngClassInvalid,t.Ab(n,6).ngClassPending)})}function Qc(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,9,"div",[["class","form-group"]],null,null,null,null,null)),(l()(),t.qb(1,0,null,null,8,"label",[["class","form-switch"]],null,null,null,null,null)),(l()(),t.qb(2,0,null,null,5,"input",[["formControlName","publicView"],["type","checkbox"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"change"],[null,"blur"]],function(l,n,u){var e=!0;return"change"===n&&(e=!1!==t.Ab(l,3).onChange(u.target.checked)&&e),"blur"===n&&(e=!1!==t.Ab(l,3).onTouched()&&e),e},null,null)),t.pb(3,16384,null,0,R.b,[t.E,t.k],null,null),t.Fb(1024,null,R.o,function(l){return[l]},[R.b]),t.pb(5,671744,null,0,R.j,[[3,R.c],[8,null],[8,null],[6,R.o],[2,R.D]],{name:[0,"name"]},null),t.Fb(2048,null,R.p,null,[R.j]),t.pb(7,16384,null,0,R.q,[[4,R.p]],null,null),(l()(),t.qb(8,0,null,null,0,"i",[["class","form-icon"]],null,null,null,null,null)),(l()(),t.Ib(-1,null,[" This note is publicly visible "]))],function(l,n){l(n,5,0,"publicView")},function(l,n){l(n,2,0,t.Ab(n,7).ngClassUntouched,t.Ab(n,7).ngClassTouched,t.Ab(n,7).ngClassPristine,t.Ab(n,7).ngClassDirty,t.Ab(n,7).ngClassValid,t.Ab(n,7).ngClassInvalid,t.Ab(n,7).ngClassPending)})}function Yc(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,9,"div",[["class","form-group"]],null,null,null,null,null)),(l()(),t.qb(1,0,null,null,8,"label",[["class","form-switch"]],null,null,null,null,null)),(l()(),t.qb(2,0,null,null,5,"input",[["formControlName","publicEdit"],["type","checkbox"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"change"],[null,"blur"]],function(l,n,u){var e=!0;return"change"===n&&(e=!1!==t.Ab(l,3).onChange(u.target.checked)&&e),"blur"===n&&(e=!1!==t.Ab(l,3).onTouched()&&e),e},null,null)),t.pb(3,16384,null,0,R.b,[t.E,t.k],null,null),t.Fb(1024,null,R.o,function(l){return[l]},[R.b]),t.pb(5,671744,null,0,R.j,[[3,R.c],[8,null],[8,null],[6,R.o],[2,R.D]],{name:[0,"name"]},null),t.Fb(2048,null,R.p,null,[R.j]),t.pb(7,16384,null,0,R.q,[[4,R.p]],null,null),(l()(),t.qb(8,0,null,null,0,"i",[["class","form-icon"]],null,null,null,null,null)),(l()(),t.Ib(-1,null,[" This note is publicly editable "]))],function(l,n){l(n,5,0,"publicEdit")},function(l,n){l(n,2,0,t.Ab(n,7).ngClassUntouched,t.Ab(n,7).ngClassTouched,t.Ab(n,7).ngClassPristine,t.Ab(n,7).ngClassDirty,t.Ab(n,7).ngClassValid,t.Ab(n,7).ngClassInvalid,t.Ab(n,7).ngClassPending)})}function Wc(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,17,"form",[["novalidate",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"submit"],[null,"reset"]],function(l,n,u){var e=!0;return"submit"===n&&(e=!1!==t.Ab(l,2).onSubmit(u)&&e),"reset"===n&&(e=!1!==t.Ab(l,2).onReset()&&e),e},null,null)),t.pb(1,16384,null,0,R.B,[],null,null),t.pb(2,540672,null,0,R.l,[[8,null],[8,null]],{form:[0,"form"]},null),t.Fb(2048,null,R.c,null,[R.l]),t.pb(4,16384,null,0,R.r,[[4,R.c]],null,null),(l()(),t.hb(16777216,null,null,1,null,Xc)),t.pb(6,16384,null,0,p.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null),(l()(),t.qb(7,0,null,null,6,"div",[["class","form-group"]],null,null,null,null,null)),(l()(),t.qb(8,0,null,null,5,"dd-quill",[["formControlName","content"],["simple","true"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"textChange"],[null,"selectionChange"]],function(l,n,u){var t=!0,e=l.component;return"textChange"===n&&(t=!1!==e.textChange(u)&&t),"selectionChange"===n&&(t=!1!==e.selectionChange(u)&&t),t},Sl.b,Sl.a)),t.pb(9,1163264,null,0,Ol.a,[f.b,Ml.a,b.a,r.k,P.c,_l.b,Dl.a,Nl.a],{readOnly:[0,"readOnly"],simple:[1,"simple"],cursorUpdates:[2,"cursorUpdates"],deltaUpdates:[3,"deltaUpdates"]},{textChange:"textChange",selectionChange:"selectionChange"}),t.Fb(1024,null,R.o,function(l){return[l]},[Ol.a]),t.pb(11,671744,null,0,R.j,[[3,R.c],[8,null],[8,null],[6,R.o],[2,R.D]],{name:[0,"name"]},null),t.Fb(2048,null,R.p,null,[R.j]),t.pb(13,16384,null,0,R.q,[[4,R.p]],null,null),(l()(),t.hb(16777216,null,null,1,null,Qc)),t.pb(15,16384,null,0,p.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null),(l()(),t.hb(16777216,null,null,1,null,Yc)),t.pb(17,16384,null,0,p.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null)],function(l,n){var u=n.component;l(n,2,0,u.formGroup),l(n,6,0,u.editable),l(n,9,0,!u.editable,"true",u.cursorUpdates,u.deltaUpdates),l(n,11,0,"content"),l(n,15,0,u.advancedEditable),l(n,17,0,u.advancedEditable)},function(l,n){l(n,0,0,t.Ab(n,4).ngClassUntouched,t.Ab(n,4).ngClassTouched,t.Ab(n,4).ngClassPristine,t.Ab(n,4).ngClassDirty,t.Ab(n,4).ngClassValid,t.Ab(n,4).ngClassInvalid,t.Ab(n,4).ngClassPending),l(n,8,0,t.Ab(n,13).ngClassUntouched,t.Ab(n,13).ngClassTouched,t.Ab(n,13).ngClassPristine,t.Ab(n,13).ngClassDirty,t.Ab(n,13).ngClassValid,t.Ab(n,13).ngClassInvalid,t.Ab(n,13).ngClassPending)})}var Zc=function(l,n,u,t){return new(u||(u=Promise))(function(e,i){function o(l){try{a(t.next(l))}catch(n){i(n)}}function r(l){try{a(t.throw(l))}catch(n){i(n)}}function a(l){l.done?e(l.value):new u(function(n){n(l.value)}).then(o,r)}a((t=t.apply(l,n||[])).next())})},Jc=function(l,n){var u,t,e,i,o={label:0,sent:function(){if(1&e[0])throw e[1];return e[1]},trys:[],ops:[]};return i={next:r(0),throw:r(1),return:r(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function r(i){return function(r){return function(i){if(u)throw new TypeError("Generator is already executing.");for(;o;)try{if(u=1,t&&(e=2&i[0]?t.return:i[0]?t.throw||((e=t.return)&&e.call(t),0):t.next)&&!(e=e.call(t,i[1])).done)return e;switch(t=0,e&&(i=[2&i[0],e.value]),i[0]){case 0:case 1:e=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,t=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!(e=(e=o.trys).length>0&&e[e.length-1])&&(6===i[0]||2===i[0])){o=0;continue}if(3===i[0]&&(!e||i[1]>e[0]&&i[1]<e[3])){o.label=i[1];break}if(6===i[0]&&o.label<e[1]){o.label=e[1],e=i;break}if(e&&o.label<e[2]){o.label=e[2],o.ops.push(i);break}e[2]&&o.ops.pop(),o.trys.pop();continue}i=n.call(l,o)}catch(r){i=[6,r],t=0}finally{u=e=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,r])}}},ls=function(){function l(l,n,u){this.noteService=l,this.campaignService=n,this.loginService=u,this.loading=!1,this.unsaved=!1,this._autosaveInterval=1500,this._lastAutosave=0,this._autosavePromise=null,l.setNoteEditor(this)}return l.prototype.ngOnInit=function(){var l=this;this.noteService.noteUpdate.pipe(Object($c.a)(function(n){return l.note&&n.id===l.note.id})).subscribe(function(n){l.editable||(l.note=n,l._noteForm&&(l._noteForm.note=n))})},l.prototype.createNote=function(l){return Zc(this,void 0,void 0,function(){var n,u;return Jc(this,function(t){switch(t.label){case 0:switch(this.loading=!0,n={title:"UNNAMED_NOTE",userId:this.loginService.id,content:null,campaignId:this.campaignService.campaign.id,publicEdit:!1,publicView:!1},l.type){case Xa.b.QUEST:n.questId=l.questId;break;case Xa.b.MAP:n.mapId=l.mapId,n.lat=l.lat,n.lng=l.lng,n.mapShape=l.mapShape;break;case Xa.b.ARTICLE:n.articleId=l.articleId}t.label=1;case 1:return t.trys.push([1,3,,4]),u=this,[4,this.noteService.createNote(n)];case 2:return u.note=t.sent(),this.note.title="",[3,4];case 3:throw t.sent();case 4:return this.loading=!1,[2]}})})},l.prototype.saveNote=function(){return Zc(this,void 0,void 0,function(){return Jc(this,function(l){switch(l.label){case 0:return null===this._autosavePromise?[3,2]:[4,this._autosavePromise];case 1:l.sent(),l.label=2;case 2:this.loading=!0,l.label=3;case 3:return l.trys.push([3,5,,6]),this._autosavePromise=this.noteService.updateNote(this.note),[4,this._autosavePromise];case 4:return l.sent(),this._autosavePromise=null,[3,6];case 5:throw l.sent();case 6:return this._lastAutosave=Date.now(),this.loading=!1,this.unsaved=!1,[2]}})})},l.prototype.onNoteChange=function(l){var n=this;this.editable&&(Date.now()>this._lastAutosave+this._autosaveInterval?(this.note=l,this.saveNote()):(this.unsaved=!0,void 0!==this._saveTimeout&&clearTimeout(this._saveTimeout),this._saveTimeout=window.setTimeout(function(){n.note=l,n.saveNote(),n._saveTimeout=void 0},this._autosaveInterval)))},l.prototype.addNote=function(l){return Zc(this,void 0,void 0,function(){var n=this;return Jc(this,function(u){switch(u.label){case 0:return[4,this.createNote(l)];case 1:return u.sent(),this.modal.open().then(function(){null===n.note.content&&""===n.note.title&&n.noteService.deleteNote(n.note.id),n.note=void 0}),[2]}})})},l.prototype.editNote=function(l){return Zc(this,void 0,void 0,function(){var n,u=this;return Jc(this,function(t){switch(t.label){case 0:this.modal.open().then(function(){u.note=void 0}),this.loading=!0,t.label=1;case 1:return t.trys.push([1,3,,4]),n=this,[4,this.noteService.getNote(l.id)];case 2:return n.note=t.sent(),[3,4];case 3:throw t.sent();case 4:return this.loading=!1,[2]}})})},l.prototype.delete=function(){return Zc(this,void 0,void 0,function(){var l,n;return Jc(this,function(u){switch(u.label){case 0:return(l=this.note)?[4,dn.a.fire({text:"Are you sure?",showCancelButton:!0})]:[3,2];case 1:l=!0===u.sent().value,u.label=2;case 2:if(!l)return[3,6];u.label=3;case 3:return u.trys.push([3,5,,6]),[4,this.noteService.deleteNote(this.note.id)];case 4:return u.sent(),this.modal.close(null),[3,6];case 5:if(-1===(n=u.sent()).message.indexOf("Cannot close modal"))throw n;return[3,6];case 6:return[2]}})})},Object.defineProperty(l.prototype,"editable",{get:function(){return this.note.userId===this.loginService.id||this.note.publicEdit},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"advancedEditable",{get:function(){return this.note.userId===this.loginService.id},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"user",{get:function(){var l=this;if(!this.note)return null;if(this.note.user)return this.note.user;var n=this.campaignService.campaign.members.find(function(n){return n.userId===l.note.userId});return n&&n.user?n.user:void 0},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"campaign",{get:function(){return this.campaignService.campaign},enumerable:!0,configurable:!0}),l}(),ns=t.ob({encapsulation:0,styles:[[".note-display[_ngcontent-%COMP%]{white-space:pre-line}"]],data:{}});function us(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,1,"div",[["class","d-inline-block ml-2"]],null,null,null,null,null)),(l()(),t.qb(1,0,null,null,0,"div",[["class","loading"]],null,null,null,null,null))],null,null)}function ts(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,0,"i",[["class","icon icon-check"]],null,null,null,null,null))],null,null)}function es(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,0,"i",[["class","icon icon-cross"]],null,null,null,null,null))],null,null)}function is(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,6,"div",[["modal-header",""]],null,null,null,null,null)),(l()(),t.hb(16777216,null,null,1,null,us)),t.pb(2,16384,null,0,p.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null),(l()(),t.hb(16777216,null,null,1,null,ts)),t.pb(4,16384,null,0,p.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null),(l()(),t.hb(16777216,null,null,1,null,es)),t.pb(6,16384,null,0,p.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null)],function(l,n){var u=n.component;l(n,2,0,u.loading),l(n,4,0,!u.loading&&!u.unsaved),l(n,6,0,!u.loading&&u.unsaved)},null)}function os(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,1,"dd-note-form",[],null,[[null,"noteChange"]],function(l,n,u){var t=!0,e=l.component;return"noteChange"===n&&(t=!1!==e.onNoteChange(u)&&t),t},Wc,zc)),t.pb(1,245760,[[2,4],["noteform",4]],0,Bc,[b.a,st.b],{note:[0,"note"],editable:[1,"editable"],advancedEditable:[2,"advancedEditable"]},{noteChange:"noteChange"})],function(l,n){var u=n.component;l(n,1,0,u.note,u.editable,u.advancedEditable)},null)}function rs(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,2,"div",[["modal-body",""]],null,null,null,null,null)),(l()(),t.hb(16777216,null,null,1,null,os)),t.pb(2,16384,null,0,p.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null)],function(l,n){l(n,2,0,n.component.note)},null)}function as(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,2,"div",[["class","column col-auto d-flex align-items-center mr-2"]],null,null,null,null,null)),(l()(),t.qb(1,0,null,null,1,"div",[],[[8,"innerHTML",1]],null,null,null,null)),t.pb(2,16384,null,0,Q.a,[Y.c],{user:[0,"user"]},null)],function(l,n){l(n,2,0,n.component.user)},function(l,n){l(n,1,0,t.Ab(n,2).html)})}function cs(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,4,"button",[["class","btn btn-sm"]],null,[[null,"click"]],function(l,n,u){var e=!0;return"click"===n&&(e=!1!==t.Ab(l,1).onClick()&&e),e},null,null)),t.pb(1,16384,null,0,r.l,[r.k,r.a,[8,null],t.E,t.k],{routerLink:[0,"routerLink"]},null),t.Bb(2,4),(l()(),t.qb(3,0,null,null,0,"i",[["class","icon icon-bookmark"]],null,null,null,null,null)),(l()(),t.Ib(4,null,[" "," "]))],function(l,n){var u=n.component,t=l(n,2,0,"/campaigns",u.campaign.id,"articles",u.note.articleId);l(n,1,0,t)},function(l,n){l(n,4,0,n.component.note.article.name)})}function ss(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,4,"button",[["class","btn btn-sm"]],null,[[null,"click"]],function(l,n,u){var e=!0;return"click"===n&&(e=!1!==t.Ab(l,1).onClick()&&e),e},null,null)),t.pb(1,16384,null,0,r.l,[r.k,r.a,[8,null],t.E,t.k],{routerLink:[0,"routerLink"]},null),t.Bb(2,4),(l()(),t.qb(3,0,null,null,0,"i",[["class","icon icon-flag"]],null,null,null,null,null)),(l()(),t.Ib(4,null,[" "," "]))],function(l,n){var u=n.component,t=l(n,2,0,"/campaigns",u.campaign.id,"quests",u.note.questId);l(n,1,0,t)},function(l,n){l(n,4,0,n.component.note.quest.name)})}function ps(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,4,"button",[["class","btn btn-sm"]],null,[[null,"click"]],function(l,n,u){var e=!0;return"click"===n&&(e=!1!==t.Ab(l,1).onClick()&&e),e},null,null)),t.pb(1,16384,null,0,r.l,[r.k,r.a,[8,null],t.E,t.k],{routerLink:[0,"routerLink"]},null),t.Bb(2,4),(l()(),t.qb(3,0,null,null,0,"i",[["class","icon icon-location"]],null,null,null,null,null)),(l()(),t.Ib(4,null,[" "," "]))],function(l,n){var u=n.component,t=l(n,2,0,"/campaigns",u.campaign.id,"maps",u.note.mapId);l(n,1,0,t)},function(l,n){l(n,4,0,n.component.note.map.name)})}function bs(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,1,"button",[["class","btn btn-error mr-2"]],null,[[null,"click"]],function(l,n,u){var t=!0,e=l.component;return"click"===n&&(t=!1!==e.delete()&&t),t},null,null)),(l()(),t.Ib(-1,null,[" Delete "]))],null,null)}function ds(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,15,"div",[["modal-footer",""]],null,null,null,null,null)),(l()(),t.qb(1,0,null,null,14,"div",[["class","columns col-gapless mt-2"]],null,null,null,null,null)),(l()(),t.hb(16777216,null,null,1,null,as)),t.pb(3,16384,null,0,p.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null),(l()(),t.qb(4,0,null,null,6,"div",[["class","column col-auto d-flex align-items-center"]],null,null,null,null,null)),(l()(),t.hb(16777216,null,null,1,null,cs)),t.pb(6,16384,null,0,p.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null),(l()(),t.hb(16777216,null,null,1,null,ss)),t.pb(8,16384,null,0,p.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null),(l()(),t.hb(16777216,null,null,1,null,ps)),t.pb(10,16384,null,0,p.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null),(l()(),t.qb(11,0,null,null,4,"div",[["class","column col-auto col-ml-auto"]],null,null,null,null,null)),(l()(),t.hb(16777216,null,null,1,null,bs)),t.pb(13,16384,null,0,p.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null),(l()(),t.qb(14,0,null,null,1,"button",[["class","btn"]],null,[[null,"click"]],function(l,n,u){var e=!0;return"click"===n&&(e=!1!==t.Ab(l.parent,3).close(null)&&e),e},null,null)),(l()(),t.Ib(-1,null,["Close"]))],function(l,n){var u=n.component;l(n,3,0,u.user),l(n,6,0,null!==u.note.article),l(n,8,0,null!==u.note.quest),l(n,10,0,null!==u.note.map),l(n,13,0,u.note&&u.editable)},null)}function fs(l){return t.Kb(0,[t.Gb(402653184,1,{modal:0}),t.Gb(671088640,2,{_noteForm:0}),(l()(),t.qb(2,0,null,null,7,"dd-modal",[],null,null,null,fl.b,fl.a)),t.pb(3,114688,[[1,4],["modal",4]],0,hl.a,[],null,null),(l()(),t.hb(16777216,null,0,1,null,is)),t.pb(5,16384,null,0,p.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null),(l()(),t.hb(16777216,null,1,1,null,rs)),t.pb(7,16384,null,0,p.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null),(l()(),t.hb(16777216,null,2,1,null,ds)),t.pb(9,16384,null,0,p.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null)],function(l,n){var u=n.component;l(n,3,0),l(n,5,0,u.note&&u.editable),l(n,7,0,u.note),l(n,9,0,u.note)},null)}var hs=function(){function l(l,n,u){this.campaignService=l,this.login=n,this.router=u}return l.prototype.ngOnInit=function(){},l.prototype.logOut=function(){this.login.logout(),this.router.navigate(["login"]),this.campaignService.campaign=void 0},Object.defineProperty(l.prototype,"entityPresets",{get:function(){if(this.campaign)return this.campaignService.canEdit?this.campaign.entityPresets:this.campaign.entityPresets.filter(function(l){return l.playerCreatable})},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"loadingCampaign",{get:function(){return this.campaignService.loadingCampaign},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"campaign",{get:function(){return this.campaignService.campaign},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"navEntities",{get:function(){var l=this;return this.campaignService.campaign.entities.filter(function(n){return!n.spawnable&&null===n.spawnedFromId&&n.userId===l.login.id})},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"loggedIn",{get:function(){return this.login.isLoggedIn},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"campaignEditable",{get:function(){return this.campaignService.canEdit},enumerable:!0,configurable:!0}),l}(),gs=t.ob({encapsulation:0,styles:[[".brand[_ngcontent-%COMP%]{display:flex}.brand[_ngcontent-%COMP%] > a[_ngcontent-%COMP%]{width:100%}[_nghost-%COMP%]{height:100%;display:flex;flex-direction:column}"]],data:{}});function ms(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,3,"a",[],[[1,"target",0],[8,"href",4]],[[null,"click"]],function(l,n,u){var e=!0;return"click"===n&&(e=!1!==t.Ab(l,1).onClick(u.button,u.ctrlKey,u.metaKey,u.shiftKey)&&e),e},null,null)),t.pb(1,671744,null,0,r.m,[r.k,r.a,p.h],{routerLink:[0,"routerLink"]},null),t.Bb(2,1),(l()(),t.Ib(-1,null,["Login"]))],function(l,n){var u=l(n,2,0,"login");l(n,1,0,u)},function(l,n){l(n,0,0,t.Ab(n,1).target,t.Ab(n,1).href)})}function vs(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,18,"li",[["class","nav-item"]],null,null,null,null,null)),(l()(),t.qb(1,0,null,null,3,"a",[],[[1,"target",0],[8,"href",4]],[[null,"click"]],function(l,n,u){var e=!0;return"click"===n&&(e=!1!==t.Ab(l,2).onClick(u.button,u.ctrlKey,u.metaKey,u.shiftKey)&&e),e},null,null)),t.pb(2,671744,null,0,r.m,[r.k,r.a,p.h],{routerLink:[0,"routerLink"]},null),t.Bb(3,1),(l()(),t.Ib(-1,null,["Me"])),(l()(),t.qb(5,0,null,null,13,"ul",[["class","nav"]],null,null,null,null,null)),(l()(),t.qb(6,0,null,null,4,"li",[["class","nav-item"]],null,null,null,null,null)),(l()(),t.qb(7,0,null,null,3,"a",[],[[1,"target",0],[8,"href",4]],[[null,"click"]],function(l,n,u){var e=!0;return"click"===n&&(e=!1!==t.Ab(l,8).onClick(u.button,u.ctrlKey,u.metaKey,u.shiftKey)&&e),e},null,null)),t.pb(8,671744,null,0,r.m,[r.k,r.a,p.h],{routerLink:[0,"routerLink"]},null),t.Bb(9,2),(l()(),t.Ib(-1,null,["Campaigns"])),(l()(),t.qb(11,0,null,null,4,"li",[["class","nav-item"]],null,null,null,null,null)),(l()(),t.qb(12,0,null,null,3,"a",[],[[1,"target",0],[8,"href",4]],[[null,"click"]],function(l,n,u){var e=!0;return"click"===n&&(e=!1!==t.Ab(l,13).onClick(u.button,u.ctrlKey,u.metaKey,u.shiftKey)&&e),e},null,null)),t.pb(13,671744,null,0,r.m,[r.k,r.a,p.h],{routerLink:[0,"routerLink"]},null),t.Bb(14,1),(l()(),t.Ib(-1,null,["Account"])),(l()(),t.qb(16,0,null,null,2,"li",[["class","nav-item"]],null,null,null,null,null)),(l()(),t.qb(17,0,null,null,1,"a",[["class","c-hand"]],null,[[null,"click"]],function(l,n,u){var t=!0,e=l.component;return"click"===n&&(t=!1!==e.logOut()&&t),t},null,null)),(l()(),t.Ib(-1,null,["Logout"]))],function(l,n){var u=l(n,3,0,"home");l(n,2,0,u);var t=l(n,9,0,"campaigns","list");l(n,8,0,t);var e=l(n,14,0,"/account");l(n,13,0,e)},function(l,n){l(n,1,0,t.Ab(n,2).target,t.Ab(n,2).href),l(n,7,0,t.Ab(n,8).target,t.Ab(n,8).href),l(n,12,0,t.Ab(n,13).target,t.Ab(n,13).href)})}function ys(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,4,"li",[["class","nav-item"]],null,null,null,null,null)),(l()(),t.qb(1,0,null,null,3,"a",[],[[1,"target",0],[8,"href",4]],[[null,"click"]],function(l,n,u){var e=!0;return"click"===n&&(e=!1!==t.Ab(l,2).onClick(u.button,u.ctrlKey,u.metaKey,u.shiftKey)&&e),e},null,null)),t.pb(2,671744,null,0,r.m,[r.k,r.a,p.h],{routerLink:[0,"routerLink"]},null),t.Bb(3,5),(l()(),t.Ib(4,null,["",""]))],function(l,n){var u=l(n,3,0,"campaigns",n.component.campaign.id,"concepts",n.context.$implicit.id,"manage");l(n,2,0,u)},function(l,n){l(n,1,0,t.Ab(n,2).target,t.Ab(n,2).href),l(n,4,0,n.context.$implicit.pluralForm)})}function Cs(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,4,"li",[["class","nav-item"]],null,null,null,null,null)),(l()(),t.qb(1,0,null,null,3,"a",[],[[1,"target",0],[8,"href",4]],[[null,"click"]],function(l,n,u){var e=!0;return"click"===n&&(e=!1!==t.Ab(l,2).onClick(u.button,u.ctrlKey,u.metaKey,u.shiftKey)&&e),e},null,null)),t.pb(2,671744,null,0,r.m,[r.k,r.a,p.h],{routerLink:[0,"routerLink"]},null),t.Bb(3,3),(l()(),t.Ib(-1,null,["Spawnables"]))],function(l,n){var u=l(n,3,0,"campaigns",n.component.campaign.id,"spawnables");l(n,2,0,u)},function(l,n){l(n,1,0,t.Ab(n,2).target,t.Ab(n,2).href)})}function Is(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,4,"li",[["class","nav-item"]],null,null,null,null,null)),(l()(),t.qb(1,0,null,null,3,"a",[],[[1,"target",0],[8,"href",4]],[[null,"click"]],function(l,n,u){var e=!0;return"click"===n&&(e=!1!==t.Ab(l,2).onClick(u.button,u.ctrlKey,u.metaKey,u.shiftKey)&&e),e},null,null)),t.pb(2,671744,null,0,r.m,[r.k,r.a,p.h],{routerLink:[0,"routerLink"]},null),t.Bb(3,5),(l()(),t.Ib(4,null,["Create ",""]))],function(l,n){var u=l(n,3,0,"campaigns",n.component.campaign.id,"entities",n.context.$implicit.id,"create");l(n,2,0,u)},function(l,n){l(n,1,0,t.Ab(n,2).target,t.Ab(n,2).href),l(n,4,0,n.context.$implicit.name)})}function qs(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,4,"li",[["class","nav-item"]],null,null,null,null,null)),(l()(),t.qb(1,0,null,null,3,"a",[],[[1,"target",0],[8,"href",4]],[[null,"click"]],function(l,n,u){var e=!0;return"click"===n&&(e=!1!==t.Ab(l,2).onClick(u.button,u.ctrlKey,u.metaKey,u.shiftKey)&&e),e},null,null)),t.pb(2,671744,null,0,r.m,[r.k,r.a,p.h],{routerLink:[0,"routerLink"]},null),t.Bb(3,3),(l()(),t.Ib(-1,null,["Settings"]))],function(l,n){var u=l(n,3,0,"campaigns",n.component.campaign.id,"settings");l(n,2,0,u)},function(l,n){l(n,1,0,t.Ab(n,2).target,t.Ab(n,2).href)})}function ks(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,39,"li",[["class","nav-item"]],null,null,null,null,null)),(l()(),t.qb(1,0,null,null,4,"a",[],[[1,"target",0],[8,"href",4]],[[null,"click"]],function(l,n,u){var e=!0;return"click"===n&&(e=!1!==t.Ab(l,2).onClick(u.button,u.ctrlKey,u.metaKey,u.shiftKey)&&e),e},null,null)),t.pb(2,671744,null,0,r.m,[r.k,r.a,p.h],{routerLink:[0,"routerLink"]},null),t.Bb(3,3),(l()(),t.Ib(4,null,[" "," "])),t.Eb(5,2),(l()(),t.qb(6,0,null,null,33,"ul",[["class","nav"]],null,null,null,null,null)),(l()(),t.qb(7,0,null,null,4,"li",[["class","nav-item"]],null,null,null,null,null)),(l()(),t.qb(8,0,null,null,3,"a",[],[[1,"target",0],[8,"href",4]],[[null,"click"]],function(l,n,u){var e=!0;return"click"===n&&(e=!1!==t.Ab(l,9).onClick(u.button,u.ctrlKey,u.metaKey,u.shiftKey)&&e),e},null,null)),t.pb(9,671744,null,0,r.m,[r.k,r.a,p.h],{routerLink:[0,"routerLink"]},null),t.Bb(10,3),(l()(),t.Ib(-1,null,["Articles"])),(l()(),t.qb(12,0,null,null,4,"li",[["class","nav-item"]],null,null,null,null,null)),(l()(),t.qb(13,0,null,null,3,"a",[],[[1,"target",0],[8,"href",4]],[[null,"click"]],function(l,n,u){var e=!0;return"click"===n&&(e=!1!==t.Ab(l,14).onClick(u.button,u.ctrlKey,u.metaKey,u.shiftKey)&&e),e},null,null)),t.pb(14,671744,null,0,r.m,[r.k,r.a,p.h],{routerLink:[0,"routerLink"]},null),t.Bb(15,3),(l()(),t.Ib(-1,null,["Quests"])),(l()(),t.qb(17,0,null,null,4,"li",[["class","nav-item"]],null,null,null,null,null)),(l()(),t.qb(18,0,null,null,3,"a",[],[[1,"target",0],[8,"href",4]],[[null,"click"]],function(l,n,u){var e=!0;return"click"===n&&(e=!1!==t.Ab(l,19).onClick(u.button,u.ctrlKey,u.metaKey,u.shiftKey)&&e),e},null,null)),t.pb(19,671744,null,0,r.m,[r.k,r.a,p.h],{routerLink:[0,"routerLink"]},null),t.Bb(20,3),(l()(),t.Ib(-1,null,["Notebook"])),(l()(),t.qb(22,0,null,null,4,"li",[["class","nav-item"]],null,null,null,null,null)),(l()(),t.qb(23,0,null,null,3,"a",[],[[1,"target",0],[8,"href",4]],[[null,"click"]],function(l,n,u){var e=!0;return"click"===n&&(e=!1!==t.Ab(l,24).onClick(u.button,u.ctrlKey,u.metaKey,u.shiftKey)&&e),e},null,null)),t.pb(24,671744,null,0,r.m,[r.k,r.a,p.h],{routerLink:[0,"routerLink"]},null),t.Bb(25,3),(l()(),t.Ib(-1,null,["Overview"])),(l()(),t.qb(27,0,null,null,4,"li",[["class","nav-item"]],null,null,null,null,null)),(l()(),t.qb(28,0,null,null,3,"a",[],[[1,"target",0],[8,"href",4]],[[null,"click"]],function(l,n,u){var e=!0;return"click"===n&&(e=!1!==t.Ab(l,29).onClick(u.button,u.ctrlKey,u.metaKey,u.shiftKey)&&e),e},null,null)),t.pb(29,671744,null,0,r.m,[r.k,r.a,p.h],{routerLink:[0,"routerLink"]},null),t.Bb(30,3),(l()(),t.Ib(-1,null,["Maps"])),(l()(),t.hb(16777216,null,null,1,null,ys)),t.pb(33,278528,null,0,p.j,[t.P,t.M,t.t],{ngForOf:[0,"ngForOf"]},null),(l()(),t.hb(16777216,null,null,1,null,Cs)),t.pb(35,16384,null,0,p.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null),(l()(),t.hb(16777216,null,null,1,null,Is)),t.pb(37,278528,null,0,p.j,[t.P,t.M,t.t],{ngForOf:[0,"ngForOf"]},null),(l()(),t.hb(16777216,null,null,1,null,qs)),t.pb(39,16384,null,0,p.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null)],function(l,n){var u=n.component,t=l(n,3,0,"campaigns",u.campaign.id,"landing");l(n,2,0,t);var e=l(n,10,0,"campaigns",u.campaign.id,"articles");l(n,9,0,e);var i=l(n,15,0,"campaigns",u.campaign.id,"quests");l(n,14,0,i);var o=l(n,20,0,"campaigns",u.campaign.id,"notes");l(n,19,0,o);var r=l(n,25,0,"campaigns",u.campaign.id,"overview");l(n,24,0,r);var a=l(n,30,0,"campaigns",u.campaign.id,"maps");l(n,29,0,a),l(n,33,0,u.campaign.conceptTypes),l(n,35,0,u.campaignEditable),l(n,37,0,u.entityPresets),l(n,39,0,u.campaignEditable)},function(l,n){var u=n.component;l(n,1,0,t.Ab(n,2).target,t.Ab(n,2).href);var e=t.Jb(n,4,0,l(n,5,0,t.Ab(n.parent,0),u.campaign.name,20));l(n,4,0,e),l(n,8,0,t.Ab(n,9).target,t.Ab(n,9).href),l(n,13,0,t.Ab(n,14).target,t.Ab(n,14).href),l(n,18,0,t.Ab(n,19).target,t.Ab(n,19).href),l(n,23,0,t.Ab(n,24).target,t.Ab(n,24).href),l(n,28,0,t.Ab(n,29).target,t.Ab(n,29).href)})}function As(l){return t.Kb(0,[t.Cb(0,pn.a,[]),(l()(),t.qb(1,0,null,null,4,"div",[["class","brand text-center mt-2"]],null,null,null,null,null)),(l()(),t.qb(2,0,null,null,3,"a",[],[[1,"target",0],[8,"href",4]],[[null,"click"]],function(l,n,u){var e=!0;return"click"===n&&(e=!1!==t.Ab(l,3).onClick(u.button,u.ctrlKey,u.metaKey,u.shiftKey)&&e),e},null,null)),t.pb(3,671744,null,0,r.m,[r.k,r.a,p.h],{routerLink:[0,"routerLink"]},null),t.Bb(4,1),(l()(),t.qb(5,0,null,null,0,"img",[["src","/assets/icons/icon-72x72.png"],["width","32"]],null,null,null,null,null)),(l()(),t.qb(6,0,null,null,12,"ul",[["class","nav ml-2"]],null,null,null,null,null)),(l()(),t.qb(7,0,null,null,2,"li",[["class","nav-item"]],null,null,null,null,null)),(l()(),t.hb(16777216,null,null,1,null,ms)),t.pb(9,16384,null,0,p.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null),(l()(),t.hb(16777216,null,null,1,null,vs)),t.pb(11,16384,null,0,p.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null),(l()(),t.hb(16777216,null,null,1,null,ks)),t.pb(13,16384,null,0,p.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null),(l()(),t.qb(14,0,null,null,4,"li",[["class","nav-item"]],null,null,null,null,null)),(l()(),t.qb(15,0,null,null,3,"a",[],[[1,"target",0],[8,"href",4]],[[null,"click"]],function(l,n,u){var e=!0;return"click"===n&&(e=!1!==t.Ab(l,16).onClick(u.button,u.ctrlKey,u.metaKey,u.shiftKey)&&e),e},null,null)),t.pb(16,671744,null,0,r.m,[r.k,r.a,p.h],{routerLink:[0,"routerLink"]},null),t.Bb(17,1),(l()(),t.Ib(-1,null,["About"]))],function(l,n){var u=n.component,t=l(n,4,0,"home");l(n,3,0,t),l(n,9,0,!u.loggedIn),l(n,11,0,u.loggedIn),l(n,13,0,u.campaign);var e=l(n,17,0,"about");l(n,16,0,e)},function(l,n){l(n,2,0,t.Ab(n,3).target,t.Ab(n,3).href),l(n,15,0,t.Ab(n,16).target,t.Ab(n,16).href)})}var ws=function(l,n,u,t){return new(u||(u=Promise))(function(e,i){function o(l){try{a(t.next(l))}catch(n){i(n)}}function r(l){try{a(t.throw(l))}catch(n){i(n)}}function a(l){l.done?e(l.value):new u(function(n){n(l.value)}).then(o,r)}a((t=t.apply(l,n||[])).next())})},Ps=function(l,n){var u,t,e,i,o={label:0,sent:function(){if(1&e[0])throw e[1];return e[1]},trys:[],ops:[]};return i={next:r(0),throw:r(1),return:r(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function r(i){return function(r){return function(i){if(u)throw new TypeError("Generator is already executing.");for(;o;)try{if(u=1,t&&(e=2&i[0]?t.return:i[0]?t.throw||((e=t.return)&&e.call(t),0):t.next)&&!(e=e.call(t,i[1])).done)return e;switch(t=0,e&&(i=[2&i[0],e.value]),i[0]){case 0:case 1:e=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,t=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!(e=(e=o.trys).length>0&&e[e.length-1])&&(6===i[0]||2===i[0])){o=0;continue}if(3===i[0]&&(!e||i[1]>e[0]&&i[1]<e[3])){o.label=i[1];break}if(6===i[0]&&o.label<e[1]){o.label=e[1],e=i;break}if(e&&o.label<e[2]){o.label=e[2],o.ops.push(i);break}e[2]&&o.ops.pop(),o.trys.pop();continue}i=n.call(l,o)}catch(r){i=[6,r],t=0}finally{u=e=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,r])}}},xs=function(){function l(l,n,u,t){var e=this;this.http=l,this.toast=n,this._loading=!1,u.loginStatus.subscribe(function(l){l===b.b.LOGGED_IN&&e.loadNotifications()}),t.notificationUpdate.subscribe(function(){e.loadNotifications()}),u.isLoggedIn&&this.loadNotifications()}return l.prototype.getNewNotifications=function(l,n){var u=[];if(l)for(var t=function(n){void 0===l.find(function(l){return l.id===n.id})&&u.push(n)},e=0,i=n;e<i.length;e++)t(i[e]);else u=n;return u},l.prototype.makeNotificationToasts=function(l){for(var n=0,u=l;n<u.length;n++){var t=u[n];this.toast.info(t.message)}},l.prototype.loadNotifications=function(){return ws(this,void 0,void 0,function(){var l,n;return Ps(this,function(u){switch(u.label){case 0:this._loading=!0,u.label=1;case 1:return u.trys.push([1,3,,4]),[4,this.getNotifications()];case 2:return l=u.sent(),n=this.getNewNotifications(this._notifications,l),this._notifications=l,this.makeNotificationToasts(n),[3,4];case 3:throw u.sent();case 4:return this._loading=!1,[2]}})})},l.prototype.removeNotification=function(l){return ws(this,void 0,void 0,function(){return Ps(this,function(n){switch(n.label){case 0:this._notifications=this._notifications.filter(function(n){return l!==n}),n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.deleteNotification(l.id)];case 2:return n.sent(),[3,4];case 3:throw n.sent();case 4:return[2]}})})},l.prototype.clearAll=function(){return ws(this,void 0,void 0,function(){return Ps(this,function(l){return this._notifications=[],[2,this.http.delete(e.a.apiURL+"/notifications/clearall").toPromise()]})})},l.prototype.getNotifications=function(){return this.http.get(e.a.apiURL+"/notifications").toPromise()},l.prototype.deleteNotification=function(l){return this.http.delete(e.a.apiURL+"/notifications/"+l).toPromise()},Object.defineProperty(l.prototype,"notifications",{get:function(){return this._notifications},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"loading",{get:function(){return this._loading},enumerable:!0,configurable:!0}),l.ngInjectableDef=t.T({factory:function(){return new l(t.X(P.c),t.X(vn.j),t.X(b.a),t.X(st.b))},token:l,providedIn:"root"}),l}(),Es=function(){function l(l,n){this.notificationService=l,this.router=n,this.done=new t.m}return l.prototype.ngOnInit=function(){},l.prototype.clearNotification=function(l){this.notificationService.removeNotification(l)},l.prototype.viewCampaign=function(l){this.notificationService.removeNotification(l),this.router.navigate(["campaigns",l.campaignId,"landing"]),this.done.emit(!0)},l.prototype.viewMap=function(l){this.notificationService.removeNotification(l),this.router.navigate(["campaigns",l.campaignId,"maps",l.mapId]),this.done.emit(!0)},l.prototype.viewQuest=function(l){this.notificationService.removeNotification(l),this.router.navigate(["campaigns",l.campaignId,"quests",l.questId]),this.done.emit(!0)},l.prototype.clearAll=function(){this.notificationService.clearAll()},Object.defineProperty(l.prototype,"notifications",{get:function(){return this.notificationService.notifications},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"loading",{get:function(){return this.notificationService.loading},enumerable:!0,configurable:!0}),l}(),Ts=t.ob({encapsulation:0,styles:[[".big-space[_ngcontent-%COMP%]{margin-bottom:6rem}"]],data:{}});function Ss(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,0,"div",[["class","loading"]],null,null,null,null,null))],null,null)}function Os(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,6,"div",[["class","empty"]],null,null,null,null,null)),(l()(),t.qb(1,0,null,null,1,"div",[["class","empty-icon"]],null,null,null,null,null)),(l()(),t.qb(2,0,null,null,0,"i",[["class","icon icon-flag icon-4x"]],null,null,null,null,null)),(l()(),t.qb(3,0,null,null,1,"p",[["class","empty-title h5"]],null,null,null,null,null)),(l()(),t.Ib(-1,null,["You have no new notifications"])),(l()(),t.qb(5,0,null,null,1,"p",[["class","empty-subtitle"]],null,null,null,null,null)),(l()(),t.Ib(-1,null,["Don't worry, they'll show up one day :)"]))],null,null)}function Ms(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,3,"li",[["class","menu-item"]],null,[[null,"click"]],function(l,n,u){var t=!0,e=l.component;return"click"===n&&(t=!1!==e.viewCampaign(l.parent.context.$implicit)&&t),t},null,null)),(l()(),t.qb(1,0,null,null,2,"div",[],null,null,null,null,null)),(l()(),t.Ib(2,null,[""," "])),(l()(),t.qb(3,0,null,null,0,"i",[["class","icon icon-arrow-right"]],null,null,null,null,null))],null,function(l,n){l(n,2,0,n.parent.context.$implicit.campaign.name)})}function _s(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,3,"li",[["class","menu-item"]],null,[[null,"click"]],function(l,n,u){var t=!0,e=l.component;return"click"===n&&(t=!1!==e.viewMap(l.parent.context.$implicit)&&t),t},null,null)),(l()(),t.qb(1,0,null,null,2,"div",[],null,null,null,null,null)),(l()(),t.Ib(-1,null,["View Map "])),(l()(),t.qb(3,0,null,null,0,"i",[["class","icon icon-arrow-right"]],null,null,null,null,null))],null,null)}function Ds(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,3,"li",[["class","menu-item"]],null,[[null,"click"]],function(l,n,u){var t=!0,e=l.component;return"click"===n&&(t=!1!==e.viewQuest(l.parent.context.$implicit)&&t),t},null,null)),(l()(),t.qb(1,0,null,null,2,"div",[],null,null,null,null,null)),(l()(),t.Ib(-1,null,["View Quest "])),(l()(),t.qb(3,0,null,null,0,"i",[["class","icon icon-arrow-right"]],null,null,null,null,null))],null,null)}function Ns(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,17,"div",[["class","card p-2 mb-2"]],null,null,null,null,null)),(l()(),t.qb(1,0,null,null,16,"div",[["class","columns col-gapless"]],null,null,null,null,null)),(l()(),t.qb(2,0,null,null,2,"div",[["class","column col-auto"]],null,null,null,null,null)),(l()(),t.qb(3,0,null,null,1,"button",[["aria-label","Close"],["class","btn btn-sm btn-link"]],null,[[null,"click"]],function(l,n,u){var t=!0,e=l.component;return"click"===n&&(t=!1!==e.clearNotification(l.context.$implicit)&&t),t},null,null)),(l()(),t.qb(4,0,null,null,0,"i",[["class","icon icon-cross"]],null,null,null,null,null)),(l()(),t.qb(5,0,null,null,1,"div",[["class","column"]],null,null,null,null,null)),(l()(),t.Ib(6,null,[" "," "])),(l()(),t.qb(7,0,null,null,10,"div",[["class","column col-auto"]],null,null,null,null,null)),(l()(),t.qb(8,0,null,null,9,"div",[["class","dropdown dropdown-right"]],null,null,null,null,null)),(l()(),t.qb(9,0,null,null,1,"button",[["class","btn btn-sm dropdown-toggle"],["tabindex","0"]],null,null,null,null,null)),(l()(),t.qb(10,0,null,null,0,"i",[["class","icon icon-menu"]],null,null,null,null,null)),(l()(),t.qb(11,0,null,null,6,"ul",[["class","menu"]],null,null,null,null,null)),(l()(),t.hb(16777216,null,null,1,null,Ms)),t.pb(13,16384,null,0,p.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null),(l()(),t.hb(16777216,null,null,1,null,_s)),t.pb(15,16384,null,0,p.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null),(l()(),t.hb(16777216,null,null,1,null,Ds)),t.pb(17,16384,null,0,p.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null)],function(l,n){l(n,13,0,null!==n.context.$implicit.campaign&&void 0!==n.context.$implicit.campaign),l(n,15,0,null!==n.context.$implicit.mapId&&void 0!==n.context.$implicit.mapId),l(n,17,0,null!==n.context.$implicit.questId&&void 0!==n.context.$implicit.questId)},function(l,n){l(n,6,0,n.context.$implicit.message)})}function Ls(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,10,"div",[],null,null,null,null,null)),t.pb(1,278528,null,0,p.i,[t.t,t.u,t.k,t.E],{ngClass:[0,"ngClass"]},null),t.Db(2,{"big-space":0}),(l()(),t.qb(3,0,null,null,3,"button",[["class","btn btn-sm mb-2"]],null,[[null,"click"]],function(l,n,u){var t=!0,e=l.component;return"click"===n&&(t=!1!==e.clearAll()&&t),t},null,null)),(l()(),t.qb(4,0,null,null,0,"i",[["class","icon icon-delete"]],null,null,null,null,null)),(l()(),t.qb(5,0,null,null,1,"span",[["class","hide-sm"]],null,null,null,null,null)),(l()(),t.Ib(-1,null,[" Clear All"])),(l()(),t.hb(16777216,null,null,1,null,Os)),t.pb(8,16384,null,0,p.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null),(l()(),t.hb(16777216,null,null,1,null,Ns)),t.pb(10,278528,null,0,p.j,[t.P,t.M,t.t],{ngForOf:[0,"ngForOf"]},null)],function(l,n){var u=n.component,t=l(n,2,0,u.notifications&&u.notifications.length>0);l(n,1,0,t),l(n,8,0,0===u.notifications.length),l(n,10,0,u.notifications)},null)}function Fs(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,4,"div",[],null,null,null,null,null)),(l()(),t.hb(16777216,null,null,1,null,Ss)),t.pb(2,16384,null,0,p.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null),(l()(),t.hb(16777216,null,null,1,null,Ls)),t.pb(4,16384,null,0,p.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null)],function(l,n){var u=n.component;l(n,2,0,u.loading),l(n,4,0,u.notifications)},null)}var Ks=function(){function l(l,n,u,t,e){this.campaignService=l,this.login=n,this.sidebar=u,this.notificationService=t,this.entityService=e}return l.prototype.ngOnInit=function(){},l.prototype.toggle=function(){this.sidebar.toggle()},l.prototype.trackEntity=function(l,n){return n.id},Object.defineProperty(l.prototype,"loadingCampaign",{get:function(){return this.campaignService.loadingCampaign},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"campaign",{get:function(){return this.campaignService.campaign},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"loggedIn",{get:function(){return this.login.isLoggedIn},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"navEntities",{get:function(){var l=this;return this.loggedIn&&this.campaign?this.campaign.entities.filter(function(n){return!n.spawnable&&null===n.spawnedFromId&&n.userId===l.login.id}):null},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"notificationText",{get:function(){return this.notificationService.notifications?this.notificationService.notifications.length:"..."},enumerable:!0,configurable:!0}),l}(),js=t.ob({encapsulation:0,styles:[[".entity-hover[_ngcontent-%COMP%]{transition:all .2s;-webkit-tap-highlight-color:rgba(255,255,255,0);-webkit-tap-highlight-color:transparent}.entity-hover[_ngcontent-%COMP%] > img[_ngcontent-%COMP%]{border:1px solid #6362dc}.entity-hover[_ngcontent-%COMP%]:active, .entity-hover[_ngcontent-%COMP%]:hover{-webkit-transform:scale(1.3);transform:scale(1.3);cursor:pointer}.entity-hover[_ngcontent-%COMP%]:active > img[_ngcontent-%COMP%], .entity-hover[_ngcontent-%COMP%]:hover > img[_ngcontent-%COMP%]{border:2px solid #5755d9}.entity-hover.active[_ngcontent-%COMP%] > img[_ngcontent-%COMP%]{border:2px dashed #5755d9}"]],data:{}});function Gs(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,3,"figure",[["class","avatar mx-1 entity-hover tooltip tooltip-bottom"]],[[1,"data-tooltip",0]],[[null,"click"]],function(l,n,u){var e=!0;return"click"===n&&(e=!1!==t.Ab(l,1).onClick()&&e),e},null,null)),t.pb(1,16384,null,0,r.l,[r.k,r.a,[8,null],t.E,t.k],{routerLink:[0,"routerLink"]},null),t.Bb(2,4),(l()(),t.qb(3,0,null,null,0,"img",[["alt","Avatar"]],[[8,"src",4]],null,null,null,null))],function(l,n){var u=l(n,2,0,"/campaigns",n.component.campaign.id,"entities",n.context.$implicit.id);l(n,1,0,u)},function(l,n){l(n,0,0,n.context.$implicit.name),l(n,3,0,t.sb(1,"https://res.cloudinary.com/dqhk8k6iv/image/upload/t_thumb/",n.context.$implicit.imageId,""))})}function Us(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,5,"section",[["class","navbar-section p-1"]],null,null,null,null,null)),(l()(),t.qb(1,0,null,null,2,"div",[["class","mr-2"]],null,null,null,null,null)),(l()(),t.hb(16777216,null,null,1,null,Gs)),t.pb(3,278528,null,0,p.j,[t.P,t.M,t.t],{ngForOf:[0,"ngForOf"],ngForTrackBy:[1,"ngForTrackBy"]},null),(l()(),t.qb(4,0,null,null,1,"button",[["class","btn badge"]],[[1,"data-badge",0]],[[null,"click"]],function(l,n,u){var e=!0;return"click"===n&&(e=!1!==t.Ab(l.parent,1).open()&&e),e},null,null)),(l()(),t.qb(5,0,null,null,0,"i",[["class","icon icon-flag"]],null,null,null,null,null))],function(l,n){var u=n.component;l(n,3,0,u.navEntities,u.trackEntity)},function(l,n){l(n,4,0,n.component.notificationText)})}function Rs(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,4,"section",[],null,null,null,null,null)),(l()(),t.qb(1,0,null,null,3,"a",[["class","btn btn-link"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],function(l,n,u){var e=!0;return"click"===n&&(e=!1!==t.Ab(l,2).onClick(u.button,u.ctrlKey,u.metaKey,u.shiftKey)&&e),e},null,null)),t.pb(2,671744,null,0,r.m,[r.k,r.a,p.h],{routerLink:[0,"routerLink"]},null),t.Bb(3,1),(l()(),t.Ib(-1,null,["Login"]))],function(l,n){var u=l(n,3,0,"login");l(n,2,0,u)},function(l,n){l(n,1,0,t.Ab(n,2).target,t.Ab(n,2).href)})}function Vs(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,5,"dd-modal",[],null,null,null,fl.b,fl.a)),t.pb(1,114688,[["notifmodal",4]],0,hl.a,[],null,null),(l()(),t.qb(2,0,null,0,1,"h4",[["class","mb-0"],["modal-header",""]],null,null,null,null,null)),(l()(),t.Ib(-1,null,["Notifications"])),(l()(),t.qb(4,0,null,1,1,"dd-notifications",[["modal-body",""]],null,[[null,"done"]],function(l,n,u){var e=!0;return"done"===n&&(e=!1!==t.Ab(l,1).close(null)&&e),e},Fs,Ts)),t.pb(5,114688,null,0,Es,[xs,r.k],null,{done:"done"}),(l()(),t.qb(6,0,null,null,9,"div",[["class","bg-light"]],null,null,null,null,null)),(l()(),t.qb(7,0,null,null,8,"div",[["class","p-2"]],null,null,null,null,null)),(l()(),t.qb(8,0,null,null,7,"header",[["class","navbar"]],null,null,null,null,null)),(l()(),t.qb(9,0,null,null,2,"section",[],null,null,null,null,null)),(l()(),t.qb(10,0,null,null,1,"a",[["class","off-canvas-toggle btn btn-link btn-action"]],null,[[null,"click"]],function(l,n,u){var t=!0,e=l.component;return"click"===n&&(t=!1!==e.toggle()&&t),t},null,null)),(l()(),t.qb(11,0,null,null,0,"i",[["class","icon icon-menu"]],null,null,null,null,null)),(l()(),t.hb(16777216,null,null,1,null,Us)),t.pb(13,16384,null,0,p.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null),(l()(),t.hb(16777216,null,null,1,null,Rs)),t.pb(15,16384,null,0,p.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null)],function(l,n){var u=n.component;l(n,1,0),l(n,5,0),l(n,13,0,u.loggedIn),l(n,15,0,!u.loggedIn)},null)}var Hs=function(){function l(l,n,u){this.route=l,this.router=n,this.hub=u,this.hidden=!1}return l.prototype.ngOnInit=function(){var l=this;this.route.data.subscribe(function(n){l.hidden=!1===n.footer})},Object.defineProperty(l.prototype,"connectionStatus",{get:function(){return this.hub.state},enumerable:!0,configurable:!0}),l}(),$s=t.ob({encapsulation:0,styles:[["[_nghost-%COMP%]{margin-top:auto}.footer-container[_ngcontent-%COMP%]{margin-top:3rem;padding-top:1rem;padding-bottom:3rem}"]],data:{}});function Bs(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,1,"div",[["class","label label-secondary"]],null,null,null,null,null)),(l()(),t.Ib(-1,null,["Not Connected"]))],null,null)}function zs(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,1,"div",[["class","label label-secondary"]],null,null,null,null,null)),(l()(),t.Ib(-1,null,["Connected"]))],null,null)}function Xs(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,1,"div",[["class","label label-secondary"]],null,null,null,null,null)),(l()(),t.Ib(-1,null,["Disconnected"]))],null,null)}function Qs(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,1,"div",[["class","label label-secondary"]],null,null,null,null,null)),(l()(),t.Ib(-1,null,[" Connecting ... "]))],null,null)}function Ys(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,1,"div",[["class","label label-secondary"]],null,null,null,null,null)),(l()(),t.Ib(-1,null,["Authenticating"]))],null,null)}function Ws(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,15,"div",[["class","bg-secondary"]],null,null,null,null,null)),(l()(),t.qb(1,0,null,null,14,"div",[["class","container grid-xl text-center footer-container"]],null,null,null,null,null)),(l()(),t.Ib(-1,null,[" \ud83d\udc4c DD "])),(l()(),t.qb(3,0,null,null,12,"div",[["class","connection-status text-center"]],null,null,null,null,null)),(l()(),t.qb(4,0,null,null,11,"div",[["class","mt-2"]],null,null,null,null,null)),t.pb(5,16384,null,0,p.n,[],{ngSwitch:[0,"ngSwitch"]},null),(l()(),t.hb(16777216,null,null,1,null,Bs)),t.pb(7,278528,null,0,p.o,[t.P,t.M,p.n],{ngSwitchCase:[0,"ngSwitchCase"]},null),(l()(),t.hb(16777216,null,null,1,null,zs)),t.pb(9,278528,null,0,p.o,[t.P,t.M,p.n],{ngSwitchCase:[0,"ngSwitchCase"]},null),(l()(),t.hb(16777216,null,null,1,null,Xs)),t.pb(11,278528,null,0,p.o,[t.P,t.M,p.n],{ngSwitchCase:[0,"ngSwitchCase"]},null),(l()(),t.hb(16777216,null,null,1,null,Qs)),t.pb(13,278528,null,0,p.o,[t.P,t.M,p.n],{ngSwitchCase:[0,"ngSwitchCase"]},null),(l()(),t.hb(16777216,null,null,1,null,Ys)),t.pb(15,278528,null,0,p.o,[t.P,t.M,p.n],{ngSwitchCase:[0,"ngSwitchCase"]},null)],function(l,n){l(n,5,0,n.component.connectionStatus),l(n,7,0,0),l(n,9,0,1),l(n,11,0,2),l(n,13,0,3),l(n,15,0,4)},null)}function Zs(l){return t.Kb(0,[(l()(),t.hb(16777216,null,null,1,null,Ws)),t.pb(1,16384,null,0,p.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null)],function(l,n){l(n,1,0,!n.component.hidden)},null)}var Js=t.ob({encapsulation:0,styles:[[".body-container[_ngcontent-%COMP%]{height:100vh}.content[_ngcontent-%COMP%]{overflow-y:auto;height:100vh}.h-100[_ngcontent-%COMP%]{height:100vh}"]],data:{}});function lp(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,1,"dd-note-editor",[],null,null,null,fs,ns)),t.pb(1,114688,null,0,ls,[Xa.a,f.b,b.a],null,null),(l()(),t.qb(2,0,null,null,13,"div",[["class","body-container off-canvas off-canvas-sidebar-show"]],null,null,null,null,null)),(l()(),t.qb(3,0,null,null,4,"div",[["class","off-canvas-sidebar"],["id","sidebar-id"]],null,null,null,null,null)),t.pb(4,278528,null,0,p.i,[t.t,t.u,t.k,t.E],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),t.Db(5,{active:0}),(l()(),t.qb(6,0,null,null,1,"dd-nav-sidebar",[],null,null,null,As,gs)),t.pb(7,114688,null,0,hs,[f.b,b.a,r.k],null,null),(l()(),t.qb(8,0,null,null,0,"a",[["class","off-canvas-overlay"]],null,[[null,"click"]],function(l,n,u){var t=!0,e=l.component;return"click"===n&&(t=!1!==e.toggle()&&t),t},null,null)),(l()(),t.qb(9,0,null,null,6,"div",[["class","off-canvas-content content d-flex flex-col p-0"],["id","app-content"]],null,null,null,null,null)),(l()(),t.qb(10,0,null,null,1,"dd-nav",[],null,null,null,Vs,js)),t.pb(11,114688,null,0,Ks,[f.b,b.a,a,xs,ct.b],null,null),(l()(),t.qb(12,16777216,null,null,1,"router-outlet",[],null,null,null,null,null)),t.pb(13,212992,null,0,r.o,[r.b,t.P,t.j,[8,null],t.h],null,null),(l()(),t.qb(14,0,null,null,1,"dd-footer",[],null,null,null,Zs,$s)),t.pb(15,114688,null,0,Hs,[r.a,r.k,st.b],null,null)],function(l,n){var u=n.component;l(n,1,0);var t=l(n,5,0,u.sidebarOpen);l(n,4,0,"off-canvas-sidebar",t),l(n,7,0),l(n,11,0),l(n,13,0),l(n,15,0)},null)}function np(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,1,"dd-root",[],null,null,null,lp,Js)),t.pb(1,49152,null,0,c,[a],null,null)],null,null)}var up=t.mb("dd-root",c,np,{},{},[]),tp=u("NSYL"),ep=u("wFw1"),ip=u("ihYY"),op=function(){function l(l){this.login=l}return l.prototype.intercept=function(l,n){var u=this.login.token;if(u){var t=l.clone({headers:l.headers.set("Authorization","Bearer "+u)});return n.handle(t)}return n.handle(l)},l}(),rp=u("xMyE"),ap=u("2WpN"),cp=function(){function l(l,n){this.router=l,this.login=n,this.silenceErrors=!1}return l.prototype.intercept=function(l,n){var u,t=this;return n.handle(l).pipe(Object(rp.a)(function(){},function(l){return u=l}),Object(ap.a)(function(){return n=t,void 0,i=function(){return function(l,n){var u,t,e,i,o={label:0,sent:function(){if(1&e[0])throw e[1];return e[1]},trys:[],ops:[]};return i={next:r(0),throw:r(1),return:r(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function r(i){return function(r){return function(i){if(u)throw new TypeError("Generator is already executing.");for(;o;)try{if(u=1,t&&(e=2&i[0]?t.return:i[0]?t.throw||((e=t.return)&&e.call(t),0):t.next)&&!(e=e.call(t,i[1])).done)return e;switch(t=0,e&&(i=[2&i[0],e.value]),i[0]){case 0:case 1:e=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,t=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!(e=(e=o.trys).length>0&&e[e.length-1])&&(6===i[0]||2===i[0])){o=0;continue}if(3===i[0]&&(!e||i[1]>e[0]&&i[1]<e[3])){o.label=i[1];break}if(6===i[0]&&o.label<e[1]){o.label=e[1],e=i;break}if(e&&o.label<e[2]){o.label=e[2],o.ops.push(i);break}e[2]&&o.ops.pop(),o.trys.pop();continue}i=n.call(l,o)}catch(r){i=[6,r],t=0}finally{u=e=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,r])}}}(this,function(n){switch(n.label){case 0:if(void 0===u)return[3,18];if(this.silenceErrors)return[2];if(!(u instanceof P.f))return[3,16];switch(u.status){case 401:return[3,1];case 404:return[3,4];case 400:return[3,8];case 403:return[3,9];case 0:return[3,11]}return[3,13];case 1:return this.silenceErrors=!0,this.login.logout(),console.log("REDIR TO",this.router.url),[4,dn.a.fire({title:"Session Expired",text:"Your login session has expired, you will be redirected to the login page",type:"warning",confirmButtonText:"Okay"})];case 2:return n.sent(),[4,this.router.navigate(["login"])];case 3:return n.sent(),[3,15];case 4:return-1===l.url.indexOf("/users/")?[3,5]:[3,7];case 5:return[4,dn.a.fire({title:"Not Found",text:"The resource you requested could not be found! Sorry about that.",type:"error",confirmButtonText:"Okay"})];case 6:n.sent(),n.label=7;case 7:return[3,15];case 8:return this.handleBadRequest(u),[3,15];case 9:return[4,dn.a.fire({title:"No Permissions",text:"Looks like you don't have permission for that!",type:"error",confirmButtonText:"Shucks"})];case 10:return n.sent(),[3,15];case 11:return[4,dn.a.fire({title:"Could Not Connect",text:"A connection to the server could not be established. Please make sure you are connected to the internet",type:"error",confirmButtonText:"Okay"})];case 12:return n.sent(),[3,15];case 13:return[4,dn.a.fire({title:"Unknown Error!",text:"An unknown error occured. Maybe this will help: "+u.message,type:"error",confirmButtonText:"Okay"})];case 14:return n.sent(),[3,15];case 15:return[3,17];case 16:console.log("UNKNOWN ERR",u),n.label=17;case 17:return[3,19];case 18:this.silenceErrors=!1,n.label=19;case 19:return[2]}})},new((e=void 0)||(e=Promise))(function(l,u){function t(l){try{r(i.next(l))}catch(n){u(n)}}function o(l){try{r(i.throw(l))}catch(n){u(n)}}function r(n){n.done?l(n.value):new e(function(l){l(n.value)}).then(t,o)}r((i=i.apply(n,[])).next())});var n,e,i}))},l.prototype.handleBadRequest=function(l){var n=l.error,u=n;switch(n){case"already in campaign":u="You are already a member of this campaign!"}dn.a.fire({type:"error",confirmButtonText:"\xaf\\_(\u30c4)_/\xaf",title:"Oh Dear",text:u})},l}(),sp=u("AtLt"),pp=function(){function l(){}return l.prototype.handleError=function(l){console.log("Handling Error",l.name,l.message,l),i.captureException(l.originalError||l)},l}(),bp=function(){function l(l,n){this.login=l,this.router=n}return l.prototype.canActivate=function(l,n){return u=this,void 0,e=function(){return function(l,n){var u,t,e,i,o={label:0,sent:function(){if(1&e[0])throw e[1];return e[1]},trys:[],ops:[]};return i={next:r(0),throw:r(1),return:r(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function r(i){return function(r){return function(i){if(u)throw new TypeError("Generator is already executing.");for(;o;)try{if(u=1,t&&(e=2&i[0]?t.return:i[0]?t.throw||((e=t.return)&&e.call(t),0):t.next)&&!(e=e.call(t,i[1])).done)return e;switch(t=0,e&&(i=[2&i[0],e.value]),i[0]){case 0:case 1:e=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,t=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!(e=(e=o.trys).length>0&&e[e.length-1])&&(6===i[0]||2===i[0])){o=0;continue}if(3===i[0]&&(!e||i[1]>e[0]&&i[1]<e[3])){o.label=i[1];break}if(6===i[0]&&o.label<e[1]){o.label=e[1],e=i;break}if(e&&o.label<e[2]){o.label=e[2],o.ops.push(i);break}e[2]&&o.ops.pop(),o.trys.pop();continue}i=n.call(l,o)}catch(r){i=[6,r],t=0}finally{u=e=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,r])}}}(this,function(l){switch(l.label){case 0:return[4,this.login.isLoggedIn];case 1:return l.sent()?(this.router.navigate(["home"]),[2,!1]):[2,!0]}})},new((t=void 0)||(t=Promise))(function(l,n){function i(l){try{r(e.next(l))}catch(u){n(u)}}function o(l){try{r(e.throw(l))}catch(u){n(u)}}function r(n){n.done?l(n.value):new t(function(l){l(n.value)}).then(i,o)}r((e=e.apply(u,[])).next())});var u,t,e},l.ngInjectableDef=t.T({factory:function(){return new l(t.X(b.a),t.X(r.k))},token:l,providedIn:"root"}),l}(),dp=function(){function l(l,n,u){this.login=l,this.router=n,this.action=u}return l.prototype.canActivate=function(l,n){return u=this,void 0,e=function(){return function(l,n){var u,t,e,i,o={label:0,sent:function(){if(1&e[0])throw e[1];return e[1]},trys:[],ops:[]};return i={next:r(0),throw:r(1),return:r(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function r(i){return function(r){return function(i){if(u)throw new TypeError("Generator is already executing.");for(;o;)try{if(u=1,t&&(e=2&i[0]?t.return:i[0]?t.throw||((e=t.return)&&e.call(t),0):t.next)&&!(e=e.call(t,i[1])).done)return e;switch(t=0,e&&(i=[2&i[0],e.value]),i[0]){case 0:case 1:e=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,t=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!(e=(e=o.trys).length>0&&e[e.length-1])&&(6===i[0]||2===i[0])){o=0;continue}if(3===i[0]&&(!e||i[1]>e[0]&&i[1]<e[3])){o.label=i[1];break}if(6===i[0]&&o.label<e[1]){o.label=e[1],e=i;break}if(e&&o.label<e[2]){o.label=e[2],o.ops.push(i);break}e[2]&&o.ops.pop(),o.trys.pop();continue}i=n.call(l,o)}catch(r){i=[6,r],t=0}finally{u=e=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,r])}}}(this,function(l){return this.login.isLoggedIn?[2,!0]:(this.action.queue.push({type:d.b.REDIRECT,data:{url:n.url}}),this.action.save(),this.router.navigate(["login"]),[2,!1])})},new((t=void 0)||(t=Promise))(function(l,n){function i(l){try{r(e.next(l))}catch(u){n(u)}}function o(l){try{r(e.throw(l))}catch(u){n(u)}}function r(n){n.done?l(n.value):new t(function(l){l(n.value)}).then(i,o)}r((e=e.apply(u,[])).next())});var u,t,e},l.ngInjectableDef=t.T({factory:function(){return new l(t.X(b.a),t.X(r.k),t.X(d.a))},token:l,providedIn:"root"}),l}(),fp=function(){function l(l,n,u){this.actions=l,this.router=n,this.login=u}return l.prototype.canActivate=function(l,n){return u=this,void 0,e=function(){var l,n;return function(l,n){var u,t,e,i,o={label:0,sent:function(){if(1&e[0])throw e[1];return e[1]},trys:[],ops:[]};return i={next:r(0),throw:r(1),return:r(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function r(i){return function(r){return function(i){if(u)throw new TypeError("Generator is already executing.");for(;o;)try{if(u=1,t&&(e=2&i[0]?t.return:i[0]?t.throw||((e=t.return)&&e.call(t),0):t.next)&&!(e=e.call(t,i[1])).done)return e;switch(t=0,e&&(i=[2&i[0],e.value]),i[0]){case 0:case 1:e=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,t=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!(e=(e=o.trys).length>0&&e[e.length-1])&&(6===i[0]||2===i[0])){o=0;continue}if(3===i[0]&&(!e||i[1]>e[0]&&i[1]<e[3])){o.label=i[1];break}if(6===i[0]&&o.label<e[1]){o.label=e[1],e=i;break}if(e&&o.label<e[2]){o.label=e[2],o.ops.push(i);break}e[2]&&o.ops.pop(),o.trys.pop();continue}i=n.call(l,o)}catch(r){i=[6,r],t=0}finally{u=e=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,r])}}}(this,function(u){switch(u.label){case 0:return this.login.isLoggedIn?0!==(l=this.actions.queue).length?[3,1]:[2,!0]:[2,!1];case 1:switch(n=l.pop(),this.actions.save(),n.type){case d.b.ACCOUNT_SETUP:return[3,2];case d.b.INVITE:return[3,3];case d.b.REDIRECT:return[3,4]}return[3,6];case 2:return this.router.navigate(["register"]),[3,6];case 3:return this.router.navigate(["invite",n.data.inviteId]),[3,6];case 4:return[4,this.router.navigateByUrl(n.data.url)];case 5:return u.sent(),[3,6];case 6:return[2,!1]}})},new((t=void 0)||(t=Promise))(function(l,n){function i(l){try{r(e.next(l))}catch(u){n(u)}}function o(l){try{r(e.throw(l))}catch(u){n(u)}}function r(n){n.done?l(n.value):new t(function(l){l(n.value)}).then(i,o)}r((e=e.apply(u,[])).next())});var u,t,e},l.ngInjectableDef=t.T({factory:function(){return new l(t.X(d.a),t.X(r.k),t.X(b.a))},token:l,providedIn:"root"}),l}(),hp=u("8Qhy"),gp={editing:!1},mp={editing:!1},vp={editing:!0},yp={editing:!1},Cp={editing:!0},Ip={editing:!1},qp={editing:!0},kp={editing:!1},Ap={editing:!0},wp={editing:!0},Pp={editing:!1},xp={editing:!0},Ep=(hp.a,hp.a,hp.a,hp.a,hp.a,hp.a,hp.a,function(){return function(){}}()),Tp=u("QMBs"),Sp=u("YeDP"),Op=u("yq7w"),Mp=u("LtSl"),_p=u("tB0E"),Dp=u("u0Zj"),Np=u("8wtL"),Lp=u("EA6F"),Fp=u("wC5x"),Kp=u("reMG"),jp=u("w/34"),Gp=u("Cj6H"),Up=u("zrcO"),Rp=u("HboH"),Vp=t.nb(o,[c],function(l){return t.xb([t.yb(512,t.j,t.cb,[[8,[s.a,w,D,U,X,al,dl,Rn,Qn,xu,Mu,Vt,Be,Si,to,xo,Go,ar,Pr,na,ya,Da,$a,ec,Tc,Sc.a,Oc.a,Mc.a,_c.a,Dc.a,Nc.a,Lc.a,Hc,up]],[3,t.j],t.y]),t.yb(5120,t.v,t.lb,[[3,t.v]]),t.yb(4608,p.m,p.l,[t.v,[2,p.w]]),t.yb(5120,t.c,t.ib,[]),t.yb(5120,t.t,t.jb,[]),t.yb(5120,t.u,t.kb,[]),t.yb(4608,Y.c,Y.l,[p.c]),t.yb(6144,t.H,null,[Y.c]),t.yb(4608,Y.f,Y.h,[]),t.yb(5120,Y.d,function(l,n,u,t,e,i,o,r){return[new Y.j(l,n,u),new Y.o(t),new Y.n(e,i,o,r)]},[p.c,t.A,t.C,p.c,p.c,Y.f,t.db,[2,Y.g]]),t.yb(4608,Y.e,Y.e,[Y.d,t.A]),t.yb(135680,Y.m,Y.m,[p.c]),t.yb(4608,Y.k,Y.k,[Y.e,Y.m]),t.yb(5120,tp.a,ep.e,[]),t.yb(5120,tp.c,ep.f,[]),t.yb(4608,tp.b,ep.d,[p.c,tp.a,tp.c]),t.yb(5120,t.F,ep.g,[Y.k,tp.b,t.A]),t.yb(6144,Y.p,null,[Y.m]),t.yb(4608,t.N,t.N,[t.A]),t.yb(5120,r.a,r.z,[r.k]),t.yb(4608,r.d,r.d,[]),t.yb(6144,r.f,null,[r.d]),t.yb(135680,r.p,r.p,[r.k,t.x,t.i,t.r,r.f]),t.yb(4608,r.e,r.e,[]),t.yb(5120,r.D,r.v,[r.k,p.s,r.g]),t.yb(5120,r.h,r.C,[r.A]),t.yb(5120,t.b,function(l){return[l]},[r.h]),t.yb(4608,R.g,R.g,[]),t.yb(4608,R.C,R.C,[]),t.yb(4608,ip.b,ep.c,[t.F,Y.b]),t.yb(4608,P.i,P.o,[p.c,t.C,P.m]),t.yb(4608,P.p,P.p,[P.i,P.n]),t.yb(5120,P.a,function(l,n,u,t){return[l,new op(n),new cp(u,t)]},[P.p,b.a,r.k,b.a]),t.yb(4608,P.l,P.l,[]),t.yb(6144,P.j,null,[P.l]),t.yb(4608,P.h,P.h,[P.j]),t.yb(6144,P.b,null,[P.h]),t.yb(4608,P.g,P.k,[P.b,t.r]),t.yb(4608,P.c,P.c,[P.g]),t.yb(4608,un.h,un.h,[p.c,t.A,tn.a,un.j]),t.yb(5120,sp.d,sp.h,[sp.e,t.C]),t.yb(4608,sp.b,sp.b,[sp.d]),t.yb(4608,sp.c,sp.c,[sp.d]),t.yb(1073742336,p.b,p.b,[]),t.yb(512,t.l,pp,[]),t.yb(1024,t.z,function(){return[r.u()]},[]),t.yb(512,r.A,r.A,[t.r]),t.yb(256,sp.f,"ngsw-worker.js",[]),t.yb(256,sp.e,{enabled:!0},[]),t.yb(1024,t.d,function(l,n,u,t,e,i){return[Y.q(l),r.B(n),sp.g(u,t,e,i)]},[[2,t.z],r.A,t.r,sp.f,sp.e,t.C]),t.yb(512,t.e,t.e,[[2,t.d]]),t.yb(131584,t.g,t.g,[t.A,t.db,t.r,t.l,t.j,t.e]),t.yb(1073742336,t.f,t.f,[t.g]),t.yb(1073742336,Y.a,Y.a,[[3,Y.a]]),t.yb(1024,r.t,r.x,[[3,r.k]]),t.yb(512,r.r,r.c,[]),t.yb(512,r.b,r.b,[]),t.yb(256,r.g,{},[]),t.yb(1024,p.h,r.w,[p.r,[2,p.a],r.g]),t.yb(512,p.g,p.g,[p.h]),t.yb(512,t.i,t.i,[]),t.yb(512,t.x,t.K,[t.i,[2,t.L]]),t.yb(1024,r.i,function(){return[[{path:"",redirectTo:"home",pathMatch:"full"},{path:"invite/:invite_id",component:m},{path:"about",component:E},{path:"login",component:N,canActivate:[bp]},{path:"register",component:H},{path:"callback",component:N},{path:"account",canActivate:[dp,fp],loadChildren:"./users/users.module#UsersModule"},{path:"campaigns/list",component:J,canActivate:[dp,fp]},{path:"home",component:cl,canActivate:[dp,fp]},{path:"campaigns/create",component:mn,canActivate:[dp,fp],data:gp},{path:"campaigns/:id",component:Vn,canActivate:[dp,fp],children:[{path:"",pathMatch:"full",redirectTo:"landing"},{path:"landing",component:fu},{path:"entities",component:Eu,children:[{path:":ent_id",component:ht},{path:":ent_id/ct/:ct_id",component:me},{path:":ent_type_id/create",component:oi,canDeactivate:[hp.a],data:mp},{path:":ent_type_id/:ent_id/edit",component:oi,canDeactivate:[hp.a],data:vp}]},{path:"notes",loadChildren:"./notes/notes.module#NotesModule"},{path:"concepttypes/create",component:Yi,canDeactivate:[hp.a],data:yp},{path:"concepttypes/:ct_id/edit",component:Yi,canDeactivate:[hp.a],data:Cp},{path:"concepts/:ct_id/manage",component:ao},{path:"concepts/:ct_id/create",component:Oo,data:Ip},{path:"concepts/:ct_id/:c_id/edit",component:Oo,data:qp},{path:"concepts/:ct_id/:c_id/view",component:Uo},{path:"concepts/:ct_id/:c_id/history",component:fr},{path:"entitytypes/create",component:Nr,data:kp},{path:"entitytypes/:ent_id/edit",component:Nr,data:Ap},{path:"spawnables",component:sa},{path:"settings",component:mn,canDeactivate:[hp.a],data:wp},{path:"overview",loadChildren:"./overview/overview.module#OverviewModule"},{path:"quests",component:Ca},{path:"quests/create",component:Fa,canDeactivate:[hp.a],data:Pp},{path:"quests/:q_id/edit",component:Fa,canDeactivate:[hp.a],data:xp},{path:"quests/:q_id",component:Qa},{path:"maps",loadChildren:"./mapping/mapping.module#MappingModule"},{path:"articles",loadChildren:"./articles/articles.module#ArticlesModule"},{path:"members",component:kc}]}],[{path:"",component:Tp.a}],[{path:"",component:Sp.a},{path:"upload",component:Op.a},{path:":m_id",component:Mp.a}],[{path:"",component:_p.a}]]},[]),t.yb(1024,r.k,r.y,[t.g,r.r,r.b,p.g,t.r,t.x,t.i,r.i,r.g,[2,r.q],[2,r.j]]),t.yb(1073742336,r.n,r.n,[[2,r.t],[2,r.k]]),t.yb(1073742336,Ep,Ep,[]),t.yb(1073742336,R.y,R.y,[]),t.yb(1073742336,R.u,R.u,[]),t.yb(1073742336,R.n,R.n,[]),t.yb(1073742336,ep.b,ep.b,[]),t.yb(1073742336,vn.i,vn.i,[]),t.yb(1073742336,Dp.a,Dp.a,[]),t.yb(1073742336,P.e,P.e,[]),t.yb(1073742336,P.d,P.d,[]),t.yb(1073742336,Np.a,Np.a,[]),t.yb(1073742336,un.i,un.i,[]),t.yb(1073742336,Lp.a,Lp.a,[]),t.yb(1073742336,Fp.a,Fp.a,[]),t.yb(1073742336,Kp.a,Kp.a,[]),t.yb(1073742336,jp.a,jp.a,[]),t.yb(1073742336,Gp.a,Gp.a,[]),t.yb(1073742336,Up.a,Up.a,[]),t.yb(1073742336,Rp.a,Rp.a,[]),t.yb(1073742336,sp.a,sp.a,[]),t.yb(1073742336,o,o,[]),t.yb(256,t.bb,!0,[]),t.yb(256,ep.a,"BrowserAnimations",[]),t.yb(256,P.m,"XSRF-TOKEN",[]),t.yb(256,P.n,"X-XSRF-TOKEN",[]),t.yb(256,vn.b,{default:vn.a,config:{positionClass:"toast-top-center"}},[])])});e.a.production&&(Object(t.U)(),i.init({dsn:e.a.sentryDSN,enabled:e.a.production,environment:e.a.production?"Production":"Development",release:"REPLACE_GIT_HASH"})),Y.i().bootstrapModuleFactory(Vp).catch(function(l){return console.error(l)})},zrcO:function(l,n,u){"use strict";u.d(n,"a",function(){return t});var t=function(){return function(){}}()}},[[0,0,9]]]);