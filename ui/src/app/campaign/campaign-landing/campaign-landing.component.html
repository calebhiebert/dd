<dd-modal #invites size="large" *ngIf="editable">
  <div modal-header><h4>Manage Invites</h4></div>
  <div modal-body *ngIf="invites.isOpen">
    <dd-invite-manager></dd-invite-manager>
  </div>
</dd-modal>

<div class="container grid-xl" *ngIf="campaign">
  <!-- Active Session Card -->
  <!-- <div class="card p-2">
    <div class="columns">
      <div class="column">
        <span class="text-large text-bold"
          >There is currently an active session!</span
        >
      </div>
      <div class="column col-auto col-ml-auto">
        <button class="btn btn-primary">
          Join Session <i class="icon icon-arrow-right"></i>
        </button>
      </div>
    </div>
  </div> -->

  <!-- Header -->
  <div class="columns">
    <div class="column col-9 col-lg-8 col-md-12 hide-md">
      <h1>{{ campaign.name }}</h1>
    </div>
    <div class="column col-3 col-lg-4 col-md-12 d-flex">
      <div class="dropdown dropdown-right ml-auto">
        <button class="btn btn-link dropdown-toggle">
          Menu <i class="icon icon-caret"></i>
        </button>

        <ul class="menu">
          <li class="menu-item" *ngFor="let ep of entityPresets">
            <a [routerLink]="['..', 'entities', ep.id, 'create']"
              >Create {{ ep.name }}</a
            >
          </li>
        </ul>
      </div>
    </div>
    <div class="column col-6 col-md-12 show-md">
      <h3>{{ campaign.name }}</h3>
    </div>
  </div>

  <div class="columns">
    <!-- Description -->
    <div class="column col-9 col-xl-8 col-md-12">
      <markdown [data]="campaign.description"></markdown>
    </div>

    <!-- Sidebar -->
    <div class="column col-3 col-md-12 col-xl-4 col-ml-auto">
      <!-- Members Listing -->
      <div class="card">
        <div class="card-header">
          <div class="columns">
            <div class="column"><h5>Members</h5></div>
            <div class="column col-auto col-ml-auto" *ngIf="editable">
              <button class="btn btn-sm" (click)="invites.open()">
                <i class="icon icon-plus"></i> Invite Members
              </button>
            </div>
          </div>
        </div>

        <div class="card-body">
          <div
            class="tile tile-centered mb-2"
            *ngFor="let u of campaign.members"
          >
            <div class="tile-icon">
              <figure class="avatar"><img [src]="u.user.pictureURL" /></figure>
            </div>
            <div class="tile-content">
              <div class="tile-title">{{ u.user.username }}</div>
              <div class="d-flex">
                <span
                  class="chip hoverable-chip"
                  (click)="selectEntity(e)"
                  *ngFor="let e of userEntities(u.user.id)"
                >
                  <img
                    src="https://res.cloudinary.com/dqhk8k6iv/image/upload/t_thumb/{{
                      e.imageId
                    }}"
                    class="avatar avatar-sm"
                  />
                  {{ e.name }}
                </span>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
