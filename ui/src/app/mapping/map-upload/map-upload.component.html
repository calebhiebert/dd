<div class="container grid-xl">
  <h3>Create Map</h3>
  <p>
    A map can be any .png or .jpg image. Maps can be up to 30,000px wide, and
    30,000px tall. The image file can be up to 50mb.
  </p>

  <form
    (ngSubmit)="submit()"
    [formGroup]="formGroup"
    *ngIf="!isUploading && !mapId"
  >
    <div
      class="form-group"
      [ngClass]="{
        'has-error': name.invalid && (name.touched || name.dirty)
      }"
    >
      <input
        class="form-input"
        type="text"
        name="name"
        id="name"
        formControlName="name"
        placeholder="Name"
      />
      <p
        class="form-input-hint"
        *ngIf="
          name.invalid && (name.touched || name.dirty) && name.errors.required
        "
      >
        A name is required
      </p>
    </div>

    <div
      class="form-group"
      [ngClass]="{
        'has-error':
          (fileControl.invalid && (fileControl.touched || fileControl.dirty)) ||
          fileError !== null
      }"
    >
      <label class="form-label" for="map-upload">Choose Image</label>
      <!-- Form Area -->
      <input
        type="file"
        class="form-input"
        accept="image/*"
        name="map-upload"
        (change)="onFileChange($event)"
        formControlName="file"
      />
      <p class="form-input-hint" *ngIf="fileError !== null">
        {{ fileError }}
      </p>
    </div>

    <button class="btn btn-primary mt-2">Upload</button>
  </form>

  <!-- Upload Progress -->
  <div *ngIf="isUploading">
    <h5 *ngIf="uploadProgress < 100">Uploading Map</h5>
    <h5 *ngIf="uploadProgress === 100">Getting Ready</h5>
    <progress
      class="progress"
      [value]="uploadProgress"
      max="100"
      *ngIf="uploadProgress < 100"
    ></progress>
    <progress
      class="progress"
      max="100"
      *ngIf="uploadProgress === 100"
    ></progress>
  </div>

  <div *ngIf="mapId">
    <h5>Your map is processing!</h5>
    <p>
      You will receive a notification when it is ready
    </p>
  </div>
</div>
