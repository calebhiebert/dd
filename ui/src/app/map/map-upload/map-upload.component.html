<div class="container grid-xl">
  <h3>Upload Map</h3>

  <form
    (ngSubmit)="submit()"
    [formGroup]="formGroup"
    *ngIf="!isUploading && !mapId"
  >
    <div
      class="form-group"
      [ngClass]="{
        'has-error': name.invalid && (name.touched || name.dirty)
      }"
    >
      <input
        class="form-input"
        type="text"
        name="name"
        id="name"
        formControlName="name"
        placeholder="Name"
      />
      <p
        class="form-input-hint"
        *ngIf="
          name.invalid && (name.touched || name.dirty) && name.errors.required
        "
      >
        A name is required
      </p>
    </div>

    <div
      class="form-group"
      [ngClass]="{
        'has-error':
          fileControl.invalid && (fileControl.touched || fileControl.dirty)
      }"
    >
      <label class="form-label" for="map-upload">Choose Image</label>
      <!-- Form Area -->
      <input
        type="file"
        class="form-input"
        accept="image/*"
        id="map-upload"
        name="map-upload"
        class="file-input"
        (change)="onFileChange($event)"
        formControlName="file"
      />
    </div>

    <button class="btn btn-primary">Upload Map</button>
  </form>

  <!-- Upload Progress -->
  <div *ngIf="isUploading">
    <h5 *ngIf="uploadProgress < 100">Uploading Map</h5>
    <h5 *ngIf="uploadProgress === 100">Processing Map</h5>
    <progress
      class="progress"
      [value]="uploadProgress"
      max="100"
      *ngIf="uploadProgress < 100"
    ></progress>
    <progress
      class="progress"
      max="100"
      *ngIf="uploadProgress === 100"
    ></progress>
  </div>

  <div *ngIf="mapId">
    <h5>Your map is processing!</h5>
    <p>
      This should not take more than 5 minutes, you will receive a notification
      when it is complete
    </p>
  </div>
</div>
